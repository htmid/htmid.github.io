<!DOCTYPE html>
<html lang="en">
<head>
 <meta name="author" content="Stephan Wolfram - Ridouan Ben Massoud - (Player Bing's Copilot: Credits, Great Sound Weeds from Original Roland GM.sf2 included)  Google Gemini & chat Deepseek Ai. All Rechten Voorbehouden.">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Systemic Accountability & Exploitation Signal</title>
	  <style>
    :root {
  --win95-bg: #008080; /* Classic Windows 95 teal */
  --win95-grey-dark: #808080; /* Windows 95 dark grey */
  --win95-grey-med: #C0C0C0; /* Windows 95 medium grey */
  --win95-grey-light: #E0E0E0; /* Windows 95 light grey */
  --win95-blue: #000080; /* Classic Windows 95 blue */
  --win95-blue-bright: #1084d0; /* Brighter blue for accents */
  --win95-green: #008000; /* Windows 95 green */
  --win95-red: #800000; /* Windows 95 red */
  --win95-yellow: #808000; /* Windows 95 yellow */
  --win95-shadow: rgba(0, 0, 0, 0.35); /* Windows-style shadow */
  --win95-highlight: rgba(255, 255, 255, 0.7); /* Bevel highlight */
}





html, body {
  margin: 0;
  width: 100%;
  height: 100%;
  background: var(--win95-bg);
  background-image: linear-gradient(
    45deg,
    rgba(0, 128, 128, 0.9) 0%,
    rgba(0, 0, 128, 0.9) 100%
  );
  color: #000;
  font-family: "MS Sans Serif", "Microsoft Sans Serif", Tahoma, Geneva, sans-serif;
  font-size: 11px;
  letter-spacing: 0.5px;
}

.wrap {
  display: grid;
  place-items: center;
  position: fixed;
  top: 33%;
  left: 27.5%;
  width: 33%;
  opacity: 0.95;
}

/* Windows 95 style player */
.player {
  position: relative;
  width: min(860px, 92vw);
  background: var(--win95-grey-med);
  border: 0px solid;
  border-color: var(--win95-grey-light) var(--win95-grey-dark) var(--win95-grey-dark) var(--win95-grey-light);
  box-shadow: 
    0px 4px 12px var(--win95-shadow),
    inset 2px 2px 0 var(--win95-highlight),
    inset -2px -2px 0 var(--win95-grey-dark);
  transition: all 0.16s ease;
}

.top {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 14px;
  background: var(--win95-blue);

}

.btn {
  appearance: none;
  border: 0px solid;
  border-color: var(--win95-grey-light) var(--win95-grey-dark) var(--win95-grey-dark) var(--win95-grey-light);
  background: var(--win95-grey-med);
  color: #000;
  font-family: "MS Sans Serif", sans-serif;
  font-size: 11px;
  font-weight: bold;
  padding: 6px 12px;
  cursor: pointer;
  min-width: 80px;
  text-align: center;
  box-shadow: 
    inset 1px 1px 0 var(--win95-highlight),
    inset -1px -1px 0 var(--win95-grey-dark);
  transition: all 0.15s ease;
}

.btn:hover {
  border-color: var(--win95-grey-dark) var(--win95-grey-light) var(--win95-grey-light) var(--win95-grey-dark);
  box-shadow: 
    inset 1px 1px 0 var(--win95-grey-dark),
    inset -1px -1px 0 var(--win95-grey-light);
}

.btn:active {
  border-color: var(--win95-grey-dark) var(--win95-grey-light) var(--win95-grey-light) var(--win95-grey-dark);
  background: var(--win95-grey-dark);
  transform: translate(1px, 1px);
}

.filelabel {
  position: relative;
  overflow: hidden;
}

.filelabel input {
  position: absolute;
  inset: 0;
  opacity: 0;
  cursor: pointer;
}

.spacer {
  flex: 1;
}

.title {
  font-weight: bold;
  color: #FFF;
  font-size: 14px;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
  letter-spacing: 0.5px;
}

.tri {
  width: 0;
  height: 0;
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-bottom: 14px solid #FFF;
  filter: drop-shadow(1px 1px 1px rgba(0, 0, 0, 0.5));
}

.bar {
  position: relative;
  height: 16px;
  margin: 12px 14px 14px;
  background: var(--win95-grey-light);
  border: 0px solid;
  border-color: var(--win95-grey-dark) var(--win95-grey-light) var(--win95-grey-light) var(--win95-grey-dark);
  box-shadow: inset 1px 1px 0 var(--win95-grey-dark), inset -1px -1px 0 var(--win95-grey-light);
}

.prog {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--win95-blue), var(--win95-blue-bright));
  box-shadow: inset 1px 1px 0 rgba(255, 255, 255, 0.4);
}

.hint {
  position: absolute;
  right: 12px;
  top: 12px;
  color: #000;
  background: var(--win95-yellow);
  padding: 4px 8px;
  border: 0px solid;
  border-color: var(--win95-grey-light) var(--win95-grey-dark) var(--win95-grey-dark) var(--win95-grey-light);
  font-size: 10px;
  font-weight: bold;
  display: none;
}

canvas {
  display: block;
  width: 100%;
  height: 22vh;
  background: rgba(0, 0, 0, 0.1);

  border-bottom: 0px solid var(--win95-grey-dark);
}

/* Windows 95 neon frame overlay */
.neon-frame {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: repeating-linear-gradient(
    45deg,
    rgba(0, 128, 128, 0.2) 0px,
    rgba(0, 128, 128, 0.2) 2px,
    rgba(0, 0, 128, 0.2) 2px,
    rgba(0, 0, 128, 0.2) 4px
  );
  opacity: 0;
  transition: opacity 0.25s ease;
  border: 2px solid var(--win95-blue-bright);
  box-shadow: inset 0 0 12px rgba(16, 132, 208, 0.3);
}

.neon-frame.active {
  opacity: 1;
}


#log{
display:none;
}
/* Windows 95 detached parts */
.part {
  position: absolute;
  width: 110px;
  height: 110px;
  border: 2px solid;
  border-color: var(--win95-grey-light) var(--win95-grey-dark) var(--win95-grey-dark) var(--win95-grey-light);
  display: grid;
  place-items: center;
  color: #000;
  font-weight: bold;
  background: var(--win95-grey-med);
  box-shadow: 4px 4px 8px var(--win95-shadow);
  pointer-events: none;
  will-change: transform, border-radius, filter;
}

.partA {
  background: linear-gradient(135deg, var(--win95-blue), var(--win95-blue-bright));
  color: #FFF;
}

.partB {
  background: linear-gradient(135deg, var(--win95-green), #00C000);
  color: #FFF;
}

.partC {
  background: linear-gradient(135deg, var(--win95-red), #C00000);
  color: #FFF;
}

/* 20s: Buttons get Windows 95 retro effects */
.btn.neonize {
  color: #000;
  background: linear-gradient(135deg, var(--win95-blue-bright), var(--win95-blue));
  border-color: var(--win95-blue-bright) var(--win95-blue) var(--win95-blue) var(--win95-blue-bright);
  animation: win95ColorShift 2.2s linear infinite, win95Freestyle 1.6s ease-in-out infinite alternate;
  box-shadow: 
    0 0 8px rgba(16, 132, 208, 0.6),
    inset 1px 1px 0 rgba(255, 255, 255, 0.4),
    inset -1px -1px 0 rgba(0, 0, 128, 0.4);
}

@keyframes win95ColorShift {
  0%   { border-color: var(--win95-blue) var(--win95-blue-bright) var(--win95-blue-bright) var(--win95-blue); }
  25%  { border-color: var(--win95-green) #00C000 #00C000 var(--win95-green); }
  50%  { border-color: var(--win95-red) #C00000 #C00000 var(--win95-red); }
  75%  { border-color: var(--win95-yellow) #C0C000 #C0C000 var(--win95-yellow); }
  100% { border-color: var(--win95-blue) var(--win95-blue-bright) var(--win95-blue-bright) var(--win95-blue); }
}

@keyframes win95Freestyle {
  0%   { transform: translate(0,0) rotate(0deg) scale(1); }
  25%  { transform: translate(-8px, 4px) rotate(-3deg) scale(1.03); }
  50%  { transform: translate(6px, -6px) rotate(4deg) scale(0.98); }
  75%  { transform: translate(-4px, 8px) rotate(-6deg) scale(1.04); }
  100% { transform: translate(8px, -5px) rotate(6deg) scale(0.97); }
}

/* 30s: Player gets Windows 95 system error style */
.player.spin-osc {
  animation: win95Spin 1.4s linear infinite, win95OscillateX 0.34s ease-in-out infinite alternate;
  border-color: var(--win95-red) #C00000 #C00000 var(--win95-red);
  background: linear-gradient(135deg, var(--win95-grey-med), #E0E0E0);
}

@keyframes win95Spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes win95OscillateX {
  from { transform: translateX(-40px); }
  to { transform: translateX(40px); }
}

/* 35s: Windows 95 extreme error state */
.player.neon-round {
  border-radius: 4px; /* Windows 95 rarely used circles */
  background: repeating-linear-gradient(
    45deg,
    var(--win95-blue),
    var(--win95-blue) 4px,
    var(--win95-red) 4px,
    var(--win95-red) 8px
  );
  border-color: var(--win95-blue-bright) var(--win95-blue) var(--win95-blue) var(--win95-blue-bright);
  animation: win95ErrorPulse 1.2s ease-in-out infinite alternate, win95Schizo 0.8s linear infinite;
  box-shadow: 
    0 0 20px rgba(16, 132, 208, 0.5),
    0 0 30px rgba(192, 0, 0, 0.4),
    inset 0 0 20px rgba(255, 255, 255, 0.3);
}

@keyframes win95ErrorPulse {
  0% { 
    border-color: var(--win95-blue) var(--win95-red) var(--win95-red) var(--win95-blue);
    box-shadow: 0 0 15px rgba(16, 132, 208, 0.6), 0 0 25px rgba(192, 0, 0, 0.5);
  }
  100% { 
    border-color: var(--win95-red) var(--win95-blue) var(--win95-blue) var(--win95-red);
    box-shadow: 0 0 25px rgba(192, 0, 0, 0.7), 0 0 35px rgba(16, 132, 208, 0.6);
  }
}

@keyframes win95Schizo {
  0%   { transform: translate(-6px, 0) rotate(-3deg) scale(1.01); }
  20%  { transform: translate(8px, -4px) rotate(6deg) scale(0.99); }
  40%  { transform: translate(-12px, 6px) rotate(-10deg) scale(1.02); }
  60%  { transform: translate(14px, -8px) rotate(12deg) scale(0.98); }
  80%  { transform: translate(-8px, 4px) rotate(-6deg) scale(1.03); }
  100% { transform: translate(10px, -5px) rotate(9deg) scale(0.97); }
}

/* Additional Windows 95 style elements */
.win95-header {
  background: linear-gradient(90deg, var(--win95-blue), #0000A0);
  color: #FFF;
  padding: 6px 10px;
  font-weight: bold;
  border-bottom: 2px solid var(--win95-grey-dark);
}

.win95-window {
  background: var(--win95-grey-med);
  border: 2px solid;
  border-color: var(--win95-grey-light) var(--win95-grey-dark) var(--win95-grey-dark) var(--win95-grey-light);
  margin: 8px;
}

  </style>
    <style>
	 :root {
    --bg: #0b0b12;
    --fg: #e8efff;
  }
  /* Screen centering and 50% sizing */
  body {
    margin: 0;

    color: var(--fg);
    height: 100vh;
    display: grid;
    place-items: center;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    overflow: hidden;
  }
  
  
    #log{
  
   height: 300px;
  overflow-y: scroll;
  scrollbar-width: none;      /* Firefox */
}

#log::-webkit-scrollbar {
  display: none;              /* Chrome, Edge, Safari */
}

textarea {
  display: flex;
  flex-direction: column-reverse;
  overflow-y: scroll;
  scrollbar-width: none;
}

textarea::-webkit-scrollbar {
  display: none;
}


  #world {
    position: relative;
    width: 50vw;
    height: 50vh;
    display: grid;
    grid-template-rows: auto 1fr;
    border: 2px solid rgba(255,255,255,0.12);
    border-radius: 18px;
    box-shadow: 0 0 40px rgba(64,128,255,0.25), inset 0 0 30px rgba(255,255,255,0.05);
    backdrop-filter: blur(6px) saturate(120%);
    overflow: hidden;
  }
  canvas#field {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
  }
  /* Language console */
  #voice {
    z-index: 3;
    padding: 8px 12px;
    border-bottom: 1px solid rgba(255,255,255,0.12);
    background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(0,0,0,0));
    font-size: 12px;
    letter-spacing: 0.2px;
    line-height: 1.35;
    height: 56px;
    overflow: hidden;
  }
  #voice .line { opacity: 0.9; }
  #voice .metrics { opacity: 0.7; font-size: 11px; }
  /* Panel containing the required fieldsets */
  #animatedPanel {
    position: relative;
    z-index: 2;
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 10px;
    height: calc(100% - 56px);
    overflow: auto;
    scrollbar-width: thin;
  }
  a {
text-decoration: none;
}
  
  fieldset {
    position: relative;
    border: 2px solid rgba(255,255,255,0.25);
    border-radius: 12px;
    padding: 8px 12px;
    mix-blend-mode: screen;
    background: rgba(8,12,24,0.3);
    transition: filter 0.6s ease, transform 0.8s cubic-bezier(.2,.7,.1,1), border-color 0.8s ease;
  }
  fieldset[data-affect="energy"] { border-color: rgba(64,192,255,0.45); }
  fieldset[data-affect="love"]   { border-color: rgba(255,64,192,0.45); }
  fieldset[data-affect="flow"]   { border-color: rgba(64,255,128,0.45); }

  legend {
    font-weight: 700;
    font-size: 13px;
    letter-spacing: 0.3px;
    transition: color 0.6s ease;
  }
  .control-row {
    display: flex;
    gap: 8px;
    align-items: center;
    flex-wrap: wrap;
  }

  /* Unique buttons via per-element genome */
  button {
    position: relative;
    cursor: pointer;
    border: none;
    padding: 8px 12px;
    color: #081018;
    font-weight: 600;
    letter-spacing: 0.2px;
    background: #aaf;
    border-radius: 10px;
    transition: transform 300ms ease, filter 300ms ease, background 400ms ease, border-radius 400ms ease;
    outline: 0;
  }
  button.stop { color: #fff; }
  button:disabled { opacity: 0.6; cursor: not-allowed; }

  .status-bar, .tempo-display {
    font-size: 12px;
    opacity: 0.85;
    transition: color 0.6s ease, font-size 0.6s ease;
  }

  .progress-container {
    width: 100%;
    height: 12px;
    background: rgba(255,255,255,0.08);
    border-radius: 6px;
    overflow: hidden;
    border: 1px solid rgba(255,255,255,0.12);
  }
  .progress-bar {
    width: 0%;
    height: 100%;
    background: linear-gradient(90deg, #49ffa8, #38a1ff);
    transition: width 0.2s linear;
  }

  /* Trait badges */
  .traits {
    position: absolute;
    top: 6px; right: 8px;
    font-size: 10px;
    opacity: 0.7;
  }
  .badge { margin-left: 6px; padding: 2px 6px; border-radius: 999px; border: 1px solid rgba(255,255,255,0.25); }
    </style>
	
	<style>
        /* Stijlen van de originele code behouden voor consistentie */
        * {
            box-sizing: border-box;
        }



        #containerg {
            max-width: 600px;
	    background-position:center center;
            backgruond-size:30% 30%;	
            margin: 0 auto;
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5rem;
     
        }

        /* --- Nieuwe en Aangepaste Stijlen voor Checkboxen & Toggle --- */

        .select-wrapper {
            max-width: 300px;
            margin: 0 auto 20px auto;
            border-radius: 8px;
            background-color: white;
			color:black;
            border: 2px solid #ddd;
            position: relative; /* Voor absolute positionering van de dropdown-pijl */
        }

        .dropdown-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 12px 15px;
            font-size: 16px;
			color:black;
            background-color: transparent;
            border: none;
            cursor: pointer;
            text-align: left;
            border-radius: 6px;
            outline: none;
            color: #333;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }

        .dropdown-toggle:focus {
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .arrow {
            transition: transform 0.3s;
            font-size: 18px;
        }

        .select-wrapper.open .arrow {
            transform: rotate(180deg);
        }

        .genre-options {
    
            overflow-y: auto;
            border-top: 1px solid #eee;
            padding: 0;
            margin: 0;
            display: none; /* Standaard verborgen */
        }
        
        .select-wrapper.open .genre-options {
            display: block; /* Toon bij 'open' */
        }

        .genre-option-item {
            display: flex;
            align-items: center;
            padding: 8px 15px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .genre-option-item:hover {
            background-color: #f0f0f0;
        }

        .genre-option-item input[type="checkbox"] {
            margin-right: 10px;
            /* Basis checkbox styling */
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        /* Styling voor geselecteerde tekst in toggle-knop */
        .toggle-text {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex-grow: 1;
        }
        
        /* --- Controls & Counters (Behouden en Aangepast) --- */

        .controlsg {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .icon-btn {
            padding: 8px 12px;
            background-color: #007AFF;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 20px;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .icon-btn:hover {
            background-color: #0056CC;
        }

        .icon-btn.reset {
            background-color: #6c757d;
        }

        .icon-btn.reset:hover {
            background-color: #545b62;
        }

        .counter {
            text-align: center;
            margin-top: 15px;
            color: #666;
            font-size: 14px;
            padding: 8px;
            background: white;
            border-radius: 6px;
            max-width: 300px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* Oude info-box verwijderd, counter is voldoende */

        /* Mobiele aanpassingen */
        @media (max-width: 768px) {
            .dropdown-toggle {
                padding: 15px;
                font-size: 17px;
                min-height: 50px;
            }
            .controlsg {
                gap: 10px;
            }
            .icon-btn {
                width: 50px;
                height: 50px;
                font-size: 22px;
            }
        }
    </style>
	
<style>
  :root {
    --bg: #0b0b12;
    --fg: #e8efff;
    --primary: rgba(64, 128, 255, 0.6);
    --border: rgba(255, 255, 255, 0.12);
    --card-bg: rgba(20, 20, 20, 0.26);
  }
  
  /* --- Globale Styling & Centering --- */
  body {
    margin: 0;
    background: var(--bg);
    color: var(--fg);
    min-height: 100vh;
    max-height: 100vh;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    padding: 10px;
  }
  
  /* --- #weerre container --- */
  #weerre {
    position: relative;
    color: white;
    background-color: var(--card-bg);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    
    /* Responsive sizing */
    width: 70vw; 
    height: min(95vh, 800px);
    max-height: 95vh;
    
    display: grid;
    grid-template-rows: auto 1fr auto;
    grid-template-columns: 1fr;
    gap: 10px;
    border: 2px solid var(--border);
    border-radius: 18px;
    #box-shadow: 0 0 40px rgba(64,128,255,0.25), inset 0 0 30px rgba(50,50,50,0.1);
    #backdrop-filter: blur(16px) grayscale(100%);
    overflow: hidden;
    padding: 15px;
  }
  
  /* Top section with title and genre selector */
  #weerre > table {
    width: 70vw;
    height: auto;
    border-spacing: 0;
    table-layout: fixed;
  }
  
  #weerre > table tr {
    display: flex;
    flex-wrap: wrap;
  }
  
  #weerre > table td {
    padding: 5px;
    vertical-align: top;
    box-sizing: border-box;
  }
  
  #weerre > table td[style*="width:70%"],
  #weerre > table td:first-child {
    flex: 7;
    min-width: 300px;
  }
  
  #weerre > table td[style*="width:50%"],
  #weerre > table td:last-child {
    flex: 5;
    min-width: 250px;
  }
  
  /* Title section */
  #weerre > table td:first-child > div {
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
  }
  
  #weerre > table td:first-child > div > div:first-child {
    font-size: clamp(1.5rem, 4vw, 3rem);
    color: transparent;
    margin-bottom: 5px;
  }
  
  #weerre > table td:first-child > div > div:nth-child(2) {
    font-size: clamp(1.8rem, 5vw, 3.5rem);
    line-height: 1.2;
  }
  
  #weerre > table td:first-child > div > div:nth-child(2) span {
    font-size: clamp(0.5rem, 1.5vw, 1rem);
    vertical-align: middle;
  }
  
  /* Genre selector section */
  #containerg {
    background: rgba(255, 255, 255, 0.05);

	background-size:100% 100%;
    padding: 15px;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    height: 100%;

    overflow-y: auto;
  }
  
  #containerg h1 {
    font-size: clamp(1rem, 2.5vw, 1.3rem);
    margin-bottom: 10px;
  }
  
  .controlsg {
    display: flex;
    gap: 8px;
    margin-bottom: 10px;
  }
  
  .icon-btn {
    padding: 6px 12px;
    border: 1px solid rgba(128, 128, 255, 0.5);
    border-radius: 6px;
    background: transparent;
    color: var(--fg);
    cursor: pointer;
    font-size: clamp(0.9rem, 2vw, 1rem);
  }
  
  .select-wrapper {
    position: relative;
    margin-bottom: 10px;
  }
  
  .dropdown-toggle {
    width: 100%;
    padding: 10px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.3);
    color: var(--fg);
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    font-size: clamp(0.9rem, 2vw, 1rem);
  }
  
  .genre-options {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: rgba(20, 20, 30, 0.95);
	color:white;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    padding: 10px;

    overflow-y: auto;
    z-index: 1000;
  }
  
  .counter {
    text-align: center;
    font-size: clamp(0.8rem, 1.8vw, 0.95rem);
    padding: 8px;
    border-radius: 6px;
    background: rgba(255, 255, 255, 0.05);
  }
  
  /* Log section */
  fieldset[data-affect="love"] {
    background-color: transparent;
    border: none;
    margin: 5px 0;
    padding: 5px;
  }
  
  #aa {
    text-decoration: none;
    color: white;
  }
  
  #enil {
    color: white;
    font-size: clamp(1.5rem, 4vw, 2.5rem);
  }
  
  #log {
    color: white;
    width: 100%;
    height: 60px;
    background-color: transparent;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 8px;
    font-family: inherit;
    font-size: clamp(0.8rem, 1.8vw, 0.95rem);
    resize: none;
    box-sizing: border-box;
  }
  
  /* Copyright section */
  fieldset[data-affect="energy"] {
    text-align: right;
    border: none;
    background-color: transparent;
    width: 100%;
    margin: 5px 0;
    padding: 5px;
  }
  
  fieldset[data-affect="energy"] legend {
    width: 100%;
  }
  
  fieldset[data-affect="energy"] legend > div {
    font-size: clamp(0.7rem, 1.5vw, 0.9rem);
    margin-right: 10px;
    line-height: 1.3;
  }
  
  /* Audio controls */
  #audioState {
    font-size: clamp(1rem, 2.5vw, 1.5rem);
    border: medium;
    background-color: transparent;
    color: rgb(255, 255, 255);
    padding: 8px 12px;
    border-radius: 6px;
    min-height: 44px;
    display: flex;
    align-items: center;
  }
  
  /* Playback controls */
  fieldset[data-affect="flow"] {
    border: none;
    width: 100%;
    background-color: transparent;
    margin-top: auto;
    padding: 5px;
  }
  
  fieldset[data-affect="flow"] > div {
    position: relative;
    width: 100%;
    text-align: center;
  }
  
  /* Playback buttons */
  #playBtn,
  #stopBtn,
  #pauseBtn {
    padding: clamp(8px, 1.5vw, 12px) clamp(12px, 2.5vw, 16px);
    border: none;
    border-radius: 8px;
    background: rgba(64, 128, 255, 0.2);
    color: var(--fg);
    font-size: clamp(1rem, 2.5vw, 1.5rem);
    cursor: pointer;
    margin: 0 5px;
    min-height: 44px;
    min-width: 44px;
  }
  
  #stopBtn {
    background: rgba(255, 64, 64, 0.2);
  }
  
  #playBtn:hover,
  #stopBtn:hover,
  #pauseBtn:hover {
    background: var(--primary);
  }
  
  #stopBtn:hover {
    background: rgba(255, 64, 64, 0.4);
  }
  
  /* Status displays */
  #playbackStats,
  #tempoDisplay {
    display: inline-block;
    margin: 0 10px;
    padding: 8px 12px;
    border-radius: 6px;
    background: rgba(255, 255, 255, 0.1);
    font-size: clamp(0.8rem, 1.8vw, 0.95rem);
    min-height: 44px;
    display: none;
    vertical-align: middle;
  }
  
  /* Progress bar */
  .progress-container {
    width: 100%;
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    overflow: hidden;
    margin: 10px 0;
  }
  
  .progress-bar {
    width: 0%;
    height: 100%;
    background: linear-gradient(90deg, #49ffa8, #38a1ff);
    transition: width 0.2s linear;
  }
  
  /* Canvas */
  canvas#eld {
    display: none;
  }
  
  canvas#bgCanvas {
    display: none;
  }
  
  /* Hidden iframe */
  iframe[src^="data:text/html"] {
    position: fixed;
    top: -1%;
    left: -1%;
    height: 102%;
    width: 102%;
    border: none;
    pointer-events: none;
    z-index: -1;
  }
  
  /* Control rows */
  .control-row {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 5px;
    align-items: center;
    justify-content: flex-end;
  }
  
  /* --- MEDIA QUERY for small screens --- */
  @media (max-width: 768px) {
    #weerre {
      width: 98%;
      height: 98vh;
      padding: 10px;
    }
    
    #weerre > table tr {
      flex-direction: column;
    }
    
    #weerre > table td {
      width: 100%;
      min-width: 100%;
    }
    
    #containerg {
     height: 100%;
    }
    
    .control-row {
      justify-content: center;
    }
    
    #initAudioBtn,
    .status-bar,
    .tempo-display {
      width: 100%;
      text-align: center;
      margin-top: 5px;
    }
    
    #playBtn,
    #stopBtn,
    #pauseBtn {
      flex: 1;
      min-width: 80px;
    }
  }
  
  @media (max-width: 480px) {
    #weerre {
      padding: 8px;
      border-radius: 12px;
    }
    
    #weerre > table td:first-child > div > div:first-child {
      font-size: 1.2rem;
    }
    
    #weerre > table td:first-child > div > div:nth-child(2) {
      font-size: 1.4rem;
    }
    
    #containerg h1 {
      font-size: 1rem;
    }
    
    .controlsg {
      justify-content: center;
    }
    
    .icon-btn {
      padding: 5px 10px;
      font-size: 0.9rem;
    }
    
    #playBtn,
    #stopBtn,
    #pauseBtn {
      font-size: 1.2rem;
      padding: 8px;
      min-width: 70px;
    }
    
    #audioState {
      font-size: 1rem;
      padding: 6px 10px;
    }
  }
  
  /* Very small screens */
  @media (max-height: 600px) {
    #weerre {
      height: 96vh;
    }
    
    #log {
      height: 40px;
    }
    
    #containerg {
      height: 100%;
    }
  }
 
  
</style>

<style>
    #scrl {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-color: #050505;
        height: 100vh;
        font-family: 'Courier New', Courier, monospace;
    }

    .ticker-container {
        position: fixed;
        width: 100%;
        white-space: nowrap;
        overflow: hidden;
        background: rgba(20, 0, 0, 0.2);

;
        display: flex;
        align-items: center;
    }

    .top { top: 1%; height: 60px; }
    .bottom { bottom: 4%; height: 60px; }

    .ticker-content {
        display: inline-block;
        will-change: transform;
        backface-visibility: hidden;
    }

    .ticker-item {
        display: inline-block;
        font-size: 2.3rem;
        font-weight: bold;
        color: #212121;
        text-transform: uppercase;
        padding: 0 5px;
    }

    .bottom .ticker-item {
        color: #232323;
        font-size: 2.0rem;
    }

    .ticker-separator {
        display: inline-block;
        color: #550000;
        font-size: 1.5rem;
        padding: 0 4px;
        opacity: 0.5;
display:none;
    }

    .overlay {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
        background-size: 100% 4px;
        z-index: 10;
        pointer-events: none;
    }
</style>

	<script>
	
	
	   let SF2_BASE64_DATA ="";  	
const top256Genres = [
  "Classical", "Jazz", "Blues", "Rock", "Metal", "Pop", "Hip Hop", "R&B", "Soul", "Funk", "Disco", "Reggae", "Country", "Electronic", "Folk", "Punk", "Indie", "Alternative",
  "Ambient", "Techno", "House",  "Dubstep", "Drum and Bass", "Trap", "Lo-fi", "Synth-pop", "Electropop", "New Wave", "Post-punk", "Grunge", "Emo", 
  "Progressive Rock", "Psychedelic Rock", "Hard Rock", "Heavy Metal", "Death Metal", "Black Metal", "Thrash Metal", "Power Metal", "Gothic Metal", "Industrial", "Hardcore",
  "Ska", "Reggaeton", "Salsa", "Bachata", "Merengue", "Cumbia", "Tango", "Bossa Nova", "Samba", "Afrobeat", "Highlife", "K-pop", "J-pop", "C-pop", "Mandopop",
  "Cantopop", "Britpop", "Europop", "Schlager", "Chanson", "Fado", "Bluegrass", "Zydeco", "Cajun", "Gospel", "Spirituals", "Hymns", "New Age", "World", "Latin",
  "Celtic", "Klezmer", "Gregorian", "Opera", "Orchestral", "Film Score", "Video Game", "Musical Theatre", "Broadway", "Easy Listening", "Lounge", "Chill-out", "Downtempo",
  "Trip Hop", "Breakbeat", "Big Beat", "Acid Jazz", "Nu Jazz", "Smooth Jazz", "Bebop", "Swing", "Ragtime", "Boogie-woogie", "Dixieland", "Barbershop", "A Cappella",
  "Instrumental", "Acoustic", "Experimental", "Noise", "Drone", "Glitch", "Plunderphonics", "Vaporwave", "Synthwave", "Future Funk", "Hyperpop", "Cloud Rap", "Mumble Rap",
  "Gangsta Rap", "Conscious Hip Hop", "Jazz Rap", "Boom Bap", "G-funk", "Crunk", "Trap Metal", "Pop Punk", "Hardcore Punk", "Post-hardcore", "Pop Rock", "Soft Rock",
  "Classic Rock", "Southern Rock", "Heartland Rock", "Arena Rock", "Surf Rock", "Rockabilly", "Psychobilly", "Gothabilly", "Stoner Rock", "Desert Rock", "Post-rock",
  "Math Rock", "Slowcore", "Sadcore", "Screamo", "Metalcore", "Deathcore", "Grindcore", "Powerviolence", "Crust Punk", "Anarcho-punk", "Oi!", "Ska Punk", "Pop Country",
  "Outlaw Country", "Alt-country", "Americana", "Bluegrass", "Honky-tonk", "Western Swing", "Tejano", "Norteño", "Banda", "Mariachi", "Ranchera", "Corrido", "Nueva Canción",
  "Bolero", "Rumba", "Son", "Cha-cha-chá", "Mambo", "Salsa Romántica", "Timba", "Merengue Urbano", "Bachata Moderna", "Reggaeton", "Dembow", "Dancehall", "Dub", "Lovers Rock",
  "Roots Reggae", "Ska", "Rocksteady", "Dub Poetry", "Ragga", "Dance-pop", "Teen Pop", "Bubblegum Pop", "Power Pop",  "Indie Pop", "Dream Pop", "Twee Pop",
  "Chamber Pop", "Sophisti-pop", "New Romantic", "Synth-pop", "Electroclash",  "Eurodisco", "Hi-NRG", "Italo Dance", "Eurobeat", "Hands Up", "Happy Hardcore",
    "Jumpstyle", "Frenchcore", "Speedcore", "Breakcore", "Jungle", "Drumfunk", "Liquid Funk", "Neurofunk", "Ambient House", "Deep House", "Tech House",
  "French House", "Italo House", "Acid House", "Chicago House", "Garage House", "2-step", "Future Garage", "Bassline", "Grime", "Dubstep",
  "Brostep", "Riddim", "Future Bass", "Tropical House", "Melodic House", "Afro House", "Amapiano", "Gqom", "Kuduro", "Benga", "Highlife", "Afrobeat", "Afro-pop", "Rai",
  "Gnawa", "Mbalax", "Soukous", "Zouk", "Kizomba", "Bachata", "Vallenato", "Forró", "Axé", "Frevo", "Pagode", "MPB", "Tropicália", "Fado", "Sevdah", "Manele",
  "Chalga", "Rebetiko", "Laïkó", "Tarantella",  "Schlager", "Volksmusik", "Yodeling", "Folk Metal", "Viking Metal", "Pirate Metal", "Symphonic Metal", "Neoclassical Metal",
  "Nu Metal", "Alternative Metal", "Rap Metal", "Funk Metal", "Glam Metal", "Hair Metal", "Doom Metal", "Sludge Metal", "Stoner Metal", "Drone Metal", "Avant-garde Metal",
  "Progressive Metal", "Djent", "Mathcore", "Nintendocore", "Kawaii Metal", "Visual Kei", "J-rock", "J-metal", "City Pop", "Shibuya-kei", "Anime Song", "Enka", "Kayōkyoku",
  "Trot", "Pansori", "Gugak", "K-pop", "K-hip Hop", "K-rock", "K-indie", "Canto-pop", "Mando-pop", "Taiwanese Pop", "Hong Kong English Pop", "Chinese Rock", "Chinese Hip Hop",
  "Bollywood", "Filmi", "Carnatic", "Hindustani", "Qawwali", "Bhangra", "Dangdut", "Keroncong", "Gamelan", "Luk Thung", "Mor Lam", "Pinoy Pop", "Pinoy Rock", "Original Pilipino",
  "V-pop", "Arabesque", "Arabic Pop", "Khaleeji", "Turbo-folk", "Chalga", "Manele", "Tallava", "Sevdah", "Rebetiko", "Fado",  "Tango", "Milonga", "Candombe", "Murga"
];


var  globalSeed = Math.floor(Math.random() * 999999999);

/**
 * wielsieder() - The primary entropy generator for the music engine.
 * It uses a PRNG (Pseudo-Random Number Generator) to ensure that 
 * while results are 'random', they can be influenced by a specific seed.
 */
function wielsieder() {
    // We use the mulberry32 algorithm logic found in your snippet 
    // to transform the seed into a float between 0 and 1.
    globalSeed |= 0; 
    globalSeed = (globalSeed + 0x6D2B79F5) | 0;
    let t = Math.imul(globalSeed ^ (globalSeed >>> 15), 1 | globalSeed);
    t = (t + Math.imul(t ^ (t >>> 7), 61 | t)) ^ t;
    return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
}

/**
 * setWielsiederSeed(newSeed)
 * Allows the system to reset the entropy based on a new track or time.
 */
function setWielsiederSeed(newSeed) {
    globalSeed = typeof newSeed === 'string' ? hashStringToInt(newSeed) : newSeed;
}


	</script>
	</head>
<body style='background-size:100% 100%'>

<div onclick="flo()" id="fl" style="width:80vw;z-index:20000000;backgrouend-color:blue;">
<script>

var currentCounters=0;
( function(window){
"use strict";

function WebAudioMidiCore(target) {
  Object.assign(target,{
    properties:{
      masterVol:  {type:Number, value:0.5, observer:"setMasterVol"},
      reverbLev:  {type:Number, value:0.3, observer:"setReverbLev"},
      quality:    {type:Number, value:1, observer:"setQuality"},
      debug:      {type:Number, value:0},
      src:        {type:String, value:null, observer:"loadMIDIfromSrc"},
      loop:       {type:Number, value:0},
      internalcontext: {type:Number, value:1},
      tsmode:     {type:Number, value:0},
      voices:     {type:Number, value:64},
      useReverb:  {type:Number, value:1},
      /*@@gui*/
      width:      {type:String, value:"300px", observer:"layout"},
      height:     {type:String, value:"32px", observer:"layout"},
      graph:      {type:Number, value:1},
      disabledrop:{type:Number, value:0},
      perfmon:    {type:Number, value:0},
      /*@@guiEND*/
    },
    /*@@gui*/
    layout:(()=>{
      this.canvas.style.width=this.width;
      this.canvas.style.height=this.height;
    }),
    /*@@guiEND*/
    program:[
// 1-8 : Piano
      {name:"Acoustic Grand Piano"},    {name:"Bright Acoustic Piano"},
      {name:"Electric Grand Piano"},    {name:"Honky-tonk Piano"},
      {name:"Electric Piano 1"},        {name:"Electric Piano 2"},
      {name:"Harpsichord"},             {name:"Clavi"},
/* 9-16 : Chromatic Perc*/
      {name:"Celesta"},                 {name:"Glockenspiel"},
      {name:"Music Box"},               {name:"Vibraphone"},
      {name:"Marimba"},                 {name:"Xylophone"},
      {name:"Tubular Bells"},           {name:"Dulcimer"},
/* 17-24 : Organ */
      {name:"Drawbar Organ"},           {name:"Percussive Organ"},
      {name:"Rock Organ"},              {name:"Church Organ"},
      {name:"Reed Organ"},              {name:"Accordion"},
      {name:"Harmonica"},               {name:"Tango Accordion"},
/* 25-32 : Guitar */
      {name:"Acoustic Guitar (nylon)"}, {name:"Acoustic Guitar (steel)"},
      {name:"Electric Guitar (jazz)"},  {name:"Electric Guitar (clean)"},
      {name:"Electric Guitar (muted)"}, {name:"Overdriven Guitar"},
      {name:"Distortion Guitar"},       {name:"Guitar harmonics"},
/* 33-40 : Bass */
      {name:"Acoustic Bass"},           {name:"Electric Bass (finger)"},
      {name:"Electric Bass (pick)"},    {name:"Fretless Bass"},
      {name:"Slap Bass 1"},             {name:"Slap Bass 2"},
      {name:"Synth Bass 1"},            {name:"Synth Bass 2"},
/* 41-48 : Strings */
      {name:"Violin"},                  {name:"Viola"},
      {name:"Cello"},                   {name:"Contrabass"},
      {name:"Tremolo Strings"},         {name:"Pizzicato Strings"},
      {name:"Orchestral Harp"},         {name:"Timpani"},
/* 49-56 : Ensamble */
      {name:"String Ensemble 1"},       {name:"String Ensemble 2"},
      {name:"SynthStrings 1"},          {name:"SynthStrings 2"},
      {name:"Choir Aahs"},              {name:"Voice Oohs"},
      {name:"Synth Voice"},             {name:"Orchestra Hit"},
/* 57-64 : Brass */
      {name:"Trumpet"},                 {name:"Trombone"},
      {name:"Tuba"},                    {name:"Muted Trumpet"},
      {name:"French Horn"},             {name:"Brass Section"},
      {name:"SynthBrass 1"},            {name:"SynthBrass 2"},
/* 65-72 : Reed */
      {name:"Soprano Sax"},             {name:"Alto Sax"},
      {name:"Tenor Sax"},               {name:"Baritone Sax"},
      {name:"Oboe"},                    {name:"English Horn"},
      {name:"Bassoon"},                 {name:"Clarinet"},
/* 73-80 : Pipe */
      {name:"Piccolo"},                 {name:"Flute"},
      {name:"Recorder"},                {name:"Pan Flute"},
      {name:"Blown Bottle"},            {name:"Shakuhachi"},
      {name:"Whistle"},                 {name:"Ocarina"},
/* 81-88 : SynthLead */
      {name:"Lead 1 (square)"},         {name:"Lead 2 (sawtooth)"},
      {name:"Lead 3 (calliope)"},       {name:"Lead 4 (chiff)"},
      {name:"Lead 5 (charang)"},        {name:"Lead 6 (voice)"},
      {name:"Lead 7 (fifths)"},         {name:"Lead 8 (bass + lead)"},
/* 89-96 : SynthPad */
      {name:"Pad 1 (new age)"},         {name:"Pad 2 (warm)"},
      {name:"Pad 3 (polysynth)"},       {name:"Pad 4 (choir)"},
      {name:"Pad 5 (bowed)"},           {name:"Pad 6 (metallic)"},
      {name:"Pad 7 (halo)"},            {name:"Pad 8 (sweep)"},
/* 97-104 : FX */
      {name:"FX 1 (rain)"},             {name:"FX 2 (soundtrack)"},
      {name:"FX 3 (crystal)"},          {name:"FX 4 (atmosphere)"},
      {name:"FX 5 (brightness)"},       {name:"FX 6 (goblins)"},
      {name:"FX 7 (echoes)"},           {name:"FX 8 (sci-fi)"},
/* 105-112 : Ethnic */
      {name:"Sitar"},                   {name:"Banjo"},
      {name:"Shamisen"},                {name:"Koto"},
      {name:"Kalimba"},                 {name:"Bag pipe"},
      {name:"Fiddle"},                  {name:"Shanai"},
/* 113-120 : Percussive */
      {name:"Tinkle Bell"},             {name:"Agogo"},
      {name:"Steel Drums"},             {name:"Woodblock"},
      {name:"Taiko Drum"},              {name:"Melodic Tom"},
      {name:"Synth Drum"},              {name:"Reverse Cymbal"},
/* 121-128 : SE */
      {name:"Guitar Fret Noise"},       {name:"Breath Noise"},
      {name:"Seashore"},                {name:"Bird Tweet"},
      {name:"Telephone Ring"},          {name:"Helicopter"},
      {name:"Applause"},                {name:"Gunshot"},
    ],
    drummap:[
// 35
      {name:"Acoustic Bass Drum"},  {name:"Bass Drum 1"},      {name:"Side Stick"},     {name:"Acoustic Snare"},
      {name:"Hand Clap"},           {name:"Electric Snare"},   {name:"Low Floor Tom"},  {name:"Closed Hi Hat"},
      {name:"High Floor Tom"},      {name:"Pedal Hi-Hat"},     {name:"Low Tom"},        {name:"Open Hi-Hat"},
      {name:"Low-Mid Tom"},         {name:"Hi-Mid Tom"},       {name:"Crash Cymbal 1"}, {name:"High Tom"},
      {name:"Ride Cymbal 1"},       {name:"Chinese Cymbal"},   {name:"Ride Bell"},      {name:"Tambourine"},
      {name:"Splash Cymbal"},       {name:"Cowbell"},          {name:"Crash Cymbal 2"}, {name:"Vibraslap"},
      {name:"Ride Cymbal 2"},       {name:"Hi Bongo"},         {name:"Low Bongo"},      {name:"Mute Hi Conga"},
      {name:"Open Hi Conga"},       {name:"Low Conga"},        {name:"High Timbale"},   {name:"Low Timbale"},
      {name:"High Agogo"},          {name:"Low Agogo"},        {name:"Cabasa"},         {name:"Maracas"},
      {name:"Short Whistle"},       {name:"Long Whistle"},     {name:"Short Guiro"},    {name:"Long Guiro"},
      {name:"Claves"},              {name:"Hi Wood Block"},    {name:"Low Wood Block"}, {name:"Mute Cuica"},
      {name:"Open Cuica"},          {name:"Mute Triangle"},    {name:"Open Triangle"},
    ],
    program1:[
      // 1-8 : Piano
      [{w:"sine",v:.4,d:0.7,r:0.1,},{w:"triangle",v:3,d:0.7,s:0.1,g:1,a:0.01,k:-1.2}],
      [{w:"triangle",v:0.4,d:0.7,r:0.1,},{w:"triangle",v:4,t:3,d:0.4,s:0.1,g:1,k:-1,a:0.01,}],
      [{w:"sine",d:0.7,r:0.1,},{w:"triangle",v:4,f:2,d:0.5,s:0.5,g:1,k:-1}],
      [{w:"sine",d:0.7,v:0.2,},{w:"triangle",v:4,t:3,f:2,d:0.3,g:1,k:-1,a:0.01,s:0.5,}],
      [{w:"sine",v:0.35,d:0.7,},{w:"sine",v:3,t:7,f:1,d:1,s:1,g:1,k:-.7}],
      [{w:"sine",v:0.35,d:0.7,},{w:"sine",v:8,t:7,f:1,d:0.5,s:1,g:1,k:-.7}],
      [{w:"sawtooth",v:0.34,d:2,},{w:"sine",v:8,f:0.1,d:2,s:1,r:2,g:1,}],
      [{w:"triangle",v:0.34,d:1.5,},{w:"square",v:6,f:0.1,d:1.5,s:0.5,r:2,g:1,}],
      /* 9-16 : Chromatic Perc*/
      [{w:"sine",d:0.3,r:0.3,},{w:"sine",v:7,t:11,d:0.03,g:1,}],
      [{w:"sine",d:0.3,r:0.3,},{w:"sine",v:11,t:6,d:0.2,s:0.4,g:1,}],
      [{w:"sine",v:0.2,d:0.3,r:0.3,},{w:"sine",v:11,t:5,d:0.1,s:0.4,g:1,}],
      [{w:"sine",v:0.2,d:0.6,r:0.6,},{w:"triangle",v:11,t:5,f:1,s:0.5,g:1,}],
      [{w:"sine",v:0.3,d:0.2,r:0.2,},{w:"sine",v:6,t:5,d:0.02,g:1,}],
      [{w:"sine",v:0.3,d:0.2,r:0.2,},{w:"sine",v:7,t:11,d:0.03,g:1,}],
      [{w:"sine",v:0.2,d:1,r:1,},{w:"sine",v:11,t:3.5,d:1,r:1,g:1,}],
      [{w:"triangle",v:0.2,d:0.5,r:0.2,},{w:"sine",v:6,t:2.5,d:0.2,s:0.1,r:0.2,g:1,}],
      /* 17-24 : Organ */
      [{w:"w9999",v:0.22,s:0.9,},{w:"w9999",v:0.22,t:2,f:2,s:0.9,}],
      [{w:"w9999",v:0.2,s:1,},{w:"sine",v:11,t:6,f:2,s:0.1,g:1,h:0.006,r:0.002,d:0.002,},{w:"w9999",v:0.2,t:2,f:1,h:0,s:1,}],
      [{w:"w9999",v:0.2,d:0.1,s:0.9,},{w:"w9999",v:0.25,t:4,f:2,s:0.5,}],
      [{w:"w9999",v:0.3,a:0.04,s:0.9,},{w:"w9999",v:0.2,t:8,f:2,a:0.04,s:0.9,}],
      [{w:"sine",v:0.2,a:0.02,d:0.05,s:1,},{w:"sine",v:6,t:3,f:1,a:0.02,d:0.05,s:1,g:1,}],
      [{w:"triangle",v:0.2,a:0.02,d:0.05,s:0.8,},{w:"square",v:7,t:3,f:1,d:0.05,s:1.5,g:1,}],
      [{w:"square",v:0.2,a:0.02,d:0.2,s:0.5,},{w:"square",v:1,d:0.03,s:2,g:1,}],
      [{w:"square",v:0.2,a:0.02,d:0.1,s:0.8,},{w:"square",v:1,a:0.3,d:0.1,s:2,g:1,}],
      /* 25-32 : Guitar */
      [{w:"sine",v:0.3,d:0.5,f:1,},{w:"triangle",v:5,t:3,f:-1,d:1,s:0.1,g:1,}],
      [{w:"sine",v:0.4,d:0.6,f:1,},{w:"triangle",v:12,t:3,d:0.6,s:0.1,g:1,f:-1,}],
      [{w:"triangle",v:0.3,d:1,f:1,},{w:"triangle",v:6,f:-1,d:0.4,s:0.5,g:1,t:3,}],
      [{w:"sine",v:0.3,d:1,f:-1,},{w:"triangle",v:11,f:1,d:0.4,s:0.5,g:1,t:3,}],
      [{w:"sine",v:0.4,d:0.1,r:0.01},{w:"sine",v:7,g:1,}],
      [{w:"triangle",v:0.4,d:1,f:1,},{w:"square",v:4,f:-1,d:1,s:0.7,g:1,}],//[{w:"triangle",v:0.35,d:1,f:1,},{w:"square",v:7,f:-1,d:0.3,s:0.5,g:1,}],
      [{w:"triangle",v:0.35,d:1,f:1,},{w:"square",v:7,f:-1,d:0.3,s:0.5,g:1,}],//[{w:"triangle",v:0.4,d:1,f:1,},{w:"square",v:4,f:-1,d:1,s:0.7,g:1,}],//[{w:"triangle",v:0.4,d:1,},{w:"square",v:4,f:2,d:1,s:0.7,g:1,}],
      [{w:"sine",v:0.2,t:1.5,a:0.005,h:0.2,d:0.6,},{w:"sine",v:11,t:5,f:2,d:1,s:0.5,g:1,}],
      /* 33-40 : Bass */
      [{w:"sine",d:0.3,},{w:"sine",v:4,t:3,d:1,s:1,g:1,}],
      [{w:"sine",d:0.3,},{w:"sine",v:4,t:3,d:1,s:1,g:1,}],
      [{w:"w9999",d:0.3,v:0.7,s:0.5,},{w:"sawtooth",v:1.2,d:0.02,s:0.5,g:1,h:0,r:0.02,}],
      [{w:"sine",d:0.3,},{w:"sine",v:4,t:3,d:1,s:1,g:1,}],
      [{w:"triangle",v:0.3,t:2,d:1,},{w:"triangle",v:15,t:2.5,d:0.04,s:0.1,g:1,}],
      [{w:"triangle",v:0.3,t:2,d:1,},{w:"triangle",v:15,t:2.5,d:0.04,s:0.1,g:1,}],
      [{w:"triangle",d:0.7,},{w:"square",v:0.4,t:0.5,f:1,d:0.2,s:10,g:1,}],
      [{w:"triangle",d:0.7,},{w:"square",v:0.4,t:0.5,f:1,d:0.2,s:10,g:1,}],
      /* 41-48 : Strings */
      [{w:"sawtooth",v:0.4,a:0.1,d:11,},{w:"sine",v:5,d:11,s:0.2,g:1,}],
      [{w:"sawtooth",v:0.4,a:0.1,d:11,},{w:"sine",v:5,d:11,s:0.2,g:1,}],
      [{w:"sawtooth",v:0.4,a:0.1,d:11,},{w:"sine",v:5,t:0.5,d:11,s:0.2,g:1,}],
      [{w:"sawtooth",v:0.4,a:0.1,d:11,},{w:"sine",v:5,t:0.5,d:11,s:0.2,g:1,}],
      [{w:"sine",v:0.4,a:0.1,d:11,},{w:"sine",v:6,f:2.5,d:0.05,s:1.1,g:1,}],
      [{w:"sine",v:0.3,d:0.1,r:0.1,},{w:"square",v:4,t:3,d:1,s:0.2,g:1,}],
      [{w:"sine",v:0.3,d:0.5,r:0.5,},{w:"sine",v:7,t:2,f:2,d:1,r:1,g:1,}],
      [{w:"triangle",v:0.6,h:0.03,d:0.3,r:0.3,t:0.5,},{w:"n0",v:8,t:1.5,d:0.08,r:0.08,g:1,}],
      /* 49-56 : Ensamble */
      [{w:"sawtooth",v:0.3,a:0.03,s:0.5,},{w:"sawtooth",v:0.2,t:2,f:2,d:1,s:2,}],
      [{w:"sawtooth",v:0.3,f:-2,a:0.03,s:0.5,},{w:"sawtooth",v:0.2,t:2,f:2,d:1,s:2,}],
      [{w:"sawtooth",v:0.2,a:0.02,s:1,},{w:"sawtooth",v:0.2,t:2,f:2,a:1,d:1,s:1,}],
      [{w:"sawtooth",v:0.2,a:0.02,s:1,},{w:"sawtooth",v:0.2,f:2,a:0.02,d:1,s:1,}],
      [{w:"triangle",v:0.3,a:0.03,s:1,},{w:"sine",v:3,t:5,f:1,d:1,s:1,g:1,}],
      [{w:"sine",v:0.4,a:0.03,s:0.9,},{w:"sine",v:1,t:2,f:3,d:0.03,s:0.2,g:1,}],
      [{w:"triangle",v:0.6,a:0.05,s:0.5,},{w:"sine",v:1,f:0.8,d:0.2,s:0.2,g:1,}],
      [{w:"square",v:0.15,a:0.01,d:0.2,r:0.2,t:0.5,h:0.03,},{w:"square",v:4,f:0.5,d:0.2,r:11,a:0.01,g:1,h:0.02,},{w:"square",v:0.15,t:4,f:1,a:0.02,d:0.15,r:0.15,h:0.03,},{g:3,w:"square",v:4,f:-0.5,a:0.01,h:0.02,d:0.15,r:11,}],
      /* 57-64 : Brass */
      [{w:"square",v:0.2,a:0.01,d:1,s:0.6,r:0.04,},{w:"sine",v:1,d:0.1,s:4,g:1,}],
      [{w:"square",v:0.2,a:0.02,d:1,s:0.5,r:0.08,},{w:"sine",v:1,d:0.1,s:4,g:1,}],
      [{w:"square",v:0.2,a:0.04,d:1,s:0.4,r:0.08,},{w:"sine",v:1,d:0.1,s:4,g:1,}],
      [{w:"square",v:0.15,a:0.04,s:1,},{w:"sine",v:2,d:0.1,g:1,}],
      [{w:"square",v:0.2,a:0.02,d:1,s:0.5,r:0.08,},{w:"sine",v:1,d:0.1,s:4,g:1,}],
      [{w:"square",v:0.2,a:0.02,d:1,s:0.6,r:0.08,},{w:"sine",v:1,f:0.2,d:0.1,s:4,g:1,}],
      [{w:"square",v:0.2,a:0.02,d:0.5,s:0.7,r:0.08,},{w:"sine",v:1,d:0.1,s:4,g:1,}],
      [{w:"square",v:0.2,a:0.02,d:1,s:0.5,r:0.08,},{w:"sine",v:1,d:0.1,s:4,g:1,}],
      /* 65-72 : Reed */
      [{w:"square",v:0.2,a:0.02,d:2,s:0.6,},{w:"sine",v:2,d:1,g:1,}],
      [{w:"square",v:0.2,a:0.02,d:2,s:0.6,},{w:"sine",v:2,d:1,g:1,}],
      [{w:"square",v:0.2,a:0.02,d:1,s:0.6,},{w:"sine",v:2,d:1,g:1,}],
      [{w:"square",v:0.2,a:0.02,d:1,s:0.6,},{w:"sine",v:2,d:1,g:1,}],
      [{w:"sine",v:0.4,a:0.02,d:0.7,s:0.5,},{w:"square",v:5,t:2,d:0.2,s:0.5,g:1,}],
      [{w:"sine",v:0.3,a:0.05,d:0.2,s:0.8,},{w:"sawtooth",v:6,f:0.1,d:0.1,s:0.3,g:1,}],
      [{w:"sine",v:0.3,a:0.03,d:0.2,s:0.4,},{w:"square",v:7,f:0.2,d:1,s:0.1,g:1,}],
      [{w:"square",v:0.2,a:0.05,d:0.1,s:0.8,},{w:"square",v:4,d:0.1,s:1.1,g:1,}],
      /* 73-80 : Pipe */
      [{w:"sine",a:0.02,d:2,},{w:"sine",v:6,t:2,d:0.04,g:1,}],
      [{w:"sine",v:0.7,a:0.03,d:0.4,s:0.4,},{w:"sine",v:4,t:2,f:0.2,d:0.4,g:1,}],
      [{w:"sine",v:0.7,a:0.02,d:0.4,s:0.6,},{w:"sine",v:3,t:2,d:0,s:1,g:1,}],
      [{w:"sine",v:0.4,a:0.06,d:0.3,s:0.3,},{w:"sine",v:7,t:2,d:0.2,s:0.2,g:1,}],
      [{w:"sine",a:0.02,d:0.3,s:0.3,},{w:"sawtooth",v:3,t:2,d:0.3,g:1,}],
      [{w:"sine",v:0.4,a:0.02,d:2,s:0.1,},{w:"sawtooth",v:8,t:2,f:1,d:0.5,g:1,}],
      [{w:"sine",v:0.7,a:0.03,d:0.5,s:0.3,},{w:"sine",v:0.003,t:0,f:4,d:0.1,s:0.002,g:1,}],
      [{w:"sine",v:0.7,a:0.02,d:2,},{w:"sine",v:1,t:2,f:1,d:0.02,g:1,}],
      /* 81-88 : SynthLead */
      [{w:"square",v:0.3,d:1,s:0.5,},{w:"square",v:1,f:0.2,d:1,s:0.5,g:1,}],
      [{w:"sawtooth",v:0.3,d:2,s:0.5,},{w:"square",v:2,f:0.1,s:0.5,g:1,}],
      [{w:"triangle",v:0.5,a:0.05,d:2,s:0.6,},{w:"sine",v:4,t:2,g:1,}],
      [{w:"triangle",v:0.3,a:0.01,d:2,s:0.3,},{w:"sine",v:22,t:2,f:1,d:0.03,s:0.2,g:1,}],
      [{w:"sawtooth",v:0.3,d:1,s:0.5,},{w:"sine",v:11,t:11,a:0.2,d:0.05,s:0.3,g:1,}],
      [{w:"sine",v:0.3,a:0.06,d:1,s:0.5,},{w:"sine",v:7,f:1,d:1,s:0.2,g:1,}],
      [{w:"sawtooth",v:0.3,a:0.03,d:0.7,s:0.3,r:0.2,},{w:"sawtooth",v:0.3,t:0.75,d:0.7,a:0.1,s:0.3,r:0.2,}],
      [{w:"triangle",v:0.3,a:0.01,d:0.7,s:0.5,},{w:"square",v:5,t:0.5,d:0.7,s:0.5,g:1,}],
      /* 89-96 : SynthPad */
      [{w:"triangle",v:0.3,a:0.02,d:0.3,s:0.3,r:0.3,},{w:"square",v:3,t:4,f:1,a:0.02,d:0.1,s:1,g:1,},{w:"triangle",v:0.08,t:0.5,a:0.1,h:0,d:0.1,s:0.5,r:0.1,b:0,c:0,}],
      [{w:"sine",v:0.3,a:0.05,d:1,s:0.7,r:0.3,},{w:"sine",v:2,f:1,d:0.3,s:1,g:1,}],
      [{w:"square",v:0.3,a:0.03,d:0.5,s:0.3,r:0.1,},{w:"square",v:4,f:1,a:0.03,d:0.1,g:1,}],
      [{w:"triangle",v:0.3,a:0.08,d:1,s:0.3,r:0.1,},{w:"square",v:2,f:1,d:0.3,s:0.3,g:1,t:4,a:0.08,}],
      [{w:"sine",v:0.3,a:0.05,d:1,s:0.3,r:0.1,},{w:"sine",v:0.1,t:2.001,f:1,d:1,s:50,g:1,}],
      [{w:"triangle",v:0.3,a:0.03,d:0.7,s:0.3,r:0.2,},{w:"sine",v:12,t:7,f:1,d:0.5,s:1.7,g:1,}],
      [{w:"sine",v:0.3,a:0.05,d:1,s:0.3,r:0.1,},{w:"sawtooth",v:22,t:6,d:0.06,s:0.3,g:1,}],
      [{w:"triangle",v:0.3,a:0.05,d:11,r:0.3,},{w:"triangle",v:1,d:1,s:8,g:1,}],
      /* 97-104 : FX */
      [{w:"sawtooth",v:0.3,d:4,s:0.8,r:0.1,},{w:"square",v:1,t:2,f:8,a:1,d:1,s:1,r:0.1,g:1,}],
      [{w:"triangle",v:0.3,d:1,s:0.5,t:0.8,a:0.2,p:1.25,q:0.2,},{w:"sawtooth",v:0.2,a:0.2,d:0.3,s:1,t:1.2,p:1.25,q:0.2,}],
      [{w:"sine",v:0.3,d:1,s:0.3,},{w:"square",v:22,t:11,d:0.5,s:0.1,g:1,}],
      [{w:"sawtooth",v:0.3,a:0.04,d:1,s:0.8,r:0.1,},{w:"square",v:1,t:0.5,d:1,s:2,g:1,}],
      [{w:"triangle",v:0.3,d:1,s:0.3,},{w:"sine",v:22,t:6,d:0.6,s:0.05,g:1,}],
      [{w:"sine",v:0.6,a:0.1,d:0.05,s:0.4,},{w:"sine",v:5,t:5,f:1,d:0.05,s:0.3,g:1,}],
      [{w:"sine",a:0.1,d:0.05,s:0.4,v:0.8,},{w:"sine",v:5,t:5,f:1,d:0.05,s:0.3,g:1,}],
      [{w:"square",v:0.3,a:0.1,d:0.1,s:0.4,},{w:"square",v:1,f:1,d:0.3,s:0.1,g:1,}],
      /* 105-112 : Ethnic */
      [{w:"sawtooth",v:0.3,d:0.5,r:0.5,},{w:"sawtooth",v:11,t:5,d:0.05,g:1,}],
      [{w:"square",v:0.3,d:0.2,r:0.2,},{w:"square",v:7,t:3,d:0.05,g:1,}],
      [{w:"triangle",d:0.2,r:0.2,},{w:"square",v:9,t:3,d:0.1,r:0.1,g:1,}],
      [{w:"triangle",d:0.3,r:0.3,},{w:"square",v:6,t:3,d:1,r:1,g:1,}],
      [{w:"triangle",v:0.4,d:0.2,r:0.2,},{w:"square",v:22,t:12,d:0.1,r:0.1,g:1,}],
      [{w:"sine",v:0.25,a:0.02,d:0.05,s:0.8,},{w:"square",v:1,t:2,d:0.03,s:11,g:1,}],
      [{w:"sine",v:0.3,a:0.05,d:11,},{w:"square",v:7,t:3,f:1,s:0.7,g:1,}],
      [{w:"square",v:0.3,a:0.05,d:0.1,s:0.8,},{w:"square",v:4,d:0.1,s:1.1,g:1,}],
      /* 113-120 : Percussive */
      [{w:"sine",v:0.4,d:0.3,r:0.3,},{w:"sine",v:7,t:9,d:0.1,r:0.1,g:1,}],
      [{w:"sine",v:0.7,d:0.1,r:0.1,},{w:"sine",v:22,t:7,d:0.05,g:1,}],
      [{w:"sine",v:0.6,d:0.15,r:0.15,},{w:"square",v:11,t:3.2,d:0.1,r:0.1,g:1,}],
      [{w:"sine",v:0.8,d:0.07,r:0.07,},{w:"square",v:11,t:7,r:0.01,g:1,}],
      [{w:"triangle",v:0.7,t:0.5,d:0.2,r:0.2,p:0.95,},{w:"n0",v:9,g:1,d:0.2,r:0.2,}],
      [{w:"sine",v:0.7,d:0.1,r:0.1,p:0.9,},{w:"square",v:14,t:2,d:0.005,r:0.005,g:1,}],
      [{w:"square",d:0.15,r:0.15,p:0.5,},{w:"square",v:4,t:5,d:0.001,r:0.001,g:1,}],
      [{w:"n1",v:0.3,a:1,s:1,d:0.15,r:0,t:0.5,}],
      /* 121-128 : SE */
      [{w:"sine",t:12.5,d:0,r:0,p:0.5,v:0.3,h:0.2,q:0.5,},{g:1,w:"sine",v:1,t:2,d:0,r:0,s:1,},{g:1,w:"n0",v:0.2,t:2,a:0.6,h:0,d:0.1,r:0.1,b:0,c:0,}],
      [{w:"n0",v:0.2,a:0.05,h:0.02,d:0.02,r:0.02,}],
      [{w:"n0",v:0.4,a:1,d:1,t:0.25,}],
      [{w:"sine",v:0.3,a:0.1,d:1,s:0.5,},{w:"sine",v:4,t:0,f:1.5,d:1,s:1,r:0.1,g:1,},{g:1,w:"sine",v:4,t:0,f:2,a:0.6,h:0,d:0.1,s:1,r:0.1,b:0,c:0,}],
      [{w:"square",v:0.3,t:0.25,d:11,s:1,},{w:"square",v:12,t:0,f:8,d:1,s:1,r:11,g:1,}],
      [{w:"n0",v:0.4,t:0.5,a:1,d:11,s:1,r:0.5,},{w:"square",v:1,t:0,f:14,d:1,s:1,r:11,g:1,}],
      [{w:"sine",t:0,f:1221,a:0.2,d:1,r:0.25,s:1,},{g:1,w:"n0",v:3,t:0.5,d:1,s:1,r:1,}],
      [{w:"sine",d:0.4,r:0.4,p:0.1,t:2.5,v:1,},{w:"n0",v:12,t:2,d:1,r:1,g:1,}],
    ],
    program0:[
// 1-8 : Piano
      [{w:"triangle",v:.5,d:.7}],                   [{w:"triangle",v:.5,d:.7}],
      [{w:"triangle",v:.5,d:.7}],                   [{w:"triangle",v:.5,d:.7}],
      [{w:"triangle",v:.5,d:.7}],                   [{w:"triangle",v:.5,d:.7}],
      [{w:"sawtooth",v:.3,d:.7}],                   [{w:"sawtooth",v:.3,d:.7}],
/* 9-16 : Chromatic Perc*/
      [{w:"sine",v:.5,d:.3,r:.3}],                  [{w:"triangle",v:.5,d:.3,r:.3}],
      [{w:"square",v:.2,d:.3,r:.3}],                [{w:"square",v:.2,d:.3,r:.3}],
      [{w:"sine",v:.5,d:.1,r:.1}],                  [{w:"sine",v:.5,d:.1,r:.1}],
      [{w:"square",v:.2,d:1,r:1}],                  [{w:"sawtooth",v:.3,d:.7,r:.7}],
/* 17-24 : Organ */
      [{w:"sine",v:0.5,a:0.01,s:1}],                [{w:"sine",v:0.7,d:0.02,s:0.7}],
      [{w:"square",v:.2,s:1}],                      [{w:"triangle",v:.5,a:.01,s:1}],
      [{w:"square",v:.2,a:.02,s:1}],                [{w:"square",v:0.2,a:0.02,s:1}],
      [{w:"square",v:0.2,a:0.02,s:1}],              [{w:"square",v:.2,a:.05,s:1}],
/* 25-32 : Guitar */
      [{w:"triangle",v:.5,d:.5}],                   [{w:"square",v:.2,d:.6}],
      [{w:"square",v:.2,d:.6}],                     [{w:"triangle",v:.8,d:.6}],
      [{w:"triangle",v:.4,d:.05}],                  [{w:"square",v:.2,d:1}],
      [{w:"square",v:.2,d:1}],                      [{w:"sine",v:.4,d:.6}],
/* 33-40 : Bass */
      [{w:"triangle",v:.7,d:.4}],                   [{w:"triangle",v:.7,d:.7}],
      [{w:"triangle",v:.7,d:.7}],                   [{w:"triangle",v:.7,d:.7}],
      [{w:"square",v:.3,d:.2}],                     [{w:"square",v:.3,d:.2}],
      [{w:"square",v:.3,d:.1,s:.2}],                [{w:"sawtooth",v:.4,d:.1,s:.2}],
/* 41-48 : Strings */
      [{w:"sawtooth",v:.2,a:.02,s:1}],              [{w:"sawtooth",v:.2,a:.02,s:1}],
      [{w:"sawtooth",v:.2,a:.02,s:1}],              [{w:"sawtooth",v:.2,a:.02,s:1}],
      [{w:"sawtooth",v:.2,a:.02,s:1}],              [{w:"sawtooth",v:.3,d:.1}],
      [{w:"sawtooth",v:.3,d:.5,r:.5}],              [{w:"triangle",v:.6,d:.1,r:.1,h:0.03,p:0.8}],
/* 49-56 : Ensamble */
      [{w:"sawtooth",v:.2,a:.02,s:1}],              [{w:"sawtooth",v:.2,a:.02,s:1}],
      [{w:"sawtooth",v:.2,a:.02,s:1}],              [{w:"sawtooth",v:.2,a:.02,s:1}],
      [{w:"triangle",v:.3,a:.03,s:1}],              [{w:"sine",v:.3,a:.03,s:1}],
      [{w:"triangle",v:.3,a:.05,s:1}],              [{w:"sawtooth",v:.5,a:.01,d:.1}],
/* 57-64 : Brass */
      [{w:"square",v:.3,a:.05,d:.2,s:.6}],          [{w:"square",v:.3,a:.05,d:.2,s:.6}],
      [{w:"square",v:.3,a:.05,d:.2,s:.6}],          [{w:"square",v:0.2,a:.05,d:0.01,s:1}],
      [{w:"square",v:.3,a:.05,s:1}],                [{w:"square",v:.3,s:.7}],
      [{w:"square",v:.3,s:.7}],                     [{w:"square",v:.3,s:.7}],
/* 65-72 : Reed */
      [{w:"square",v:.3,a:.02,d:2}],                [{w:"square",v:.3,a:.02,d:2}],
      [{w:"square",v:.3,a:.03,d:2}],                [{w:"square",v:.3,a:.04,d:2}],
      [{w:"square",v:.3,a:.02,d:2}],                [{w:"square",v:.3,a:.05,d:2}],
      [{w:"square",v:.3,a:.03,d:2}],                [{w:"square",v:.3,a:.03,d:2}],
/* 73-80 : Pipe */
      [{w:"sine",v:.7,a:.02,d:2}],                  [{w:"sine",v:.7,a:.02,d:2}],
      [{w:"sine",v:.7,a:.02,d:2}],                  [{w:"sine",v:.7,a:.02,d:2}],
      [{w:"sine",v:.7,a:.02,d:2}],                  [{w:"sine",v:.7,a:.02,d:2}],
      [{w:"sine",v:.7,a:.02,d:2}],                  [{w:"sine",v:.7,a:.02,d:2}],
/* 81-88 : SynthLead */
      [{w:"square",v:.3,s:.7}],                     [{w:"sawtooth",v:.4,s:.7}],
      [{w:"triangle",v:.5,s:.7}],                   [{w:"sawtooth",v:.4,s:.7}],
      [{w:"sawtooth",v:.4,d:12}],                   [{w:"sine",v:.4,a:.06,d:12}],
      [{w:"sawtooth",v:.4,d:12}],                   [{w:"sawtooth",v:.4,d:12}],
/* 89-96 : SynthPad */
      [{w:"sawtooth",v:.3,d:12}],                   [{w:"triangle",v:.5,d:12}],
      [{w:"square",v:.3,d:12}],                     [{w:"triangle",v:.5,a:.08,d:11}],
      [{w:"sawtooth",v:.5,a:.05,d:11}],             [{w:"sawtooth",v:.5,d:11}],
      [{w:"triangle",v:.5,d:11}],                   [{w:"triangle",v:.5,d:11}],
/* 97-104 : FX */
      [{w:"triangle",v:.5,d:11}],                   [{w:"triangle",v:.5,d:11}],
      [{w:"square",v:.3,d:11}],                     [{w:"sawtooth",v:0.5,a:0.04,d:11}],
      [{w:"sawtooth",v:.5,d:11}],                   [{w:"triangle",v:.5,a:.8,d:11}],
      [{w:"triangle",v:.5,d:11}],                   [{w:"square",v:.3,d:11}],
/* 105-112 : Ethnic */
      [{w:"sawtooth",v:.3,d:1,r:1}],                [{w:"sawtooth",v:.5,d:.3}],
      [{w:"sawtooth",v:.5,d:.3,r:.3}],              [{w:"sawtooth",v:.5,d:.3,r:.3}],
      [{w:"square",v:.3,d:.2,r:.2}],                [{w:"square",v:.3,a:.02,d:2}],
      [{w:"sawtooth",v:.2,a:.02,d:.7}],             [{w:"triangle",v:.5,d:1}],
/* 113-120 : Percussive */
      [{w:"sawtooth",v:.3,d:.3,r:.3}],              [{w:"sine",v:.8,d:.1,r:.1}],
      [{w:"square",v:.2,d:.1,r:.1,p:1.05}],         [{w:"sine",v:.8,d:.05,r:.05}],
      [{w:"triangle",v:0.5,d:0.1,r:0.1,p:0.96}],    [{w:"triangle",v:0.5,d:0.1,r:0.1,p:0.97}],
      [{w:"square",v:.3,d:.1,r:.1,}],               [{w:"n1",v:0.3,a:1,s:1,d:0.15,r:0,t:0.5,}],
/* 121-128 : SE */
      [{w:"triangle",v:0.5,d:0.03,t:0,f:1332,r:0.001,p:1.1}],
      [{w:"n0",v:0.2,t:0.1,d:0.02,a:0.05,h:0.02,r:0.02}],
      [{w:"n0",v:0.4,a:1,d:1,t:0.25,}],
      [{w:"sine",v:0.3,a:0.8,d:1,t:0,f:1832}],
      [{w:"triangle",d:0.5,t:0,f:444,s:1,}],
      [{w:"n0",v:0.4,d:1,t:0,f:22,s:1,}],
      [{w:"n0",v:0.5,a:0.2,d:11,t:0,f:44}],
      [{w:"n0",v:0.5,t:0.25,d:0.4,r:0.4}],
    ],
    drummap1:[
/*35*/  [{w:"triangle",t:0,f:70,v:1,d:0.05,h:0.03,p:0.9,q:0.1,},{w:"n0",g:1,t:6,v:17,r:0.01,h:0,p:0,}],
        [{w:"triangle",t:0,f:88,v:1,d:0.05,h:0.03,p:0.5,q:0.1,},{w:"n0",g:1,t:5,v:42,r:0.01,h:0,p:0,}],
        [{w:"n0",f:222,p:0,t:0,r:0.01,h:0,}],
        [{w:"triangle",v:0.3,f:180,d:0.05,t:0,h:0.03,p:0.9,q:0.1,},{w:"n0",v:0.6,t:0,f:70,h:0.02,r:0.01,p:0,},{g:1,w:"square",v:2,t:0,f:360,r:0.01,b:0,c:0,}],
        [{w:"square",f:1150,v:0.34,t:0,r:0.03,h:0.025,d:0.03,},{g:1,w:"n0",t:0,f:13,h:0.025,d:0.1,s:1,r:0.1,v:1,}],
/*40*/  [{w:"triangle",f:200,v:1,d:0.06,t:0,r:0.06,},{w:"n0",g:1,t:0,f:400,v:12,r:0.02,d:0.02,}],
        [{w:"triangle",f:100,v:0.9,d:0.12,h:0.02,p:0.5,t:0,r:0.12,},{g:1,w:"n0",v:5,t:0.4,h:0.015,d:0.005,r:0.005,}],
        [{w:"n1",f:390,v:0.25,r:0.01,t:0,}],
        [{w:"triangle",f:120,v:0.9,d:0.12,h:0.02,p:0.5,t:0,r:0.12,},{g:1,w:"n0",v:5,t:0.5,h:0.015,d:0.005,r:0.005,}],
        [{w:"n1",v:0.25,f:390,r:0.03,t:0,h:0.005,d:0.03,}],
/*45*/  [{w:"triangle",f:140,v:0.9,d:0.12,h:0.02,p:0.5,t:0,r:0.12,},{g:1,w:"n0",v:5,t:0.3,h:0.015,d:0.005,r:0.005,}],
        [{w:"n1",v:0.25,f:390,t:0,d:0.2,r:0.2,},{w:"n0",v:0.3,t:0,c:0,f:440,h:0.005,d:0.05,}],
        [{w:"triangle",f:155,v:0.9,d:0.12,h:0.02,p:0.5,t:0,r:0.12,},{g:1,w:"n0",v:5,t:0.3,h:0.015,d:0.005,r:0.005,}],
        [{w:"triangle",f:180,v:0.9,d:0.12,h:0.02,p:0.5,t:0,r:0.12,},{g:1,w:"n0",v:5,t:0.3,h:0.015,d:0.005,r:0.005,}],
        [{w:"n1",v:0.3,f:1200,d:0.2,r:0.2,h:0.05,t:0,},{w:"n1",t:0,v:1,d:0.1,r:0.1,p:1.2,f:440,}],
/*50*/  [{w:"triangle",f:220,v:0.9,d:0.12,h:0.02,p:0.5,t:0,r:0.12,},{g:1,w:"n0",v:5,t:0.3,h:0.015,d:0.005,r:0.005,}],
        [{w:"n1",f:500,v:0.15,d:0.4,r:0.4,h:0,t:0,},{w:"n0",v:0.1,t:0,r:0.01,f:440,}],
        [{w:"n1",v:0.3,f:800,d:0.2,r:0.2,h:0.05,t:0,},{w:"square",t:0,v:1,d:0.1,r:0.1,p:0.1,f:220,g:1,}],
        [{w:"sine",f:1651,v:0.15,d:0.2,r:0.2,h:0,t:0,},{w:"sawtooth",g:1,t:1.21,v:7.2,d:0.1,r:11,h:1,},{g:1,w:"n0",v:3.1,t:0.152,d:0.002,r:0.002,}],
        null,
/*55*/  [{w:"n1",v:.3,f:1200,d:0.2,r:0.2,h:0.05,t:0,},{w:"n1",t:0,v:1,d:0.1,r:0.1,p:1.2,f:440,}],
        null,
        [{w:"n1",v:0.3,f:555,d:0.25,r:0.25,h:0.05,t:0,},{w:"n1",t:0,v:1,d:0.1,r:0.1,f:440,a:0.005,h:0.02,}],
        [{w:"sawtooth",f:776,v:0.2,d:0.3,t:0,r:0.3,},{g:1,w:"n0",v:2,t:0,f:776,a:0.005,h:0.02,d:0.1,s:1,r:0.1,c:0,},{g:11,w:"sine",v:0.1,t:0,f:22,d:0.3,r:0.3,b:0,c:0,}],
        [{w:"n1",f:440,v:0.15,d:0.4,r:0.4,h:0,t:0,},{w:"n0",v:0.4,t:0,r:0.01,f:440,}],
/*60*/  null,null,null,null,null,
/*65*/  null,null,null,null,null,
/*70*/  null,null,null,null,null,
/*75*/  null,null,null,null,null,
/*80*/  [{w:"sine",f:1720,v:0.3,d:0.02,t:0,r:0.02,},{w:"square",g:1,t:0,f:2876,v:6,d:0.2,s:1,r:0.2,}],
        [{w:"sine",f:1720,v:0.3,d:0.25,t:0,r:0.25,},{w:"square",g:1,t:0,f:2876,v:6,d:0.2,s:1,r:0.2,}],
    ],
    drummap0:[
/*35*/[{w:"triangle",t:0,f:110,v:1,d:0.05,h:0.02,p:0.1,}],
      [{w:"triangle",t:0,f:150,v:0.8,d:0.1,p:0.1,h:0.02,r:0.01,}],
      [{w:"n0",f:392,v:0.5,d:0.01,p:0,t:0,r:0.05}],
      [{w:"n0",f:33,d:0.05,t:0,}],
      [{w:"n0",f:100,v:0.7,d:0.03,t:0,r:0.03,h:0.02,}],
/*40*/[{w:"n0",f:44,v:0.7,d:0.02,p:0.1,t:0,h:0.02,}],
      [{w:"triangle",f:240,v:0.9,d:0.1,h:0.02,p:0.1,t:0,}],
      [{w:"n0",f:440,v:0.2,r:0.01,t:0,}],
      [{w:"triangle",f:270,v:0.9,d:0.1,h:0.02,p:0.1,t:0,}],
      [{w:"n0",f:440,v:0.2,d:0.04,r:0.04,t:0,}],
/*45*/[{w:"triangle",f:300,v:0.9,d:0.1,h:0.02,p:0.1,t:0,}],
      [{w:"n0",f:440,v:0.2,d:0.1,r:0.1,h:0.02,t:0,}],
      [{w:"triangle",f:320,v:0.9,d:0.1,h:0.02,p:0.1,t:0,}],
      [{w:"triangle",f:360,v:0.9,d:0.1,h:0.02,p:0.1,t:0,}],
      [{w:"n0",f:150,v:0.2,d:0.1,r:0.1,h:0.05,t:0,p:0.1,}],
/*50*/[{w:"triangle",f:400,v:0.9,d:0.1,h:0.02,p:0.1,t:0,}],
      [{w:"n0",f:150,v:0.2,d:0.1,r:0.01,h:0.05,t:0,p:0.1}],
      [{w:"n0",f:150,v:0.2,d:0.1,r:0.01,h:0.05,t:0,p:0.1}],
      [{w:"n0",f:440,v:0.3,d:0.1,p:0.9,t:0,r:0.1,}],
      [{w:"n0",f:200,v:0.2,d:0.05,p:0.9,t:0,}],
/*55*/[{w:"n0",f:440,v:0.3,d:0.12,p:0.9,t:0,}],
      [{w:"sine",f:800,v:0.4,d:0.06,t:0,}],
      [{w:"n0",f:150,v:0.2,d:0.1,r:0.01,h:0.05,t:0,p:0.1}],
      [{w:"n0",f:33,v:0.3,d:0.2,p:0.9,t:0,}],
      [{w:"n0",f:300,v:0.3,d:0.14,p:0.9,t:0,}],
/*60*/[{w:"sine",f:200,d:0.06,t:0,}],
      [{w:"sine",f:150,d:0.06,t:0,}],
      [{w:"sine",f:300,t:0,}],
      [{w:"sine",f:300,d:0.06,t:0,}],
      [{w:"sine",f:250,d:0.06,t:0,}],
/*65*/[{w:"square",f:300,v:.3,d:.06,p:.8,t:0,}],
      [{w:"square",f:260,v:.3,d:.06,p:.8,t:0,}],
      [{w:"sine",f:850,v:.5,d:.07,t:0,}],
      [{w:"sine",f:790,v:.5,d:.07,t:0,}],
      [{w:"n0",f:440,v:0.3,a:0.05,t:0,}],
/*70*/[{w:"n0",f:440,v:0.3,a:0.05,t:0,}],
      [{w:"triangle",f:1800,v:0.4,p:0.9,t:0,h:0.03,}],
      [{w:"triangle",f:1800,v:0.3,p:0.9,t:0,h:0.13,}],
      [{w:"n0",f:330,v:0.3,a:0.02,t:0,r:0.01,}],
      [{w:"n0",f:330,v:0.3,a:0.02,t:0,h:0.04,r:0.01,}],
/*75*/[{w:"n0",f:440,v:0.3,t:0,}],
      [{w:"sine",f:800,t:0,}],
      [{w:"sine",f:700,t:0,}],
      [{w:"n0",f:330,v:0.3,t:0,}],
      [{w:"n0",f:330,v:0.3,t:0,h:0.1,r:0.01,p:0.7,}],
/*80*/[{w:"sine",t:0,f:1200,v:0.3,r:0.01,}],
      [{w:"sine",t:0,f:1200,v:0.3,d:0.2,r:0.2,}],

    ],
    /*@@gui*/
    _guiInit:()=>{
      if(this.canvas){
        this.ctx=this.canvas.getContext("2d");
        this.ctx.fillStyle="#000";
        this.ctx.fillRect(0,0,300,32);
        this.canvas.addEventListener("dragover",this.dragOver.bind(this),false);
        this.canvas.addEventListener("dragleave",this.dragLeave.bind(this),false);
        this.canvas.addEventListener("drop",this.execDrop.bind(this),false);
        this.canvas.addEventListener("click",this.click.bind(this),false);
        this.canvas.addEventListener("mousedown",this.pointerdown.bind(this),false);
        this.canvas.addEventListener("mousemove",this.pointermove.bind(this),false);
        this.canvas.addEventListener("touchstart",this.pointerdown.bind(this),false);
        this.canvas.addEventListener("touchend",this.pointerup.bind(this),false);
        this.canvas.addEventListener("touchcancel",this.pointerup.bind(this),false);
        this.canvas.addEventListener("touchmove",this.pointermove.bind(this),false);
      }
    },
    _guiUpdate:()=>{
      if(this.canvas){
        this.ctx.fillStyle="#000";
        this.ctx.fillRect(0,0,300,32);
        var row1=8,row2=20;
        if(this.song)
          row1=4,row2=24;
        else {
          this.ctx.fillStyle="#fff";
          this.ctx.fillText("Midi",8,20);
        }
        if(this.graph){
          this.ctx.fillStyle="#800";
          this.ctx.fillRect(80,row1,132,4);
          this.ctx.fillRect(80,row2,132,4);
          this.ctx.fillStyle="#f00";
          for(let i=this.notetab.length-1;i>=0;--i){
            const nt=this.notetab[i];
            if(!nt.f || this.rhythm[nt.ch]){
              this.ctx.fillRect(80+nt.n,row1,4,4);
              this.ctx.fillRect(80+nt.ch*8,row2,6,4);
            }
          }
        }
        if(this.perfmon){
          this.ctx.fillStyle="#fff";
          this.ctx.fillRect(180,30,28,-12);
          this.ctx.fillStyle="#000";
          this.ctx.fillText(this.notetab.length,185,28);
        }
        this.ctx.fillStyle="#fff";
        this.ctx.fillRect(250,15,32,2);
        this.ctx.fillStyle="#fff";
        this.ctx.strokeStyle="#000";
        this.ctx.beginPath();
        this.ctx.arc(250+this.masterVol*32,16,6,0,6.28,0);
        this.ctx.moveTo(220,12); this.ctx.lineTo(224,12); this.ctx.lineTo(230,6);
        this.ctx.lineTo(230,26); this.ctx.lineTo(224,20); this.ctx.lineTo(220,20);
        this.ctx.fill();
        this.ctx.stroke();
        this.ctx.strokeStyle="#fff";
        this.ctx.lineWidth=2;
        this.ctx.beginPath();
        this.ctx.arc(230,16,4,-1,1,false);
        this.ctx.stroke();
        this.ctx.beginPath();
        this.ctx.arc(230,16,8,-1,1,false);
        this.ctx.stroke();
        if(this.masterVol==0){
          this.ctx.strokeStyle="#000";
          this.ctx.lineWidth=4;
          this.ctx.beginPath();
          this.ctx.moveTo(220,7);
          this.ctx.lineTo(238,25);
          this.ctx.stroke();
          this.ctx.strokeStyle="#fff";
          this.ctx.lineWidth=2;
          this.ctx.stroke();
        }
        if(this.song){
          this.ctx.fillStyle="#fff";
          this.ctx.fillRect(4,2,28,28);
          this.ctx.fillRect(80,15,128,2);
          this.ctx.fillStyle="#000";
          if(this.playing){
            this.ctx.fillRect(12,10,4,12);
            this.ctx.fillRect(22,10,4,12);
          }
          else{
            this.ctx.beginPath();
            this.ctx.moveTo(12,9);
            this.ctx.lineTo(25,16);
            this.ctx.lineTo(12,23);
            this.ctx.fill();
          }
          this.ctx.fillStyle="#fff"
          this.ctx.fillText(this.toTime(this.playTick),38,14);
          this.ctx.fillText(this.toTime(this.maxTick),38,28);
          this.ctx.strokeStyle="#000";
          this.ctx.beginPath();
          this.ctx.arc(80+this.playTick/this.maxTick*128,16,6,0,6.28,0);
          this.ctx.fill();
          this.ctx.stroke();
        }
        if(this.waitdrop){
          this.ctx.fillStyle="rgba(0,0,0,0.7)"
          this.ctx.fillRect(0,0,300,32);
          this.ctx.fillStyle="#fff";
          this.ctx.fillText("Drop MIDI File Here",100,20);
        }
      }
    },
    toTime:(ti)=>{
      ti=(ti*4*60/this.song.timebase/this.song.tempo)|0;
      const m=(ti/60)|0;
      const s=ti%60;
      return ("00"+m).substr(-2)+":"+("00"+s).substr(-2);
    },
    preventScroll:(e)=>{
      e.preventDefault();
    },
    pointerup:(ev)=>{
      document.body.removeEventListener('touchstart',this.preventScroll,false);
    },
    getPos:(e)=>{
      var p=e.target.getBoundingClientRect();
      if(p.right!=p.left)
        return {x:(e.clientX-p.left)*300/(p.right-p.left),y:e.clientY-p.top};
      return {x:0,y:0};
    },
    pointerdown:(ev)=>{
      let e=ev;
      if(ev.touches)
        e=ev.touches[0];
      this.downpos=this.getPos(e);
      if(ev.touches || (e.buttons&1)){
        if(this.song&&this.downpos.x>=80&&this.downpos.x<=208){
          const p=(this.downpos.x-80)/128*this.maxTick;
          this.locateMIDI(p);
          document.body.addEventListener('touchstart',this.preventScroll,false);
        }
        if(this.downpos.x>=250&&this.downpos.x<282){
          const p=(this.downpos.x-250)/32;
          this.setMasterVol(p);
          document.body.addEventListener('touchstart',this.preventScroll,false);
        }
      }
    },
    pointermove:(ev)=>{
      let e=ev;
      if(ev.touches)
        e=ev.touches[0];
      if(ev.touches || (e.buttons&1)){
        const pos=this.getPos(e);
        if(this.song&&pos.x>=70&&pos.x<=208){
          if(pos.x<80) pos.x=80;
          const p=(pos.x-80)/128*this.maxTick;
          this.locateMIDI(p);
        }
        if(pos.x>=250&&pos.x<282){
          const p=(pos.x-250)/32;
          this.setMasterVol(p);
        }
      }
    },
    click:(e)=>{
      const pos=this.getPos(e);
      if(pos.x<40 && this.song){
        if(this.playing)
          this.stopMIDI();
        else if(this.song)
          this.playMIDI();
      }
      if(pos.x>=215&&pos.x<243 && this.downpos.x>=215 && this.downpos.x<243){
        if(this.masterVol>0){
          this.lastMasterVol=this.masterVol;
          this.masterVol=0;
        }
        else
          this.masterVol=this.lastMasterVol;
      }
    },
    dragLeave:(e)=>{
      this.waitdrop=0;
    },
    dragOver:(e)=>{
      this.waitdrop=1;
      e.stopPropagation();
      e.preventDefault();
      e.dataTransfer.dropEffect = "copy";
    },
    execDrop:(e)=>{
      this.waitdrop=0;
      const f = e.dataTransfer.files;
      if(this.disabledrop==0){
        var reader = new FileReader();
        reader.onload=function(e){
          this.loadMIDI(reader.result);
        }.bind(this);
        reader.readAsArrayBuffer(f[0]);
      }
      e.stopPropagation();
      e.preventDefault();
    },
    /*@@guiEND*/
    ready:()=>{
      return new Promise((resolv)=>{
        const timerid=setInterval(()=>{
/*
          if(this.debug)
            console.log("Initialize checking.");
*/
          if(this.isReady){
            clearInterval(timerid);
            if(this.debug)
              console.log("Initialized.");
            resolv();
          }
        },100);
      });
    },
    init:()=>{
      this.pg=[]; this.vol=[]; this.ex=[]; this.bend=[]; this.rpnidx=[]; this.brange=[];
      this.sustain=[]; this.notetab=[]; this.rhythm=[];
      this.masterTuningC=0; this.masterTuningF=0; this.tuningC=[]; this.tuningF=[]; this.scaleTuning=[];
      this.maxTick=0, this.playTick=0, this.playing=0; this.releaseRatio=3.5;
      for(let i=0;i<16;++i){
        this.pg[i]=0; this.vol[i]=3*100*100/(127*127);
        this.bend[i]=0; this.brange[i]=0x100;
        this.tuningC[i]=0; this.tuningF[i]=0;
        this.scaleTuning[i]=[0,0,0,0,0,0,0,0,0,0,0,0];
        this.rhythm[i]=0;
      }
      this.rhythm[9]=1;
      this.preroll=0.2;
      this.relcnt=0;
      setInterval(
        function(){
          if(++this.relcnt>=3){
            this.relcnt=0;
            for(let i=this.notetab.length-1;i>=0;--i){
              var nt=this.notetab[i];
              if(this.actx.currentTime>nt.e){
                this._pruneNote(nt);
                this.notetab.splice(i,1);
              }
            }
            /*@@gui*/
            /*@@guiEND*/
          }
          if(this.playing && this.song.ev.length>0){
            let e=this.song.ev[this.playIndex];
            while(this.actx.currentTime+this.preroll>this.playTime){
              if(e.m[0]==0xff51){
                this.song.tempo=e.m[1];
                this.tick2Time=4*60/this.song.tempo/this.song.timebase;
              }
              else
                this.send(e.m,this.playTime);
              ++this.playIndex;
              if(this.playIndex>=this.song.ev.length){
                if(this.loop){
                  e=this.song.ev[this.playIndex=0];
                  this.playTick=e.t;
                }
                else{
                  this.playTick=this.maxTick;
                  this.playing=0;
                  break;
                }
              }
              else{
                e=this.song.ev[this.playIndex];
                this.playTime+=(e.t-this.playTick)*this.tick2Time;
                this.playTick=e.t;
              }
            }
          }
        }.bind(this),60
      );
      if(this.debug)
        console.log("internalcontext:"+this.internalcontext)
      if(this.internalcontext){
        window.AudioContext = window.AudioContext || window.webkitAudioContext;
        this.setAudioContext(new AudioContext());
      }
      this.isReady=1;
    },
    setMasterVol:(v)=>{
      if(v!=undefined)
        this.masterVol=v;
      if(this.out)
        this.out.gain.value=this.masterVol;
    },
    setReverbLev:(v)=>{
      if(v!=undefined)
        this.reverbLev=v;
      var r=parseFloat(this.reverbLev);
      if(this.rev&&!isNaN(r))
        this.rev.gain.value=r*8;
    },
    setLoop:(f)=>{
      this.loop=f;
    },
    setVoices:(v)=>{
      this.voices=v;
    },
    getPlayStatus:()=>{
      return {play:this.playing, maxTick:this.maxTick, curTick:this.playTick};
    },
    locateMIDI:(tick)=>{
      let i,p=this.playing;
      this.stopMIDI();
      for(i=0;i<this.song.ev.length && tick>this.song.ev[i].t;++i){
        var m=this.song.ev[i];
        var ch=m.m[0]&0xf;
        switch(m.m[0]&0xf0){
        case 0xb0:
          switch(m.m[1]){
          case 1:  this.setModulation(ch,m.m[2]); break;
          case 7:  this.setChVol(ch,m.m[2]); break;
          case 10: this.setPan(ch,m.m[2]); break;
          case 11: this.setExpression(ch,m.m[2]); break;
          case 64: this.setSustain(ch,m.m[2]); break;
          }
          break;
        case 0xc0: this.pg[m.m[0]&0x0f]=m.m[1]; break;
        }
        if(m.m[0]==0xff51)
          this.song.tempo=m.m[1];
      }
      if(!this.song.ev[i]){
        this.playIndex=0;
        this.playTick=this.maxTick;
      }
      else{
        this.playIndex=i;
        this.playTick=this.song.ev[i].t;
      }
      if(p)
        this.playMIDI();
    },
    getTimbreName:(m,n)=>{
      if(m==0)
        return this.program[n].name;
      else
        return this.drummap[n-35].name;
    },
    loadMIDIfromSrc:()=>{
      this.loadMIDIUrl(this.src);
    },
    loadMIDIUrl:(url)=>{
      if(!url)
        return;
      var xhr=new XMLHttpRequest();
      xhr.open("GET",url,true);
      xhr.responseType="arraybuffer";
      xhr.loadMIDI=this.loadMIDI.bind(this);
      xhr.onload=function(e){
        if(this.status==200){
          this.loadMIDI(this.response);
        }
      };
      xhr.send();
    },
    reset:()=>{
      for(let i=0;i<16;++i){
        this.setProgram(i,0);
        this.setBendRange(i,0x100);
        this.setModulation(i,0);
        this.setChVol(i,100);
        this.setPan(i,64);
        this.resetAllControllers(i);
        this.allSoundOff(i);
        this.rhythm[i]=0;
        this.tuningC[i]=0;
        this.tuningF[i]=0;
      }
      this.masterTuningC=0;
      this.masterTuningF=0;
      this.rhythm[9]=1;
    },
    stopMIDI:()=>{
      this.playing=0;
      for(var i=0;i<16;++i)
        this.allSoundOff(i);
    },
    playMIDI:()=>{
      if(!this.song)
        return;
      const dummy=this.actx.createOscillator();
      dummy.connect(this.actx.destination);
      dummy.frequency.value=0;
      dummy.start(0);
      dummy.stop(this.actx.currentTime+0.001);
      if(this.playTick>=this.maxTick)
        this.playTick=0,this.playIndex=0;
      this.playTime=this.actx.currentTime+.1;
      this.tick2Time=4*60/this.song.tempo/this.song.timebase;
      this.playing=1;
    },
    loadMIDI:(data)=>{
      function Get2(s, i) { return (s[i]<<8) + s[i+1]; }
      function Get3(s, i) { return (s[i]<<16) + (s[i+1]<<8) + s[i+2]; }
      function Get4(s, i) { return (s[i]<<24) + (s[i+1]<<16) + (s[i+2]<<8) + s[i+3]; }
      function GetStr(s, i, len) {
        return String.fromCharCode.apply(null,s.slice(i,i+len));
      }
      function Delta(s, i) {
        var v, d;
        v = 0;
        datalen = 1;
        while((d = s[i]) & 0x80) {
          v = (v<<7) + (d&0x7f);
          ++datalen;
          ++i;
        }
        return (v<<7)+d;
      }
      function Msg(song,tick,s,i){
        var v=s[i];
        datalen=1;
        if((v&0x80)==0)
          v=runst,datalen=0;
        runst=v;
        switch(v&0xf0){
        case 0xc0: case 0xd0:
          song.ev.push({t:tick,m:[v,s[i+datalen]]});
          datalen+=1;
          break;
        case 0xf0:
          switch(v) {
          case 0xf0:
          case 0xf7:
            var len=Delta(s,i+1);
            datastart=1+datalen;
            var exd=Array.from(s.slice(i+datastart,i+datastart+len));
            exd.unshift(0xf0);
            song.ev.push({t:tick,m:exd});
/*
            var sysex=[];
            for(var jj=0;jj<len;++jj)
              sysex.push(s[i+datastart+jj].toString(16));
            if(this.debug)
              console.log(sysex);
*/
            datalen+=len+1;
            break;
          case 0xff:
            var len = Delta(s, i + 2);
            datastart = 2+datalen;
            datalen = len+datalen+2;
            switch(s[i+1]) {
            case 0x02: song.copyright+=GetStr(s, i + datastart, datalen - 3); break;
            case 0x01: case 0x03: case 0x04: case 0x09:
              song.text=GetStr(s, i + datastart, datalen - datastart);
              break;
            case 0x2f:
              return 1;
            case 0x51:
              var val = Math.floor(60000000 / Get3(s, i + 3));
              song.ev.push({t:tick, m:[0xff51, val]});
              break;
            }
            break;
          }
          break;
        default:
          song.ev.push({t:tick,m:[v,s[i+datalen],s[i+datalen+1]]});
          datalen+=2;
        }
        return 0;
      }
      this.stopMIDI();
      var s=new Uint8Array(data);
      var datalen = 0, datastart = 0, runst = 0x90;
      var idx = 0;
      var hd = s.slice(0,  4);
      if(hd.toString()!="77,84,104,100")  //MThd
        return;
      var len = Get4(s, 4);
      var fmt = Get2(s, 8);
      var numtrk = Get2(s, 10);
      this.maxTick=0;
      var tb = Get2(s, 12)*4;
      idx = (len + 8);
      this.song={copyright:"",text:"",tempo:120,timebase:tb,ev:[]};
      for(let tr=0;tr<numtrk;++tr){
        hd=s.slice(idx, idx+4);
        len=Get4(s, idx+4);
        if(hd.toString()=="77,84,114,107") {//MTrk
          var tick = 0;
          var j = 0;
          this.notetab.length = 0;
          for(;;) {
            tick += Delta(s, idx + 8 + j);
            j += datalen;
            var e = Msg(this.song, tick, s, idx + 8 + j);
            j += datalen;
            if(e)
              break;
          }
          if(tick>this.maxTick)
            this.maxTick=tick;
        }
        idx += (len+8);
      }
      this.song.ev.sort(function(x,y){return x.t-y.t});
      this.reset();
      this.locateMIDI(0);
    },
    setQuality:(q)=>{
      if(q!=undefined)
        this.quality=q;
      for(let i=0;i<128;++i)
        this.setTimbre(0,i,this.program0[i]);
      for(let i=0;i<this.drummap0.length;++i)
        this.setTimbre(1,i+35,this.drummap0[i]);
      if(this.quality){
        for(let i=0;i<this.program1.length;++i)
          this.setTimbre(0,i,this.program1[i]);
        for(let i=0;i<this.drummap.length;++i){
          if(this.drummap1[i])
            this.setTimbre(1,i+35,this.drummap1[i]);
        }
      }
    },
    setTimbre:(m,n,p)=>{
      const defp={g:0,w:"sine",t:1,f:0,v:0.5,a:0,h:0.01,d:0.01,s:0,r:0.05,p:1,q:1,k:0};
      function filldef(p){
        for(n=0;n<p.length;++n){
          for(let k in defp){
            if(!p[n].hasOwnProperty(k) || typeof(p[n][k])=="undefined")
              p[n][k]=defp[k];
          }
        }
        return p;
      }
      if(m && n>=35 && n<=81)
        this.drummap[n-35].p=filldef(p);
      if(m==0 && n>=0 && n<=127)
        this.program[n].p=filldef(p);
    },
    _pruneNote:(nt)=>{
      for(let k=nt.o.length-1;k>=0;--k){
        if(nt.o[k].frequency){
          nt.o[k].frequency.cancelScheduledValues(0);
        }
        else{
          nt.o[k].playbackRate.cancelScheduledValues(0);
        }
        nt.g[k].gain.cancelScheduledValues(0);

        nt.o[k].stop();
        if(nt.o[k].detune) {
          try {
            this.chmod[nt.ch].disconnect(nt.o[k].detune);
          } catch (e) {}
        }
        nt.g[k].gain.value = 0;
      }
    },
    _limitVoices:(ch,n)=>{
      this.notetab.sort(function(n1,n2){
        if(n1.f!=n2.f) return n1.f-n2.f;
        if(n1.e!=n2.e) return n2.e-n1.e;
        return n2.t-n1.t;
      });
      for(let i=this.notetab.length-1;i>=0;--i){
        var nt=this.notetab[i];
        if(this.actx.currentTime>nt.e || i>=(this.voices-1)){
          this._pruneNote(nt);
          this.notetab.splice(i,1);
        }
      }
    },
    _note:(t,ch,n,v,p)=>{
      let out,sc,pn;
      const o=[],g=[],vp=[],fp=[],r=[];
      const f=440*Math.pow(2,(n-69 + this.masterTuningC + this.tuningC[ch] + (this.masterTuningF + this.tuningF[ch]/8192 + this.scaleTuning[ch][n%12]))/12);
      this._limitVoices(ch,n);
      for(let i=0;i<p.length;++i){
        pn=p[i];
        const dt=t+pn.a+pn.h;
        if(pn.g==0)
          out=this.chvol[ch], sc=v*v/16384, fp[i]=f*pn.t+pn.f;
        else if(pn.g>10)
          out=g[pn.g-11].gain, sc=1, fp[i]=fp[pn.g-11]*pn.t+pn.f;
        else if(o[pn.g-1].frequency)
          out=o[pn.g-1].frequency, sc=fp[pn.g-1], fp[i]=fp[pn.g-1]*pn.t+pn.f;
        else
          out=o[pn.g-1].playbackRate, sc=fp[pn.g-1]/440, fp[i]=fp[pn.g-1]*pn.t+pn.f;
        switch(pn.w[0]){
        case "n":
          o[i]=this.actx.createBufferSource();
          o[i].buffer=this.noiseBuf[pn.w];
          o[i].loop=true;
          o[i].playbackRate.value=fp[i]/440;
          if(pn.p!=1)
            this._setParamTarget(o[i].playbackRate,fp[i]/440*pn.p,t,pn.q);
          if (o[i].detune) {
            this.chmod[ch].connect(o[i].detune);
            o[i].detune.value=this.bend[ch];
          }
          break;
        default:
          o[i]=this.actx.createOscillator();
          o[i].frequency.value=fp[i];
          if(pn.p!=1)
            this._setParamTarget(o[i].frequency,fp[i]*pn.p,t,pn.q);
          if(pn.w[0]=="w")
            o[i].setPeriodicWave(this.wave[pn.w]);
          else
            o[i].type=pn.w;
          if (o[i].detune) {
            this.chmod[ch].connect(o[i].detune);
            o[i].detune.value=this.bend[ch];
          }
          break;
        }
        g[i]=this.actx.createGain();
        r[i]=pn.r;
        o[i].connect(g[i]); g[i].connect(out);
        vp[i]=sc*pn.v;
        if(pn.k)
          vp[i]*=Math.pow(2,(n-60)/12*pn.k);
        if(pn.a){
          g[i].gain.value=0;
          g[i].gain.setValueAtTime(0,t);
          g[i].gain.linearRampToValueAtTime(vp[i],t+pn.a);
        }
        else
          g[i].gain.setValueAtTime(vp[i],t);
        this._setParamTarget(g[i].gain,pn.s*vp[i],dt,pn.d);
        o[i].start(t);
        if(this.rhythm[ch]){

          o[i].onended = ()=>{
            try {
              if (o[i].detune) this.chmod[ch].disconnect(o[i].detune);
            }
            catch(e){}
          };
          o[i].stop(t+p[0].d*this.releaseRatio);
        }
      }
      if(!this.rhythm[ch])
        this.notetab.push({t:t,e:99999,ch:ch,n:n,o:o,g:g,t2:t+pn.a,v:vp,r:r,f:0});
    },
    _setParamTarget:(p,v,t,d)=>{
      if(d!=0)
        p.setTargetAtTime(v,t,d);
      else
        p.setValueAtTime(v,t);
    },
    _releaseNote:(nt,t)=>{
      if(nt.ch!=9){
        for(let k=nt.g.length-1;k>=0;--k){
          nt.g[k].gain.cancelScheduledValues(t);
          if(t==nt.t2)
            nt.g[k].gain.setValueAtTime(nt.v[k],t);
          else if(t<nt.t2)
            nt.g[k].gain.setValueAtTime(nt.v[k]*(t-nt.t)/(nt.t2-nt.t),t);
          this._setParamTarget(nt.g[k].gain,0,t,nt.r[k]);
        }
      }
      nt.e=t+nt.r[0]*this.releaseRatio;
      nt.f=1;
    },
    setModulation:(ch,v,t)=>{
      this.chmod[ch].gain.setValueAtTime(v*100/127,this._tsConv(t));
    },
    setChVol:(ch,v,t)=>{
      this.vol[ch]=3*v*v/(127*127);
      this.chvol[ch].gain.setValueAtTime(this.vol[ch]*this.ex[ch],this._tsConv(t));
    },
    setPan:(ch,v,t)=>{
      if(this.chpan[ch])
        this.chpan[ch].pan.setValueAtTime((v-64)/64,this._tsConv(t));
    },
    setExpression:(ch,v,t)=>{
      this.ex[ch]=v*v/(127*127);
      this.chvol[ch].gain.setValueAtTime(this.vol[ch]*this.ex[ch],this._tsConv(t));
    },
    setSustain:(ch,v,t)=>{
      this.sustain[ch]=v;
      t=this._tsConv(t);
      if(v<64){
        for(let i=this.notetab.length-1;i>=0;--i){
          const nt=this.notetab[i];
          if(t>=nt.t && nt.ch==ch && nt.f==1)
            this._releaseNote(nt,t);
        }
      }
    },
    allSoundOff:(ch)=>{
      for(let i=this.notetab.length-1;i>=0;--i){
        const nt=this.notetab[i];
        if(nt.ch==ch){
          this._pruneNote(nt);
          this.notetab.splice(i,1);
        }
      }
    },
    resetAllControllers:(ch)=>{
      this.bend[ch]=0; this.ex[ch]=1.0;
      this.rpnidx[ch]=0x3fff; this.sustain[ch]=0;
      if(this.chvol[ch]){
        this.chvol[ch].gain.value=this.vol[ch]*this.ex[ch];
        this.chmod[ch].gain.value=0;
      }
    },
    setBendRange:(ch,v)=>{
      this.brange[ch]=v;
    },
    setProgram:(ch,v)=>{
      if(this.debug)
        console.log("Pg("+ch+")="+v);
      this.pg[ch]=v;
    },
    _tsConv:(t)=>{
      if(t==undefined||t<=0){
        t=0;
        if(this.actx)
          t=this.actx.currentTime;
      }
      else{
        if(this.tsmode)
          t=t*.001-this.tsdiff;
      }
      return t;
    },
    setBend:(ch,v,t)=>{
      t=this._tsConv(t);
      const br=this.brange[ch]*100/127;
      this.bend[ch]=(v-8192)*br/8192;
      for(let i=this.notetab.length-1;i>=0;--i){
        const nt=this.notetab[i];
        if(nt.ch==ch){
          for(let k=nt.o.length-1;k>=0;--k){
            if(nt.o[k].frequency)
              if (nt.o[k].detune) nt.o[k].detune.setValueAtTime(this.bend[ch],t);
          }
        }
      }
    },
    noteOff:(ch,n,t)=>{
      if(this.rhythm[ch])
        return;
      t=this._tsConv(t);
      for(let i=this.notetab.length-1;i>=0;--i){
        const nt=this.notetab[i];
        if(t>=nt.t && nt.ch==ch && nt.n==n && nt.f==0){
          nt.f=1;
          if(this.sustain[ch]<64)
            this._releaseNote(nt,t);
        }
      }
    },
    noteOn:(ch,n,v,t)=>{
      if(v==0){
        this.noteOff(ch,n,t);
        return;
      }
      t=this._tsConv(t);
      if(this.rhythm[ch]){
        if(n>=35&&n<=81)
          this._note(t,ch,n,v,this.drummap[n-35].p);
        return;
      }
      this._note(t,ch,n,v,this.program[this.pg[ch]].p);
    },
    setTsMode:(tsmode)=>{
      this.tsmode=tsmode;
    },
    send:(msg,t)=>{    /* send midi message */
      const ch=msg[0]&0xf;
      const cmd=msg[0]&~0xf;
      if(cmd<0x80||cmd>=0x100)
        return;
      if(this.audioContext.state=="suspended"){
        this.audioContext.resume();
      }
      switch(cmd){
      case 0xb0:  /* ctl change */
        switch(msg[1]){
        case 1:  this.setModulation(ch,msg[2],t); break;
        case 7:  this.setChVol(ch,msg[2],t); break;
        case 10: this.setPan(ch,msg[2],t); break;
        case 11: this.setExpression(ch,msg[2],t); break;
        case 64: this.setSustain(ch,msg[2],t); break;
        case 98:  case 99: this.rpnidx[ch]=0x3fff; break; /* nrpn lsb/msb */
        case 100: this.rpnidx[ch]=(this.rpnidx[ch]&0x3f80)|msg[2]; break; /* rpn lsb */
        case 101: this.rpnidx[ch]=(this.rpnidx[ch]&0x7f)|(msg[2]<<7); break; /* rpn msb */
        case 6:  /* data entry msb */
          switch (this.rpnidx[ch]) {
            case 0:
              this.brange[ch]=(msg[2]<<7)+(this.brange[ch]&0x7f);
              break;
            case 1:
              this.tuningF[ch]=(msg[2]<<7)+((this.tuningF[ch]+0x2000)&0x7f)-0x2000;
              break;
            case 2:
              this.tuningC[ch]=msg[2]-0x40;
              break;
          }
          break;
        case 38:  /* data entry lsb */
          switch (this.rpnidx[ch]) {
            case 0:
              this.brange[ch]=(this.brange[ch]&0x3f80)|msg[2];
              break;
            case 1:
              this.tuningF[ch]=(((this.tuningF[ch]+0x2000)&0x3f80)|msg[2])-0x2000;
              break;
            case 2: break;
          }
          break;
        case 120:  /* all sound off */
        case 123:  /* all notes off */
        case 124: case 125: case 126: case 127: /* omni off/on mono/poly */
          this.allSoundOff(ch);
          break;
        case 121: this.resetAllControllers(ch); break;
        }
        break;
      case 0xc0: this.setProgram(ch,msg[1]); break;
      case 0xe0: this.setBend(ch,(msg[1]+(msg[2]<<7)),t); break;
      case 0x90: this.noteOn(ch,msg[1],msg[2],t); break;
      case 0x80: this.noteOff(ch,msg[1],t); break;
      case 0xf0:
        if (msg[0] == 0xff) {
          this.reset();
          break;
        }
        if(msg[0]!=254 && this.debug){
          var ds=[];
          for(let ii=0;ii<msg.length;++ii)
            ds.push(msg[ii].toString(16));
        }
        if (msg[0]==0xf0) {
          if (msg[1]==0x7f && msg[3]==4) {
            if (msg[4]==3 && msg.length >= 8) { // Master Fine Tuning
              this.masterTuningF = (msg[6]*0x80 + msg[5] - 8192) / 8192;
            }
            if (msg[4]==4 && msg.length >= 8) { // Master Coarse Tuning
              this.masterTuningC = msg[6]-0x40;
            }
          }
          if (msg[1]==0x41 && msg[3]==0x42 && msg[4]==0x12 &&msg[5]==0x40) { // GS
            if ((msg[6]&0xf0)==0x10 && msg.length==11) {
              const c=[9,0,1,2,3,4,5,6,7,8,10,11,12,13,14,15][msg[6]&0xf];
              if (msg[7]==0x15) {
                this.rhythm[c]=msg[8];
              }
              else if (msg[7] >= 0x40 && msg[7] <= 0x4b) { // Scale Tuning
                this.scaleTuning[c][msg[7]-0x40] = (msg[8]-0x40) / 100;
              }
            }
            else if (msg[6]==0) {
              if (msg[7]==0 && msg.length==14) { // Master Tuning
                this.masterTuningF = (msg[8]*0x1000 + msg[9]*0x100 + msg[10]*0x10 + msg[11] - 0x400) / 1000;
              }
              else if (msg[7]==5 && msg.length==11) { // Master Transpose
                this.masterTuningC = msg[8]-0x40;
              }
            }
          }
        }
        break;
      }
    },
    _createWave:(w)=>{
      const imag=new Float32Array(w.length);
      const real=new Float32Array(w.length);
      for(let i=1;i<w.length;++i)
        imag[i]=w[i];
      return this.actx.createPeriodicWave(real,imag);
    },
    getAudioContext:()=>{
      return this.actx;
    },
    setAudioContext:(actx,dest)=>{
      this.audioContext=this.actx=actx;
      this.dest=dest;
      if(!dest)
        this.dest=actx.destination;
      this.tsdiff=performance.now()*.001-this.actx.currentTime;
      if(this.debug)
        console.log("TSDiff:"+this.tsdiff);
      this.out=this.actx.createGain();
      this.comp=this.actx.createDynamicsCompressor();
      var blen=this.actx.sampleRate*.5|0;
      this.convBuf=this.actx.createBuffer(2,blen,this.actx.sampleRate);
      this.noiseBuf={};
      this.noiseBuf.n0=this.actx.createBuffer(1,blen,this.actx.sampleRate);
      this.noiseBuf.n1=this.actx.createBuffer(1,blen,this.actx.sampleRate);
      var d1=this.convBuf.getChannelData(0);
      var d2=this.convBuf.getChannelData(1);
      var dn=this.noiseBuf.n0.getChannelData(0);
      var dr=this.noiseBuf.n1.getChannelData(0);
      for(let i=0;i<blen;++i){
        if(i/blen<Math.random()){
          d1[i]=Math.exp(-3*i/blen)*(Math.random()-.5)*.5;
          d2[i]=Math.exp(-3*i/blen)*(Math.random()-.5)*.5;
        }
        dn[i]=Math.random()*2-1;
      }
      for(let jj=0;jj<64;++jj){
        const r1=Math.random()*10+1;
        const r2=Math.random()*10+1;
        for(let i=0;i<blen;++i){
          var dd=Math.sin((i/blen)*2*Math.PI*440*r1)*Math.sin((i/blen)*2*Math.PI*440*r2);
          dr[i]+=dd/8;
        }
      }
      if(this.useReverb){
        this.conv=this.actx.createConvolver();
        this.conv.buffer=this.convBuf;
        this.rev=this.actx.createGain();
        this.rev.gain.value=this.reverbLev;
        this.out.connect(this.conv);
        this.conv.connect(this.rev);
        this.rev.connect(this.comp);
      }
      this.setMasterVol();
      this.out.connect(this.comp);
      this.comp.connect(this.dest);
      this.chvol=[]; this.chmod=[]; this.chpan=[];
      this.wave={"w9999":this._createWave("w9999")};
      this.lfo=this.actx.createOscillator();
      this.lfo.frequency.value=5;
      this.lfo.start(0);
      for(let i=0;i<16;++i){
        this.chvol[i]=this.actx.createGain();
        if(this.actx.createStereoPanner){
          this.chpan[i]=this.actx.createStereoPanner();
          this.chvol[i].connect(this.chpan[i]);
          this.chpan[i].connect(this.out);
        }
        else{
          this.chpan[i]=null;
          this.chvol[i].connect(this.out);
        }
        this.chmod[i]=this.actx.createGain();
        this.lfo.connect(this.chmod[i]);
        this.pg[i]=0;
        this.resetAllControllers(i);
      }
      this.setReverbLev();
      this.reset();
      this.send([0x90,60,1]);
      this.send([0x90,60,0]);
    },
  });
}
if(window && window.customElements){
  class WebAudioMidiElement extends HTMLElement {
    constructor(){
      super();
    }
    connectedCallback(){
      const div = document.createElement("div");
      div.innerHTML=
  `<canvas
    id='wa-canvas' width='300' height='32'
    touch-action='none' tabindex='0'
    style='
      position:relative;
      margin:0;
      border:none;
      width:300px;
      height:32px;
    '
  ></canvas>
  <div id='wa-logo'
    style='
      display:none;
      position:absolute;
      top:5px;
      left:5px;
      color:#fff;
      font-size:8px;
      background:rgba(0,0,0,0.5);
    '
  >Midi</div>`;

      this.getAttr = (n,def)=>{
        let v=this.getAttribute(n);
        if(v==""||v==null) return def;
        switch(typeof(def)){
        case "number":
          if(v=="true") return 1;
          v=+v;
          if(isNaN(v)) return 0;
          return v;
        }
        return v;
      };

      this.canvas = div.children[0];
      this.appendChild(div);
      WebAudioMidiCore.bind(this)(this);
      const plist=this.properties;
      for(let k in plist){
        const v = plist[k];
        if(v.observer){
          this["_"+k] = v.value;
          Object.defineProperty(this, k, {
            get:()=>{return this["_"+k]},
            set:(val)=>{
              this["_"+k] = val;
              this[v.observer]();
            }
          });
        }
        else{
          this[k]=v;
        }
      }
      for(let k in plist){
        const v = plist[k];
        this[k] = this.getAttr(k,v.value);
      }
      this.setQuality(1);
      this.init();
      this._guiInit.bind(this)();
      setInterval(this._guiUpdate.bind(this),100);
    }
  }
  window.customElements.define('webaudio-tinysynth', WebAudioMidiElement);
}

class WebAudioMidi {
  constructor(opt){
    WebAudioMidiCore.bind(this)(this);
    for(let k in this.properties){
      this[k]=this.properties[k].value;
    }
    this.setQuality(1);
    if(opt){
      if(opt.useReverb!=undefined)
        this.useReverb=opt.useReverb;
      if(opt.quality!=undefined)
        this.setQuality(opt.quality);
      if(opt.voices!=undefined)
        this.setVoices(opt.voices);
    }
    this.init();
  }
}

if(typeof exports === 'object' && typeof module !== 'undefined'){
  module.exports = WebAudioMidi;
}
else if(typeof define === 'function' && define.amd){
    define(function(){
      return WebAudioMidi;
    });
}
else{
  window.WebAudioMidi = WebAudioMidi;
}

})(this);
</script>

<script>
function formatTime(totalSeconds) {
  const minutes = Math.floor(totalSeconds / 60);
  const seconds = totalSeconds % 60;
  return `${minutes}:${seconds.toString().padStart(2, '0')}`;
}
/* ==========================================================================
   UTILITIES
   ========================================================================== */

function log(msg) {
  logEl.value = logEl.value+`[${new Date().toLocaleTimeString()}] ${msg}\n` + logEl.textContent;
}

// Robust Base64 encoder for Worklet code
function toBase64(str) {
  const bytes = new TextEncoder().encode(str);
  let binary = '';
  for(let i=0; i<bytes.length; i++) binary += String.fromCharCode(bytes[i]);
  return btoa(binary);
}

function loadMidiUrl(){


  synth.loadMIDIUrl('data:audio/midi;base64,'+CURRENT_MIDI_FILE);
}
function loadMidi(files){
  var reader = new FileReader();
  reader.onload=(e)=>{
    synth.loadMIDI(reader.result);
  }
  reader.readAsArrayBuffer(files[0]);
}
function playMidi(){
  synth.playMIDI();
}
function stopMidi(){
  synth.stopMIDI();
}
function SetProgram(p){
  synth.send([0xc0,p]);
}

var mrixtijde=0;

function Init(){
  synth=new WebAudioMidi({voices:64});
  for(var i=0;i<128;++i){
    var o=document.createElement("option");
    o.innerHTML=synth.getTimbreName(0,i);
    document.getElementById("prog").appendChild(o);
  }
  setInterval(function(){
    var st=synth.getPlayStatus();



		if((st.curTick+mrixtijde)==st.maxTick){
		mrixtijde=100000000;
	maakbase64midrandom();
	setTimeout(function(){ mrixtijde=0; if(currentCounters>0){  
//document.getElementById('fl').click();
loadMidiUrl('data:audio/midi;base64,'+CURRENT_MIDI_FILE);

 } }, 2000);
	}
	
	var docle=(st.curTick/st.maxTick);
	
	          document.getElementById('progressBar').style.width = `${docle * 100}%`;
		  const otimel=Math.floor(currentCount*(1-docle));

			tiot=formatTime(otimel);
			idf=tiot.split("NaN");
			if(idf.length<2){
		  document.getElementById('playBtn').textContent=tiot;
		  
		  document.getElementById('stopBtn').textContent="▷▷";
		  }
    document.getElementById("status").innerHTML="Play:"+st.play+"  Pos:"+st.curTick+"/"+st.maxTick;
  },100);
}
function Test(){
  var o=synth.getAudioContext().createOscillator();
  o.connect(synth.getAudioContext().destination);
  o.start(0);
  o.stop(synth.getAudioContext().currentTime+1);
  console.log(synth)
}
//window.onload=Init;

</script>

<div style="display:none">
<h1>Procedural Ethno-Acoustic CA Orchestrator</h1>
This is a simple sample of webaudio-tinysynth (JavaScript library version) page.
<hr>
<button onclick="Test()">Test audioContext</button>
<hr>


Load Sample MIDI from URL : <button onclick="juo()">Load (ws.mid)</button><br>
<script>
function juo(){
loadMidiUrl('data:audio/midi;base64,'+CURRENT_MIDI_FILE);
}
</script>
Load MIDI file from local : <input type="file" onchange="loadMidi(this.files)"><br>
<button onclick="playMidi()">Play</button>
<button onclick="stopMidi()">Stop</button>
<div id="status"></div>
<br><br>
Loop : <input type="checkbox" onchange="synth.setLoop(this.checked)"><br>
MasterVol<br>
<input type="range" value="50" min="0" max="100" oninput="synth.setMasterVol(this.value/100)"><br>
ReverbLev<br>
<input type="range" value="0" min="0" max="100" oninput="synth.setReverbLev(this.value/100)"><br>

<br><br>
Quality : <select onchange="synth.setQuality(this.selectedIndex)"><option>Quality=0</option><option selected="">Quality=1</option></select>
<br>
Timbre : <select id="prog" onchange="SetProgram(this.selectedIndex)"></select>
<br>
<br>
Play by keys :<br>
  <button onmousedown="synth.send([0x90,60,100])" onmouseup="synth.send([0x80,60,0])">C</button>
  <button onmousedown="synth.send([0x90,62,100])" onmouseup="synth.send([0x80,62,0])">D</button>
  <button onmousedown="synth.send([0x90,64,100])" onmouseup="synth.send([0x80,64,0])">E</button>
  <button onmousedown="synth.send([0x90,65,100])" onmouseup="synth.send([0x80,65,0])">F</button>
  <button onmousedown="synth.send([0x90,67,100])" onmouseup="synth.send([0x80,67,0])">G</button>
  <button onmousedown="synth.send([0x90,69,100])" onmouseup="synth.send([0x80,69,0])">A</button>
  <button onmousedown="synth.send([0x90,71,100])" onmouseup="synth.send([0x80,71,0])">B</button>
  <button onmousedown="synth.send([0x90,72,100])" onmouseup="synth.send([0x80,72,0])">C</button>


</div>

  <script>

  // Replace the existing loadMidi function with this one:

let currentSynth = null;

function loadMidi(files) {
  if (!files || !files[0]) return;

  // Stop any currently playing synth
  if (currentSynth) {
    currentSynth.stopMIDI();
  }

  // Create a new synth instance
  currentSynth = new WebAudioMidi({
    voices: 64,
    useReverb: 1,
    quality: 1
  });

  var reader = new FileReader();
  reader.onload = (e) => {
    currentSynth.loadMIDI(reader.result);

    // Set up UI controls to use the new synth
    setupSynthControls(currentSynth);

    // Auto-play the loaded MIDI
    setTimeout(() => {
      currentSynth.playMIDI();
    }, 500);
  };
  reader.readAsArrayBuffer(files[0]);
}

function loadMidiUrl() {
  // Stop any currently playing synth
  if (currentSynth) {
    currentSynth.stopMIDI();
  }

  // Create a new synth instance
  currentSynth = new WebAudioMidi({
    voices: 64,
    useReverb: 1,
    quality: 1
  });


  currentSynth.loadMIDIUrl('data:audio/midi;base64,'+CURRENT_MIDI_FILE);

  // Set up UI controls to use the new synth
  setupSynthControls(currentSynth);

  // Auto-play after loading
  setTimeout(() => {
    currentSynth.playMIDI();
  }, 500);
}

// Helper function to update UI controls for a synth instance
function setupSynthControls(synth) {
  // Update the global synth reference for other functions
  window.synth = synth;

  // Update the status display
  const statusInterval = setInterval(function(){
    var st = synth.getPlayStatus();
    document.getElementById("status").innerHTML = "Play:" + st.play + "  Pos:" + st.curTick + "/" + st.maxTick;
  }, 100);

  // Store the interval ID so we can clear it later
  if (window.statusInterval) {
    clearInterval(window.statusInterval);
  }
  window.statusInterval = statusInterval;

  // Update the program select options
  const progSelect = document.getElementById("prog");
  progSelect.innerHTML = ''; // Clear existing options

  for(var i = 0; i < 128; ++i){
    var o = document.createElement("option");
    o.value = i;
    o.innerHTML = synth.getTimbreName(0, i);
    progSelect.appendChild(o);
  }

  // Update event handlers for the new synth
  progSelect.onchange = function() {
    synth.send([0xc0, parseInt(this.value)]);
  };
}

// Update the existing playMidi and stopMidi functions
function playMidi() {
  if (currentSynth) {
    currentSynth.playMIDI();
  }
}

function stopMidi() {
  if (currentSynth) {
    currentSynth.stopMIDI();
  }
}

// Update the Init function
function dInit() {
  // Create initial synth instance
  //currentSynth = new WebAudioMidi({voices: 64});
  //setupSynthControls(currentSynth);
}

// Update the Test function to use current synth
function Test() {
  if (currentSynth) {
    var o = currentSynth.getAudioContext().createOscillator();
    o.connect(currentSynth.getAudioContext().destination);
    o.start(0);
    o.stop(currentSynth.getAudioContext().currentTime + 1);
    console.log(currentSynth);
  }
}

// Also update the event handlers in your HTML to use these functions:
// Replace the inline handlers with these function calls

// In your HTML body, update the controls:
/*
Loop: <input type="checkbox" id="loopCheckbox" onchange="toggleLoop(this.checked)"/><br>
MasterVol<br>
<input type="range" id="masterVolSlider" value="50" min="0" max="100" oninput="updateMasterVol(this.value)"/><br>
ReverbLev<br>
<input type="range" id="reverbSlider" value="50" min="0" max="100" oninput="updateReverb(this.value)"/><br>
*/

// Add these helper functions:
function toggleLoop(checked) {
  if (currentSynth) {
    currentSynth.setLoop(checked ? 1 : 0);
  }
}

function updateMasterVol(value) {
  if (currentSynth) {
    currentSynth.setMasterVol(value / 100);
  }
}

function updateReverb(value) {
  if (currentSynth) {
    currentSynth.setReverbLev(value / 100);
  }
}

// And update the quality select:
function updateQuality() {
  const select = document.getElementById("qualitySelect");
  if (currentSynth) {
    currentSynth.setQuality(select.selectedIndex);
  }
}

function flo(){
   log('Genre now: '+document.getElementById('enil2').innerHTML+ '('+ctrl.ruleNumber.value+') '+maintis+' ['+twoDCaCounter+'] playing... ' );	

}




</script>



<div style='display:none'>
<div style='display:none'>

    <canvas id="videoCanvas"></canvas>
    
    <!-- Chorus Indicator -->
    <div class="chorus-indicator" id="chorusIndicator">🎵 CHORUS!</div>
    
    <!-- Simplified Player -->
    <div id="simplePlayer">
        <div class="player-title" id="playerTitle">Muziek Speler</div>
        <div class="player-controls">
            <button class="player-btn" id="simplePlayBtn" title="Play">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M3 2v12l10-6z"/>
                </svg>
            </button>
            <button class="player-btn stop" id="simpleStopBtn" title="Stop">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <rect width="12" height="12" x="2" y="2"/>
                </svg>
            </button>
            <button class="player-btn skip" id="simpleSkipBtn" title="Skip">
                <svg width="10" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M3 2v12l10-6z"/>
                </svg>
                <svg width="10" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M3 2v12l10-6z"/>
                </svg>
            </button>
            <button class="player-btn menu" id="menuToggleBtn" title="Show Controls">
                <span class="menu-bar"></span>
                <span class="menu-bar"></span>
                <span class="menu-bar"></span>
            </button>
        </div>
    </div>

    <!-- Full Control Panel -->
    <div class="panel" id="audioPanel">
        <button class="close-panel" id="closePanelBtn">×</button>
      <h1 style="font-size: 1.2rem; color: #e8efff; opacity: 0.8; margin-left: 15px;">Non Free Music News App</h1>
        <div class="row">
            <label>Genre:</label>
            <select id="genreSelect">
                <!-- Options will be populated by JavaScript -->
            </select>
            <label>Active roles (random 2–4):</label>
            <select id="roleMode">
                <option value="random24">Random 2–4 roles</option>
                <option value="all">All roles on</option>
                <option value="all">All roles on</option>
                <option value="leadBass">Lead + Bass</option>
                <option value="leadChords">Lead + Chords</option>
                <option value="bassDrums">Bass + Drums</option>
            </select>
            <label>
                <input id="playAudio" type="checkbox" checked>Play audio preview
            </label>
        </div>
        <div class="row">
            <label for="radialSelect" style='display:none'>Kies Radiaal:</label>
            <select id="radialSelect" style='display:none'>
                <option value="1" selected>Radiaal 1 (3 buren: Links, Centrum, Rechts)</option>
                <option value="2">Radiaal 2 (5 buren: 2L, 1L, Centrum, 1R, 2R)</option>
            </select>
            <label>Rule:</label>
            <input id="ruleNumber" value="110">
            <label>Seed:</label>
            <input id="seed" type="text" value="Gouda-001">
			<script>
			        document.getElementById('seed').value = "Gouda-" + Math.round(10000000000 * wielsieder());
			</script>
            <label>Height:</label>
            <input id="height" type="number" min="16" max="1024" value="128">
            <label>Width:</label>
            <input id="width" type="number" min="16" max="1024" value="128">
            <label>
                <input id="cyclic" type="checkbox" checked>Cyclic boundaries
            </label>
            <label>
                <input id="showEvolution" type="checkbox">CA overlay
            </label>
        </div>
        <div class="row">
            <label>Tempo (BPM):</label>
            <input id="bpm" type="number" min="40" max="220" value="110">
            <label>Notes/beat:</label>
            <input id="notesPerBeat" type="number" min="1" max="8" value="2">
            <label>Duration (s):</label>
            <input id="durationSec" type="number" min="5" max="120" value="60">
        </div>
        <div class="row">
            <label>SoundFont:</label>
            <div class="file-input-wrapper">
                <button class="btn soundfont" id="loadSoundfontBtn">Load SF2 File</button>
                <input type="file" id="soundfontFile" accept=".sf2">
            </div>
            <label>Reverb:</label>
            <input id="reverbMix" type="range" min="0" max="1" step="0.05" value="0.4">
            <label>Filter (Hz):</label>
            <input id="filterHz" type="number" min="100" max="12000" value="1800">
        </div>
        <div class="instrument-controls" id="instrumentControls">
            <div class="instrument-control">
                <label>Lead Instrument:</label>
                <select id="leadInstrument">
                    <!-- Options will be populated by JavaScript -->
                </select>
            </div>
            <div class="instrument-control">
                <label>Bass Instrument:</label>
                <select id="bassInstrument">
                    <!-- Options will be populated by JavaScript -->
                </select>
            </div>
            <div class="instrument-control">
                <label>Chords Instrument:</label>
                <select id="chordsInstrument">
                    <!-- Options will be populated by JavaScript -->
                </select>
            </div>
            <div class="instrument-control">
                <label>Drums Kit:</label>
                <select id="drumsKit">
                    <option value="0">Standard Kit</option>
                    <option value="8">Room Kit</option>
                    <option value="16">Power Kit</option>
                    <option value="24">Electronic Kit</option>
                </select>
            </div>
        </div>
        <div class="row">
            <button class="btn" id="generateBtn" style="background-color:#1e88e5">
                Generate 
                <svg width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M3 2v12l10-6z"></path>
                </svg>
            </button>
            <button class="btn secondary" id="nextVariationBtn">Next variation</button>
            <button class="btn secondary" id="randomizeBtn">Randomize</button>
            <button class="btn secondary" id="downloadMidiBtn">Download MIDI</button>
            <button class="btn secondary" id="wolframTonesBtn" style='display:none'>CATones mode</button>
            <button class="btn stop" id="stopBtnn" style='display:none'>Stop Playback</button>
            <button class="btn auto-play" id="autoPlayBtn" style='display:none'>Auto-Play</button>
        </div>
        <div class="status" id="statusText">Ready.</div>
        <div class="loading-bar" id="loadingBar" style="display: none;">
            <div class="loading-progress" id="loadingProgress"></div>
        </div>
        <div class="soundfont-info" id="soundfontInfo">No SoundFont loaded. Click "Load SF2 File" to upload a SoundFont for enhanced audio.</div>
        <div class="small">Genres bepalen toonladder, root, rolbereik, ritme en instrumentstijl. MIDI export maakt een standaard SMF met meerdere tracks.</div>
    </div>
</div>


	
	<iframe id='xyz7'  style='border:none;position:fixed;left:0;top:0;width:100%;height:100%;opacity:.5' srcdoc="
	
	"></iframe>
<iframe id='xyz'  style='border:none;position:fixed;left:0;top:0;width:100%;height:100%'></iframe>
    <script>
	
	
	
	imgg="";
	var imgl=imgg.split("<br>");
	
        // ==================== UI CONTROLS ====================
        const simplePlayer = document.getElementById('simplePlayer');
        const playerTitle = document.getElementById('playerTitle');
        const simplePlayBtn = document.getElementById('simplePlayBtn');
        const simpleStopBtn = document.getElementById('simpleStopBtn');
        const menuToggleBtn = document.getElementById('menuToggleBtn');
        const audioPanel = document.getElementById('audioPanel');
        const closePanelBtn = document.getElementById('closePanelBtn');
        const genreSelect = document.getElementById('genreSelect');
        const autoPlayBtn = document.getElementById('autoPlayBtn');
        //nnconst stopBtn = document.getElementById('stopBtn');
        const skipBtn = document.getElementById('simpleSkipBtn');
        const chorusIndicator = document.getElementById('chorusIndicator');

        // Update player title based on genre selection
        genreSelect.addEventListener('change', function() {
            playerTitle.textContent = this.options[this.selectedIndex].text;
        });

        // Toggle between simple and full control modes
        menuToggleBtn.addEventListener('click', function() {
            audioPanel.classList.add('active');
        });

        closePanelBtn.addEventListener('click', function() {
            audioPanel.classList.remove('active');
        });

        var rstarted = 0;
        // Connect simple player buttons to full control buttons
        simplePlayBtn.addEventListener('click', function() {
            if(rstarted == 0){
                setTimeout(() => {
                    rstarted = 1;
                    loadInlineSoundFont().catch(console.error);
                    autoPlayBtn.click();
                    setTimeout(() => {
                       // stopBtn.click();
                    }, 250);
                }, 1500);
            } else {
                autoPlayBtn.click();
            }
        });

        simpleStopBtn.addEventListener('click', function() {
            //stopBtn.click();
        });

        simpleSkipBtn.addEventListener('click', function() {
           // stopBtn.click();
            setTimeout(() => autoPlayBtn.click(), 500);
        });

        // Initialize player title


        // Simulate some functionality for demonstration
        autoPlayBtn.addEventListener('click', function() {
            document.getElementById('statusText').textContent = 'Playing...';
        });
/*
        stopBtn.addEventListener('click', function() {
            document.getElementById('statusText').textContent = 'Stopped.';
        });
		*/

        // ==================== CORE APPLICATION ====================
        const canvas = document.getElementById('videoCanvas');
        //const ctx = canvas.getContext('2d');
        //canvas.width = 1280;
        //canvas.height = 720;

        let currentRadial = 1;
        const rultypeRad2 = [5901188200, 6132266537, 5989082269, 3939909810, 2187097860, 5614370765, 5272673556, 1780478520, 720581818, 1377414797, 1226447482, 4048539824, 5125853076, 2812885758, 529315828, 4287755508, 5126404892, 280217644, 3998813487, 431643732, 4156513646, 3147094149, 3353215924, 5031890556];
        const radialSelect = document.getElementById('radialSelect');
        let variationIndex = Math.round(Math.random()*1000000000000);
        let currentRuleTypeArray = [2, 4, 6, 7, 8, 10, 11, 12, 16, 19, 27, 28, 29, 30, 31, 32, 34, 46, 55, 61, 62, 63, 66, 74, 76, 83, 86, 87, 90, 91, 98, 102, 103, 106, 107, 108, 110, 111, 121, 123, 125, 127, 130, 136, 138, 147, 148, 150, 151, 152, 154, 155, 162, 166, 167, 168, 170, 183, 184, 194, 196, 226];

        radialSelect.addEventListener('change', (event) => {
            currentRadial = parseInt(event.target.value, 10);
            console.log(`Nieuwe Radiaal: ${currentRadial}`);
            if (currentRadial === 2) {
                currentRuleTypeArray = rultypeRad2;
                console.log('Regels ingesteld op rultypeRad2.');
            } else {
                console.log('Regels ingesteld op Radiaal 1 array.');
            }
        });

        // Set random seed
        document.getElementById('seed').value = "Gouda-" + Math.round(1000000 * wielsieder());

        // Control elements
        const statusText = document.getElementById('statusText');
        const soundfontInfo = document.getElementById('soundfontInfo');
        const loadingBar = document.getElementById('loadingBar');
        const loadingProgress = document.getElementById('loadingProgress');
        const ctrl = {
            genreSelect: document.getElementById('genreSelect'),
            roleMode: document.getElementById('roleMode'),
            playAudio: document.getElementById('playAudio'),
            ruleNumber: document.getElementById('ruleNumber'),
            seed: document.getElementById('seed'),
            height: document.getElementById('height'),
            width: document.getElementById('width'),
            cyclic: document.getElementById('cyclic'),
            radialSelect: document.getElementById('radialSelect'),
            showEvolution: document.getElementById('showEvolution'),
            bpm: document.getElementById('bpm'),
            notesPerBeat: document.getElementById('notesPerBeat'),
            durationSec: document.getElementById('durationSec'),
            soundfontFile: document.getElementById('soundfontFile'),
            loadSoundfontBtn: document.getElementById('loadSoundfontBtn'),
            leadInstrument: document.getElementById('leadInstrument'),
            bassInstrument: document.getElementById('bassInstrument'),
            chordsInstrument: document.getElementById('chordsInstrument'),
            drumsKit: document.getElementById('drumsKit'),
            reverbMix: document.getElementById('reverbMix'),
            filterHz: document.getElementById('filterHz'),
            generateBtn: document.getElementById('generateBtn'),
            nextVariationBtn: document.getElementById('nextVariationBtn'),
            randomizeBtn: document.getElementById('randomizeBtn'),
            downloadMidiBtn: document.getElementById('downloadMidiBtn'),
            wolframTonesBtn: document.getElementById('wolframTonesBtn'),
            //stopBtn: document.getElementById('stopBtn'),
            autoPlayBtn: document.getElementById('autoPlayBtn'),
        };

        // ==================== CHORUS ENHANCEMENT SYSTEM ====================
        class ChorusEnhancer {
            constructor() {
                this.currentSection = 'verse';
                this.sectionSteps = 0;
                this.sectionLength = 16; // steps per section
                this.songStructure = ['intro', 'verse', 'pre-chorus', 'chorus', 'verse', 'pre-chorus', 'chorus', 'bridge', 'chorus', 'outro'];
                this.structureIndex = 0;
                this.chorusBoost = {
                    volume: 1.3,
                    density: 1.4,
                    complexity: 1.5,
                    eq: { low: 1.1, mid: 1.4, high: 1.2 }
                };
            }

            advanceSection() {
                this.sectionSteps = 0;
                this.structureIndex = (this.structureIndex + 1) % this.songStructure.length;
                this.currentSection = this.songStructure[this.structureIndex];
                
                // Show chorus indicator
                if (this.currentSection === 'chorus') {
                    this.showChorusIndicator();
                }
                
                console.log(`🎵 Section: ${this.currentSection.toUpperCase()}`);
                return this.currentSection;
            }

            showChorusIndicator() {
                chorusIndicator.classList.add('active');
                setTimeout(() => {
                    chorusIndicator.classList.remove('active');
                }, 2000);
            }

            getSectionMultipliers() {
                const isChorus = this.currentSection === 'chorus';
                const isPreChorus = this.currentSection === 'pre-chorus';
                
                if (isChorus) {
                    return {
                        volume: this.chorusBoost.volume,
                        density: this.chorusBoost.density,
                        complexity: this.chorusBoost.complexity,
                        velocity: 1.2,
                        duration: 1.1
                    };
                } else if (isPreChorus) {
                    return {
                        volume: 1.1,
                        density: 1.2,
                        complexity: 1.1,
                        velocity: 1.0,
                        duration: 1.0
                    };
                } else {
                    return {
                        volume: 1.0,
                        density: 1.0,
                        complexity: 1.0,
                        velocity: 0.8,
                        duration: 0.9
                    };
                }
            }

            step() {
                this.sectionSteps++;
                if (this.sectionSteps >= this.sectionLength) {
                    this.advanceSection();
                }
            }

            applyChorusEffects(events, role) {
                const multipliers = this.getSectionMultipliers();
                const isChorus = this.currentSection === 'chorus';
                
                return events.map(event => {
                    const enhancedEvent = { ...event };
                    
                    // Volume/velocity boost in chorus
                    enhancedEvent.vel = Math.min(1.0, event.vel * multipliers.velocity);
                    
                    // Longer notes in chorus for more epic feel
                    if (isChorus && role !== 'drums') {
                        enhancedEvent.dur = event.dur * multipliers.duration;
                    }
                    
                    // More complex patterns in chorus
                    if (isChorus && wielsieder() < 0.3) {
                        enhancedEvent.midi = enhancedEvent.midi + (wielsieder() < 0.5 ? 1 : -1);
                    }
                    
                    return enhancedEvent;
                });
            }
        }

        const chorusEnhancer = new ChorusEnhancer();


        // ==================== GENRE DEFINITIONS WITH EXPANDED INSTRUMENTS ====================





const GM_INSTRUMENTS = [
    "000: Acoustic Grand Piano",
    "001: Bright Acoustic Piano",
    "002: Electric Grand Piano",
    "003: Honky-tonk Piano",
    "004: Electric Piano 1",
    "005: Electric Piano 2",
    "006: Harpsichord",
    "007: Clavinet",
    "008: Celesta",
    "009: Glockenspiel",
    "010: Music Box",
    "011: Vibraphone",
    "012: Marimba",
    "013: Xylophone",
    "014: Tubular Bells",
    "015: Dulcimer",
    "016: Drawbar Organ",
    "017: Percussive Organ",
    "018: Rock Organ",
    "019: Church Organ",
    "020: Reed Organ",
    "021: Accordion",
    "022: Harmonica",
    "023: Tango Accordion",
    "024: Acoustic Guitar (nylon)",
    "025: Acoustic Guitar (steel)",
    "026: Electric Guitar (jazz)",
    "027: Electric Guitar (clean)",
    "028: Electric Guitar (muted)",
    "029: Overdriven Guitar",
    "030: Distortion Guitar",
    "031: Guitar Harmonics",
    "032: Acoustic Bass",
    "033: Electric Bass (finger)",
    "034: Electric Bass (pick)",
    "035: Fretless Bass",
    "036: Slap Bass 1",
    "037: Slap Bass 2",
    "038: Synth Bass 1",
    "039: Synth Bass 2",
    "040: Violin",
    "041: Viola",
    "042: Cello",
    "043: Contrabass",
    "044: Tremolo Strings",
    "045: Pizzicato Strings",
    "046: Orchestral Harp",
    "047: Timpani",
    "048: String Ensemble 1",
    "049: String Ensemble 2",
    "050: SynthStrings 1",
    "051: SynthStrings 2",
    "052: Choir Aahs",
    "053: Voice Oohs",
    "054: Synth Voice",
    "055: Orchestra Hit",
    "056: Trumpet",
    "057: Trombone",
    "058: Tuba",
    "059: Muted Trumpet",
    "060: French Horn",
    "061: Brass Section",
    "062: Synth Brass 1",
    "063: Synth Brass 2",
    "064: Soprano Sax",
    "065: Alto Sax",
    "066: Tenor Sax",
    "067: Baritone Sax",
    "068: Oboe",
    "069: English Horn",
    "070: Bassoon",
    "071: Clarinet",
    "072: Piccolo",
    "073: Flute",
    "074: Recorder",
    "075: Pan Flute",
    "076: Blown Bottle",
    "077: Shakuhachi",
    "078: Whistle",
    "079: Ocarina",
    "080: Lead 1 (square)",
    "081: Lead 2 (sawtooth)",
    "082: Lead 3 (calliope)",
    "083: Lead 4 (chiff)",
    "084: Lead 5 (charang)",
    "085: Lead 6 (voice)",
    "086: Lead 7 (fifths)",
    "087: Lead 8 (bass+lead)",
    "088: Pad 1 (new age)",
    "089: Pad 2 (warm)",
    "090: Pad 3 (polysynth)",
    "091: Pad 4 (choir)",
    "092: Pad 5 (bowed)",
    "093: Pad 6 (metallic)",
    "094: Pad 7 (halo)",
    "095: Pad 8 (sweep)",
    "096: FX 1 (rain)",
    "097: FX 2 (soundtrack)",
    "098: FX 3 (crystal)",
    "099: FX 4 (atmosphere)",
    "100: FX 5 (brightness)",
    "101: FX 6 (goblins)",
    "102: FX 7 (echoes)",
    "103: FX 8 (sci-fi)",
    "104: Sitar",
    "105: Banjo",
    "106: Shamisen",
    "107: Koto",
    "108: Kalimba",
    "109: Bagpipe",
    "110: Fiddle",
    "111: Shanai",
    "112: Tinkle Bell",
    "113: Agogo",
    "114: Steel Drums",
    "115: Woodblock",
    "116: Taiko Drum",
    "117: Melodic Tom",
    "118: Synth Drum",
    "119: Reverse Cymbal",
    "120: Guitar Fret Noise",
    "121: Breath Noise",
    "122: Seashore",
    "123: Bird Tweet",
    "124: Telephone Ring",
    "125: Helicopter",
    "126: Applause",
    "127: Gunshot"
];





var GENRES = [
    {
  "name": "Glitch Capitalism",
  "scale": "hyper_exploitation",
  "root": "F#",
  "bpm": 155,
  "roles": {
    "lead": { "oct": [5, 6] },
    "bass": { "oct": [1, 2] },
    "chords": { "oct": [3, 4] },
    "drums": { "kit": "industrial" }
  },
  "wave": "square",
  "instruments": { "lead": 87, "bass": 39, "chords": 97 },
  "leadOptions": [87, 81, 30, 102, 118],
  "bassOptions": [39, 38, 81, 110],
  "chordsOptions": [97, 91, 98, 101]
},
    {
        name: 'Ambient',
        scale: 'dorian',
        root: 'D',
        bpm: 80,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2, 3] },
            chords: { oct: [3, 4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 88, bass: 35, chords: 92 },
        leadOptions: [88, 89, 92, 94, 73, 5, 90, 91, 95, 102, 99, 52, 53, 54, 96],
        bassOptions: [35, 32, 43, 36, 37, 38, 39, 87, 48, 49, 34, 33, 45, 46],
        chordsOptions: [92, 88, 48, 51, 5, 89, 90, 94, 95, 52, 53, 102, 99, 96, 97]
    },
    {
        name: 'Techno',
        scale: 'chromatic',
        root: 'C',
        bpm: 128,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 39, chords: 62 },
        leadOptions: [81, 80, 86, 62, 90, 87, 84, 85, 95, 102, 103, 82, 83, 104, 105],
        bassOptions: [39, 38, 87, 36, 37, 35, 81, 86, 85, 84, 83, 82, 104, 105],
        chordsOptions: [62, 90, 80, 18, 19, 17, 81, 87, 95, 102, 103, 104, 105, 106, 107]
    },
    {
        name: 'House',
        scale: 'major',
        root: 'G',
        bpm: 124,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '707' }
        },
        wave: 'triangle',
        instruments: { lead: 80, bass: 33, chords: 17 },
        leadOptions: [80, 4, 86, 81, 62, 5, 87, 90, 88, 89, 95, 82, 83, 84, 85],
        bassOptions: [33, 35, 38, 32, 34, 36, 37, 39, 87, 86, 85, 84, 83, 82],
        chordsOptions: [4, 5, 17, 90, 62, 16, 18, 19, 88, 89, 92, 93, 94, 95, 96]
    },
    {
        name: 'Trance',
        scale: 'major',
        root: 'D',
        bpm: 138,
        roles: {
            lead: { oct: [6] },
            bass: { oct: [2, 3] },
            chords: { oct: [4, 5] },
            drums: { kit: '909' }
        },
        wave: 'sawtooth',
        instruments: { lead: 86, bass: 39, chords: 95 },
        leadOptions: [86, 81, 95, 84, 90, 87, 85, 82, 83, 102, 103, 104, 105, 106, 107],
        bassOptions: [39, 38, 87, 36, 37, 81, 86, 85, 84, 83, 82, 104, 105, 106],
        chordsOptions: [95, 90, 94, 88, 89, 91, 92, 102, 103, 99, 100, 101, 104, 105, 106]
    },
    {
        name: 'Drum&Bass',
        scale: 'minor',
        root: 'B',
        bpm: 170,
        roles: {
            lead: { oct: [6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'amen' }
        },
        wave: 'sine',
        instruments: { lead: 62, bass: 87, chords: 50 },
        leadOptions: [62, 39, 87, 81, 50, 51, 86, 85, 84, 102, 103, 104, 105, 106, 107],
        bassOptions: [87, 39, 38, 36, 37, 35, 81, 86, 85, 84, 83, 82, 104, 105, 106],
        chordsOptions: [50, 51, 90, 91, 92, 93, 94, 95, 102, 103, 104, 105, 106, 107, 108]
    },
    {
        name: 'Dubstep',
        scale: 'phrygian',
        root: 'E',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'square',
        instruments: { lead: 87, bass: 39, chords: 118 },
        leadOptions: [87, 81, 62, 118, 86, 85, 84, 83, 102, 103, 104, 105, 106, 107],
        bassOptions: [39, 38, 87, 36, 37, 81, 86, 85, 84, 83, 82, 104, 105, 106],
        chordsOptions: [118, 87, 62, 97, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111]
    },
    {
        name: 'Pop',
        scale: 'major',
        root: 'C',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'pop' }
        },
        wave: 'sine',
        instruments: { lead: 5, bass: 33, chords: 25 },
        leadOptions: [5, 4, 73, 27, 48, 49, 52, 53, 1, 2, 6, 7, 8, 9, 10],
        bassOptions: [33, 34, 38, 32, 35, 36, 37, 39, 43, 44, 45, 46, 47, 48],
        chordsOptions: [25, 27, 5, 4, 1, 0, 2, 6, 7, 16, 17, 18, 19, 20, 21]
    },
    {
        name: 'Rock',
        scale: 'minor',
        root: 'E',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 30 },
        leadOptions: [30, 29, 34, 18, 66, 67, 27, 28, 31, 25, 26, 32, 33, 35, 36],
        bassOptions: [34, 33, 35, 32, 36, 37, 38, 39, 43, 44, 45, 46, 47, 48],
        chordsOptions: [30, 29, 18, 17, 19, 27, 28, 25, 26, 16, 20, 21, 22, 23, 24]
    },
    {
        name: 'Metal',
        scale: 'phrygian',
        root: 'E',
        bpm: 150,
        roles: {
            lead: { oct: [6] },
            bass: { oct: [1, 2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'metal' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 30 },
        leadOptions: [30, 29, 34, 61, 87, 86, 85, 84, 83, 82, 81, 80, 79, 78],
        bassOptions: [34, 39, 33, 32, 36, 37, 38, 35, 43, 44, 45, 46, 47, 48],
        chordsOptions: [30, 29, 18, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71]
    },
    {
        name: 'Jazz',
        scale: 'dorian',
        root: 'G',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'jazz' }
        },
        wave: 'sine',
        instruments: { lead: 65, bass: 32, chords: 26 },
        leadOptions: [65, 66, 56, 4, 11, 12, 13, 64, 67, 71, 73, 74, 75, 76, 77],
        bassOptions: [32, 35, 43, 33, 34, 36, 37, 38, 39, 40, 41, 42, 44, 45],
        chordsOptions: [26, 4, 16, 5, 0, 1, 2, 6, 7, 17, 18, 19, 20, 21, 22]
    },
    {
        name: 'Blues',
        scale: 'pentatonic',
        root: 'A',
        bpm: 100,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'blues' }
        },
        wave: 'triangle',
        instruments: { lead: 66, bass: 33, chords: 17 },
        leadOptions: [66, 27, 30, 22, 17, 16, 18, 19, 20, 21, 23, 24, 25, 26],
        bassOptions: [33, 34, 32, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45],
        chordsOptions: [17, 16, 4, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]
    },
    {
        name: 'Funk',
        scale: 'dorian',
        root: 'D',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'funk' }
        },
        wave: 'triangle',
        instruments: { lead: 27, bass: 36, chords: 4 },
        leadOptions: [27, 36, 4, 65, 34, 35, 37, 38, 39, 40, 41, 42, 43, 44],
        bassOptions: [36, 37, 33, 34, 35, 38, 39, 40, 41, 42, 43, 44, 45, 46],
        chordsOptions: [4, 5, 27, 7, 6, 8, 9, 10, 11, 12, 13, 14, 15, 16]
    },
    {
        name: 'Reggae',
        scale: 'major',
        root: 'C',
        bpm: 74,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'reggae' }
        },
        wave: 'sine',
        instruments: { lead: 22, bass: 33, chords: 17 },
        leadOptions: [22, 35, 25, 66, 17, 16, 18, 19, 20, 21, 23, 24, 26, 27],
        bassOptions: [33, 35, 39, 32, 34, 36, 37, 38, 40, 41, 42, 43, 44, 45],
        chordsOptions: [17, 24, 25, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
    },
    {
        name: 'Afrobeats',
        scale: 'major',
        root: 'F',
        bpm: 108,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'afro' }
        },
        wave: 'sine',
        instruments: { lead: 75, bass: 39, chords: 24 },
        leadOptions: [75, 73, 113, 24, 108, 109, 110, 111, 112, 114, 115, 116, 117, 118],
        bassOptions: [39, 32, 33, 34, 35, 36, 37, 38, 40, 41, 42, 43, 44, 45],
        chordsOptions: [24, 25, 4, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124]
    },
    {
        name: 'Salsa',
        scale: 'major',
        root: 'C',
        bpm: 180,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'latin' }
        },
        wave: 'triangle',
        instruments: { lead: 56, bass: 33, chords: 0 },
        leadOptions: [56, 21, 114, 73, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
        bassOptions: [33, 32, 35, 34, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45],
        chordsOptions: [0, 4, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32]
    },
    {
        name: 'Klezmer',
        scale: 'phrygian',
        root: 'D',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'folk' }
        },
        wave: 'triangle',
        instruments: { lead: 21, bass: 32, chords: 40 },
        leadOptions: [21, 40, 71, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120],
        bassOptions: [32, 58, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54],
        chordsOptions: [40, 48, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32]
    },
    {
        name: 'Indian Raga',
        scale: 'phrygian',
        root: 'C',
        bpm: 96,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2, 3] },
            chords: { oct: [3, 4] },
            drums: { kit: 'tabla' }
        },
        wave: 'sine',
        instruments: { lead: 104, bass: 105, chords: 107 },
        leadOptions: [104, 107, 77, 106, 105, 108, 109, 110, 111, 112, 113, 114, 115, 116],
        bassOptions: [105, 43, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 44],
        chordsOptions: [107, 104, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99]
    },
    {
        name: 'Middle Eastern',
        scale: 'phrygian',
        root: 'D',
        bpm: 112,
        roles: {
            lead: { oct: [6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'daf' }
        },
        wave: 'triangle',
        instruments: { lead: 111, bass: 32, chords: 106 },
        leadOptions: [111, 106, 104, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85],
        bassOptions: [32, 43, 35, 36, 37, 38, 39, 40, 41, 42, 44, 45, 46, 47],
        chordsOptions: [106, 104, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59]
    },
    {
        name: 'Lo-Fi',
        scale: 'minor',
        root: 'G',
        bpm: 72,
        roles: {
            lead: { oct: [4] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'lofi' }
        },
        wave: 'sine',
        instruments: { lead: 4, bass: 33, chords: 89 },
        leadOptions: [4, 5, 89, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83],
        bassOptions: [33, 32, 39, 34, 35, 36, 37, 38, 40, 41, 42, 43, 44, 45],
        chordsOptions: [89, 4, 5, 1, 2, 3, 6, 7, 8, 9, 10, 11, 12, 13]
    },
    {
        name: 'Experimental',
        scale: 'chromatic',
        root: 'C',
        bpm: 100,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'glitch' }
        },
        wave: 'square',
        instruments: { lead: 85, bass: 39, chords: 97 },
        leadOptions: [85, 97, 102, 118, 99, 100, 101, 103, 104, 105, 106, 107, 108, 109],
        bassOptions: [39, 38, 87, 86, 85, 84, 83, 82, 81, 80, 79, 78, 77, 76],
        chordsOptions: [97, 102, 99, 90, 91, 92, 93, 94, 95, 96, 98, 100, 101, 103]
    },
    {
        name: 'Chiptune',
        scale: 'major',
        root: 'C',
        bpm: 130,
        roles: {
            lead: { oct: [6] },
            bass: { oct: [2, 3] },
            chords: { oct: [4] },
            drums: { kit: 'chips' }
        },
        wave: 'square',
        instruments: { lead: 80, bass: 81, chords: 90 },
        leadOptions: [80, 81, 86, 82, 83, 84, 85, 87, 88, 89, 90, 91, 92, 93],
        bassOptions: [81, 38, 39, 80, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91],
        chordsOptions: [90, 80, 81, 88, 89, 91, 92, 93, 94, 95, 96, 97, 98, 99]
    },
    {
        name: 'Ribab (Rwira)',
        scale: 'pentatonic',
        root: 'A',
        bpm: 105,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'daf' }
        },
        wave: 'triangle',
        instruments: { lead: 110, bass: 35, chords: 25 },
        leadOptions: [110, 105, 104, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35],
        bassOptions: [35, 32, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54],
        chordsOptions: [25, 24, 73, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117]
    },
    {
        name: 'Rai',
        scale: 'phrygian',
        root: 'D',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'afro' }
        },
        wave: 'sawtooth',
        instruments: { lead: 66, bass: 33, chords: 21 },
        leadOptions: [66, 75, 21, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121],
        bassOptions: [33, 34, 36, 35, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46],
        chordsOptions: [21, 24, 17, 18, 19, 20, 22, 23, 25, 26, 27, 28, 29, 30]
    },
    {
        name: 'Chinese Classical',
        scale: 'pentatonic',
        root: 'G',
        bpm: 72,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [3, 4] },
            chords: { oct: [4, 5] },
            drums: { kit: 'chinese' }
        },
        wave: 'sine',
        instruments: { lead: 111, bass: 117, chords: 112 },
        leadOptions: [111, 106, 105, 104, 107, 108, 109, 110, 112, 113, 114, 115, 116, 117],
        bassOptions: [117, 107, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43],
        chordsOptions: [112, 107, 106, 105, 104, 108, 109, 110, 111, 113, 114, 115, 116, 117]
    },
    {
        name: 'Chinese Traditional',
        scale: 'pentatonic',
        root: 'C',
        bpm: 88,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2, 3] },
            chords: { oct: [3, 4] },
            drums: { kit: 'chinese_traditional' }
        },
        wave: 'triangle',
        instruments: { lead: 106, bass: 32, chords: 107 },
        leadOptions: [106, 105, 111, 104, 107, 108, 109, 110, 112, 113, 114, 115, 116, 117],
        bassOptions: [32, 117, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54],
        chordsOptions: [107, 112, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35]
    },
    {
        name: 'Oriental',
        scale: 'phrygian',
        root: 'E',
        bpm: 120,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'tabla' }
        },
        wave: 'sine',
        instruments: { lead: 111, bass: 43, chords: 104 },
        leadOptions: [111, 104, 106, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85],
        bassOptions: [43, 32, 35, 36, 37, 38, 39, 40, 41, 42, 44, 45, 46, 47],
        chordsOptions: [104, 106, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59]
    },
    {
        name: 'Bluegrass',
        scale: 'major',
        root: 'G',
        bpm: 160,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'folk' }
        },
        wave: 'triangle',
        instruments: { lead: 105, bass: 32, chords: 110 },
        leadOptions: [105, 110, 25, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
        bassOptions: [32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45],
        chordsOptions: [110, 105, 25, 24, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35]
    },
    {
        name: 'Cinematic',
        scale: 'minor',
        root: 'A',
        bpm: 96,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'orchestral' }
        },
        wave: 'sine',
        instruments: { lead: 40, bass: 43, chords: 48 },
        leadOptions: [40, 44, 46, 56, 52, 97, 41, 42, 45, 47, 48, 49, 50, 51],
        bassOptions: [43, 32, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69],
        chordsOptions: [48, 49, 55, 14, 52, 53, 54, 56, 57, 58, 59, 60, 61, 62]
    },
    {
        name: 'Synthwave',
        scale: 'minor',
        root: 'F',
        bpm: 110,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'electro' }
        },
        wave: 'sawtooth',
        instruments: { lead: 86, bass: 38, chords: 90 },
        leadOptions: [86, 81, 80, 62, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104],
        bassOptions: [38, 39, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92],
        chordsOptions: [90, 88, 89, 4, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72]
    },
    {
        name: 'Trap',
        scale: 'minor',
        root: 'F',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'triangle',
        instruments: { lead: 81, bass: 87, chords: 88 },
        leadOptions: [81, 80, 87, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72],
        bassOptions: [87, 39, 38, 86, 85, 84, 83, 82, 81, 80, 79, 78, 77, 76],
        chordsOptions: [88, 90, 81, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72]
    },
	{
        name: 'Samba',
        scale: 'major',
        root: 'D',
        bpm: 110,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2, 3] },
            chords: { oct: [4, 5] },
            drums: { kit: 'samba' }
        },
        wave: 'triangle',
        instruments: { lead: 73, bass: 32, chords: 24 },
        leadOptions: [73, 72, 74, 75, 65, 66, 56, 57, 21, 22, 114, 115],
        bassOptions: [32, 33, 34, 35, 36, 43, 44, 45],
        chordsOptions: [24, 25, 26, 16, 17, 18, 19, 20, 21, 22, 23]
    },
    {
        name: 'Tango',
        scale: 'harmonic minor',
        root: 'A',
        bpm: 120,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'tango' }
        },
        wave: 'sawtooth',
        instruments: { lead: 21, bass: 43, chords: 0 },
        leadOptions: [21, 23, 40, 41, 42, 68, 69, 71, 110, 111],
        bassOptions: [43, 32, 33, 34, 35, 36, 5, 6],
        chordsOptions: [0, 2, 6, 7, 16, 17, 18, 19, 20, 21, 22]
    },
    {
        name: 'Flamenco',
        scale: 'phrygian',
        root: 'E',
        bpm: 132,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2, 3] },
            chords: { oct: [3, 4] },
            drums: { kit: 'flamenco' }
        },
        wave: 'triangle',
        instruments: { lead: 24, bass: 32, chords: 24 },
        leadOptions: [24, 25, 26, 105, 106, 107, 40, 41, 73, 74],
        bassOptions: [32, 33, 35, 36, 43, 105, 106],
        chordsOptions: [24, 25, 26, 105, 106, 107, 16, 17, 18, 19, 20]
    },
    {
        name: 'Highlife',
        scale: 'major',
        root: 'F',
        bpm: 128,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'highlife' }
        },
        wave: 'sine',
        instruments: { lead: 27, bass: 36, chords: 17 },
        leadOptions: [27, 65, 66, 56, 57, 73, 74, 75, 113, 114],
        bassOptions: [36, 37, 33, 34, 35, 38, 39],
        chordsOptions: [17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27]
    },
    {
        name: 'Soukous',
        scale: 'major',
        root: 'G',
        bpm: 122,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'soukous' }
        },
        wave: 'triangle',
        instruments: { lead: 26, bass: 36, chords: 17 },
        leadOptions: [26, 27, 65, 66, 56, 73, 74, 113, 114, 115],
        bassOptions: [36, 37, 33, 34, 35, 38, 39],
        chordsOptions: [17, 18, 19, 20, 21, 22, 23, 24, 25, 26]
    },
    {
        name: 'Bhangra',
        scale: 'mixolydian',
        root: 'C',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'bhangra' }
        },
        wave: 'sawtooth',
        instruments: { lead: 104, bass: 38, chords: 52 },
        leadOptions: [104, 105, 106, 111, 77, 78, 16, 17, 18, 53],
        bassOptions: [38, 39, 33, 34, 35, 36, 37],
        chordsOptions: [52, 53, 16, 17, 18, 19, 20, 21, 22, 23, 24]
    },
    {
        name: 'Balkan Brass',
        scale: 'minor',
        root: 'G',
        bpm: 180,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'balkan' }
        },
        wave: 'square',
        instruments: { lead: 56, bass: 58, chords: 61 },
        leadOptions: [56, 57, 59, 60, 61, 62, 63, 64, 65, 66],
        bassOptions: [58, 43, 44, 45, 46, 47, 48, 34],
        chordsOptions: [61, 62, 63, 48, 49, 50, 51, 52, 53, 54, 55]
    },
    {
        name: 'Zydeco',
        scale: 'mixolydian',
        root: 'A',
        bpm: 132,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'zydeco' }
        },
        wave: 'triangle',
        instruments: { lead: 21, bass: 32, chords: 17 },
        leadOptions: [21, 22, 110, 105, 66, 67, 16, 17, 18],
        bassOptions: [32, 33, 34, 35, 36, 37, 38, 39],
        chordsOptions: [17, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26]
    },
    {
        name: 'Cumbia',
        scale: 'minor',
        root: 'A',
        bpm: 100,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'cumbia' }
        },
        wave: 'sine',
        instruments: { lead: 65, bass: 33, chords: 23 },
        leadOptions: [65, 66, 64, 56, 57, 21, 22, 23, 114, 115],
        bassOptions: [33, 34, 32, 35, 36, 37, 38, 39],
        chordsOptions: [23, 21, 22, 16, 17, 18, 19, 20, 24, 25, 26]
    },
    {
        name: 'Mariachi',
        scale: 'major',
        root: 'C',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'mariachi' }
        },
        wave: 'sawtooth',
        instruments: { lead: 56, bass: 43, chords: 25 },
        leadOptions: [56, 57, 59, 60, 65, 66, 64, 21, 22, 23],
        bassOptions: [43, 32, 33, 34, 35, 36, 5, 6],
        chordsOptions: [25, 26, 27, 16, 17, 18, 19, 20, 21, 22, 23]
    },
    {
        name: 'Polka',
        scale: 'major',
        root: 'F',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'polka' }
        },
        wave: 'triangle',
        instruments: { lead: 21, bass: 43, chords: 17 },
        leadOptions: [21, 22, 23, 65, 66, 64, 72, 73, 74, 13],
        bassOptions: [43, 32, 33, 34, 35, 36, 5, 6],
        chordsOptions: [17, 16, 18, 19, 20, 21, 22, 23, 24, 25, 26]
    },
    {
        name: 'Gospel',
        scale: 'major',
        root: 'Eb',
        bpm: 90,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'gospel' }
        },
        wave: 'sine',
        instruments: { lead: 53, bass: 33, chords: 1 },
        leadOptions: [53, 52, 54, 5, 4, 16, 17, 18, 19, 48],
        bassOptions: [33, 34, 32, 35, 36, 37, 38, 39],
        chordsOptions: [1, 0, 2, 16, 17, 18, 19, 20, 21, 48, 49]
    },
    {
        name: 'Ska',
        scale: 'major',
        root: 'G',
        bpm: 180,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'ska' }
        },
        wave: 'square',
        instruments: { lead: 57, bass: 34, chords: 17 },
        leadOptions: [57, 56, 59, 60, 65, 66, 27, 28, 29, 30],
        bassOptions: [34, 33, 35, 32, 36, 37, 38, 39],
        chordsOptions: [17, 16, 18, 19, 27, 28, 29, 30, 25, 26, 24]
    },
    {
        name: 'Soca',
        scale: 'major',
        root: 'C',
        bpm: 115,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'soca' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 39, chords: 17 },
        leadOptions: [81, 80, 82, 83, 84, 85, 55, 56, 57, 114],
        bassOptions: [39, 38, 87, 36, 37, 35, 81, 86],
        chordsOptions: [17, 18, 19, 80, 81, 82, 83, 84, 85, 55, 56]
    },
    {
        name: 'Juju',
        scale: 'major',
        root: 'F',
        bpm: 108,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'juju' }
        },
        wave: 'sine',
        instruments: { lead: 24, bass: 32, chords: 16 },
        leadOptions: [24, 25, 26, 108, 109, 73, 74, 75, 113, 114],
        bassOptions: [32, 33, 34, 35, 36, 37, 38, 39],
        chordsOptions: [16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26]
    },
    {
        name: 'Mbalax',
        scale: 'mixolydian',
        root: 'D',
        bpm: 125,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'mbalax' }
        },
        wave: 'triangle',
        instruments: { lead: 66, bass: 36, chords: 17 },
        leadOptions: [66, 65, 67, 56, 57, 73, 74, 111, 112, 113],
        bassOptions: [36, 37, 33, 34, 35, 38, 39],
        chordsOptions: [17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27]
    },
    {
        name: 'Bossa Nova',
        scale: 'major',
        root: 'E',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'bossa' }
        },
        wave: 'sine',
        instruments: { lead: 73, bass: 32, chords: 24 },
        leadOptions: [73, 24, 65, 75, 74, 76, 77, 78, 79, 21],
        bassOptions: [32, 35, 24, 25, 26, 27, 28, 29],
        chordsOptions: [24, 26, 4, 5, 6, 7, 8, 9, 10, 11, 12]
    },
    {
        name: 'Forró',
        scale: 'major',
        root: 'C',
        bpm: 120,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'forro' }
        },
        wave: 'triangle',
        instruments: { lead: 21, bass: 32, chords: 24 },
        leadOptions: [21, 23, 73, 74, 75, 65, 66, 64, 114, 115],
        bassOptions: [32, 33, 34, 35, 36, 37, 38, 39],
        chordsOptions: [24, 25, 26, 16, 17, 18, 19, 20, 21, 22, 23]
    },
    {
        name: 'Calypso',
        scale: 'major',
        root: 'G',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'calypso' }
        },
        wave: 'sine',
        instruments: { lead: 114, bass: 33, chords: 24 },
        leadOptions: [114, 113, 115, 75, 76, 77, 21, 22, 23, 73],
        bassOptions: [33, 34, 32, 35, 36, 37, 38, 39],
        chordsOptions: [24, 25, 26, 16, 17, 18, 19, 20, 21, 22, 23]
    },
    {
        name: 'Gagaku',
        scale: 'pentatonic',
        root: 'D',
        bpm: 60,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [3, 4] },
            chords: { oct: [4, 5] },
            drums: { kit: 'gagaku' }
        },
        wave: 'sine',
        instruments: { lead: 77, bass: 43, chords: 107 },
        leadOptions: [77, 78, 79, 106, 107, 108, 73, 74, 75, 76],
        bassOptions: [43, 32, 33, 34, 35, 36, 37, 38],
        chordsOptions: [107, 106, 77, 78, 79, 73, 74, 75, 76, 13, 14]
    },
	  {
        name: 'Griot',
        scale: 'pentatonic',
        root: 'F',
        bpm: 95,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'griot' }
        },
        wave: 'sine',
        instruments: { lead: 108, bass: 32, chords: 106 },
        leadOptions: [108, 104, 105, 107, 77, 78, 73, 74, 110, 111],
        bassOptions: [32, 33, 34, 35, 36, 43, 108, 107],
        chordsOptions: [106, 107, 108, 104, 105, 24, 25, 26, 16, 17]
    },
    {
        name: 'Qawwali',
        scale: 'phrygian',
        root: 'C',
        bpm: 85,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'qawwali' }
        },
        wave: 'sine',
        instruments: { lead: 105, bass: 43, chords: 52 },
        leadOptions: [105, 104, 111, 53, 54, 52, 21, 22, 73, 74],
        bassOptions: [43, 32, 33, 34, 35, 36, 105, 104],
        chordsOptions: [52, 53, 54, 105, 104, 16, 17, 18, 19, 20]
    },
    {
        name: 'Fado',
        scale: 'harmonic_minor',
        root: 'D',
        bpm: 100,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'fado' }
        },
        wave: 'sine',
        instruments: { lead: 24, bass: 32, chords: 24 },
        leadOptions: [24, 25, 40, 41, 42, 68, 69, 71, 73, 74],
        bassOptions: [32, 33, 34, 35, 36, 43, 24, 25],
        chordsOptions: [24, 25, 40, 41, 42, 16, 17, 18, 19, 20]
    },
    {
        name: 'Andean',
        scale: 'pentatonic',
        root: 'G',
        bpm: 110,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'andean' }
        },
        wave: 'triangle',
        instruments: { lead: 79, bass: 32, chords: 24 },
        leadOptions: [79, 75, 76, 77, 78, 73, 74, 21, 22, 23],
        bassOptions: [32, 33, 34, 35, 36, 43, 79, 75],
        chordsOptions: [24, 25, 79, 75, 76, 16, 17, 18, 19, 20]
    },
    {
        name: 'Gregorian Chant',
        scale: 'dorian',
        root: 'D',
        bpm: 60,
        roles: {
            lead: { oct: [3, 4] },
            bass: { oct: [1, 2] },
            chords: { oct: [2, 3] },
            drums: { kit: 'chant' }
        },
        wave: 'sine',
        instruments: { lead: 52, bass: 43, chords: 52 },
        leadOptions: [52, 53, 54, 19, 20, 91, 92, 48, 49, 50],
        bassOptions: [43, 32, 33, 34, 35, 36, 52, 53],
        chordsOptions: [52, 53, 54, 19, 20, 91, 92, 48, 49, 50]
    },
    {
        name: 'Boogie Woogie',
        scale: 'blues',
        root: 'C',
        bpm: 160,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [1, 2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'boogie' }
        },
        wave: 'triangle',
        instruments: { lead: 4, bass: 33, chords: 4 },
        leadOptions: [4, 5, 16, 17, 18, 7, 6, 2, 3, 1],
        bassOptions: [33, 34, 35, 36, 37, 4, 5, 16],
        chordsOptions: [4, 5, 16, 17, 18, 7, 6, 2, 3, 1]
    },
    {
        name: 'Motown',
        scale: 'major',
        root: 'Eb',
        bpm: 112,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'motown' }
        },
        wave: 'sine',
        instruments: { lead: 53, bass: 33, chords: 5 },
        leadOptions: [53, 52, 54, 5, 4, 27, 28, 65, 66, 56],
        bassOptions: [33, 34, 35, 36, 37, 53, 52, 5],
        chordsOptions: [5, 4, 53, 52, 54, 27, 28, 65, 66, 16]
    },
    {
        name: 'Disco',
        scale: 'major',
        root: 'F',
        bpm: 120,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'disco' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 36, chords: 17 },
        leadOptions: [81, 80, 82, 83, 84, 85, 55, 56, 57, 27],
        bassOptions: [36, 37, 33, 34, 35, 81, 80, 17],
        chordsOptions: [17, 16, 81, 80, 82, 55, 56, 57, 27, 28]
    },
    {
        name: 'New Wave',
        scale: 'minor',
        root: 'D',
        bpm: 130,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'newwave' }
        },
        wave: 'square',
        instruments: { lead: 82, bass: 39, chords: 90 },
        leadOptions: [82, 81, 83, 84, 85, 86, 87, 88, 89, 5],
        bassOptions: [39, 38, 37, 36, 35, 82, 81, 90],
        chordsOptions: [90, 88, 89, 82, 81, 83, 84, 85, 86, 87]
    },
    {
        name: 'Grunge',
        scale: 'minor',
        root: 'E',
        bpm: 110,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [1, 2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'grunge' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 30 },
        leadOptions: [30, 29, 31, 27, 28, 25, 26, 17, 18, 19],
        bassOptions: [34, 33, 35, 32, 36, 37, 30, 29],
        chordsOptions: [30, 29, 31, 27, 28, 25, 26, 17, 18, 19]
    },
    {
        name: 'Trip Hop',
        scale: 'minor',
        root: 'G',
        bpm: 90,
        roles: {
            lead: { oct: [4] },
            bass: { oct: [1, 2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'triphop' }
        },
        wave: 'sine',
        instruments: { lead: 91, bass: 39, chords: 89 },
        leadOptions: [91, 90, 92, 93, 94, 95, 54, 53, 52, 102],
        bassOptions: [39, 38, 37, 36, 35, 91, 90, 89],
        chordsOptions: [89, 88, 90, 91, 92, 93, 94, 95, 54, 53]
    },
    {
        name: 'Dub',
        scale: 'minor',
        root: 'C',
        bpm: 85,
        roles: {
            lead: { oct: [4] },
            bass: { oct: [1, 2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'dub' }
        },
        wave: 'sine',
        instruments: { lead: 102, bass: 39, chords: 97 },
        leadOptions: [102, 103, 99, 100, 101, 98, 96, 95, 94, 118],
        bassOptions: [39, 38, 37, 36, 35, 102, 103, 97],
        chordsOptions: [97, 96, 98, 102, 103, 99, 100, 101, 95, 94]
    },
    {
        name: 'Psychedelic Rock',
        scale: 'mixolydian',
        root: 'A',
        bpm: 115,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'psych' }
        },
        wave: 'sawtooth',
        instruments: { lead: 27, bass: 34, chords: 17 },
        leadOptions: [27, 28, 29, 30, 31, 16, 17, 18, 19, 20],
        bassOptions: [34, 33, 35, 32, 36, 37, 27, 28],
        chordsOptions: [17, 16, 18, 27, 28, 29, 30, 31, 19, 20]
    },
    {
        name: 'Baroque',
        scale: 'major',
        root: 'D',
        bpm: 100,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'baroque' }
        },
        wave: 'sine',
        instruments: { lead: 6, bass: 43, chords: 6 },
        leadOptions: [6, 7, 0, 1, 2, 46, 47, 40, 41, 42],
        bassOptions: [43, 32, 33, 34, 35, 36, 6, 7],
        chordsOptions: [6, 7, 0, 1, 2, 46, 47, 40, 41, 42]
    },
    {
        name: 'Renaissance',
        scale: 'dorian',
        root: 'G',
        bpm: 90,
        roles: {
            lead: { oct: [4] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'renaissance' }
        },
        wave: 'sine',
        instruments: { lead: 74, bass: 43, chords: 46 },
        leadOptions: [74, 73, 75, 76, 77, 6, 7, 46, 47, 13],
        bassOptions: [43, 32, 33, 34, 35, 36, 74, 73],
        chordsOptions: [46, 47, 74, 73, 75, 6, 7, 76, 77, 13]
    },
    {
        name: 'Minimalism',
        scale: 'chromatic',
        root: 'C',
        bpm: 70,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'minimal' }
        },
        wave: 'sine',
        instruments: { lead: 11, bass: 43, chords: 11 },
        leadOptions: [11, 12, 13, 14, 8, 9, 10, 0, 1, 2],
        bassOptions: [43, 32, 33, 34, 35, 36, 11, 12],
        chordsOptions: [11, 12, 13, 14, 8, 9, 10, 0, 1, 2]
    },
    {
        name: 'Post Rock',
        scale: 'minor',
        root: 'F',
        bpm: 95,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'postrock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 92, bass: 34, chords: 92 },
        leadOptions: [92, 93, 94, 95, 48, 49, 50, 51, 40, 41],
        bassOptions: [34, 33, 35, 32, 36, 37, 92, 93],
        chordsOptions: [92, 93, 94, 95, 48, 49, 50, 51, 40, 41]
    },
    {
        name: 'Shoegaze',
        scale: 'major',
        root: 'E',
        bpm: 105,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'shoegaze' }
        },
        wave: 'sawtooth',
        instruments: { lead: 94, bass: 34, chords: 94 },
        leadOptions: [94, 95, 92, 93, 90, 91, 88, 89, 102, 103],
        bassOptions: [34, 33, 35, 32, 36, 37, 94, 95],
        chordsOptions: [94, 95, 92, 93, 90, 91, 88, 89, 102, 103]
    },
    {
        name: 'Noise',
        scale: 'chromatic',
        root: 'C',
        bpm: 140,
        roles: {
            lead: { oct: [3, 4, 5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [2, 3, 4] },
            drums: { kit: 'noise' }
        },
        wave: 'square',
        instruments: { lead: 118, bass: 39, chords: 119 },
        leadOptions: [118, 119, 120, 121, 122, 123, 124, 125, 126, 127],
        bassOptions: [39, 38, 37, 36, 35, 118, 119, 120],
        chordsOptions: [119, 118, 120, 121, 122, 123, 124, 125, 126, 127]
    },
    {
        name: 'Drone',
        scale: 'chromatic',
        root: 'D',
        bpm: 60,
        roles: {
            lead: { oct: [2, 3] },
            bass: { oct: [1, 2] },
            chords: { oct: [2, 3] },
            drums: { kit: 'drone' }
        },
        wave: 'sine',
        instruments: { lead: 93, bass: 43, chords: 93 },
        leadOptions: [93, 94, 95, 92, 91, 90, 89, 88, 48, 49],
        bassOptions: [43, 32, 33, 34, 35, 36, 93, 94],
        chordsOptions: [93, 94, 95, 92, 91, 90, 89, 88, 48, 49]
    },
    {
        name: 'Waltz',
        scale: 'major',
        root: 'C',
        bpm: 180,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'waltz' }
        },
        wave: 'sine',
        instruments: { lead: 48, bass: 43, chords: 0 },
        leadOptions: [48, 49, 0, 1, 2, 40, 41, 42, 46, 47],
        bassOptions: [43, 32, 33, 34, 35, 36, 48, 49],
        chordsOptions: [0, 1, 2, 48, 49, 40, 41, 42, 46, 47]
    },
    {
        name: 'March',
        scale: 'major',
        root: 'G',
        bpm: 120,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'march' }
        },
        wave: 'square',
        instruments: { lead: 56, bass: 58, chords: 61 },
        leadOptions: [56, 57, 59, 60, 61, 62, 63, 47, 48, 49],
        bassOptions: [58, 43, 44, 45, 46, 47, 56, 57],
        chordsOptions: [61, 62, 63, 56, 57, 59, 60, 47, 48, 49]
    },
    {
        name: 'Sea Shanty',
        scale: 'mixolydian',
        root: 'D',
        bpm: 130,
        roles: {
            lead: { oct: [3, 4] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'shanty' }
        },
        wave: 'sine',
        instruments: { lead: 21, bass: 32, chords: 21 },
        leadOptions: [21, 22, 23, 16, 17, 18, 19, 20, 73, 74],
        bassOptions: [32, 33, 34, 35, 36, 43, 21, 22],
        chordsOptions: [21, 22, 23, 16, 17, 18, 19, 20, 73, 74]
    },
	
    {
        name: 'Swing',
        scale: 'major',
        root: 'Bb',
        bpm: 180,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'swing' }
        },
        wave: 'triangle',
        instruments: { lead: 57, bass: 32, chords: 0 },
        leadOptions: [57, 56, 65, 66, 4, 5, 27, 28, 48, 49],
        bassOptions: [32, 33, 34, 35, 36, 43, 57, 56],
        chordsOptions: [0, 4, 5, 16, 17, 27, 28, 48, 49, 57]
    },
    {
        name: 'Bebop',
        scale: 'chromatic',
        root: 'F',
        bpm: 220,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'bebop' }
        },
        wave: 'sawtooth',
        instruments: { lead: 65, bass: 32, chords: 0 },
        leadOptions: [65, 66, 64, 56, 57, 4, 5, 27, 28, 11],
        bassOptions: [32, 33, 34, 35, 36, 43, 65, 66],
        chordsOptions: [0, 4, 5, 16, 17, 27, 28, 56, 57, 65]
    },
    {
        name: 'Cool Jazz',
        scale: 'dorian',
        root: 'D',
        bpm: 120,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'cooljazz' }
        },
        wave: 'sine',
        instruments: { lead: 73, bass: 32, chords: 5 },
        leadOptions: [73, 74, 65, 66, 4, 5, 11, 12, 48, 49],
        bassOptions: [32, 33, 34, 35, 36, 43, 73, 74],
        chordsOptions: [5, 4, 16, 17, 48, 49, 73, 74, 11, 12]
    },
    {
        name: 'Hard Bop',
        scale: 'blues',
        root: 'Eb',
        bpm: 200,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'hardbop' }
        },
        wave: 'sawtooth',
        instruments: { lead: 66, bass: 33, chords: 17 },
        leadOptions: [66, 65, 56, 57, 27, 28, 4, 5, 34, 35],
        bassOptions: [33, 34, 32, 35, 36, 43, 66, 65],
        chordsOptions: [17, 16, 27, 28, 4, 5, 34, 35, 56, 57]
    },
    {
        name: 'Free Jazz',
        scale: 'chromatic',
        root: 'C',
        bpm: 160,
        roles: {
            lead: { oct: [3, 4, 5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [2, 3, 4] },
            drums: { kit: 'freejazz' }
        },
        wave: 'square',
        instruments: { lead: 62, bass: 39, chords: 97 },
        leadOptions: [62, 63, 87, 86, 85, 118, 119, 102, 103, 55],
        bassOptions: [39, 38, 37, 36, 35, 62, 63, 87],
        chordsOptions: [97, 102, 103, 62, 63, 87, 86, 118, 119, 55]
    },
    {
        name: 'Modal Jazz',
        scale: 'dorian',
        root: 'D',
        bpm: 110,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'modaljazz' }
        },
        wave: 'sine',
        instruments: { lead: 71, bass: 32, chords: 5 },
        leadOptions: [71, 65, 66, 73, 74, 4, 5, 11, 12, 48],
        bassOptions: [32, 33, 34, 35, 36, 43, 71, 65],
        chordsOptions: [5, 4, 16, 17, 48, 49, 71, 65, 11, 12]
    },
    {
        name: 'Jazz Fusion',
        scale: 'chromatic',
        root: 'A',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'fusion' }
        },
        wave: 'sawtooth',
        instruments: { lead: 87, bass: 39, chords: 90 },
        leadOptions: [87, 81, 62, 63, 86, 85, 84, 27, 28, 65],
        bassOptions: [39, 38, 37, 36, 35, 87, 81, 62],
        chordsOptions: [90, 88, 89, 87, 81, 62, 63, 27, 28, 65]
    },
    {
        name: 'Smooth Jazz',
        scale: 'major',
        root: 'F',
        bpm: 95,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'smoothjazz' }
        },
        wave: 'sine',
        instruments: { lead: 66, bass: 33, chords: 5 },
        leadOptions: [66, 65, 73, 74, 4, 5, 27, 28, 48, 49],
        bassOptions: [33, 34, 32, 35, 36, 43, 66, 65],
        chordsOptions: [5, 4, 16, 17, 48, 49, 66, 65, 27, 28]
    },
    {
        name: 'J-Pop',
        scale: 'major',
        root: 'C',
        bpm: 128,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'jpop' }
        },
        wave: 'triangle',
        instruments: { lead: 81, bass: 33, chords: 5 },
        leadOptions: [81, 80, 82, 83, 84, 85, 48, 49, 27, 28],
        bassOptions: [33, 34, 32, 35, 36, 43, 81, 80],
        chordsOptions: [5, 4, 16, 17, 48, 49, 81, 80, 27, 28]
    },
    {
        name: 'K-Pop',
        scale: 'minor',
        root: 'G',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'kpop' }
        },
        wave: 'sawtooth',
        instruments: { lead: 87, bass: 39, chords: 90 },
        leadOptions: [87, 81, 82, 83, 84, 85, 48, 49, 27, 28],
        bassOptions: [39, 38, 37, 36, 35, 87, 81, 82],
        chordsOptions: [90, 88, 89, 87, 81, 82, 48, 49, 27, 28]
    },
    {
        name: 'City Pop',
        scale: 'major',
        root: 'F',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'citypop' }
        },
        wave: 'triangle',
        instruments: { lead: 86, bass: 36, chords: 5 },
        leadOptions: [86, 81, 82, 83, 84, 85, 48, 49, 27, 28],
        bassOptions: [36, 37, 33, 34, 35, 86, 81, 82],
        chordsOptions: [5, 4, 16, 17, 48, 49, 86, 81, 27, 28]
    },
    {
        name: 'Vaporwave',
        scale: 'major',
        root: 'Eb',
        bpm: 85,
        roles: {
            lead: { oct: [4] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'vaporwave' }
        },
        wave: 'sine',
        instruments: { lead: 90, bass: 39, chords: 5 },
        leadOptions: [90, 88, 89, 91, 92, 93, 94, 95, 48, 49],
        bassOptions: [39, 38, 37, 36, 35, 90, 88, 89],
        chordsOptions: [5, 4, 90, 88, 89, 91, 92, 48, 49, 16]
    },
    {
        name: 'Future Bass',
        scale: 'minor',
        root: 'F',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'futurebass' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 87, chords: 90 },
        leadOptions: [81, 80, 82, 83, 84, 85, 86, 87, 88, 89],
        bassOptions: [87, 39, 38, 86, 85, 84, 83, 82],
        chordsOptions: [90, 88, 89, 81, 80, 82, 83, 84, 85, 86]
    },
    {
        name: 'Witch House',
        scale: 'minor',
        root: 'D',
        bpm: 110,
        roles: {
            lead: { oct: [4] },
            bass: { oct: [1, 2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'witchhouse' }
        },
        wave: 'square',
        instruments: { lead: 102, bass: 39, chords: 97 },
        leadOptions: [102, 103, 99, 100, 101, 98, 96, 95, 94, 118],
        bassOptions: [39, 38, 37, 36, 35, 102, 103, 99],
        chordsOptions: [97, 96, 98, 102, 103, 99, 100, 101, 95, 94]
    },
    {
        name: 'Synthpop',
        scale: 'major',
        root: 'C',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'synthpop' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 39, chords: 90 },
        leadOptions: [81, 80, 82, 83, 84, 85, 86, 87, 88, 89],
        bassOptions: [39, 38, 37, 36, 35, 81, 80, 82],
        chordsOptions: [90, 88, 89, 81, 80, 82, 83, 84, 85, 86]
    },
    {
        name: 'Italo Disco',
        scale: 'major',
        root: 'F',
        bpm: 125,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'italo' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 39, chords: 90 },
        leadOptions: [81, 80, 82, 83, 84, 85, 86, 87, 88, 89],
        bassOptions: [39, 38, 37, 36, 35, 81, 80, 82],
        chordsOptions: [90, 88, 89, 81, 80, 82, 83, 84, 85, 86]
    },
    {
        name: 'Eurodance',
        scale: 'major',
        root: 'G',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'eurodance' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 39, chords: 90 },
        leadOptions: [81, 80, 82, 83, 84, 85, 86, 87, 88, 89],
        bassOptions: [39, 38, 37, 36, 35, 81, 80, 82],
        chordsOptions: [90, 88, 89, 81, 80, 82, 83, 84, 85, 86]
    },
    {
        name: 'Hardstyle',
        scale: 'minor',
        root: 'A',
        bpm: 150,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'hardstyle' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 87, chords: 90 },
        leadOptions: [81, 80, 82, 83, 84, 85, 86, 87, 88, 89],
        bassOptions: [87, 39, 38, 86, 85, 84, 83, 82],
        chordsOptions: [90, 88, 89, 81, 80, 82, 83, 84, 85, 86]
    },
    {
        name: 'Gabber',
        scale: 'chromatic',
        root: 'C',
        bpm: 200,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1] },
            chords: { oct: [4] },
            drums: { kit: 'gabber' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 87, chords: 90 },
        leadOptions: [81, 80, 82, 83, 84, 85, 86, 87, 88, 89],
        bassOptions: [87, 39, 38, 86, 85, 84, 83, 82],
        chordsOptions: [90, 88, 89, 81, 80, 82, 83, 84, 85, 86]
    },
    {
        name: 'Psytrance',
        scale: 'minor',
        root: 'D',
        bpm: 145,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'psytrance' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 87, chords: 90 },
        leadOptions: [81, 80, 82, 83, 84, 85, 86, 87, 88, 89],
        bassOptions: [87, 39, 38, 86, 85, 84, 83, 82],
        chordsOptions: [90, 88, 89, 81, 80, 82, 83, 84, 85, 86]
    },
    {
        name: 'Goa Trance',
        scale: 'phrygian',
        root: 'E',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'goa' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 87, chords: 90 },
        leadOptions: [81, 80, 82, 83, 84, 85, 86, 87, 88, 89],
        bassOptions: [87, 39, 38, 86, 85, 84, 83, 82],
        chordsOptions: [90, 88, 89, 81, 80, 82, 83, 84, 85, 86]
    },
    {
        name: 'Progressive House',
        scale: 'minor',
        root: 'F',
        bpm: 125,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'proghouse' }
        },
        wave: 'sawtooth',
        instruments: { lead: 90, bass: 39, chords: 88 },
        leadOptions: [90, 88, 89, 91, 92, 93, 94, 95, 81, 82],
        bassOptions: [39, 38, 37, 36, 35, 90, 88, 89],
        chordsOptions: [88, 89, 90, 91, 92, 93, 94, 95, 81, 82]
    },
    {
        name: 'Deep House',
        scale: 'minor',
        root: 'G',
        bpm: 120,
        roles: {
            lead: { oct: [4] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'deephouse' }
        },
        wave: 'sine',
        instruments: { lead: 89, bass: 33, chords: 5 },
        leadOptions: [89, 88, 90, 91, 92, 93, 94, 95, 73, 74],
        bassOptions: [33, 34, 32, 35, 36, 43, 89, 88],
        chordsOptions: [5, 4, 89, 88, 90, 91, 73, 74, 16, 17]
    },
    {
        name: 'UK Garage',
        scale: 'minor',
        root: 'F',
        bpm: 130,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'ukgarage' }
        },
        wave: 'triangle',
        instruments: { lead: 81, bass: 39, chords: 90 },
        leadOptions: [81, 80, 82, 83, 84, 85, 86, 87, 88, 89],
        bassOptions: [39, 38, 37, 36, 35, 81, 80, 82],
        chordsOptions: [90, 88, 89, 81, 80, 82, 83, 84, 85, 86]
    },
    {
        name: 'Footwork',
        scale: 'chromatic',
        root: 'C',
        bpm: 160,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'footwork' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 87, chords: 90 },
        leadOptions: [81, 80, 82, 83, 84, 85, 86, 87, 88, 89],
        bassOptions: [87, 39, 38, 86, 85, 84, 83, 82],
        chordsOptions: [90, 88, 89, 81, 80, 82, 83, 84, 85, 86]
    },
    {
        name: 'Jungle',
        scale: 'minor',
        root: 'B',
        bpm: 170,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'jungle' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 87, chords: 90 },
        leadOptions: [81, 80, 82, 83, 84, 85, 86, 87, 88, 89],
        bassOptions: [87, 39, 38, 86, 85, 84, 83, 82],
        chordsOptions: [90, 88, 89, 81, 80, 82, 83, 84, 85, 86]
    },
	    {
        name: 'Gypsy Jazz',
        scale: 'harmonic_minor',
        root: 'D',
        bpm: 200,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'gypsy' }
        },
        wave: 'triangle',
        instruments: { lead: 25, bass: 32, chords: 25 },
        leadOptions: [25, 26, 21, 22, 40, 41, 65, 66, 73, 74],
        bassOptions: [32, 33, 34, 35, 36, 43, 25, 26],
        chordsOptions: [25, 26, 21, 22, 16, 17, 18, 19, 20, 24]
    },
    {
        name: 'Mambo',
        scale: 'major',
        root: 'C',
        bpm: 200,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'mambo' }
        },
        wave: 'sawtooth',
        instruments: { lead: 56, bass: 33, chords: 17 },
        leadOptions: [56, 57, 65, 66, 21, 22, 114, 115, 73, 74],
        bassOptions: [33, 34, 32, 35, 36, 43, 56, 57],
        chordsOptions: [17, 16, 21, 22, 114, 115, 24, 25, 26, 27]
    },
    {
        name: 'Merengue',
        scale: 'major',
        root: 'A',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'merengue' }
        },
        wave: 'triangle',
        instruments: { lead: 114, bass: 33, chords: 17 },
        leadOptions: [114, 113, 115, 21, 22, 73, 74, 56, 57, 65],
        bassOptions: [33, 34, 32, 35, 36, 43, 114, 113],
        chordsOptions: [17, 16, 21, 22, 114, 113, 24, 25, 26, 27]
    },
    {
        name: 'Bachata',
        scale: 'minor',
        root: 'A',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'bachata' }
        },
        wave: 'sine',
        instruments: { lead: 24, bass: 32, chords: 24 },
        leadOptions: [24, 25, 21, 22, 73, 74, 114, 115, 65, 66],
        bassOptions: [32, 33, 34, 35, 36, 43, 24, 25],
        chordsOptions: [24, 25, 21, 22, 16, 17, 18, 19, 20, 27]
    },
    {
        name: 'Son Cubano',
        scale: 'major',
        root: 'C',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'son' }
        },
        wave: 'triangle',
        instruments: { lead: 21, bass: 32, chords: 24 },
        leadOptions: [21, 22, 114, 115, 73, 74, 56, 57, 65, 66],
        bassOptions: [32, 33, 34, 35, 36, 43, 21, 22],
        chordsOptions: [24, 25, 21, 22, 16, 17, 18, 19, 20, 27]
    },
    {
        name: 'Rumba',
        scale: 'phrygian',
        root: 'E',
        bpm: 100,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'rumba' }
        },
        wave: 'sine',
        instruments: { lead: 114, bass: 32, chords: 24 },
        leadOptions: [114, 113, 115, 21, 22, 73, 74, 108, 109, 110],
        bassOptions: [32, 33, 34, 35, 36, 43, 114, 113],
        chordsOptions: [24, 25, 114, 113, 16, 17, 18, 19, 20, 21]
    },
    {
        name: 'Guaracha',
        scale: 'major',
        root: 'G',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'guaracha' }
        },
        wave: 'sawtooth',
        instruments: { lead: 56, bass: 33, chords: 17 },
        leadOptions: [56, 57, 21, 22, 114, 115, 73, 74, 65, 66],
        bassOptions: [33, 34, 32, 35, 36, 43, 56, 57],
        chordsOptions: [17, 16, 21, 22, 114, 115, 24, 25, 26, 27]
    },
    {
        name: 'Cha Cha Cha',
        scale: 'major',
        root: 'C',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'chacha' }
        },
        wave: 'triangle',
        instruments: { lead: 114, bass: 33, chords: 17 },
        leadOptions: [114, 113, 115, 21, 22, 73, 74, 56, 57, 65],
        bassOptions: [33, 34, 32, 35, 36, 43, 114, 113],
        chordsOptions: [17, 16, 21, 22, 114, 113, 24, 25, 26, 27]
    },
    {
        name: 'Danzón',
        scale: 'major',
        root: 'G',
        bpm: 90,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'danzon' }
        },
        wave: 'sine',
        instruments: { lead: 73, bass: 32, chords: 0 },
        leadOptions: [73, 74, 21, 22, 56, 57, 65, 66, 40, 41],
        bassOptions: [32, 33, 34, 35, 36, 43, 73, 74],
        chordsOptions: [0, 4, 21, 22, 16, 17, 18, 19, 20, 48]
    },
    {
        name: 'Bolero',
        scale: 'minor',
        root: 'D',
        bpm: 80,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'bolero' }
        },
        wave: 'sine',
        instruments: { lead: 40, bass: 32, chords: 24 },
        leadOptions: [40, 41, 73, 74, 21, 22, 56, 57, 65, 66],
        bassOptions: [32, 33, 34, 35, 36, 43, 40, 41],
        chordsOptions: [24, 25, 40, 41, 16, 17, 18, 19, 20, 48]
    },
    {
        name: 'Pachanga',
        scale: 'major',
        root: 'F',
        bpm: 130,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'pachanga' }
        },
        wave: 'sawtooth',
        instruments: { lead: 56, bass: 33, chords: 17 },
        leadOptions: [56, 57, 21, 22, 114, 115, 73, 74, 65, 66],
        bassOptions: [33, 34, 32, 35, 36, 43, 56, 57],
        chordsOptions: [17, 16, 21, 22, 114, 115, 24, 25, 26, 27]
    },
    {
        name: 'Timba',
        scale: 'chromatic',
        root: 'C',
        bpm: 110,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'timba' }
        },
        wave: 'sawtooth',
        instruments: { lead: 62, bass: 39, chords: 17 },
        leadOptions: [62, 63, 56, 57, 21, 22, 114, 115, 73, 74],
        bassOptions: [39, 38, 33, 34, 35, 36, 62, 63],
        chordsOptions: [17, 16, 62, 63, 21, 22, 114, 115, 24, 25]
    },
    {
        name: 'Charanga',
        scale: 'major',
        root: 'D',
        bpm: 120,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'charanga' }
        },
        wave: 'sine',
        instruments: { lead: 73, bass: 32, chords: 24 },
        leadOptions: [73, 74, 40, 41, 21, 22, 56, 57, 65, 66],
        bassOptions: [32, 33, 34, 35, 36, 43, 73, 74],
        chordsOptions: [24, 25, 73, 74, 16, 17, 18, 19, 20, 40]
    },
    {
        name: 'Mozambique',
        scale: 'major',
        root: 'F',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'mozambique' }
        },
        wave: 'triangle',
        instruments: { lead: 114, bass: 33, chords: 17 },
        leadOptions: [114, 113, 115, 21, 22, 73, 74, 56, 57, 65],
        bassOptions: [33, 34, 32, 35, 36, 43, 114, 113],
        chordsOptions: [17, 16, 21, 22, 114, 113, 24, 25, 26, 27]
    },
    {
        name: 'Conga',
        scale: 'major',
        root: 'G',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'conga' }
        },
        wave: 'sawtooth',
        instruments: { lead: 114, bass: 33, chords: 17 },
        leadOptions: [114, 113, 115, 21, 22, 73, 74, 56, 57, 65],
        bassOptions: [33, 34, 32, 35, 36, 43, 114, 113],
        chordsOptions: [17, 16, 21, 22, 114, 113, 24, 25, 26, 27]
    },
    {
        name: 'Bomba',
        scale: 'phrygian',
        root: 'E',
        bpm: 100,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'bomba' }
        },
        wave: 'sine',
        instruments: { lead: 114, bass: 32, chords: 24 },
        leadOptions: [114, 113, 115, 21, 22, 73, 74, 108, 109, 110],
        bassOptions: [32, 33, 34, 35, 36, 43, 114, 113],
        chordsOptions: [24, 25, 114, 113, 16, 17, 18, 19, 20, 21]
    },
    {
        name: 'Plena',
        scale: 'major',
        root: 'C',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'plena' }
        },
        wave: 'triangle',
        instruments: { lead: 21, bass: 32, chords: 24 },
        leadOptions: [21, 22, 114, 115, 73, 74, 56, 57, 65, 66],
        bassOptions: [32, 33, 34, 35, 36, 43, 21, 22],
        chordsOptions: [24, 25, 21, 22, 16, 17, 18, 19, 20, 27]
    },
    {
        name: 'Guajira',
        scale: 'major',
        root: 'A',
        bpm: 100,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'guajira' }
        },
        wave: 'sine',
        instruments: { lead: 24, bass: 32, chords: 24 },
        leadOptions: [24, 25, 21, 22, 73, 74, 114, 115, 65, 66],
        bassOptions: [32, 33, 34, 35, 36, 43, 24, 25],
        chordsOptions: [24, 25, 21, 22, 16, 17, 18, 19, 20, 27]
    },
    {
        name: 'Son Montuno',
        scale: 'major',
        root: 'C',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'montuno' }
        },
        wave: 'triangle',
        instruments: { lead: 21, bass: 32, chords: 24 },
        leadOptions: [21, 22, 114, 115, 73, 74, 56, 57, 65, 66],
        bassOptions: [32, 33, 34, 35, 36, 43, 21, 22],
        chordsOptions: [24, 25, 21, 22, 16, 17, 18, 19, 20, 27]
    },
    {
        name: 'Guaguancó',
        scale: 'phrygian',
        root: 'E',
        bpm: 105,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'guaguanco' }
        },
        wave: 'sine',
        instruments: { lead: 114, bass: 32, chords: 24 },
        leadOptions: [114, 113, 115, 21, 22, 73, 74, 108, 109, 110],
        bassOptions: [32, 33, 34, 35, 36, 43, 114, 113],
        chordsOptions: [24, 25, 114, 113, 16, 17, 18, 19, 20, 21]
    },
    {
        name: 'Colombia',
        scale: 'minor',
        root: 'A',
        bpm: 90,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'colombia' }
        },
        wave: 'sine',
        instruments: { lead: 114, bass: 32, chords: 24 },
        leadOptions: [114, 113, 115, 21, 22, 73, 74, 108, 109, 110],
        bassOptions: [32, 33, 34, 35, 36, 43, 114, 113],
        chordsOptions: [24, 25, 114, 113, 16, 17, 18, 19, 20, 21]
    },
    {
        name: 'Yambú',
        scale: 'phrygian',
        root: 'D',
        bpm: 85,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'yambu' }
        },
        wave: 'sine',
        instruments: { lead: 114, bass: 32, chords: 24 },
        leadOptions: [114, 113, 115, 21, 22, 73, 74, 108, 109, 110],
        bassOptions: [32, 33, 34, 35, 36, 43, 114, 113],
        chordsOptions: [24, 25, 114, 113, 16, 17, 18, 19, 20, 21]
    },
    {
        name: 'Guarapachangueo',
        scale: 'chromatic',
        root: 'C',
        bpm: 130,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'guarapachangueo' }
        },
        wave: 'sawtooth',
        instruments: { lead: 114, bass: 39, chords: 17 },
        leadOptions: [114, 113, 115, 21, 22, 73, 74, 108, 109, 110],
        bassOptions: [39, 38, 33, 34, 35, 36, 114, 113],
        chordsOptions: [17, 16, 114, 113, 21, 22, 24, 25, 26, 27]
    },
    {
        name: 'Batá',
        scale: 'pentatonic',
        root: 'D',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'bata' }
        },
        wave: 'sine',
        instruments: { lead: 114, bass: 32, chords: 24 },
        leadOptions: [114, 113, 115, 108, 109, 110, 73, 74, 21, 22],
        bassOptions: [32, 33, 34, 35, 36, 43, 114, 113],
        chordsOptions: [24, 25, 114, 113, 16, 17, 18, 19, 20, 21]
    },
    {
        name: 'Iyesá',
        scale: 'phrygian',
        root: 'E',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'iyesa' }
        },
        wave: 'sine',
        instruments: { lead: 114, bass: 32, chords: 24 },
        leadOptions: [114, 113, 115, 108, 109, 110, 73, 74, 21, 22],
        bassOptions: [32, 33, 34, 35, 36, 43, 114, 113],
        chordsOptions: [24, 25, 114, 113, 16, 17, 18, 19, 20, 21]
    },
    {
        name: 'Makuta',
        scale: 'pentatonic',
        root: 'F',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'makuta' }
        },
        wave: 'triangle',
        instruments: { lead: 114, bass: 32, chords: 24 },
        leadOptions: [114, 113, 115, 108, 109, 110, 73, 74, 21, 22],
        bassOptions: [32, 33, 34, 35, 36, 43, 114, 113],
        chordsOptions: [24, 25, 114, 113, 16, 17, 18, 19, 20, 21]
    },
    {
        name: 'Villancico',
        scale: 'major',
        root: 'G',
        bpm: 100,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'villancico' }
        },
        wave: 'sine',
        instruments: { lead: 73, bass: 32, chords: 24 },
        leadOptions: [73, 74, 21, 22, 40, 41, 48, 49, 52, 53],
        bassOptions: [32, 33, 34, 35, 36, 43, 73, 74],
        chordsOptions: [24, 25, 73, 74, 16, 17, 18, 19, 20, 40]
    },
    {
        name: 'Punto Cubano',
        scale: 'major',
        root: 'C',
        bpm: 90,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'punto' }
        },
        wave: 'sine',
        instruments: { lead: 24, bass: 32, chords: 24 },
        leadOptions: [24, 25, 21, 22, 73, 74, 40, 41, 65, 66],
        bassOptions: [32, 33, 34, 35, 36, 43, 24, 25],
        chordsOptions: [24, 25, 21, 22, 16, 17, 18, 19, 20, 40]
    },
    {
        name: 'Tonada',
        scale: 'minor',
        root: 'A',
        bpm: 85,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'tonada' }
        },
        wave: 'sine',
        instruments: { lead: 24, bass: 32, chords: 24 },
        leadOptions: [24, 25, 21, 22, 73, 74, 40, 41, 65, 66],
        bassOptions: [32, 33, 34, 35, 36, 43, 24, 25],
        chordsOptions: [24, 25, 21, 22, 16, 17, 18, 19, 20, 40]
    },
	{
        name: 'Chaabi',
        scale: 'major',
        root: 'C',
        bpm: 120,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2, 3] },
            chords: { oct: [3, 4] },
            drums: { kit: 'darbuka' }
        },
        wave: 'sawtooth',
        instruments: { lead: 73, bass: 35, chords: 25 },
        leadOptions: [73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86],
        bassOptions: [35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48],
        chordsOptions: [25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38]
    },
    {
        name: 'Rai',
        scale: 'minor',
        root: 'D',
        bpm: 130,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'darbuka' }
        },
        wave: 'square',
        instruments: { lead: 74, bass: 36, chords: 26 },
        leadOptions: [74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61],
        bassOptions: [36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],
        chordsOptions: [26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]
    },
    {
        name: 'Gnawa',
        scale: 'pentatonic',
        root: 'G',
        bpm: 105,
        roles: {
            lead: { oct: [3, 4] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'taarija' }
        },
        wave: 'triangle',
        instruments: { lead: 73, bass: 35, chords: 25 },
        leadOptions: [73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60],
        bassOptions: [35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48],
        chordsOptions: [25, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12]
    },
    {
        name: 'Andalusisch',
        scale: 'maqam_bayati',
        root: 'D',
        bpm: 90,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2, 3] },
            chords: { oct: [3, 4] },
            drums: { kit: 'bendir' }
        },
        wave: 'sine',
        instruments: { lead: 49, bass: 33, chords: 25 },
        leadOptions: [49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62],
        bassOptions: [33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46],
        chordsOptions: [25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38]
    },
    {
        name: 'Malhoun',
        scale: 'major',
        root: 'F',
        bpm: 100,
        roles: {
            lead: { oct: [4] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'daf' }
        },
        wave: 'sawtooth',
        instruments: { lead: 68, bass: 40, chords: 28 },
        leadOptions: [68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81],
        bassOptions: [40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53],
        chordsOptions: [28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41]
    },
    {
        name: 'Kabyle',
        scale: 'dorian',
        root: 'A',
        bpm: 115,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [3] },
            chords: { oct: [4] },
            drums: { kit: 'bendir' }
        },
        wave: 'square',
        instruments: { lead: 72, bass: 38, chords: 26 },
        leadOptions: [72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85],
        bassOptions: [38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51],
        chordsOptions: [26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]
    },
    {
        name: 'Tuareg',
        scale: 'pentatonic',
        root: 'E',
        bpm: 95,
        roles: {
            lead: { oct: [3, 4] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'darbuka' }
        },
        wave: 'sawtooth',
        instruments: { lead: 73, bass: 35, chords: 25 },
        leadOptions: [73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86],
        bassOptions: [35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48],
        chordsOptions: [25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38]
    },
    {
        name: 'Desert Blues',
        scale: 'blues',
        root: 'G',
        bpm: 100,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'darbuka' }
        },
        wave: 'sawtooth',
        instruments: { lead: 27, bass: 35, chords: 26 },
        leadOptions: [27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40],
        bassOptions: [35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48],
        chordsOptions: [26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]
    },
    {
        name: 'Shaabi',
        scale: 'minor',
        root: 'C',
        bpm: 125,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'darbuka' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 38, chords: 29 },
        leadOptions: [81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94],
        bassOptions: [38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51],
        chordsOptions: [29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42]
    },
    {
        name: 'Mahraganat',
        scale: 'minor',
        root: 'F',
        bpm: 140,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'electronic' }
        },
        wave: 'square',
        instruments: { lead: 87, bass: 40, chords: 30 },
        leadOptions: [87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100],
        bassOptions: [40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53],
        chordsOptions: [30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43]
    },
    {
        name: 'Tarab',
        scale: 'maqam_rast',
        root: 'C',
        bpm: 80,
        roles: {
            lead: { oct: [3, 4] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'riqq' }
        },
        wave: 'sine',
        instruments: { lead: 50, bass: 34, chords: 26 },
        leadOptions: [50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63],
        bassOptions: [34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47],
        chordsOptions: [26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]
    },
    {
        name: 'Dabke',
        scale: 'major',
        root: 'G',
        bpm: 120,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'darbuka' }
        },
        wave: 'sawtooth',
        instruments: { lead: 65, bass: 37, chords: 28 },
        leadOptions: [65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78],
        bassOptions: [37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50],
        chordsOptions: [28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41]
    },
    {
        name: 'Khaliji',
        scale: 'major',
        root: 'D',
        bpm: 110,
        roles: {
            lead: { oct: [4] },
            bass: { oct: [3] },
            chords: { oct: [4] },
            drums: { kit: 'tabla' }
        },
        wave: 'sine',
        instruments: { lead: 76, bass: 39, chords: 27 },
        leadOptions: [76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89],
        bassOptions: [39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52],
        chordsOptions: [27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40]
    },
    {
        name: 'Mugham',
        scale: 'maqam_shur',
        root: 'E',
        bpm: 70,
        roles: {
            lead: { oct: [3, 4] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'daf' }
        },
        wave: 'sine',
        instruments: { lead: 52, bass: 36, chords: 24 },
        leadOptions: [52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65],
        bassOptions: [36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],
        chordsOptions: [24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37]
    },
    {
        name: 'Persian Pop',
        scale: 'minor',
        root: 'B',
        bpm: 128,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'rockkit' }
        },
        wave: 'sawtooth',
        instruments: { lead: 73, bass: 36, chords: 25 },
        leadOptions: [73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86],
        bassOptions: [36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],
        chordsOptions: [25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38]
    },
    {
        name: 'Arabesk',
        scale: 'minor',
        root: 'A',
        bpm: 100,
        roles: {
            lead: { oct: [4] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'darbuka' }
        },
        wave: 'square',
        instruments: { lead: 70, bass: 38, chords: 26 },
        leadOptions: [70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83],
        bassOptions: [38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51],
        chordsOptions: [26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]
    },
    {
        name: 'Fasi',
        scale: 'maqam_saba',
        root: 'F',
        bpm: 85,
        roles: {
            lead: { oct: [4] },
            bass: { oct: [2, 3] },
            chords: { oct: [3, 4] },
            drums: { kit: 'bendir' }
        },
        wave: 'sine',
        instruments: { lead: 55, bass: 32, chords: 24 },
        leadOptions: [55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68],
        bassOptions: [32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45],
        chordsOptions: [24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37]
    },
    {
        name: 'Hawzi',
        scale: 'major',
        root: 'C',
        bpm: 95,
        roles: {
            lead: { oct: [4] },
            bass: { oct: [3] },
            chords: { oct: [4] },
            drums: { kit: 'daf' }
        },
        wave: 'sawtooth',
        instruments: { lead: 67, bass: 35, chords: 25 },
        leadOptions: [67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80],
        bassOptions: [35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48],
        chordsOptions: [25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38]
    },
    {
        name: 'Mezwed',
        scale: 'major',
        root: 'G',
        bpm: 135,
        roles: {
            lead: { oct: [3, 4] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'darbuka' }
        },
        wave: 'square',
        instruments: { lead: 71, bass: 37, chords: 26 },
        leadOptions: [71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84],
        bassOptions: [37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50],
        chordsOptions: [26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]
    },
    {
        name: 'Musique Orientale',
        scale: 'maqam_hijaz',
        root: 'D',
        bpm: 90,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'riqq' }
        },
        wave: 'sine',
        instruments: { lead: 53, bass: 34, chords: 25 },
        leadOptions: [53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66],
        bassOptions: [34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47],
        chordsOptions: [25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38]
    },
    {
        name: 'Saharan Rock',
        scale: 'minor',
        root: 'E',
        bpm: 110,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'rockkit' }
        },
        wave: 'sawtooth',
        instruments: { lead: 29, bass: 36, chords: 27 },
        leadOptions: [29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42],
        bassOptions: [36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],
        chordsOptions: [27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40]
    },
    {
        name: 'Moorish Rock',
        scale: 'phrygian',
        root: 'A',
        bpm: 115,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'rockkit' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 37, chords: 26 },
        leadOptions: [30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43],
        bassOptions: [37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50],
        chordsOptions: [26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]
    },
    {
        name: 'Izran',
        scale: 'pentatonic',
        root: 'G',
        bpm: 100,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [3] },
            chords: { oct: [4] },
            drums: { kit: 'bendir' }
        },
        wave: 'sine',
        instruments: { lead: 72, bass: 35, chords: 24 },
        leadOptions: [72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85],
        bassOptions: [35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48],
        chordsOptions: [24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37]
    },
    {
        name: 'Amazigh Rock',
        scale: 'mixolydian',
        root: 'D',
        bpm: 120,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'rockkit' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 36, chords: 27 },
        leadOptions: [30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43],
        bassOptions: [36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49],
        chordsOptions: [27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40]
    },
    {
        name: 'Ahidous',
        scale: 'dorian',
        root: 'C',
        bpm: 110,
        roles: {
            lead: { oct: [3, 4] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'bendir' }
        },
        wave: 'square',
        instruments: { lead: 74, bass: 38, chords: 26 },
        leadOptions: [74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87],
        bassOptions: [38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51],
        chordsOptions: [26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]
    },
    {
        name: 'Ahwash',
        scale: 'pentatonic',
        root: 'A',
        bpm: 125,
        roles: {
            lead: { oct: [3, 4] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'bendir' }
        },
        wave: 'triangle',
        instruments: { lead: 73, bass: 35, chords: 25 },
        leadOptions: [73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86],
        bassOptions: [35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48],
        chordsOptions: [25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38]
    },
    {
        name: 'Rwayes',
        scale: 'phrygian',
        root: 'E',
        bpm: 95,
        roles: {
            lead: { oct: [3, 4] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'taarija' }
        },
        wave: 'sine',
        instruments: { lead: 70, bass: 34, chords: 24 },
        leadOptions: [70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83],
        bassOptions: [34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47],
        chordsOptions: [24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37]
    },
    {
        name: 'Tagnawit',
        scale: 'pentatonic',
        root: 'G',
        bpm: 100,
        roles: {
            lead: { oct: [3, 4] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'taarija' }
        },
        wave: 'triangle',
        instruments: { lead: 73, bass: 35, chords: 25 },
        leadOptions: [73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86],
        bassOptions: [35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48],
        chordsOptions: [25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38]
    },
    {
        name: 'Taqtoqa',
        scale: 'major',
        root: 'F',
        bpm: 140,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [3] },
            chords: { oct: [4] },
            drums: { kit: 'darbuka' }
        },
        wave: 'square',
        instruments: { lead: 76, bass: 39, chords: 28 },
        leadOptions: [76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89],
        bassOptions: [39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52],
        chordsOptions: [28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41]
    },
    {
        name: 'Tindé',
        scale: 'pentatonic',
        root: 'D',
        bpm: 85,
        roles: {
            lead: { oct: [3, 4] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'daf' }
        },
        wave: 'triangle',
        instruments: { lead: 71, bass: 35, chords: 24 },
        leadOptions: [71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84],
        bassOptions: [35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48],
        chordsOptions: [24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37]
    },
	
	    {
        name: 'Classical',
        scale: 'major',
        root: 'C',
        bpm: 100,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'orchestral' }
        },
        wave: 'sine',
        instruments: { lead: 40, bass: 43, chords: 48 },
        leadOptions: [40, 41, 42, 44, 45, 46, 48, 49, 50, 51, 60, 68, 70, 71, 73],
        bassOptions: [43, 42, 32, 33, 35, 41, 45, 58, 70],
        chordsOptions: [48, 49, 50, 51, 0, 1, 6, 7, 14, 15, 19, 20, 21]
    },
    {
        name: 'Jazz',
        scale: 'dorian',
        root: 'G',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'jazz' }
        },
        wave: 'sine',
        instruments: { lead: 65, bass: 32, chords: 26 },
        leadOptions: [65, 66, 56, 4, 11, 12, 13, 64, 67, 71, 73, 74, 75, 76, 77],
        bassOptions: [32, 35, 43, 33, 34, 36, 37, 38, 39, 40, 41, 42, 44, 45],
        chordsOptions: [26, 4, 16, 5, 0, 1, 2, 6, 7, 17, 18, 19, 20, 21, 22]
    },
    {
        name: 'Blues',
        scale: 'pentatonic',
        root: 'E',
        bpm: 90,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'blues' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 33, chords: 26 },
        leadOptions: [30, 29, 27, 26, 25, 28, 31, 22, 18, 19, 56, 57, 65, 66],
        bassOptions: [33, 34, 32, 35, 36, 37, 38, 39],
        chordsOptions: [26, 25, 27, 18, 17, 0, 1, 4, 19, 20]
    },
    {
        name: 'Rock',
        scale: 'minor',
        root: 'E',
        bpm: 124,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 30 },
        leadOptions: [30, 29, 31, 27, 28, 26, 25, 80, 81, 18, 19, 20],
        bassOptions: [34, 33, 35, 36, 37, 38, 39],
        chordsOptions: [30, 29, 31, 18, 19, 17, 16, 0, 1]
    },
    {
        name: 'Metal',
        scale: 'phrygian',
        root: 'E',
        bpm: 160,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [3] },
            drums: { kit: 'metal' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 39, chords: 30 },
        leadOptions: [30, 31, 29, 81, 82, 85, 87, 18, 19],
        bassOptions: [39, 38, 34, 33, 35, 36, 37],
        chordsOptions: [30, 29, 31, 18, 19]
    },
    {
        name: 'Pop',
        scale: 'major',
        root: 'C',
        bpm: 118,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'pop' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 33, chords: 88 },
        leadOptions: [81, 82, 80, 89, 90, 4, 5, 2, 73, 74, 56, 61, 62],
        bassOptions: [33, 34, 38, 39, 32, 35, 81],
        chordsOptions: [88, 89, 90, 91, 0, 1, 4, 5, 12, 13]
    },
    {
        name: 'R&B',
        scale: 'minor',
        root: 'Bb',
        bpm: 85,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 4, bass: 33, chords: 95 },
        leadOptions: [4, 5, 88, 89, 73, 74, 11, 12, 56, 57, 65, 66],
        bassOptions: [33, 34, 32, 35, 38, 39],
        chordsOptions: [95, 94, 5, 4, 0, 1, 17, 18, 88, 89]
    },
    {
        name: 'Soul',
        scale: 'major',
        root: 'G',
        bpm: 95,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'funk' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 33, chords: 4 },
        leadOptions: [56, 57, 65, 66, 61, 62, 58, 4, 5, 17, 18],
        bassOptions: [33, 32, 34, 35, 36, 37],
        chordsOptions: [4, 5, 17, 18, 0, 1, 19, 20, 26, 27]
    },
    {
        name: 'Funk',
        scale: 'dorian',
        root: 'D',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'funk' }
        },
        wave: 'triangle',
        instruments: { lead: 57, bass: 36, chords: 26 },
        leadOptions: [57, 56, 61, 62, 65, 66, 81, 80, 84, 11, 12],
        bassOptions: [36, 37, 34, 33, 32, 35, 38, 39],
        chordsOptions: [26, 27, 17, 18, 4, 5, 0, 1]
    },
    {
        name: 'Disco',
        scale: 'major',
        root: 'C',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'disco' }
        },
        wave: 'sawtooth',
        instruments: { lead: 61, bass: 33, chords: 52 },
        leadOptions: [61, 62, 56, 57, 81, 80, 48, 49, 11, 12],
        bassOptions: [33, 32, 38, 39, 34, 35],
        chordsOptions: [52, 53, 54, 55, 48, 49, 0, 1, 4, 5]
    },
    {
        name: 'Reggae',
        scale: 'major',
        root: 'C',
        bpm: 74,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'reggae' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 33, chords: 26 },
        leadOptions: [56, 57, 65, 66, 61, 62, 11, 12, 13, 22],
        bassOptions: [33, 32, 34, 35, 38, 39],
        chordsOptions: [26, 27, 24, 25, 4, 5, 17, 18]
    },
    {
        name: 'Country',
        scale: 'major',
        root: 'G',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'country' }
        },
        wave: 'triangle',
        instruments: { lead: 105, bass: 32, chords: 25 },
        leadOptions: [105, 106, 107, 26, 27, 25, 24, 40, 41, 65, 66],
        bassOptions: [32, 33, 34, 35, 43, 42],
        chordsOptions: [25, 24, 26, 0, 1, 2, 3, 27, 28]
    },
    {
        name: 'Electronic',
        scale: 'minor',
        root: 'C',
        bpm: 128,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'electro' }
        },
        wave: 'square',
        instruments: { lead: 80, bass: 38, chords: 90 },
        leadOptions: [80, 81, 82, 83, 84, 85, 86, 87, 62, 63],
        bassOptions: [38, 39, 81, 87, 33, 34],
        chordsOptions: [90, 88, 89, 91, 92, 62, 63, 81]
    },
    {
        name: 'Folk',
        scale: 'major',
        root: 'D',
        bpm: 105,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'folk' }
        },
        wave: 'sine',
        instruments: { lead: 24, bass: 32, chords: 25 },
        leadOptions: [24, 25, 105, 109, 110, 73, 74, 40, 41, 26],
        bassOptions: [32, 33, 43, 42],
        chordsOptions: [25, 24, 26, 0, 1, 105]
    },
    {
        name: 'Punk',
        scale: 'minor',
        root: 'A',
        bpm: 165,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'punk' }
        },
        wave: 'sawtooth',
        instruments: { lead: 29, bass: 34, chords: 29 },
        leadOptions: [29, 30, 31, 27, 28, 26],
        bassOptions: [34, 33, 35, 39],
        chordsOptions: [29, 30, 31, 27, 28]
    },
    {
        name: 'Indie',
        scale: 'major',
        root: 'E',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'indie' }
        },
        wave: 'sine',
        instruments: { lead: 27, bass: 34, chords: 26 },
        leadOptions: [27, 28, 26, 25, 24, 81, 80, 73],
        bassOptions: [34, 33, 32, 35],
        chordsOptions: [26, 27, 25, 0, 1, 4, 88]
    },
    {
        name: 'Alternative',
        scale: 'minor',
        root: 'G',
        bpm: 122,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 27 },
        leadOptions: [30, 29, 27, 28, 81, 80, 90],
        bassOptions: [34, 33, 35, 38, 39],
        chordsOptions: [27, 28, 30, 29, 26, 18, 19]
    },
    {
        name: 'Ambient',
        scale: 'lydian',
        root: 'C',
        bpm: 60,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 99, bass: 95, chords: 92 },
        leadOptions: [99, 100, 101, 102, 91, 95, 96, 97],
        bassOptions: [95, 94, 93, 33, 34],
        chordsOptions: [92, 91, 90, 89, 48, 49, 101]
    },
    {
        name: 'Techno',
        scale: 'chromatic',
        root: 'C',
        bpm: 130,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 38, chords: 62 },
        leadOptions: [81, 80, 87, 86, 62, 63, 38, 39],
        bassOptions: [38, 39, 87, 86, 81],
        chordsOptions: [62, 63, 64, 80, 81, 87]
    },
    {
        name: 'House',
        scale: 'minor',
        root: 'F',
        bpm: 124,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 88 },
        leadOptions: [81, 80, 88, 89, 17, 18, 5, 2, 73],
        bassOptions: [38, 39, 33, 34, 81],
        chordsOptions: [88, 89, 90, 17, 18, 4, 5, 0]
    },
    {
        name: 'Dubstep',
        scale: 'phrygian',
        root: 'E',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'square',
        instruments: { lead: 87, bass: 39, chords: 118 },
        leadOptions: [87, 81, 80, 62, 63, 30, 31],
        bassOptions: [39, 38, 87, 86, 118],
        chordsOptions: [118, 97, 62, 63, 81]
    },
    {
        name: 'Drum and Bass',
        scale: 'minor',
        root: 'F',
        bpm: 172,
        roles: {
            lead: { oct: [6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'amen' }
        },
        wave: 'sine',
        instruments: { lead: 62, bass: 87, chords: 50 },
        leadOptions: [62, 81, 80, 73, 5, 11, 30],
        bassOptions: [87, 39, 38, 33, 34],
        chordsOptions: [50, 51, 90, 89, 95]
    },
    {
        name: 'Trap',
        scale: 'minor',
        root: 'G',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'triangle',
        instruments: { lead: 81, bass: 87, chords: 88 },
        leadOptions: [81, 80, 87, 56, 11, 10, 22, 2],
        bassOptions: [87, 39, 38, 33, 34],
        chordsOptions: [88, 90, 81, 80, 4, 5]
    },
    {
        name: 'Lo-fi',
        scale: 'minor',
        root: 'G',
        bpm: 80,
        roles: {
            lead: { oct: [4] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'lofi' }
        },
        wave: 'sine',
        instruments: { lead: 4, bass: 33, chords: 89 },
        leadOptions: [4, 5, 89, 73, 74, 11, 12, 66, 65, 24],
        bassOptions: [33, 32, 39, 38, 34],
        chordsOptions: [89, 4, 5, 0, 1, 17, 18, 95]
    },
    {
        name: 'Synth-pop',
        scale: 'major',
        root: 'A',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'electro' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 90 },
        leadOptions: [81, 82, 80, 62, 63, 51, 52, 90],
        bassOptions: [38, 39, 81, 82, 33, 34],
        chordsOptions: [90, 89, 88, 81, 80, 50, 51]
    },
    {
        name: 'Electropop',
        scale: 'major',
        root: 'C',
        bpm: 122,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'pop' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 90 },
        leadOptions: [81, 82, 80, 89, 90, 62, 63, 73],
        bassOptions: [38, 39, 33, 34, 81, 82],
        chordsOptions: [90, 89, 88, 81, 80, 4, 5]
    },
    {
        name: 'New Wave',
        scale: 'minor',
        root: 'D',
        bpm: 125,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: '80s' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 38, chords: 26 },
        leadOptions: [81, 80, 62, 63, 27, 28, 73, 74],
        bassOptions: [38, 39, 34, 33, 32],
        chordsOptions: [26, 27, 25, 90, 89, 88, 50]
    },
    {
        name: 'Post-punk',
        scale: 'minor',
        root: 'A',
        bpm: 130,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'punk' }
        },
        wave: 'sawtooth',
        instruments: { lead: 29, bass: 34, chords: 27 },
        leadOptions: [29, 30, 27, 28, 81, 80, 90],
        bassOptions: [34, 33, 32, 35, 38, 39],
        chordsOptions: [27, 28, 29, 26, 30, 18, 19]
    },
    {
        name: 'Grunge',
        scale: 'minor',
        root: 'E',
        bpm: 95,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 30 },
        leadOptions: [30, 29, 31, 27, 28, 26, 25],
        bassOptions: [34, 33, 35, 39],
        chordsOptions: [30, 29, 31, 18, 19, 17, 16]
    },
    {
        name: 'Emo',
        scale: 'minor',
        root: 'G#',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 29, bass: 34, chords: 27 },
        leadOptions: [29, 30, 27, 28, 26, 25, 80],
        bassOptions: [34, 33, 35, 39],
        chordsOptions: [27, 28, 29, 30, 26, 18, 19]
    },
    {
        name: 'Progressive Rock',
        scale: 'mixolydian',
        root: 'E',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'prog' }
        },
        wave: 'sawtooth',
        instruments: { lead: 19, bass: 35, chords: 30 },
        leadOptions: [19, 20, 30, 29, 81, 80, 56, 61, 62, 73, 74],
        bassOptions: [35, 34, 33, 32, 36, 37, 38, 39],
        chordsOptions: [30, 29, 18, 19, 17, 16, 0, 1, 4, 5]
    },

    {
        name: 'Psychedelic Rock',
        scale: 'mixolydian',
        root: 'A',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 29, bass: 34, chords: 91 },
        leadOptions: [29, 30, 31, 27, 102, 103, 91, 95, 96, 56, 18],
        bassOptions: [34, 33, 35, 36, 38, 39],
        chordsOptions: [91, 95, 90, 89, 18, 19, 0, 1, 26, 27]
    },
    {
        name: 'Hard Rock',
        scale: 'minor',
        root: 'E',
        bpm: 125,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 30 },
        leadOptions: [30, 29, 31, 27, 28, 81, 80],
        bassOptions: [34, 33, 35, 39, 38],
        chordsOptions: [30, 29, 31, 18, 19, 17, 16]
    },
    {
        name: 'Heavy Metal',
        scale: 'phrygian',
        root: 'E',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [3] },
            drums: { kit: 'metal' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 30 },
        leadOptions: [30, 31, 29, 18, 19, 81, 82],
        bassOptions: [34, 39, 38, 33, 35],
        chordsOptions: [30, 29, 31, 18, 19]
    },
    {
        name: 'Death Metal',
        scale: 'locrian',
        root: 'D',
        bpm: 180,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [1] },
            chords: { oct: [2, 3] },
            drums: { kit: 'metal' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 39, chords: 30 },
        leadOptions: [30, 31, 81, 87, 18, 19, 118],
        bassOptions: [39, 38, 34, 35],
        chordsOptions: [30, 31, 18, 19]
    },
    {
        name: 'Black Metal',
        scale: 'minor',
        root: 'E',
        bpm: 170,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'metal' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 39, chords: 30 },
        leadOptions: [30, 31, 18, 19, 52, 53, 48, 49],
        bassOptions: [39, 38, 34, 35],
        chordsOptions: [30, 31, 18, 19, 48, 49]
    },
    {
        name: 'Thrash Metal',
        scale: 'chromatic',
        root: 'E',
        bpm: 190,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [3] },
            drums: { kit: 'metal' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 30 },
        leadOptions: [30, 31, 29, 18, 19, 81, 80],
        bassOptions: [34, 33, 35, 39, 38],
        chordsOptions: [30, 29, 31]
    },
    {
        name: 'Power Metal',
        scale: 'major',
        root: 'D',
        bpm: 165,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'metal' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 48 },
        leadOptions: [30, 31, 56, 57, 60, 61, 81, 18, 19],
        bassOptions: [34, 33, 35, 38, 39],
        chordsOptions: [48, 49, 50, 51, 30, 31, 19, 20]
    },
    {
        name: 'Gothic Metal',
        scale: 'minor',
        root: 'B',
        bpm: 90,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 19 },
        leadOptions: [30, 31, 40, 41, 42, 48, 49, 52, 53, 19, 20],
        bassOptions: [34, 33, 35, 39, 38],
        chordsOptions: [19, 20, 48, 49, 52, 53, 30, 31]
    },
    {
        name: 'Industrial',
        scale: 'chromatic',
        root: 'C',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'industrial' }
        },
        wave: 'square',
        instruments: { lead: 87, bass: 38, chords: 118 },
        leadOptions: [87, 81, 80, 62, 30, 31, 102, 103, 118],
        bassOptions: [38, 39, 87, 86, 33, 34],
        chordsOptions: [118, 102, 103, 81, 80, 30, 31]
    },
    {
        name: 'Hardcore',
        scale: 'minor',
        root: 'A',
        bpm: 180,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'punk' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 30 },
        leadOptions: [30, 31, 29, 28, 27, 81],
        bassOptions: [34, 33, 35, 39],
        chordsOptions: [30, 31, 29, 28, 27]
    },
    {
        name: 'Ska',
        scale: 'major',
        root: 'G',
        bpm: 135,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'ska' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 32, chords: 26 },
        leadOptions: [56, 57, 58, 61, 62, 65, 66, 67, 11, 12],
        bassOptions: [32, 33, 34, 35, 38, 39],
        chordsOptions: [26, 27, 25, 24, 4, 5, 0, 1, 17, 18]
    },
    {
        name: 'Reggaeton',
        scale: 'minor',
        root: 'F#',
        bpm: 95,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 87, chords: 24 },
        leadOptions: [81, 80, 82, 62, 63, 56, 11, 2, 73, 74],
        bassOptions: [87, 39, 38, 33, 34],
        chordsOptions: [24, 25, 4, 5, 88, 89, 90]
    },
    {
        name: 'Salsa',
        scale: 'mixolydian',
        root: 'C',
        bpm: 180,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'latin' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 32, chords: 0 },
        leadOptions: [56, 57, 58, 61, 62, 65, 66, 0, 1, 11, 12],
        bassOptions: [32, 33, 34, 35, 43, 42],
        chordsOptions: [0, 1, 4, 5, 17, 18, 56, 57, 11, 12]
    },
    {
        name: 'Bachata',
        scale: 'major',
        root: 'A',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'latin' }
        },
        wave: 'sine',
        instruments: { lead: 24, bass: 33, chords: 24 },
        leadOptions: [24, 25, 26, 27, 105, 106, 0, 1, 4, 5],
        bassOptions: [33, 34, 32, 35, 38, 39],
        chordsOptions: [24, 25, 26, 27, 0, 1, 4, 5]
    },
    {
        name: 'Merengue',
        scale: 'major',
        root: 'C',
        bpm: 150,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'latin' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 32, chords: 0 },
        leadOptions: [56, 57, 58, 61, 62, 21, 22, 0, 1, 11, 12],
        bassOptions: [32, 33, 34, 35, 38, 39],
        chordsOptions: [0, 1, 2, 4, 5, 21, 22, 56, 57]
    },
    {
        name: 'Cumbia',
        scale: 'minor',
        root: 'G',
        bpm: 95,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'latin' }
        },
        wave: 'triangle',
        instruments: { lead: 21, bass: 32, chords: 0 },
        leadOptions: [21, 22, 56, 57, 73, 74, 24, 25, 11, 12, 0, 1],
        bassOptions: [32, 33, 34, 35, 38, 39],
        chordsOptions: [0, 1, 2, 4, 5, 21, 22, 24, 25]
    },
    {
        name: 'Tango',
        scale: 'harmonicMinor',
        root: 'D',
        bpm: 120,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'tango' }
        },
        wave: 'sine',
        instruments: { lead: 21, bass: 32, chords: 40 },
        leadOptions: [21, 22, 40, 41, 0, 1, 73, 74, 110],
        bassOptions: [32, 33, 43, 42, 35],
        chordsOptions: [40, 41, 48, 49, 0, 1, 21, 22]
    },
    {
        name: 'Bossa Nova',
        scale: 'major',
        root: 'F',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'bossa' }
        },
        wave: 'sine',
        instruments: { lead: 66, bass: 32, chords: 24 },
        leadOptions: [66, 65, 73, 74, 56, 57, 11, 12, 0, 1, 4, 5, 24],
        bassOptions: [32, 33, 34, 35, 43, 42],
        chordsOptions: [24, 25, 4, 5, 0, 1, 17, 18, 88, 89]
    },
    {
        name: 'Samba',
        scale: 'major',
        root: 'G',
        bpm: 130,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'samba' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 32, chords: 24 },
        leadOptions: [56, 57, 58, 61, 62, 11, 12, 0, 1, 24, 25, 26],
        bassOptions: [32, 33, 34, 35, 38, 39],
        chordsOptions: [24, 25, 0, 1, 4, 5, 56, 57, 11, 12]
    },
    {
        name: 'AfrobeatInMeasure',
        scale: 'dorian',
        root: 'A',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'afro' }
        },
        wave: 'triangle',
        instruments: { lead: 56, bass: 33, chords: 26 },
        leadOptions: [56, 57, 58, 61, 62, 65, 66, 81, 80, 11, 12, 17, 18],
        bassOptions: [33, 34, 32, 35, 36, 37, 38, 39],
        chordsOptions: [26, 27, 24, 25, 17, 18, 4, 5, 0, 1]
    },
    {
        name: 'Highlife',
        scale: 'major',
        root: 'F',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'afro' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 32, chords: 26 },
        leadOptions: [56, 57, 61, 62, 11, 12, 26, 27, 24, 25, 0, 1],
        bassOptions: [32, 33, 34, 35, 36, 37],
        chordsOptions: [26, 27, 24, 25, 0, 1, 4, 5, 17, 18]
    },
    {
        name: 'K-pop',
        scale: 'major',
        root: 'C',
        bpm: 128,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'pop' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 38, chords: 88 },
        leadOptions: [81, 80, 82, 89, 90, 62, 63, 73, 74, 56, 61, 2],
        bassOptions: [38, 39, 33, 34, 87, 81, 82],
        chordsOptions: [88, 89, 90, 91, 0, 1, 4, 5, 81, 80, 50, 51]
    },
    {
        name: 'J-pop',
        scale: 'major',
        root: 'D',
        bpm: 135,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'pop' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 38, chords: 90 },
        leadOptions: [81, 82, 80, 89, 90, 62, 63, 30, 31, 27, 28, 73],
        bassOptions: [38, 39, 33, 34, 35, 81, 82],
        chordsOptions: [90, 88, 89, 81, 80, 0, 1, 30, 31, 48, 49]
    },
    {
        name: 'C-pop',
        scale: 'major',
        root: 'C',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'pop' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 33, chords: 0 },
        leadOptions: [81, 80, 89, 90, 0, 1, 4, 5, 73, 74, 107],
        bassOptions: [33, 34, 32, 35, 38, 39],
        chordsOptions: [0, 1, 4, 5, 88, 89, 48, 49, 12, 13]
    },
    {
        name: 'Mandopop',
        scale: 'major',
        root: 'G',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 0, bass: 33, chords: 48 },
        leadOptions: [0, 1, 4, 5, 73, 74, 88, 89, 40, 41, 107],
        bassOptions: [33, 34, 32, 35, 38, 39, 43],
        chordsOptions: [48, 49, 0, 1, 4, 5, 88, 89, 52, 53]
    },
    {
        name: 'Cantopop',
        scale: 'major',
        root: 'Ab',
        bpm: 100,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 0, bass: 33, chords: 48 },
        leadOptions: [0, 1, 4, 5, 73, 74, 11, 12, 88, 89, 107],
        bassOptions: [33, 34, 32, 35, 43, 42],
        chordsOptions: [48, 49, 0, 1, 4, 5, 52, 53, 88, 89]
    },
    {
        name: 'Britpop',
        scale: 'major',
        root: 'E',
        bpm: 122,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sine',
        instruments: { lead: 27, bass: 34, chords: 26 },
        leadOptions: [27, 28, 29, 30, 26, 25, 24, 0, 1, 18, 19, 73],
        bassOptions: [34, 33, 35, 32],
        chordsOptions: [26, 27, 25, 24, 0, 1, 4, 5, 17, 18]
    },
    {
        name: 'Europop',
        scale: 'major',
        root: 'C',
        bpm: 124,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'pop' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 90 },
        leadOptions: [81, 80, 82, 89, 90, 62, 63, 51, 52, 11, 12],
        bassOptions: [38, 39, 33, 34, 81, 82],
        chordsOptions: [90, 89, 88, 81, 80, 50, 51, 0, 1, 4, 5]
    },
    {
        name: 'Schlager',
        scale: 'major',
        root: 'C',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'disco' }
        },
        wave: 'sine',
        instruments: { lead: 21, bass: 32, chords: 0 },
        leadOptions: [21, 22, 56, 57, 11, 12, 0, 1, 4, 5, 61, 62],
        bassOptions: [32, 33, 34, 35, 38, 39],
        chordsOptions: [0, 1, 4, 5, 21, 22, 48, 49, 88, 89]
    },
    {
        name: 'Chanson',
        scale: 'minor',
        root: 'A',
        bpm: 110,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 21, bass: 32, chords: 0 },
        leadOptions: [21, 22, 24, 25, 40, 41, 73, 74, 0, 1, 66, 65],
        bassOptions: [32, 33, 34, 35, 43, 42],
        chordsOptions: [0, 1, 4, 5, 24, 25, 40, 41, 48, 49]
    },
    {
        name: 'Fado',
        scale: 'harmonicMinor',
        root: 'D',
        bpm: 80,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'folk' }
        },
        wave: 'sine',
        instruments: { lead: 24, bass: 32, chords: 24 },
        leadOptions: [24, 25, 26, 27, 40, 41, 105],
        bassOptions: [32, 33, 43, 42, 35],
        chordsOptions: [24, 25, 26, 27, 0, 1, 4, 5]
    },
    {
        name: 'Bluegrass',
        scale: 'major',
        root: 'G',
        bpm: 145,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'folk' }
        },
        wave: 'triangle',
        instruments: { lead: 105, bass: 32, chords: 25 },
        leadOptions: [105, 106, 107, 40, 41, 24, 25, 26, 27],
        bassOptions: [32, 33, 43, 42],
        chordsOptions: [25, 24, 26, 27, 105, 106, 0, 1]
    },
    {
        name: 'Zydeco',
        scale: 'major',
        root: 'C',
        bpm: 130,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'zydeco' }
        },
        wave: 'triangle',
        instruments: { lead: 21, bass: 32, chords: 25 },
        leadOptions: [21, 22, 23, 56, 57, 115, 24, 25],
        bassOptions: [32, 33, 34, 35, 38],
        chordsOptions: [25, 24, 21, 22, 0, 1, 4, 5]
    },
    {
        name: 'Cajun',
        scale: 'major',
        root: 'G',
        bpm: 125,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'folk' }
        },
        wave: 'sine',
        instruments: { lead: 110, bass: 32, chords: 21 },
        leadOptions: [110, 40, 41, 21, 22, 24, 25],
        bassOptions: [32, 33, 43, 42],
        chordsOptions: [21, 22, 24, 25, 0, 1]
    },
    {
        name: 'Gospel',
        scale: 'major',
        root: 'Eb',
        bpm: 100,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'funk' }
        },
        wave: 'sine',
        instruments: { lead: 19, bass: 33, chords: 0 },
        leadOptions: [19, 20, 52, 53, 54, 56, 57, 4, 5, 17, 18],
        bassOptions: [33, 34, 32, 35, 36, 37],
        chordsOptions: [0, 1, 4, 5, 19, 20, 17, 18, 52, 53]
    },
    {
        name: 'Spirituals',
        scale: 'major',
        root: 'F',
        bpm: 80,
        roles: {
            lead: { oct: [4] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 52, bass: 32, chords: 19 },
        leadOptions: [52, 53, 54, 19, 20, 0, 1],
        bassOptions: [32, 33, 34, 35],
        chordsOptions: [19, 20, 0, 1, 52, 53]
    },
    {
        name: 'Hymns',
        scale: 'major',
        root: 'C',
        bpm: 70,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'none' }
        },
        wave: 'sine',
        instruments: { lead: 19, bass: 32, chords: 19 },
        leadOptions: [19, 20, 52, 53, 48, 49, 0, 1],
        bassOptions: [32, 33, 35, 43, 42],
        chordsOptions: [19, 20, 48, 49, 0, 1, 52, 53]
    },
    {
        name: 'New Age',
        scale: 'lydian',
        root: 'C',
        bpm: 65,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 99, bass: 95, chords: 91 },
        leadOptions: [99, 100, 46, 73, 74, 11, 12, 88, 89],
        bassOptions: [95, 94, 93, 33, 34, 32],
        chordsOptions: [91, 92, 95, 88, 89, 48, 49, 100]
    },
    {
        name: 'World',
        scale: 'mixolydian',
        root: 'G',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'world' }
        },
        wave: 'triangle',
        instruments: { lead: 104, bass: 32, chords: 104 },
        leadOptions: [104, 105, 110, 111, 73, 74, 21, 22, 108, 109],
        bassOptions: [32, 33, 35, 38, 39],
        chordsOptions: [104, 105, 111, 24, 25, 0, 1, 4, 5]
    },
    {
        name: 'Latin',
        scale: 'major',
        root: 'C',
        bpm: 120,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'latin' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 32, chords: 0 },
        leadOptions: [56, 57, 61, 62, 24, 25, 0, 1, 11, 12],
        bassOptions: [32, 33, 34, 35, 38, 39],
        chordsOptions: [0, 1, 4, 5, 24, 25, 56, 57, 11, 12]
    },
    {
        name: 'Celtic',
        scale: 'dorian',
        root: 'D',
        bpm: 115,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'world' }
        },
        wave: 'triangle',
        instruments: { lead: 109, bass: 32, chords: 105 },
        leadOptions: [109, 110, 40, 41, 73, 74, 24, 25, 105, 106],
        bassOptions: [32, 33, 35, 43, 42],
        chordsOptions: [105, 106, 25, 24, 0, 1, 26, 27]
    },
    {
        name: 'Klezmer',
        scale: 'phrygianDominant',
        root: 'G',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'world' }
        },
        wave: 'sine',
        instruments: { lead: 71, bass: 32, chords: 21 },
        leadOptions: [71, 72, 56, 57, 58, 21, 22, 40, 41, 110],
        bassOptions: [32, 33, 34, 35, 43, 42],
        chordsOptions: [21, 22, 0, 1, 4, 5, 110]
    },
    {
        name: 'Gregorian',
        scale: 'aeolian',
        root: 'C',
        bpm: 50,
        roles: {
            lead: { oct: [4] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'none' }
        },
        wave: 'sine',
        instruments: { lead: 52, bass: 52, chords: 52 },
        leadOptions: [52, 53, 54, 19, 20],
        bassOptions: [52, 53, 54, 19, 20],
        chordsOptions: [52, 53, 54, 19, 20]
    },
    {
        name: 'Opera',
        scale: 'minor',
        root: 'C',
        bpm: 90,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'orchestral' }
        },
        wave: 'sine',
        instruments: { lead: 40, bass: 43, chords: 48 },
        leadOptions: [40, 41, 42, 52, 53, 54, 68, 69, 70, 71, 73],
        bassOptions: [43, 42, 32, 33, 35, 58],
        chordsOptions: [48, 49, 50, 51, 0, 1, 6, 7, 14, 15]
    },
    {
        name: 'Orchestral',
        scale: 'major',
        root: 'D',
        bpm: 100,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'orchestral' }
        },
        wave: 'sine',
        instruments: { lead: 48, bass: 43, chords: 48 },
        leadOptions: [48, 49, 50, 51, 40, 41, 42, 56, 57, 60, 68, 70, 73],
        bassOptions: [43, 42, 58, 70, 32, 33, 35],
        chordsOptions: [48, 49, 50, 51, 0, 1, 6, 7, 19, 20]
    },
    {
        name: 'Film Score',
        scale: 'minor',
        root: 'E',
        bpm: 80,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sine',
        instruments: { lead: 48, bass: 43, chords: 95 },
        leadOptions: [48, 49, 40, 41, 60, 61, 95, 96, 99, 100],
        bassOptions: [43, 42, 58, 38, 39, 95],
        chordsOptions: [95, 96, 48, 49, 50, 51, 91, 92, 0, 1]
    },
    {
        name: 'Video Game',
        scale: 'minor',
        root: 'C',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'square',
        instruments: { lead: 80, bass: 38, chords: 81 },
        leadOptions: [80, 81, 82, 62, 63, 118, 51, 50],
        bassOptions: [38, 39, 81, 80, 87, 86, 33, 34],
        chordsOptions: [81, 80, 62, 63, 90, 89, 50, 51]
    },
    {
        name: 'Musical Theatre',
        scale: 'major',
        root: 'Bb',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'jazz' }
        },
        wave: 'sine',
        instruments: { lead: 0, bass: 32, chords: 48 },
        leadOptions: [0, 1, 56, 57, 65, 66, 40, 41, 61, 62],
        bassOptions: [32, 33, 34, 35, 43, 42],
        chordsOptions: [48, 49, 0, 1, 4, 5, 6, 7, 21, 22]
    },
    {
        name: 'Broadway',
        scale: 'major',
        root: 'C',
        bpm: 120,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'jazz' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 32, chords: 48 },
        leadOptions: [56, 57, 58, 61, 62, 65, 66, 0, 1, 11, 12],
        bassOptions: [32, 33, 34, 35, 43, 42],
        chordsOptions: [48, 49, 0, 1, 4, 5, 56, 57, 6, 7]
    },
    {
        name: 'Easy Listening',
        scale: 'major',
        root: 'G',
        bpm: 90,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 65, bass: 32, chords: 0 },
        leadOptions: [65, 66, 73, 74, 11, 12, 4, 5, 0, 1, 24, 25],
        bassOptions: [32, 33, 34, 35, 43, 42],
        chordsOptions: [0, 1, 4, 5, 48, 49, 17, 18, 88, 89]
    },
    {
        name: 'Lounge',
        scale: 'major',
        root: 'C',
        bpm: 100,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 4, bass: 33, chords: 88 },
        leadOptions: [4, 5, 66, 65, 73, 74, 11, 12, 17, 18, 56],
        bassOptions: [33, 32, 34, 35, 38, 39],
        chordsOptions: [88, 89, 4, 5, 17, 18, 0, 1, 95, 96]
    },
    {
        name: 'Chill-out',
        scale: 'major',
        root: 'F',
        bpm: 90,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 99, bass: 33, chords: 95 },
        leadOptions: [99, 100, 73, 74, 11, 12, 88, 89, 4, 5, 101],
        bassOptions: [33, 32, 38, 39, 34, 35, 95],
        chordsOptions: [95, 96, 88, 89, 4, 5, 0, 1, 91, 92]
    },
    {
        name: 'Downtempo',
        scale: 'minor',
        root: 'G',
        bpm: 85,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'sine',
        instruments: { lead: 73, bass: 33, chords: 95 },
        leadOptions: [73, 74, 99, 100, 4, 5, 11, 12, 62, 63, 89, 90],
        bassOptions: [33, 32, 38, 39, 34, 35, 87, 95],
        chordsOptions: [95, 96, 91, 92, 88, 89, 4, 5, 0, 1]
    },
    {
        name: 'Trip Hop',
        scale: 'minor',
        root: 'C',
        bpm: 90,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'lofi' }
        },
        wave: 'triangle',
        instruments: { lead: 73, bass: 39, chords: 90 },
        leadOptions: [73, 74, 11, 12, 62, 63, 81, 80, 56, 4, 5, 30, 31],
        bassOptions: [39, 38, 87, 86, 33, 34, 35],
        chordsOptions: [90, 89, 95, 96, 4, 5, 0, 1, 17, 18, 30, 31]
    },
    {
        name: 'BreakbeatInMeasure',
        scale: 'minor',
        root: 'F',
        bpm: 135,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'break' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 39, chords: 87 },
        leadOptions: [81, 80, 62, 63, 87, 86, 11, 12, 22, 2],
        bassOptions: [39, 38, 87, 86, 33, 34, 81],
        chordsOptions: [87, 86, 81, 80, 62, 63, 90, 89]
    },
    {
        name: 'Big Beat',
        scale: 'minor',
        root: 'C',
        bpm: 130,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 39, chords: 30 },
        leadOptions: [81, 80, 30, 31, 87, 86, 118, 62, 63, 11, 12],
        bassOptions: [39, 38, 87, 86, 33, 34, 30, 31],
        chordsOptions: [30, 31, 81, 80, 118, 87, 18, 19]
    },
    {
        name: 'Acid Jazz',
        scale: 'dorian',
        root: 'G',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'funk' }
        },
        wave: 'sine',
        instruments: { lead: 66, bass: 33, chords: 17 },
        leadOptions: [66, 65, 56, 57, 61, 62, 4, 5, 11, 12, 17, 18],
        bassOptions: [33, 34, 32, 35, 36, 37, 38, 39],
        chordsOptions: [17, 18, 4, 5, 0, 1, 88, 89, 26, 27]
    },
    {
        name: 'Nu Jazz',
        scale: 'dorian',
        root: 'C',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 66, bass: 38, chords: 88 },
        leadOptions: [66, 65, 73, 74, 81, 80, 11, 12, 4, 5, 62, 63],
        bassOptions: [38, 39, 33, 34, 32, 35, 81],
        chordsOptions: [88, 89, 90, 4, 5, 17, 18, 0, 1, 95, 96]
    },
    {
        name: 'Smooth Jazz',
        scale: 'major',
        root: 'F',
        bpm: 95,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 65, bass: 33, chords: 4 },
        leadOptions: [65, 66, 4, 5, 73, 74, 11, 12, 56, 57, 24, 25],
        bassOptions: [33, 32, 34, 35, 43, 42],
        chordsOptions: [4, 5, 0, 1, 17, 18, 88, 89, 95, 96]
    },
    {
        name: 'Bebop',
        scale: 'chromatic',
        root: 'C',
        bpm: 180,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'jazz' }
        },
        wave: 'sine',
        instruments: { lead: 66, bass: 32, chords: 0 },
        leadOptions: [66, 65, 56, 57, 58, 61, 62, 67, 71, 72, 11, 12],
        bassOptions: [32, 33, 35, 43, 42],
        chordsOptions: [0, 1, 4, 5, 6, 7, 17, 18, 19, 20]
    },
    {
        name: 'Swing',
        scale: 'major',
        root: 'G',
        bpm: 160,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'jazz' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 32, chords: 0 },
        leadOptions: [56, 57, 58, 61, 62, 65, 66, 67, 11, 12, 0, 1],
        bassOptions: [32, 33, 34, 35, 43, 42],
        chordsOptions: [0, 1, 4, 5, 6, 7, 17, 18, 56, 57, 11, 12]
    },
    {
        name: 'Ragtime',
        scale: 'major',
        root: 'C',
        bpm: 170,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'none' }
        },
        wave: 'sine',
        instruments: { lead: 0, bass: 0, chords: 0 },
        leadOptions: [0, 1, 2, 3, 4, 5],
        bassOptions: [0, 1, 2, 3],
        chordsOptions: [0, 1, 2, 3, 4, 5]
    },
    {
        name: 'Boogie-woogie',
        scale: 'major',
        root: 'G',
        bpm: 160,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'jazz' }
        },
        wave: 'sine',
        instruments: { lead: 0, bass: 32, chords: 0 },
        leadOptions: [0, 1, 2, 3, 4, 5, 30, 31, 11, 12],
        bassOptions: [32, 33, 34, 35, 0, 1],
        chordsOptions: [0, 1, 4, 5, 17, 18, 30, 31]
    },
    {
        name: 'Dixieland',
        scale: 'major',
        root: 'C',
        bpm: 150,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'jazz' }
        },
        wave: 'sine',
        instruments: { lead: 57, bass: 58, chords: 11 },
        leadOptions: [57, 56, 65, 66, 58, 59, 71, 72, 11, 12, 0, 1],
        bassOptions: [58, 59, 43, 42, 32, 33],
        chordsOptions: [11, 12, 13, 0, 1, 4, 5, 56, 57]
    },
    {
        name: 'Drone',
        scale: 'minor',
        root: 'C',
        bpm: 40,
        roles: {
            lead: { oct: [3, 4] },
            bass: { oct: [1] },
            chords: { oct: [2, 3] },
            drums: { kit: 'none' }
        },
        wave: 'sine',
        instruments: { lead: 97, bass: 95, chords: 91 },
        leadOptions: [97, 98, 91, 95, 87, 86, 52, 53, 101, 102],
        bassOptions: [95, 94, 93, 39, 38, 87],
        chordsOptions: [91, 90, 89, 48, 49, 95, 96, 101]
    },
    {
        name: 'Glitch',
        scale: 'chromatic',
        root: 'C',
        bpm: 100,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'glitch' }
        },
        wave: 'square',
        instruments: { lead: 118, bass: 39, chords: 115 },
        leadOptions: [118, 115, 120, 121, 125, 81, 80, 87, 86],
        bassOptions: [39, 38, 118, 115, 87, 86],
        chordsOptions: [115, 118, 117, 81, 80, 120, 121]
    },
    {
        name: 'Vaporwave',
        scale: 'major',
        root: 'A',
        bpm: 75,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: '80s' }
        },
        wave: 'sine',
        instruments: { lead: 4, bass: 33, chords: 95 },
        leadOptions: [4, 5, 88, 89, 73, 74, 11, 12, 17, 18, 99, 100],
        bassOptions: [33, 34, 38, 39, 32, 35, 95],
        chordsOptions: [95, 96, 88, 89, 4, 5, 17, 18, 0, 1]
    },
    {
        name: 'Synthwave',
        scale: 'minor',
        root: 'E',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '80s' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 90 },
        leadOptions: [81, 82, 80, 62, 63, 50, 51, 89, 90],
        bassOptions: [38, 39, 33, 34, 81, 82, 87],
        chordsOptions: [90, 88, 89, 81, 80, 50, 51, 62, 63]
    },
    {
        name: 'Darkwave',
        scale: 'phrygian',
        root: 'B',
        bpm: 105,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'electro' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 91 },
        leadOptions: [81, 80, 48, 49, 19, 20, 87, 86, 101, 102],
        bassOptions: [38, 39, 87, 86, 33, 34, 35],
        chordsOptions: [91, 95, 96, 48, 49, 19, 20, 81, 80]
    },
    {
        name: 'Chillwave',
        scale: 'major',
        root: 'C',
        bpm: 90,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'lofi' }
        },
        wave: 'sine',
        instruments: { lead: 99, bass: 33, chords: 88 },
        leadOptions: [99, 100, 89, 90, 4, 5, 73, 74, 11, 12, 101],
        bassOptions: [33, 32, 38, 39, 34, 35, 95],
        chordsOptions: [88, 89, 95, 96, 4, 5, 0, 1, 91, 92]
    },
    {
        name: 'Outrun',
        scale: 'minor',
        root: 'D',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '80s' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 90 },
        leadOptions: [81, 80, 82, 62, 63, 30, 31, 89, 90],
        bassOptions: [38, 39, 81, 87, 33, 34, 35],
        chordsOptions: [90, 89, 81, 80, 50, 51, 62, 63]
    },
    {
        name: 'EBM',
        scale: 'chromatic',
        root: 'C',
        bpm: 125,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'industrial' }
        },
        wave: 'square',
        instruments: { lead: 87, bass: 38, chords: 62 },
        leadOptions: [87, 86, 81, 80, 62, 38, 39, 118, 30, 31],
        bassOptions: [38, 39, 87, 86, 33, 34, 118],
        chordsOptions: [62, 63, 87, 86, 81, 80, 30, 31]
    },
    {
        name: 'Future Bass',
        scale: 'major',
        root: 'G',
        bpm: 150,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 87, chords: 90 },
        leadOptions: [81, 80, 82, 89, 90, 62, 63, 73, 74, 56, 11],
        bassOptions: [87, 39, 38, 33, 34, 81],
        chordsOptions: [90, 89, 88, 81, 80, 62, 63, 4, 5]
    },
    {
        name: 'Grime',
        scale: 'phrygian',
        root: 'F',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'grime' }
        },
        wave: 'square',
        instruments: { lead: 87, bass: 38, chords: 118 },
        leadOptions: [87, 86, 81, 80, 62, 63, 11, 2, 73],
        bassOptions: [38, 39, 87, 86, 33, 34, 118],
        chordsOptions: [118, 87, 81, 80, 62, 63]
    },
    {
        name: 'Garage',
        scale: 'minor',
        root: 'A',
        bpm: 130,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sine',
        instruments: { lead: 88, bass: 39, chords: 88 },
        leadOptions: [88, 89, 17, 18, 4, 5, 81, 80, 11, 2, 73],
        bassOptions: [39, 38, 33, 34, 87, 81],
        chordsOptions: [88, 89, 90, 17, 18, 4, 5, 0, 1]
    },
    {
        name: 'Dub',
        scale: 'minor',
        root: 'C',
        bpm: 70,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [3] },
            drums: { kit: 'reggae' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 33, chords: 26 },
        leadOptions: [56, 57, 61, 62, 65, 66, 11, 12, 13, 22, 102],
        bassOptions: [33, 34, 32, 35, 38, 39],
        chordsOptions: [26, 27, 24, 25, 4, 5, 17, 18, 102, 103]
    },
    {
        name: 'Dancehall',
        scale: 'minor',
        root: 'G',
        bpm: 100,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 39, chords: 24 },
        leadOptions: [81, 80, 62, 63, 56, 11, 12, 2, 73, 74],
        bassOptions: [39, 38, 87, 86, 33, 34, 35],
        chordsOptions: [24, 25, 88, 89, 4, 5, 17, 18]
    },
    {
        name: 'Soca',
        scale: 'major',
        root: 'C',
        bpm: 155,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'soca' }
        },
        wave: 'sine',
        instruments: { lead: 114, bass: 32, chords: 114 },
        leadOptions: [114, 115, 56, 57, 61, 62, 11, 12, 0, 1],
        bassOptions: [32, 33, 34, 35, 38, 39],
        chordsOptions: [114, 115, 0, 1, 4, 5, 56, 57, 11, 12]
    },
    {
        name: 'Calypso',
        scale: 'major',
        root: 'G',
        bpm: 120,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'soca' }
        },
        wave: 'sine',
        instruments: { lead: 114, bass: 32, chords: 24 },
        leadOptions: [114, 115, 56, 57, 61, 62, 11, 12, 0, 1, 24, 25],
        bassOptions: [32, 33, 34, 35, 38, 39],
        chordsOptions: [24, 25, 114, 115, 0, 1, 4, 5]
    },
    {
        name: 'Flamenco',
        scale: 'phrygianDominant',
        root: 'E',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'latin' }
        },
        wave: 'triangle',
        instruments: { lead: 24, bass: 32, chords: 24 },
        leadOptions: [24, 25, 26, 27, 40, 41, 0, 1],
        bassOptions: [32, 33, 35, 43, 42],
        chordsOptions: [24, 25, 26, 27, 0, 1, 4, 5]
    },
    {
        name: 'Folk Rock',
        scale: 'major',
        root: 'D',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sine',
        instruments: { lead: 25, bass: 34, chords: 24 },
        leadOptions: [25, 24, 26, 27, 28, 73, 74, 110, 0, 1],
        bassOptions: [34, 33, 32, 35],
        chordsOptions: [24, 25, 26, 0, 1, 4, 5, 17, 18]
    },
    {
        name: 'Country Rock',
        scale: 'major',
        root: 'G',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 26, bass: 34, chords: 25 },
        leadOptions: [26, 27, 28, 25, 24, 105, 106, 110, 40, 41],
        bassOptions: [34, 33, 32, 35, 43, 42],
        chordsOptions: [25, 24, 26, 27, 0, 1, 4, 5, 28, 29]
    },
    {
        name: 'Southern Rock',
        scale: 'mixolydian',
        root: 'E',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 30 },
        leadOptions: [30, 29, 31, 28, 27, 26, 25, 18, 19],
        bassOptions: [34, 33, 32, 35, 36, 37],
        chordsOptions: [30, 29, 31, 18, 19, 17, 16, 0, 1]
    },
    {
        name: 'Jam Band',
        scale: 'mixolydian',
        root: 'A',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'funk' }
        },
        wave: 'sawtooth',
        instruments: { lead: 27, bass: 34, chords: 17 },
        leadOptions: [27, 28, 29, 30, 17, 18, 56, 57, 19, 20],
        bassOptions: [34, 33, 32, 35, 36, 37, 38, 39],
        chordsOptions: [17, 18, 19, 20, 26, 27, 0, 1, 4, 5]
    },
    {
        name: 'Psychedelic Trance',
        scale: 'phrygian',
        root: 'E',
        bpm: 145,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 39, chords: 87 },
        leadOptions: [81, 80, 87, 86, 62, 63, 11, 2, 102, 103],
        bassOptions: [39, 38, 87, 86, 81],
        chordsOptions: [87, 86, 81, 80, 62, 63, 102, 103]
    },
    {
        name: 'Goa Trance',
        scale: 'phrygian',
        root: 'F#',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 39, chords: 62 },
        leadOptions: [81, 80, 87, 86, 62, 63, 11, 2, 56],
        bassOptions: [39, 38, 87, 86, 81],
        chordsOptions: [62, 63, 81, 80, 87, 86]
    },
    {
        name: 'Eurodance',
        scale: 'minor',
        root: 'C',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 90 },
        leadOptions: [81, 80, 82, 89, 90, 62, 63, 50, 51, 11, 12],
        bassOptions: [38, 39, 33, 34, 81, 82],
        chordsOptions: [90, 89, 88, 81, 80, 50, 51, 0, 1]
    },
    {
        name: 'Happy Hardcore',
        scale: 'major',
        root: 'G',
        bpm: 170,
        roles: {
            lead: { oct: [6] },
            bass: { oct: [2] },
            chords: { oct: [4, 5] },
            drums: { kit: '909' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 38, chords: 90 },
        leadOptions: [81, 80, 82, 62, 63, 50, 51, 11, 12, 2],
        bassOptions: [38, 39, 33, 34, 81, 87],
        chordsOptions: [90, 89, 88, 81, 80, 50, 51, 0, 1, 4, 5]
    },
    {
        name: 'Hardstyle',
        scale: 'minor',
        root: 'F',
        bpm: 150,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 39, chords: 81 },
        leadOptions: [81, 80, 87, 86, 62, 63, 50, 51, 30, 31],
        bassOptions: [39, 38, 87, 86, 33, 34, 81],
        chordsOptions: [81, 80, 87, 86, 62, 63, 30, 31]
    },
    {
        name: 'Jumpstyle',
        scale: 'minor',
        root: 'C',
        bpm: 145,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 39, chords: 81 },
        leadOptions: [81, 80, 87, 86, 62, 63, 30, 31, 11, 12],
        bassOptions: [39, 38, 87, 86, 33, 34, 81],
        chordsOptions: [81, 80, 87, 86, 62, 63]
    },
    {
        name: 'Gabber',
        scale: 'chromatic',
        root: 'E',
        bpm: 180,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 39, chords: 118 },
        leadOptions: [81, 80, 87, 86, 30, 31, 118, 62, 63],
        bassOptions: [39, 38, 87, 86, 118, 33, 34],
        chordsOptions: [118, 81, 80, 87, 86, 30, 31]
    },
    {
        name: 'Hardcore Techno',
        scale: 'chromatic',
        root: 'C',
        bpm: 160,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 39, chords: 81 },
        leadOptions: [81, 80, 87, 86, 30, 31, 62, 63],
        bassOptions: [39, 38, 87, 86, 33, 34, 81],
        chordsOptions: [81, 80, 87, 86, 62, 63, 30, 31]
    },
    {
        name: 'Breakcore',
        scale: 'chromatic',
        root: 'D',
        bpm: 190,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'break' }
        },
        wave: 'square',
        instruments: { lead: 118, bass: 39, chords: 81 },
        leadOptions: [118, 81, 80, 87, 86, 62, 63, 30, 31, 120],
        bassOptions: [39, 38, 118, 87, 86, 33, 34],
        chordsOptions: [81, 80, 118, 87, 86, 62, 63, 30, 31]
    },
    {
        name: 'IDM',
        scale: 'chromatic',
        root: 'C',
        bpm: 105,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'glitch' }
        },
        wave: 'sine',
        instruments: { lead: 99, bass: 38, chords: 95 },
        leadOptions: [99, 100, 118, 115, 81, 80, 62, 63, 73, 74, 11],
        bassOptions: [38, 39, 87, 86, 33, 34, 95],
        chordsOptions: [95, 96, 91, 92, 88, 89, 81, 80, 115]
    },
    {
        name: 'Ambient Techno',
        scale: 'minor',
        root: 'G',
        bpm: 120,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: '909' }
        },
        wave: 'sine',
        instruments: { lead: 99, bass: 38, chords: 91 },
        leadOptions: [99, 100, 81, 80, 95, 96, 73, 74, 11, 12],
        bassOptions: [38, 39, 95, 94, 33, 34, 87],
        chordsOptions: [91, 92, 95, 96, 88, 89, 48, 49, 81, 80]
    },
    {
        name: 'Minimal Techno',
        scale: 'chromatic',
        root: 'C',
        bpm: 125,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 38, chords: 81 },
        leadOptions: [81, 80, 87, 86, 62, 63, 11, 2, 115],
        bassOptions: [38, 39, 87, 86, 33, 34],
        chordsOptions: [81, 80, 87, 86, 62, 63]
    },
    {
        name: 'Dub Techno',
        scale: 'minor',
        root: 'C',
        bpm: 124,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [1, 2] },
            chords: { oct: [3, 4] },
            drums: { kit: '909' }
        },
        wave: 'sawtooth',
        instruments: { lead: 95, bass: 38, chords: 88 },
        leadOptions: [95, 96, 81, 80, 73, 74, 102, 103, 11, 12],
        bassOptions: [38, 39, 33, 34, 87, 86, 95],
        chordsOptions: [88, 89, 95, 96, 81, 80, 17, 18, 4, 5]
    },
    {
        name: 'Deep House',
        scale: 'minor7',
        root: 'G',
        bpm: 122,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sine',
        instruments: { lead: 4, bass: 33, chords: 88 },
        leadOptions: [4, 5, 17, 18, 66, 65, 73, 74, 11, 12, 81],
        bassOptions: [33, 34, 38, 39, 32, 35, 87],
        chordsOptions: [88, 89, 4, 5, 17, 18, 0, 1, 95, 96]
    },
    {
        name: 'Tech House',
        scale: 'minor',
        root: 'C',
        bpm: 126,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 81 },
        leadOptions: [81, 80, 87, 86, 62, 63, 11, 2, 88, 89],
        bassOptions: [38, 39, 87, 86, 33, 34, 81],
        chordsOptions: [81, 80, 87, 86, 62, 63, 88, 89]
    },
    {
        name: 'Progressive House',
        scale: 'minor',
        root: 'E',
        bpm: 128,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 90 },
        leadOptions: [81, 82, 80, 89, 90, 62, 63, 50, 51, 11],
        bassOptions: [38, 39, 33, 34, 87, 81, 82],
        chordsOptions: [90, 89, 88, 81, 80, 50, 51, 62, 63]
    },
    {
        name: 'Electro House',
        scale: 'minor',
        root: 'A',
        bpm: 128,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 39, chords: 81 },
        leadOptions: [81, 80, 87, 86, 62, 63, 30, 31, 118],
        bassOptions: [39, 38, 87, 86, 33, 34, 81, 80],
        chordsOptions: [81, 80, 87, 86, 62, 63, 30, 31]
    },
    {
        name: 'Big Room House',
        scale: 'phrygian',
        root: 'F',
        bpm: 128,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 87, chords: 81 },
        leadOptions: [81, 80, 87, 86, 62, 63, 30, 31, 50, 51],
        bassOptions: [87, 86, 39, 38, 81, 33, 34],
        chordsOptions: [81, 80, 87, 86, 62, 63, 30, 31]
    },
    {
        name: 'Future House',
        scale: 'minor',
        root: 'G',
        bpm: 126,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 38, chords: 81 },
        leadOptions: [81, 80, 87, 86, 62, 63, 88, 89, 11, 2],
        bassOptions: [38, 39, 87, 86, 33, 34, 81],
        chordsOptions: [81, 80, 87, 86, 88, 89, 62, 63]
    },
    {
        name: 'Tropical House',
        scale: 'major',
        root: 'C',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 114, bass: 33, chords: 4 },
        leadOptions: [114, 115, 73, 74, 11, 12, 66, 65, 4, 5, 0, 1],
        bassOptions: [33, 32, 34, 35, 38, 39, 43],
        chordsOptions: [4, 5, 0, 1, 88, 89, 17, 18, 95, 96]
    },
    {
        name: 'G-House',
        scale: 'phrygian',
        root: 'C',
        bpm: 124,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'square',
        instruments: { lead: 87, bass: 38, chords: 87 },
        leadOptions: [87, 86, 81, 80, 62, 63, 11, 2, 118],
        bassOptions: [38, 39, 87, 86, 33, 34, 81],
        chordsOptions: [87, 86, 81, 80, 62, 63]
    },
    {
        name: 'Bass House',
        scale: 'minor',
        root: 'F',
        bpm: 126,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 87, chords: 81 },
        leadOptions: [81, 80, 87, 86, 62, 63, 118, 11, 2],
        bassOptions: [87, 86, 39, 38, 33, 34, 118, 81],
        chordsOptions: [81, 80, 87, 86, 62, 63, 118]
    },
    {
        name: 'Funky House',
        scale: 'major',
        root: 'G',
        bpm: 126,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'disco' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 33, chords: 17 },
        leadOptions: [56, 57, 61, 62, 17, 18, 4, 5, 0, 1, 11, 12, 66],
        bassOptions: [33, 34, 32, 35, 36, 37, 38, 39],
        chordsOptions: [17, 18, 4, 5, 0, 1, 88, 89, 56, 57]
    },
    {
        name: 'Soulful House',
        scale: 'major7',
        root: 'C',
        bpm: 124,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sine',
        instruments: { lead: 17, bass: 33, chords: 88 },
        leadOptions: [17, 18, 4, 5, 0, 1, 66, 65, 73, 74, 52, 53],
        bassOptions: [33, 34, 32, 35, 36, 37, 38, 39],
        chordsOptions: [88, 89, 4, 5, 17, 18, 0, 1, 95, 96]
    },
    {
        name: 'French House',
        scale: 'major',
        root: 'F',
        bpm: 126,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'disco' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 33, chords: 17 },
        leadOptions: [81, 80, 17, 18, 4, 5, 56, 57, 61, 62, 0, 1],
        bassOptions: [33, 34, 32, 35, 36, 37, 38, 39, 81],
        chordsOptions: [17, 18, 4, 5, 0, 1, 88, 89, 90, 81]
    },
    {
        name: 'Italo Disco',
        scale: 'major',
        root: 'A',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'disco' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 90 },
        leadOptions: [81, 82, 80, 89, 90, 62, 63, 50, 51, 11],
        bassOptions: [38, 39, 33, 34, 81, 82],
        chordsOptions: [90, 88, 89, 81, 80, 50, 51, 0, 1]
    },
    {
        name: 'Hi-NRG',
        scale: 'major',
        root: 'C',
        bpm: 130,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'disco' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 81 },
        leadOptions: [81, 80, 82, 89, 90, 62, 63, 50, 51, 2],
        bassOptions: [38, 39, 33, 34, 81, 82, 87],
        chordsOptions: [81, 80, 90, 89, 88, 50, 51, 0, 1]
    },
    {
        name: 'Nu-Disco',
        scale: 'major',
        root: 'G',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'disco' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 33, chords: 17 },
        leadOptions: [81, 80, 17, 18, 4, 5, 56, 57, 0, 1, 88, 89],
        bassOptions: [33, 34, 32, 35, 36, 37, 38, 39, 81],
        chordsOptions: [17, 18, 4, 5, 0, 1, 88, 89, 95, 96, 81]
    },
    {
        name: 'Hard Trance',
        scale: 'minor',
        root: 'E',
        bpm: 145,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 39, chords: 81 },
        leadOptions: [81, 80, 87, 86, 62, 63, 50, 51, 30, 31],
        bassOptions: [39, 38, 87, 86, 33, 34, 81],
        chordsOptions: [81, 80, 87, 86, 62, 63, 30, 31]
    },
    {
        name: 'Progressive Trance',
        scale: 'minor',
        root: 'A',
        bpm: 135,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 90 },
        leadOptions: [81, 80, 82, 89, 90, 62, 63, 95, 96, 11],
        bassOptions: [38, 39, 33, 34, 87, 81, 95],
        chordsOptions: [90, 89, 88, 81, 80, 95, 96, 50, 51]
    },
    {
        name: 'Uplifting Trance',
        scale: 'major',
        root: 'C',
        bpm: 138,
        roles: {
            lead: { oct: [6] },
            bass: { oct: [2] },
            chords: { oct: [4, 5] },
            drums: { kit: '909' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 48 },
        leadOptions: [81, 82, 80, 89, 90, 62, 63, 48, 49, 11],
        bassOptions: [38, 39, 33, 34, 81, 82, 87],
        chordsOptions: [48, 49, 50, 51, 90, 89, 88, 81, 80]
    },
    {
        name: 'Vocal Trance',
        scale: 'minor',
        root: 'G',
        bpm: 135,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sawtooth',
        instruments: { lead: 52, bass: 38, chords: 90 },
        leadOptions: [52, 53, 54, 81, 80, 89, 90, 62, 63, 11, 2],
        bassOptions: [38, 39, 33, 34, 87, 81, 82],
        chordsOptions: [90, 89, 88, 81, 80, 48, 49, 50, 51]
    },
    {
        name: 'Acid Techno',
        scale: 'phrygian',
        root: 'C',
        bpm: 140,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sawtooth',
        instruments: { lead: 87, bass: 39, chords: 87 },
        leadOptions: [87, 86, 81, 80, 62, 63, 11, 2, 38, 39],
        bassOptions: [39, 38, 87, 86, 33, 34, 81],
        chordsOptions: [87, 86, 81, 80, 62, 63]
    },
    {
        name: 'Industrial Techno',
        scale: 'chromatic',
        root: 'C',
        bpm: 135,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'industrial' }
        },
        wave: 'square',
        instruments: { lead: 87, bass: 38, chords: 118 },
        leadOptions: [87, 86, 81, 80, 62, 63, 118, 30, 31, 102],
        bassOptions: [38, 39, 87, 86, 118, 33, 34, 30],
        chordsOptions: [118, 87, 86, 81, 80, 30, 31, 102]
    },
    {
        name: 'Detroit Techno',
        scale: 'minor',
        root: 'C',
        bpm: 128,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 88 },
        leadOptions: [81, 80, 62, 63, 89, 90, 73, 74, 11, 12, 17],
        bassOptions: [38, 39, 33, 34, 87, 81, 82],
        chordsOptions: [88, 89, 90, 81, 80, 17, 18, 4, 5, 0, 1]
    },
    {
        name: 'Berlin Techno',
        scale: 'chromatic',
        root: 'C',
        bpm: 130,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'square',
        instruments: { lead: 87, bass: 38, chords: 81 },
        leadOptions: [87, 86, 81, 80, 62, 63, 11, 2, 115, 118],
        bassOptions: [38, 39, 87, 86, 33, 34, 115],
        chordsOptions: [81, 80, 87, 86, 62, 63, 115, 118]
    },
    {
        name: 'Hard Techno',
        scale: 'chromatic',
        root: 'C',
        bpm: 145,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 39, chords: 81 },
        leadOptions: [81, 80, 87, 86, 62, 63, 30, 31, 118, 11],
        bassOptions: [39, 38, 87, 86, 33, 34, 118, 81],
        chordsOptions: [81, 80, 87, 86, 62, 63, 30, 31, 118]
    },
    {
        name: 'Dubstep',
        scale: 'phrygian',
        root: 'E',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'square',
        instruments: { lead: 87, bass: 39, chords: 87 },
        leadOptions: [87, 86, 81, 80, 62, 63, 118, 11, 2, 73],
        bassOptions: [39, 38, 87, 86, 33, 34, 118, 81],
        chordsOptions: [87, 86, 81, 80, 62, 63, 118]
    },
    {
        name: 'Brostep',
        scale: 'chromatic',
        root: 'F',
        bpm: 145,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 87, chords: 81 },
        leadOptions: [81, 80, 87, 86, 62, 63, 118, 30, 31, 11],
        bassOptions: [87, 86, 39, 38, 33, 34, 118, 81],
        chordsOptions: [81, 80, 87, 86, 62, 63, 118, 30, 31]
    },
    {
        name: 'Melodic Dubstep',
        scale: 'major',
        root: 'C',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 87, chords: 90 },
        leadOptions: [81, 80, 89, 90, 62, 63, 48, 49, 11, 2, 73],
        bassOptions: [87, 39, 38, 33, 34, 81, 82],
        chordsOptions: [90, 89, 88, 81, 80, 62, 63, 48, 49, 0, 1]
    },
    {
        name: 'Riddim',
        scale: 'chromatic',
        root: 'G',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'square',
        instruments: { lead: 87, bass: 39, chords: 87 },
        leadOptions: [87, 86, 81, 80, 62, 63, 118, 11, 2],
        bassOptions: [39, 38, 87, 86, 33, 34, 118, 81],
        chordsOptions: [87, 86, 81, 80, 62, 63, 118]
    },
    {
        name: 'Trap',
        scale: 'minor',
        root: 'C',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 87, chords: 24 },
        leadOptions: [81, 80, 62, 63, 11, 12, 13, 2, 73, 74, 56],
        bassOptions: [87, 39, 38, 33, 34, 81],
        chordsOptions: [24, 25, 88, 89, 4, 5, 17, 18, 81, 80]
    },
    {
        name: 'Phonk',
        scale: 'minor',
        root: 'F#',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 87, chords: 95 },
        leadOptions: [81, 80, 11, 2, 118, 62, 63, 73, 74, 102],
        bassOptions: [87, 39, 38, 33, 34, 118, 81],
        chordsOptions: [95, 96, 88, 89, 4, 5, 17, 18, 0, 1]
    },
    {
        name: 'Moombahton',
        scale: 'minor',
        root: 'C',
        bpm: 108,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'latin' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 39, chords: 24 },
        leadOptions: [81, 80, 62, 63, 56, 57, 11, 12, 2, 73, 74],
        bassOptions: [39, 38, 87, 86, 33, 34, 35],
        chordsOptions: [24, 25, 88, 89, 4, 5, 17, 18, 81, 80]
    },
    {
        name: 'Jungle',
        scale: 'minor',
        root: 'C',
        bpm: 160,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'break' }
        },
        wave: 'sine',
        instruments: { lead: 11, bass: 39, chords: 95 },
        leadOptions: [11, 12, 13, 81, 80, 56, 57, 102, 103, 2, 73],
        bassOptions: [39, 38, 87, 86, 33, 34, 35],
        chordsOptions: [95, 96, 88, 89, 4, 5, 17, 18, 102, 103]
    },
    {
        name: 'Drum and Bass',
        scale: 'minor',
        root: 'F',
        bpm: 174,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'break' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 39, chords: 87 },
        leadOptions: [81, 80, 87, 86, 62, 63, 11, 2, 50, 51],
        bassOptions: [39, 38, 87, 86, 33, 34, 81],
        chordsOptions: [87, 86, 81, 80, 95, 96, 62, 63]
    },
    {
        name: 'Liquid Funk',
        scale: 'major',
        root: 'Bb',
        bpm: 172,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'break' }
        },
        wave: 'sine',
        instruments: { lead: 66, bass: 33, chords: 88 },
        leadOptions: [66, 65, 73, 74, 11, 12, 4, 5, 0, 1, 17, 18],
        bassOptions: [33, 32, 38, 39, 34, 35, 95],
        chordsOptions: [88, 89, 4, 5, 17, 18, 0, 1, 95, 96]
    },
    {
        name: 'Neurofunk',
        scale: 'chromatic',
        root: 'C',
        bpm: 175,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 87, bass: 38, chords: 118 },
        leadOptions: [87, 86, 81, 80, 62, 63, 118, 11, 2],
        bassOptions: [38, 39, 87, 86, 118, 33, 34, 81],
        chordsOptions: [118, 87, 86, 81, 80, 62, 63]
    },
    {
        name: 'Jump-up',
        scale: 'minor',
        root: 'G',
        bpm: 175,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 39, chords: 81 },
        leadOptions: [81, 80, 87, 86, 62, 63, 11, 2, 38, 39],
        bassOptions: [39, 38, 87, 86, 81, 33, 34],
        chordsOptions: [81, 80, 87, 86, 62, 63]
    },
    {
        name: 'Atmospheric DnB',
        scale: 'major',
        root: 'Eb',
        bpm: 170,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'break' }
        },
        wave: 'sine',
        instruments: { lead: 99, bass: 33, chords: 95 },
        leadOptions: [99, 100, 73, 74, 11, 12, 88, 89, 4, 5, 101],
        bassOptions: [33, 32, 38, 39, 34, 35, 95],
        chordsOptions: [95, 96, 88, 89, 91, 92, 4, 5, 0, 1]
    },
    {
        name: 'Step',
        scale: 'minor',
        root: 'C',
        bpm: 172,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'square',
        instruments: { lead: 87, bass: 39, chords: 87 },
        leadOptions: [87, 86, 81, 80, 62, 63, 11, 2],
        bassOptions: [39, 38, 87, 86, 33, 34, 81],
        chordsOptions: [87, 86, 81, 80, 62, 63]
    },
    {
        name: 'Darkstep',
        scale: 'phrygian',
        root: 'D',
        bpm: 175,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 39, chords: 118 },
        leadOptions: [81, 80, 87, 86, 118, 30, 31, 19, 20],
        bassOptions: [39, 38, 87, 86, 118, 33, 34],
        chordsOptions: [118, 81, 80, 87, 86, 30, 31]
    },
    {
        name: '2-step',
        scale: 'minor',
        root: 'A',
        bpm: 130,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'garage' }
        },
        wave: 'sine',
        instruments: { lead: 88, bass: 39, chords: 88 },
        leadOptions: [88, 89, 17, 18, 4, 5, 73, 74, 11, 12, 81],
        bassOptions: [39, 38, 33, 34, 87, 81],
        chordsOptions: [88, 89, 17, 18, 4, 5, 0, 1, 95, 96]
    },
    {
        name: 'Speed Garage',
        scale: 'minor',
        root: 'G',
        bpm: 135,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'garage' }
        },
        wave: 'square',
        instruments: { lead: 11, bass: 39, chords: 81 },
        leadOptions: [11, 12, 13, 81, 80, 2, 73, 56, 57],
        bassOptions: [39, 38, 87, 86, 33, 34, 81],
        chordsOptions: [81, 80, 87, 86, 88, 89, 4, 5]
    },
    {
        name: 'UK Funky',
        scale: 'major',
        root: 'C',
        bpm: 130,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'afro' }
        },
        wave: 'sine',
        instruments: { lead: 114, bass: 33, chords: 17 },
        leadOptions: [114, 115, 56, 57, 11, 12, 17, 18, 4, 5, 0],
        bassOptions: [33, 34, 32, 35, 38, 39],
        chordsOptions: [17, 18, 4, 5, 0, 1, 114, 115, 88, 89]
    },
    {
        name: 'Future Garage',
        scale: 'minor',
        root: 'F',
        bpm: 130,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'lofi' }
        },
        wave: 'sine',
        instruments: { lead: 73, bass: 33, chords: 95 },
        leadOptions: [73, 74, 99, 100, 11, 12, 4, 5, 88, 89, 101],
        bassOptions: [33, 32, 38, 39, 34, 35, 95],
        chordsOptions: [95, 96, 88, 89, 4, 5, 0, 1, 91, 92]
    },
    {
        name: 'Grimestep',
        scale: 'phrygian',
        root: 'C',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'grime' }
        },
        wave: 'square',
        instruments: { lead: 87, bass: 38, chords: 118 },
        leadOptions: [87, 86, 81, 80, 62, 63, 11, 2],
        bassOptions: [38, 39, 87, 86, 118, 33, 34, 81],
        chordsOptions: [118, 87, 81, 80, 62, 63]
    },
    {
        name: 'Wonky',
        scale: 'chromatic',
        root: 'C',
        bpm: 90,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 39, chords: 90 },
        leadOptions: [81, 80, 62, 63, 89, 90, 11, 2, 73, 74],
        bassOptions: [39, 38, 87, 86, 33, 34, 81],
        chordsOptions: [90, 89, 88, 4, 5, 17, 18, 0, 1]
    },
    {
        name: 'Footwork',
        scale: 'chromatic',
        root: 'C',
        bpm: 160,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'sine',
        instruments: { lead: 11, bass: 87, chords: 11 },
        leadOptions: [11, 12, 13, 81, 80, 62, 63, 115, 2],
        bassOptions: [87, 39, 38, 33, 34, 81],
        chordsOptions: [11, 12, 81, 80, 88, 89, 4, 5]
    },
    {
        name: 'Juke',
        scale: 'minor',
        root: 'G',
        bpm: 155,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 39, chords: 81 },
        leadOptions: [81, 80, 11, 12, 13, 62, 63, 2, 73],
        bassOptions: [39, 38, 87, 86, 33, 34, 81],
        chordsOptions: [81, 80, 88, 89, 4, 5, 17, 18]
    },
    {
        name: 'Electroclash',
        scale: 'minor',
        root: 'A',
        bpm: 125,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 81 },
        leadOptions: [81, 80, 87, 86, 62, 63, 30, 31, 11],
        bassOptions: [38, 39, 87, 86, 33, 34, 81],
        chordsOptions: [81, 80, 87, 86, 62, 63, 30, 31]
    },
    {
        name: 'Synthpop',
        scale: 'major',
        root: 'C',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '80s' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 38, chords: 90 },
        leadOptions: [81, 80, 82, 89, 90, 62, 63, 50, 51, 11, 12],
        bassOptions: [38, 39, 33, 34, 81, 82, 87],
        chordsOptions: [90, 89, 88, 81, 80, 50, 51, 0, 1, 4, 5]
    },
    {
        name: 'New Romantic',
        scale: 'major',
        root: 'D',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: '80s' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 38, chords: 48 },
        leadOptions: [81, 80, 48, 49, 73, 74, 11, 12, 56, 57, 0, 1],
        bassOptions: [38, 39, 33, 34, 35, 81],
        chordsOptions: [48, 49, 50, 51, 0, 1, 4, 5, 88, 89, 90]
    },
    {
        name: 'Electro',
        scale: 'minor',
        root: 'C',
        bpm: 125,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 38, chords: 81 },
        leadOptions: [81, 80, 87, 86, 62, 63, 11, 2, 118, 120],
        bassOptions: [38, 39, 87, 86, 33, 34, 81],
        chordsOptions: [81, 80, 87, 86, 62, 63, 118]
    },
    {
        name: 'Freestyle',
        scale: 'minor',
        root: 'A',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 38, chords: 90 },
        leadOptions: [81, 80, 89, 90, 62, 63, 56, 57, 11, 12, 2],
        bassOptions: [38, 39, 33, 34, 81, 87],
        chordsOptions: [90, 89, 88, 81, 80, 4, 5, 0, 1]
    },
    {
        name: 'Eletro Funk',
        scale: 'minor',
        root: 'G',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 39, chords: 81 },
        leadOptions: [81, 80, 87, 86, 62, 63, 56, 57, 11, 12, 2],
        bassOptions: [39, 38, 87, 86, 33, 34, 81],
        chordsOptions: [81, 80, 87, 86, 17, 18, 4, 5, 0, 1]
    },
    {
        name: 'Miami Bass',
        scale: 'minor',
        root: 'C',
        bpm: 125,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 87, chords: 81 },
        leadOptions: [81, 80, 62, 63, 11, 2, 118, 87, 86],
        bassOptions: [87, 39, 38, 33, 34, 81],
        chordsOptions: [81, 80, 87, 86, 62, 63]
    },
    {
        name: 'Post-punk',
        scale: 'minor',
        root: 'E',
        bpm: 130,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 27, bass: 34, chords: 29 },
        leadOptions: [27, 28, 29, 30, 26, 25, 81, 80, 18, 19],
        bassOptions: [34, 33, 35, 38, 39, 32],
        chordsOptions: [29, 30, 31, 18, 19, 27, 26, 0, 1]
    },
    {
        name: 'Goth Rock',
        scale: 'minor',
        root: 'B',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'electro' }
        },
        wave: 'sawtooth',
        instruments: { lead: 27, bass: 34, chords: 19 },
        leadOptions: [27, 28, 29, 30, 19, 20, 48, 49, 81, 80, 52],
        bassOptions: [34, 33, 35, 38, 39, 32],
        chordsOptions: [19, 20, 48, 49, 18, 17, 30, 31, 0, 1]
    },
    {
        name: 'Shoegaze',
        scale: 'major',
        root: 'A',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 29, bass: 34, chords: 30 },
        leadOptions: [29, 30, 31, 27, 28, 91, 95, 102, 103, 19, 20],
        bassOptions: [34, 33, 35, 32, 38, 39],
        chordsOptions: [30, 29, 31, 91, 95, 102, 103, 48, 49, 0, 1]
    },
    {
        name: 'Dream Pop',
        scale: 'major',
        root: 'C',
        bpm: 100,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 99, bass: 33, chords: 95 },
        leadOptions: [99, 100, 73, 74, 11, 12, 88, 89, 4, 5, 0, 1],
        bassOptions: [33, 32, 34, 35, 38, 39, 95],
        chordsOptions: [95, 96, 88, 89, 4, 5, 0, 1, 91, 92, 48, 49]
    },
    {
        name: 'No Wave',
        scale: 'chromatic',
        root: 'C',
        bpm: 135,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'punk' }
        },
        wave: 'square',
        instruments: { lead: 30, bass: 39, chords: 30 },
        leadOptions: [30, 31, 118, 87, 86, 120, 125, 2],
        bassOptions: [39, 38, 34, 35, 87, 86],
        chordsOptions: [30, 31, 118, 87, 86, 18, 19]
    },
    {
        name: 'Noise Rock',
        scale: 'chromatic',
        root: 'E',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 39, chords: 30 },
        leadOptions: [30, 31, 118, 81, 80, 87, 86, 18, 19],
        bassOptions: [39, 38, 34, 35, 87, 86, 118],
        chordsOptions: [30, 31, 118, 18, 19, 87, 86]
    },
    {
        name: 'Experimental Rock',
        scale: 'chromatic',
        root: 'C',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 91 },
        leadOptions: [30, 31, 29, 27, 81, 80, 118, 102, 103, 18, 19],
        bassOptions: [34, 33, 35, 38, 39, 87, 86],
        chordsOptions: [91, 95, 102, 103, 30, 31, 18, 19, 0, 1]
    },
    {
        name: 'Art Rock',
        scale: 'major',
        root: 'G',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sine',
        instruments: { lead: 0, bass: 34, chords: 48 },
        leadOptions: [0, 1, 4, 5, 56, 57, 65, 66, 73, 74, 11, 12, 19, 20],
        bassOptions: [34, 33, 32, 35, 43, 42],
        chordsOptions: [48, 49, 0, 1, 4, 5, 17, 18, 19, 20]
    },
    {
        name: 'Math Rock',
        scale: 'major',
        root: 'D',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 27, bass: 34, chords: 27 },
        leadOptions: [27, 28, 26, 25, 24, 0, 1, 4, 5, 17, 18],
        bassOptions: [34, 33, 32, 35, 36, 37],
        chordsOptions: [27, 26, 25, 24, 0, 1, 4, 5, 17, 18]
    },
	{
        name: 'Indie Rock',
        scale: 'major',
        root: 'G',
        bpm: 125,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 27, bass: 34, chords: 26 },
        leadOptions: [27, 28, 29, 30, 0, 1, 11, 12, 17, 18],
        bassOptions: [34, 33, 35, 38, 39],
        chordsOptions: [26, 27, 25, 0, 1, 4, 5, 17, 18]
    },
    {
        name: 'Indie Pop',
        scale: 'major',
        root: 'C',
        bpm: 118,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 11, bass: 33, chords: 4 },
        leadOptions: [11, 12, 73, 74, 99, 100, 4, 5, 0, 1, 66],
        bassOptions: [33, 34, 32, 35, 38, 39, 95],
        chordsOptions: [4, 5, 0, 1, 17, 18, 88, 89, 95, 96]
    },
    {
        name: 'Britpop',
        scale: 'major',
        root: 'A',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 29, bass: 34, chords: 26 },
        leadOptions: [29, 30, 27, 28, 0, 1, 17, 18, 19, 20],
        bassOptions: [34, 33, 35, 32, 36, 37],
        chordsOptions: [26, 27, 25, 0, 1, 17, 18, 19, 20]
    },
    {
        name: 'Garage Rock',
        scale: 'mixolydian',
        root: 'E',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3] },
            drums: { kit: 'punk' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 30 },
        leadOptions: [30, 29, 31, 18, 19, 27, 28],
        bassOptions: [34, 33, 35, 32],
        chordsOptions: [30, 31, 29, 18, 19, 17, 16]
    },
    {
        name: 'Lo-Fi Indie',
        scale: 'major',
        root: 'G',
        bpm: 95,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'lofi' }
        },
        wave: 'sine',
        instruments: { lead: 24, bass: 32, chords: 4 },
        leadOptions: [24, 25, 99, 100, 73, 74, 11, 12, 4, 5],
        bassOptions: [32, 33, 38, 39, 34, 35, 95],
        chordsOptions: [4, 5, 17, 18, 0, 1, 95, 96, 24, 25]
    },
    {
        name: 'AfrobeatInMeasure',
        scale: 'mixolydian',
        root: 'C',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'afro' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 33, chords: 17 },
        leadOptions: [56, 57, 61, 62, 60, 114, 11, 12, 26, 27],
        bassOptions: [33, 34, 32, 35, 36, 37, 38, 39],
        chordsOptions: [17, 18, 4, 5, 0, 1, 26, 27, 114, 115]
    },
    {
        name: 'Highlife',
        scale: 'major',
        root: 'F',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'afro' }
        },
        wave: 'sine',
        instruments: { lead: 26, bass: 32, chords: 24 },
        leadOptions: [26, 27, 56, 57, 11, 12, 0, 1, 4, 5],
        bassOptions: [32, 33, 34, 35, 38, 39],
        chordsOptions: [24, 25, 0, 1, 4, 5, 17, 18, 56, 57]
    },
    {
        name: 'Kwaito',
        scale: 'minor',
        root: 'G',
        bpm: 110,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'square',
        instruments: { lead: 87, bass: 38, chords: 88 },
        leadOptions: [87, 86, 11, 12, 17, 18, 81, 80, 73, 74],
        bassOptions: [38, 39, 33, 34, 87, 86, 95],
        chordsOptions: [88, 89, 4, 5, 17, 18, 95, 96, 81, 80]
    },
    {
        name: 'Amapiano',
        scale: 'minor7',
        root: 'C',
        bpm: 113,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'afro' }
        },
        wave: 'sine',
        instruments: { lead: 4, bass: 38, chords: 88 },
        leadOptions: [4, 5, 11, 12, 17, 18, 81, 80, 73, 74, 56, 57],
        bassOptions: [38, 39, 33, 34, 87, 86, 95],
        chordsOptions: [88, 89, 4, 5, 17, 18, 0, 1, 95, 96]
    },
    {
        name: 'Bossa Nova',
        scale: 'major7',
        root: 'F',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'latin' }
        },
        wave: 'sine',
        instruments: { lead: 73, bass: 32, chords: 24 },
        leadOptions: [73, 74, 66, 65, 11, 12, 0, 1, 4, 5, 52, 53],
        bassOptions: [32, 33, 34, 35, 43, 42],
        chordsOptions: [24, 25, 0, 1, 4, 5, 17, 18, 88, 89]
    },
    {
        name: 'Samba',
        scale: 'major',
        root: 'G',
        bpm: 100,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'latin' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 32, chords: 24 },
        leadOptions: [56, 57, 61, 62, 11, 12, 0, 1, 73, 74, 114],
        bassOptions: [32, 33, 34, 35, 38, 39, 43],
        chordsOptions: [24, 25, 0, 1, 4, 5, 114, 115, 17, 18]
    },
    {
        name: 'Cumbia',
        scale: 'minor',
        root: 'C',
        bpm: 95,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'latin' }
        },
        wave: 'sine',
        instruments: { lead: 21, bass: 32, chords: 24 },
        leadOptions: [21, 22, 56, 57, 11, 12, 73, 74, 114, 0, 1],
        bassOptions: [32, 33, 34, 35, 38, 39],
        chordsOptions: [24, 25, 0, 1, 4, 5, 17, 18, 21, 22]
    },
    {
        name: 'Reggaeton',
        scale: 'minor',
        root: 'G',
        bpm: 95,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'latin' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 39, chords: 88 },
        leadOptions: [81, 80, 11, 12, 13, 62, 63, 2, 73, 74, 56],
        bassOptions: [39, 38, 87, 86, 33, 34, 35],
        chordsOptions: [88, 89, 4, 5, 17, 18, 24, 25, 0, 1]
    },
    {
        name: 'Merengue',
        scale: 'major',
        root: 'C',
        bpm: 160,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'latin' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 32, chords: 0 },
        leadOptions: [56, 57, 61, 62, 11, 12, 0, 1, 114, 115, 65, 66],
        bassOptions: [32, 33, 34, 35, 38, 39, 43],
        chordsOptions: [0, 1, 4, 5, 17, 18, 24, 25, 56, 57]
    },
    {
        name: 'Bachata',
        scale: 'minor',
        root: 'B',
        bpm: 125,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'latin' }
        },
        wave: 'sine',
        instruments: { lead: 24, bass: 32, chords: 24 },
        leadOptions: [24, 25, 26, 27, 0, 1, 4, 5, 11, 12],
        bassOptions: [32, 33, 34, 35, 38, 39, 43],
        chordsOptions: [24, 25, 0, 1, 4, 5, 17, 18]
    },
    {
        name: 'Tango',
        scale: 'minor',
        root: 'D',
        bpm: 120,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'latin' }
        },
        wave: 'triangle',
        instruments: { lead: 21, bass: 32, chords: 0 },
        leadOptions: [21, 22, 23, 40, 41, 48, 49, 0, 1],
        bassOptions: [32, 33, 35, 43, 42, 38],
        chordsOptions: [0, 1, 4, 5, 17, 18, 21, 22, 48, 49]
    },
    {
        name: 'Mariachi',
        scale: 'major',
        root: 'G',
        bpm: 110,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'latin' }
        },
        wave: 'sine',
        instruments: { lead: 56, bass: 43, chords: 24 },
        leadOptions: [56, 57, 61, 62, 40, 41, 0, 1, 11, 12],
        bassOptions: [43, 42, 32, 33, 35],
        chordsOptions: [24, 25, 0, 1, 4, 5, 56, 57]
    },
    {
        name: 'K-pop',
        scale: 'major',
        root: 'C',
        bpm: 128,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 38, chords: 90 },
        leadOptions: [81, 80, 89, 90, 62, 63, 50, 51, 11, 12, 2, 73],
        bassOptions: [38, 39, 33, 34, 87, 81, 82],
        chordsOptions: [90, 89, 88, 81, 80, 50, 51, 0, 1, 4, 5, 17, 18]
    },
    {
        name: 'J-pop',
        scale: 'major',
        root: 'A',
        bpm: 160,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 34, chords: 90 },
        leadOptions: [81, 80, 29, 30, 62, 63, 50, 51, 11, 12, 2],
        bassOptions: [34, 33, 35, 38, 39, 81, 82],
        chordsOptions: [90, 89, 88, 81, 80, 50, 51, 0, 1, 4, 5, 17, 18, 29, 30]
    },
    {
        name: 'City Pop',
        scale: 'major9',
        root: 'F',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'disco' }
        },
        wave: 'sine',
        instruments: { lead: 62, bass: 33, chords: 88 },
        leadOptions: [62, 63, 66, 65, 73, 74, 11, 12, 17, 18, 4, 5, 0, 1],
        bassOptions: [33, 34, 32, 35, 36, 37, 38, 39],
        chordsOptions: [88, 89, 4, 5, 17, 18, 0, 1, 95, 96, 62, 63]
    },
    {
        name: 'Enka',
        scale: 'minorPentatonic',
        root: 'E',
        bpm: 80,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 40, bass: 32, chords: 48 },
        leadOptions: [40, 41, 73, 74, 11, 12, 105, 106, 110, 0, 1],
        bassOptions: [32, 33, 34, 35, 43, 42],
        chordsOptions: [48, 49, 0, 1, 4, 5, 17, 18, 40, 41]
    },
    {
        name: 'Rai',
        scale: 'phrygian',
        root: 'G',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'afro' }
        },
        wave: 'sine',
        instruments: { lead: 21, bass: 38, chords: 88 },
        leadOptions: [21, 22, 56, 57, 11, 12, 81, 80, 2, 73, 74],
        bassOptions: [38, 39, 33, 34, 87, 86, 95],
        chordsOptions: [88, 89, 4, 5, 17, 18, 81, 80, 21, 22]
    },
    {
        name: 'Qawwali',
        scale: 'minor',
        root: 'D',
        bpm: 100,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [1] },
            chords: { oct: [3, 4] },
            drums: { kit: 'tabla' }
        },
        wave: 'sine',
        instruments: { lead: 52, bass: 95, chords: 20 },
        leadOptions: [52, 53, 54, 55, 11, 12, 73, 74, 21, 22, 102],
        bassOptions: [95, 94, 33, 34, 32, 35],
        chordsOptions: [20, 21, 22, 4, 5, 0, 1, 48, 49, 102, 103]
    },
    {
        name: 'Bhangra',
        scale: 'major',
        root: 'G',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'tabla' }
        },
        wave: 'sine',
        instruments: { lead: 104, bass: 39, chords: 81 },
        leadOptions: [104, 105, 106, 56, 57, 11, 12, 81, 80, 2, 73, 74],
        bassOptions: [39, 38, 87, 86, 33, 34, 35],
        chordsOptions: [81, 80, 88, 89, 4, 5, 17, 18, 0, 1]
    },
    {
        name: 'Carnatic',
        scale: 'major',
        root: 'C',
        bpm: 90,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1] },
            chords: { oct: [4] },
            drums: { kit: 'tabla' }
        },
        wave: 'sine',
        instruments: { lead: 40, bass: 95, chords: 95 },
        leadOptions: [40, 41, 110, 111, 73, 74, 11, 12, 105, 52, 53],
        bassOptions: [95, 94, 33, 34, 32, 35],
        chordsOptions: [95, 96, 91, 92, 48, 49, 0, 1, 4, 5]
    },
    {
        name: 'Hindustani',
        scale: 'major',
        root: 'D',
        bpm: 80,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1] },
            chords: { oct: [4] },
            drums: { kit: 'tabla' }
        },
        wave: 'sine',
        instruments: { lead: 104, bass: 95, chords: 95 },
        leadOptions: [104, 105, 106, 11, 12, 73, 74, 40, 41, 52, 53],
        bassOptions: [95, 94, 33, 34, 32, 35],
        chordsOptions: [95, 96, 91, 92, 48, 49, 0, 1, 4, 5]
    },
    {
        name: 'Gamelan',
        scale: 'pentatonic',
        root: 'C',
        bpm: 100,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'perc' }
        },
        wave: 'sine',
        instruments: { lead: 112, bass: 112, chords: 112 },
        leadOptions: [112, 113, 114, 115, 10, 11, 12, 13, 14, 9, 8],
        bassOptions: [112, 113, 114, 115, 33, 34, 38, 39],
        chordsOptions: [112, 113, 114, 115, 10, 11, 12, 13, 14]
    },
    {
        name: 'Klezmer',
        scale: 'phrygianDominant',
        root: 'D',
        bpm: 130,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'folk' }
        },
        wave: 'triangle',
        instruments: { lead: 71, bass: 32, chords: 20 },
        leadOptions: [71, 72, 68, 69, 56, 57, 11, 12, 40, 41, 0, 1],
        bassOptions: [32, 33, 34, 35, 43, 42, 38],
        chordsOptions: [20, 21, 22, 0, 1, 4, 5, 17, 18, 48, 49]
    },
    {
        name: 'Celtic',
        scale: 'mixolydian',
        root: 'D',
        bpm: 120,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'folk' }
        },
        wave: 'sine',
        instruments: { lead: 73, bass: 33, chords: 24 },
        leadOptions: [73, 74, 109, 110, 111, 11, 12, 40, 41, 0, 1, 24, 25],
        bassOptions: [33, 34, 32, 35, 43, 42],
        chordsOptions: [24, 25, 0, 1, 4, 5, 17, 18, 105, 106]
    },
    {
        name: 'Bluegrass',
        scale: 'major',
        root: 'G',
        bpm: 145,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'folk' }
        },
        wave: 'sine',
        instruments: { lead: 105, bass: 32, chords: 105 },
        leadOptions: [105, 106, 26, 27, 24, 25, 110, 111, 0, 1, 40, 41],
        bassOptions: [32, 33, 34, 35, 43, 42],
        chordsOptions: [105, 106, 24, 25, 26, 27, 0, 1, 4, 5]
    },
    {
        name: 'Americana',
        scale: 'major',
        root: 'C',
        bpm: 105,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sine',
        instruments: { lead: 25, bass: 34, chords: 24 },
        leadOptions: [25, 24, 26, 27, 105, 106, 110, 111, 73, 74, 0, 1],
        bassOptions: [34, 33, 32, 35, 43, 42],
        chordsOptions: [24, 25, 26, 27, 0, 1, 4, 5, 17, 18]
    },
    {
        name: 'Alternative Country',
        scale: 'major',
        root: 'D',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'rock' }
        },
        wave: 'sawtooth',
        instruments: { lead: 26, bass: 34, chords: 25 },
        leadOptions: [26, 27, 28, 25, 24, 30, 31, 105, 106, 110, 0, 1],
        bassOptions: [34, 33, 32, 35, 38, 39],
        chordsOptions: [25, 24, 26, 27, 0, 1, 4, 5, 17, 18, 28, 29]
    },
    {
        name: 'Harsh Noise',
        scale: 'chromatic',
        root: 'C',
        bpm: 160,
        roles: {
            lead: { oct: [4, 5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'industrial' }
        },
        wave: 'square',
        instruments: { lead: 127, bass: 127, chords: 127 },
        leadOptions: [127, 126, 125, 120, 118, 30, 31],
        bassOptions: [127, 87, 86, 118, 39, 38],
        chordsOptions: [127, 126, 118, 87, 86, 30, 31]
    },
    {
        name: 'Power Electronics',
        scale: 'chromatic',
        root: 'C',
        bpm: 100,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [1] },
            chords: { oct: [3] },
            drums: { kit: 'industrial' }
        },
        wave: 'sawtooth',
        instruments: { lead: 118, bass: 87, chords: 118 },
        leadOptions: [118, 120, 127, 87, 86, 30, 31, 52, 53],
        bassOptions: [87, 86, 118, 38, 39, 30],
        chordsOptions: [118, 127, 87, 86, 30, 31]
    },
    {
        name: 'Dark Ambient',
        scale: 'minor',
        root: 'A',
        bpm: 60,
        roles: {
            lead: { oct: [3, 4] },
            bass: { oct: [1] },
            chords: { oct: [2, 3] },
            drums: { kit: 'soft' }
        },
        wave: 'sine',
        instruments: { lead: 95, bass: 95, chords: 91 },
        leadOptions: [95, 96, 102, 103, 11, 12, 118, 120, 125],
        bassOptions: [95, 94, 33, 34, 38, 39, 87],
        chordsOptions: [91, 92, 95, 96, 102, 103, 48, 49, 19, 20]
    },
    {
        name: 'Drone',
        scale: 'chromatic',
        root: 'C',
        bpm: 40,
        roles: {
            lead: { oct: [3] },
            bass: { oct: [1] },
            chords: { oct: [2] },
            drums: { kit: 'none' }
        },
        wave: 'sine',
        instruments: { lead: 95, bass: 95, chords: 95 },
        leadOptions: [95, 102, 125, 48, 19, 91],
        bassOptions: [95, 94, 38, 39, 87, 86],
        chordsOptions: [95, 102, 48, 19, 91, 103]
    },
    {
        name: 'Avant-Garde Jazz',
        scale: 'chromatic',
        root: 'C',
        bpm: 130,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'jazz' }
        },
        wave: 'sine',
        instruments: { lead: 66, bass: 32, chords: 0 },
        leadOptions: [66, 65, 56, 57, 11, 12, 60, 61, 62, 73, 74, 1],
        bassOptions: [32, 33, 34, 35, 43, 42],
        chordsOptions: [0, 1, 4, 5, 17, 18, 11, 12, 88, 89]
    },
    {
        name: 'Free Improvisation',
        scale: 'chromatic',
        root: 'C',
        bpm: 110,
        roles: {
            lead: { oct: [4, 5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'jazz' }
        },
        wave: 'sine',
        instruments: { lead: 0, bass: 32, chords: 0 },
        leadOptions: [0, 1, 11, 12, 66, 65, 56, 57, 102, 103, 118],
        bassOptions: [32, 33, 35, 43, 34, 38, 39],
        chordsOptions: [0, 1, 4, 5, 17, 18, 11, 12, 48, 49]
    },
    {
        name: 'Vaporwave',
        scale: 'major7',
        root: 'Eb',
        bpm: 85,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'sine',
        instruments: { lead: 11, bass: 33, chords: 88 },
        leadOptions: [11, 12, 62, 63, 66, 65, 73, 74, 99, 100, 4, 5, 0, 1],
        bassOptions: [33, 32, 38, 39, 34, 35, 95],
        chordsOptions: [88, 89, 95, 96, 4, 5, 17, 18, 0, 1, 62, 63]
    },
    {
        name: 'Hyperpop',
        scale: 'major',
        root: 'C',
        bpm: 155,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 81, bass: 87, chords: 81 },
        leadOptions: [81, 80, 62, 63, 11, 12, 50, 51, 2, 73, 74, 118],
        bassOptions: [87, 86, 39, 38, 33, 34, 81],
        chordsOptions: [81, 80, 87, 86, 62, 63, 88, 89, 90]
    },
    {
        name: 'Symphonic Metal',
        scale: 'minor',
        root: 'E',
        bpm: 135,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 48 },
        leadOptions: [30, 29, 31, 81, 80, 48, 49, 52, 53, 54, 11, 2],
        bassOptions: [34, 33, 35, 38, 39, 87, 86],
        chordsOptions: [48, 49, 50, 51, 52, 53, 30, 31, 19, 20]
    },
    {
        name: 'Gothic Metal',
        scale: 'minor',
        root: 'B',
        bpm: 120,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 19 },
        leadOptions: [30, 31, 29, 19, 20, 48, 49, 52, 53, 81, 80],
        bassOptions: [34, 33, 35, 38, 39, 87],
        chordsOptions: [19, 20, 48, 49, 52, 53, 30, 31, 18, 17]
    },
    {
        name: 'Doom Metal',
        scale: 'minor',
        root: 'C',
        bpm: 70,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [1, 2] },
            chords: { oct: [3] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 30 },
        leadOptions: [30, 31, 29, 118, 87, 86, 18, 19, 48, 49],
        bassOptions: [34, 33, 35, 38, 39, 87, 86],
        chordsOptions: [30, 31, 118, 18, 19, 48, 49]
    },
    {
        name: 'Industrial Metal',
        scale: 'chromatic',
        root: 'E',
        bpm: 110,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [3] },
            drums: { kit: 'industrial' }
        },
        wave: 'square',
        instruments: { lead: 30, bass: 38, chords: 118 },
        leadOptions: [30, 31, 118, 87, 86, 81, 80, 11, 2, 38, 39],
        bassOptions: [38, 39, 87, 86, 118, 33, 34, 30, 31],
        chordsOptions: [118, 30, 31, 87, 86, 81, 80]
    },
    {
        name: 'Folk Metal',
        scale: 'minor',
        root: 'A',
        bpm: 125,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 73, bass: 34, chords: 30 },
        leadOptions: [73, 74, 21, 22, 109, 110, 11, 12, 30, 31, 0, 1],
        bassOptions: [34, 33, 35, 38, 39, 87],
        chordsOptions: [30, 31, 21, 22, 0, 1, 4, 5, 17, 18, 48, 49]
    },
    {
        name: 'Viking Metal',
        scale: 'minor',
        root: 'E',
        bpm: 115,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 30, bass: 34, chords: 52 },
        leadOptions: [30, 31, 52, 53, 54, 48, 49, 19, 20, 11, 2],
        bassOptions: [34, 33, 35, 38, 39, 87, 86],
        chordsOptions: [52, 53, 48, 49, 30, 31, 19, 20, 54, 55]
    },
    {
        name: 'Pirate Metal',
        scale: 'minor',
        root: 'G',
        bpm: 140,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'heavy' }
        },
        wave: 'sawtooth',
        instruments: { lead: 21, bass: 34, chords: 30 },
        leadOptions: [21, 22, 11, 12, 30, 31, 56, 57, 61, 62, 0, 1],
        bassOptions: [34, 33, 35, 38, 39, 87, 86],
        chordsOptions: [30, 31, 21, 22, 0, 1, 4, 5, 17, 18]
    },
    {
        name: 'Soundtrack',
        scale: 'major',
        root: 'C',
        bpm: 90,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'none' }
        },
        wave: 'sine',
        instruments: { lead: 48, bass: 43, chords: 48 },
        leadOptions: [48, 49, 40, 41, 73, 74, 11, 12, 0, 1, 68, 69],
        bassOptions: [43, 42, 32, 33, 35, 95],
        chordsOptions: [48, 49, 50, 51, 52, 53, 0, 1, 4, 5, 91, 92]
    },
    {
        name: 'Film Score',
        scale: 'minor',
        root: 'D',
        bpm: 80,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [1, 2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'none' }
        },
        wave: 'sine',
        instruments: { lead: 40, bass: 43, chords: 48 },
        leadOptions: [40, 41, 48, 49, 52, 53, 11, 12, 73, 74, 0, 1],
        bassOptions: [43, 42, 32, 33, 35, 95, 94],
        chordsOptions: [48, 49, 50, 51, 52, 53, 0, 1, 4, 5, 95, 96]
    },
    {
        name: 'Video Game Music',
        scale: 'major',
        root: 'C',
        bpm: 120,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 38, chords: 81 },
        leadOptions: [81, 80, 11, 12, 2, 73, 74, 50, 51, 89, 90],
        bassOptions: [38, 39, 33, 34, 87, 81, 82],
        chordsOptions: [81, 80, 88, 89, 90, 4, 5, 0, 1, 17, 18]
    },
    {
        name: 'Chiptune',
        scale: 'major',
        root: 'C',
        bpm: 140,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'none' }
        },
        wave: 'square',
        instruments: { lead: 81, bass: 38, chords: 81 },
        leadOptions: [81, 80, 82, 62, 63, 11, 2],
        bassOptions: [38, 39, 33, 34, 81, 80],
        chordsOptions: [81, 80, 62, 63]
    },
    {
        name: '8-bit',
        scale: 'major',
        root: 'G',
        bpm: 150,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'none' }
        },
        wave: 'square',
        instruments: { lead: 80, bass: 38, chords: 80 },
        leadOptions: [80, 81, 62, 63, 11, 2],
        bassOptions: [38, 39, 80, 81],
        chordsOptions: [80, 81, 62, 63]
    },
    {
        name: '16-bit',
        scale: 'minor',
        root: 'C',
        bpm: 130,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '909' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 38, chords: 90 },
        leadOptions: [81, 80, 89, 90, 11, 12, 56, 57, 62, 63, 73, 74],
        bassOptions: [38, 39, 33, 34, 81, 87],
        chordsOptions: [90, 89, 88, 81, 80, 4, 5, 0, 1, 17, 18]
    },
    {
        name: 'Musique Concrète',
        scale: 'chromatic',
        root: 'C',
        bpm: 100,
        roles: {
            lead: { oct: [4, 5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'perc' }
        },
        wave: 'sine',
        instruments: { lead: 120, bass: 125, chords: 102 },
        leadOptions: [120, 121, 122, 123, 124, 125, 126, 127, 118, 115, 102, 103],
        bassOptions: [125, 124, 120, 121, 33, 34, 38, 39, 87, 86, 95],
        chordsOptions: [102, 103, 114, 115, 118, 120, 121, 9, 10, 11, 12]
    },
    {
        name: 'Electronic Art Music',
        scale: 'chromatic',
        root: 'C',
        bpm: 90,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'none' }
        },
        wave: 'sine',
        instruments: { lead: 81, bass: 33, chords: 95 },
        leadOptions: [81, 80, 95, 96, 102, 103, 11, 12, 118, 120, 125],
        bassOptions: [33, 34, 38, 39, 87, 86, 95],
        chordsOptions: [95, 96, 91, 92, 102, 103, 48, 49, 118]
    },
    {
        name: 'Spectral Music',
        scale: 'chromatic',
        root: 'C',
        bpm: 60,
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [1] },
            chords: { oct: [3, 4] },
            drums: { kit: 'none' }
        },
        wave: 'sine',
        instruments: { lead: 95, bass: 95, chords: 95 },
        leadOptions: [95, 96, 102, 103, 91, 92, 120, 125],
        bassOptions: [95, 94, 33, 34, 38, 39, 87],
        chordsOptions: [95, 96, 91, 92, 102, 103, 48, 49, 0, 1]
    },
    {
        name: 'Electroacoustic',
        scale: 'chromatic',
        root: 'C',
        bpm: 100,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'none' }
        },
        wave: 'sine',
        instruments: { lead: 95, bass: 33, chords: 91 },
        leadOptions: [95, 96, 102, 103, 11, 12, 118, 120, 125, 0, 1],
        bassOptions: [33, 34, 38, 39, 87, 86, 95],
        chordsOptions: [91, 92, 95, 96, 102, 103, 48, 49, 118, 0, 1]
    },
    {
        name: 'Sound Art',
        scale: 'chromatic',
        root: 'C',
        bpm: 80,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [3, 4] },
            drums: { kit: 'none' }
        },
        wave: 'sine',
        instruments: { lead: 125, bass: 125, chords: 125 },
        leadOptions: [125, 124, 123, 120, 118, 102, 103, 95, 96, 11, 12],
        bassOptions: [125, 124, 120, 118, 38, 39, 87, 86, 95, 94],
        chordsOptions: [125, 124, 120, 118, 102, 103, 95, 96, 91, 92, 48, 49]
    },
    {
        name: 'Glitch',
        scale: 'chromatic',
        root: 'C',
        bpm: 110,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: 'glitch' }
        },
        wave: 'square',
        instruments: { lead: 120, bass: 38, chords: 118 },
        leadOptions: [120, 125, 118, 115, 87, 86, 81, 80, 11, 2],
        bassOptions: [38, 39, 87, 86, 118, 33, 34, 115, 81],
        chordsOptions: [118, 120, 87, 86, 81, 80, 62, 63]
    },
    {
        name: 'Circuit Bending',
        scale: 'chromatic',
        root: 'C',
        bpm: 120,
        roles: {
            lead: { oct: [5, 6] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'glitch' }
        },
        wave: 'square',
        instruments: { lead: 120, bass: 38, chords: 118 },
        leadOptions: [120, 121, 125, 127, 81, 80, 11, 2, 118],
        bassOptions: [38, 39, 87, 86, 118, 33, 34, 115, 81],
        chordsOptions: [118, 120, 127, 81, 80, 87, 86]
    },
    {
        name: 'Plunderphonics',
        scale: 'major',
        root: 'C',
        bpm: 115,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [2] },
            chords: { oct: [4] },
            drums: { kit: '808' }
        },
        wave: 'sine',
        instruments: { lead: 0, bass: 33, chords: 0 },
        leadOptions: [0, 1, 11, 12, 17, 18, 4, 5, 56, 57, 65, 66, 73, 74, 118, 120],
        bassOptions: [33, 34, 38, 39, 32, 35, 87, 86, 95],
        chordsOptions: [0, 1, 4, 5, 17, 18, 48, 49, 88, 89, 95, 96, 118]
    },
    {
        name: 'Post-Industrial',
        scale: 'chromatic',
        root: 'C',
        bpm: 105,
        roles: {
            lead: { oct: [5] },
            bass: { oct: [1, 2] },
            chords: { oct: [4] },
            drums: { kit: 'industrial' }
        },
        wave: 'square',
        instruments: { lead: 118, bass: 38, chords: 118 },
        leadOptions: [118, 87, 86, 30, 31, 11, 2, 120, 125, 19, 20],
        bassOptions: [38, 39, 87, 86, 118, 33, 34, 30, 31, 95],
        chordsOptions: [118, 87, 86, 30, 31, 19, 20, 102, 103]
    }
	
	
	
];




const GENRE_ECA_RULES = {
            'Techno': [110, 51, 102, 90],
    'Glitch Capitalism': [87, 39, 97, 118],
            'House': [110, 102, 60, 85],
            'Trance': [110, 51, 150, 94],
            'Drum&Bass': [94, 51, 102, 110],
            'Chiptune': [90, 51, 60, 73],
            'Ambient': [90, 60, 150, 45],
            'Pop': [60, 90, 150, 85],
            'Jazz': [150, 90, 60, 78],
            'Blues': [60, 90, 150, 75],
            'Funk': [90, 102, 60, 95],
            'Bossa Nova': [90, 150, 60, 70],
            'Bluegrass': [90, 60, 150, 80],
            'Dubstep': [30, 51, 94, 102],
            'Experimental': [30, 94, 110, 73],
            'Chinese Classical': [85, 110, 95, 50],
            'Chinese Traditional': [80, 105, 90, 65],
            'Lo-Fi': [94, 60, 102, 70],
            'Rock': [110, 90, 150, 105],
            'Metal': [94, 51, 110, 115],
            'Trap': [94, 51, 102, 96],
            'Cinematic': [73, 126, 150, 85],
            'Indian Raga': [73, 126, 102, 75],
            'Middle Eastern': [73, 126, 102, 82],
            'Afrobeats': [73, 90, 60, 95],
            'Salsa': [90, 60, 150, 98],
            'Reggae': [102, 90, 60, 80],
            'Klezmer': [73, 150, 60, 78],
            'Ribab (Rwira)': [73, 150, 60, 85],
            'Rai': [73, 90, 60, 90],
            'Oriental': [73, 126, 102, 80],
			    'Samba': [90, 102, 60, 110],
    'Tango': [110, 90, 150, 85],
    'Flamenco': [110, 51, 102, 90],
    'Highlife': [90, 60, 150, 95],
    'Soukous': [90, 102, 60, 98],
    'Bhangra': [102, 90, 60, 110],
    'Balkan Brass': [110, 51, 102, 120],
    'Zydeco': [90, 150, 60, 85],
    'Cumbia': [90, 60, 150, 80],
    'Mariachi': [110, 90, 150, 95],
    'Polka': [110, 90, 150, 100],
    'Gospel': [73, 126, 150, 85],
    'Ska': [110, 90, 150, 105],
    'Soca': [90, 102, 60, 100],
    'Juju': [90, 60, 150, 88],
    'Mbalax': [90, 102, 60, 95],
    'Forró': [90, 150, 60, 92],
    'Calypso': [90, 60, 150, 85],
    'Gagaku': [73, 126, 102, 65],
	    'Griot': [73, 126, 102, 80],
    'Qawwali': [73, 126, 150, 85],
    'Fado': [110, 90, 150, 78],
    'Andean': [90, 60, 150, 82],
    'Gregorian Chant': [73, 126, 102, 60],
    'Boogie Woogie': [110, 90, 150, 95],
    'Zydeco': [90, 150, 60, 85],
    'Ska': [110, 90, 150, 105],
    'Motown': [90, 102, 60, 88],
    'Disco': [90, 102, 60, 92],
    'New Wave': [94, 51, 102, 88],
    'Grunge': [110, 90, 150, 100],
    'Trip Hop': [94, 60, 102, 75],
    'Dub': [94, 51, 102, 70],
    'Psychedelic Rock': [110, 90, 150, 95],
    'Baroque': [73, 126, 150, 80],
    'Renaissance': [73, 126, 102, 75],
    'Minimalism': [90, 60, 150, 65],
    'Post Rock': [94, 60, 102, 85],
    'Shoegaze': [94, 51, 102, 90],
    'Noise': [30, 94, 110, 100],
    'Drone': [90, 60, 150, 55],
    'Waltz': [110, 90, 150, 85],
    'March': [110, 90, 150, 95],
    'Sea Shanty': [90, 150, 60, 80],
	    'Swing': [110, 90, 150, 95],
    'Bebop': [150, 90, 60, 100],
    'Cool Jazz': [90, 60, 150, 80],
    'Hard Bop': [110, 90, 150, 98],
    'Free Jazz': [30, 94, 110, 85],
    'Modal Jazz': [90, 60, 150, 82],
    'Jazz Fusion': [94, 51, 102, 92],
    'Smooth Jazz': [90, 60, 150, 78],
    'J-Pop': [90, 102, 60, 88],
    'K-Pop': [94, 51, 102, 90],
    'City Pop': [90, 102, 60, 85],
    'Vaporwave': [94, 60, 102, 70],
    'Future Bass': [94, 51, 102, 95],
    'Witch House': [94, 51, 102, 80],
    'Synthpop': [90, 102, 60, 88],
    'Italo Disco': [90, 102, 60, 90],
    'Eurodance': [90, 102, 60, 95],
    'Hardstyle': [94, 51, 102, 110],
    'Gabber': [30, 94, 110, 120],
    'Psytrance': [94, 51, 102, 100],
    'Goa Trance': [94, 51, 102, 98],
    'Progressive House': [90, 102, 60, 88],
    'Deep House': [90, 60, 150, 82],
    'UK Garage': [94, 51, 102, 90],
    'Footwork': [94, 51, 102, 105],
    'Jungle': [94, 51, 102, 108],
		    'Gypsy Jazz': [110, 90, 150, 95],
    'Mambo': [110, 51, 102, 100],
    'Merengue': [90, 102, 60, 95],
    'Bachata': [90, 60, 150, 85],
    'Son Cubano': [90, 150, 60, 88],
    'Rumba': [90, 60, 150, 82],
    'Guaracha': [110, 51, 102, 98],
    'Cha Cha Cha': [90, 102, 60, 92],
    'Danzón': [73, 126, 150, 80],
    'Bolero': [73, 126, 102, 75],
    'Pachanga': [110, 51, 102, 96],
    'Timba': [94, 51, 102, 95],
    'Charanga': [90, 150, 60, 85],
    'Mozambique': [90, 102, 60, 90],
    'Conga': [90, 102, 60, 92],
    'Bomba': [90, 60, 150, 85],
    'Plena': [90, 150, 60, 88],
    'Guajira': [90, 60, 150, 82],
    'Son Montuno': [90, 150, 60, 90],
    'Guaguancó': [90, 60, 150, 85],
    'Colombia': [73, 126, 102, 80],
    'Yambú': [73, 126, 150, 75],
    'Guarapachangueo': [94, 51, 102, 98],
    'Batá': [90, 60, 150, 85],
    'Iyesá': [90, 60, 150, 82],
    'Makuta': [90, 102, 60, 88],
    'Villancico': [73, 126, 150, 80],
    'Punto Cubano': [73, 126, 102, 75],
    'Tonada': [73, 126, 150, 78],
	 'Chaabi': [60, 73, 90, 110],
    'Rai': [45, 73, 60, 105],
    'Gnawa': [73, 60, 90, 110],
    'Andalusisch': [30, 54, 60, 73],
    'Malhoun': [90, 60, 73, 105],
    'Kabyle': [60, 90, 73, 110],
    'Tuareg': [110, 73, 60, 105],
    'DesertBlues': [105, 73, 90, 110],
    'Shaabi': [110, 60, 73, 105],
    'Mahraganat': [90, 73, 60, 110],
    'Tarab': [30, 54, 60, 73],
    'Dabke': [110, 73, 90, 105],
    'Khaliji': [90, 60, 73, 110],
    'Mugham': [54, 30, 60, 73],
    'PersianPop': [73, 90, 60, 110],
    'Arabesk': [60, 73, 90, 105],
    'Fasi': [30, 54, 60, 90],
    'Hawzi': [60, 73, 90, 105],
    'Mezwed': [110, 90, 73, 105],
    'MusiqueOrientale': [30, 60, 73, 90],
    'SaharanRock': [110, 73, 90, 105],
    'MoorishRock': [105, 73, 90, 110],
    'Izran': [60, 73, 90, 110],
    'AmazighRock': [110, 73, 90, 105],
    'Ahidous': [73, 90, 60, 110],
    'Ahwash': [90, 60, 73, 110],
    'Rwayes': [54, 30, 60, 73],
    'Tagnawit': [73, 90, 60, 110],
    'Taqtoqa': [110, 73, 90, 105],
    'Tindé': [60, 73, 90, 105],
	'Classical': [110, 51, 102, 90],
    'Jazz': [110, 102, 60, 85],
    'Blues': [110, 51, 150, 94],
    'Rock': [94, 51, 102, 110],
    'Metal': [90, 51, 60, 73],
    'Pop': [90, 60, 150, 45],
    'R&B': [110, 102, 60, 85],
    'Soul': [110, 51, 150, 94],
    'Funk': [94, 51, 102, 110],
    'Disco': [90, 51, 60, 73],
    'Reggae': [90, 60, 150, 45],
    'Country': [110, 51, 102, 90],
    'Electronic': [110, 102, 60, 85],
    'Folk': [110, 51, 150, 94],
    'Punk': [94, 51, 102, 110],
    'Indie': [90, 51, 60, 73],
    'Alternative': [90, 60, 150, 45],
    'Ambient': [110, 51, 102, 90],
    'Techno': [110, 102, 60, 85],
    'House': [110, 51, 150, 94],
    'Dubstep': [94, 51, 102, 110],
    'Drum and Bass': [90, 51, 60, 73],
    'Trap': [90, 60, 150, 45],
    'Lo-fi': [110, 51, 102, 90],
    'Synth-pop': [110, 102, 60, 85],
    'Electropop': [110, 51, 150, 94],
    'New Wave': [94, 51, 102, 110],
    'Post-punk': [90, 51, 60, 73],
    'Grunge': [90, 60, 150, 45],
    'Emo': [110, 51, 102, 90],
    'Progressive Rock': [110, 102, 60, 85],
    'Psychedelic Rock': [110, 51, 150, 94],
    'Hard Rock': [94, 51, 102, 110],
    'Heavy Metal': [90, 51, 60, 73],
    'Death Metal': [90, 60, 150, 45],
    'Black Metal': [110, 51, 102, 90],
    'Thrash Metal': [110, 102, 60, 85],
    'Power Metal': [110, 51, 150, 94],
    'Gothic Metal': [94, 51, 102, 110],
    'Industrial': [90, 51, 60, 73],
    'Hardcore': [90, 60, 150, 45],
    'Ska': [110, 51, 102, 90],
    'Reggaeton': [110, 102, 60, 85],
    'Salsa': [110, 51, 150, 94],
    'Bachata': [94, 51, 102, 110],
    'Flamenco': [90, 51, 60, 73],
    'Bossa Nova': [90, 60, 150, 45],
    'Samba': [110, 51, 102, 90],
    'Tango': [110, 102, 60, 85],
    'Opera': [110, 51, 150, 94],
    'Choral': [94, 51, 102, 110],
    'Baroque': [90, 51, 60, 73],
    'Romantic': [90, 60, 150, 45],
    'Modern Classical': [110, 51, 102, 90],
    'Minimalism': [110, 102, 60, 85],
    'Avant-garde': [110, 51, 150, 94],
    'Experimental': [94, 51, 102, 110],
    'Noise': [90, 51, 60, 73],
    'Drone': [90, 60, 150, 45],
    'IDM': [110, 51, 102, 90],
    'Glitch': [110, 102, 60, 85],
    'Breakcore': [110, 51, 150, 94],
    'Hardstyle': [94, 51, 102, 110],
	'Gabber': [90, 51, 60, 73],
    'Eurodance': [90, 60, 150, 45],
    'Trance': [110, 51, 102, 90],
    'Psytrance': [110, 102, 60, 85],
    'Hard Trance': [110, 51, 150, 94],
    'Goa Trance': [94, 51, 102, 110],
    'Dream Trance': [90, 51, 60, 73],
    'Progressive Trance': [90, 60, 150, 45],
    'Deep House': [110, 51, 102, 90],
    'Tech House': [110, 102, 60, 85],
    'Acid House': [110, 51, 150, 94],
    'Tropical House': [94, 51, 102, 110],
    'Future House': [90, 51, 60, 73],
    'G-House': [90, 60, 150, 45],
    'Electro House': [110, 51, 102, 90],
    'Big Room': [110, 102, 60, 85],
    'Hard Techno': [110, 51, 150, 94],
    'Minimal Techno': [94, 51, 102, 110],
    'Dub Techno': [90, 51, 60, 73],
    'Acid Techno': [90, 60, 150, 45],
    'Detroit Techno': [110, 51, 102, 90],
    'Liquid Funk': [110, 102, 60, 85],
    'Neurofunk': [110, 51, 150, 94],
    'Jump Up': [94, 51, 102, 110],
    'Jungle': [90, 51, 60, 73],
    'Ragga Jungle': [90, 60, 150, 45],
    'UK Garage': [110, 51, 102, 90],
    '2-Step': [110, 102, 60, 85],
    'Grime': [110, 51, 150, 94],
    'Future Bass': [94, 51, 102, 110],
    'Vaporwave': [90, 51, 60, 73],
    'Synthwave': [90, 60, 150, 45],
    'Chillwave': [110, 51, 102, 90],
    'Darkwave': [110, 102, 60, 85],
    'EBM': [110, 51, 150, 94],
    'Futurepop': [94, 51, 102, 110],
    'Aggrotech': [90, 51, 60, 73],
    'Downtempo': [90, 60, 150, 45],
    'Trip Hop': [110, 51, 102, 90],
    'Psybient': [110, 102, 60, 85],
    'Illbient': [110, 51, 150, 94],
    'Ambient House': [94, 51, 102, 110],
    'Ambient Techno': [90, 51, 60, 73],
    'Dark Ambient': [90, 60, 150, 45],
    'New Age': [110, 51, 102, 90],
    'Space Music': [110, 102, 60, 85],
    'World Music': [110, 51, 150, 94],
    'AfrobeatInMeasure': [94, 51, 102, 110],
    'Ethno Jazz': [90, 51, 60, 73],
    'Latin Jazz': [90, 60, 150, 45],
    'Cool Jazz': [110, 51, 102, 90],
    'Bebop': [110, 102, 60, 85],
    'Hard Bop': [110, 51, 150, 94],
    'Free Jazz': [94, 51, 102, 110],
    'Jazz Fusion': [90, 51, 60, 73],
    'Smooth Jazz': [90, 60, 150, 45],
    'Swing': [110, 51, 102, 90],
    'Big Band': [110, 102, 60, 85],
    'Ragtime': [110, 51, 150, 94],
    'Boogie-woogie': [94, 51, 102, 110],
    'Dixieland': [90, 51, 60, 73],
    'Delta Blues': [90, 60, 150, 45],
    'Chicago Blues': [110, 51, 102, 90],
    'Texas Blues': [110, 102, 60, 85],
	'Jump Blues': [110, 51, 150, 94],
    'Electric Blues': [94, 51, 102, 110],
    'Blues Rock': [90, 51, 60, 73],
    'Southern Rock': [90, 60, 150, 45],
    'Rock and Roll': [110, 51, 102, 90],
    'Rockabilly': [110, 102, 60, 85],
    'Surf Rock': [110, 51, 150, 94],
    'Garage Rock': [94, 51, 102, 110],
    'Glam Rock': [90, 51, 60, 73],
    'Soft Rock': [90, 60, 150, 45],
    'Hard Rock (Alternative)': [110, 51, 102, 90],
    'Arena Rock': [110, 102, 60, 85],
    'Gothic Rock': [110, 51, 150, 94],
    'Shoegaze': [94, 51, 102, 110],
    'Dream Pop': [90, 51, 60, 73],
    'Jangle Pop': [90, 60, 150, 45],
    'Power Pop': [110, 51, 102, 90],
    'Britpop': [110, 102, 60, 85],
    'Madchester': [110, 51, 150, 94],
    'Post-rock': [94, 51, 102, 110],
    'Math Rock': [90, 51, 60, 73],
    'Krautrock': [90, 60, 150, 45],
    'Space Rock': [110, 51, 102, 90],
    'Stoner Rock': [110, 102, 60, 85],
    'Desert Rock': [110, 51, 150, 94],
    'Sludge Metal': [94, 51, 102, 110],
    'Doom Metal': [90, 51, 60, 73],
    'Symphonic Metal': [90, 60, 150, 45],
    'Folk Metal': [110, 51, 102, 90],
    'Viking Metal': [110, 102, 60, 85],
    'Pirate Metal': [110, 51, 150, 94],
    'Nu Metal': [94, 51, 102, 110],
    'Metalcore': [90, 51, 60, 73],
    'Deathcore': [90, 60, 150, 45],
    'Grindcore': [110, 51, 102, 90],
    'Pop Punk': [110, 102, 60, 85],
    'Skate Punk': [110, 51, 150, 94],
    'Hardcore Punk': [94, 51, 102, 110],
    'Post-hardcore': [90, 51, 60, 73],
    'Screamo': [90, 60, 150, 45],
    'Crust Punk': [110, 51, 102, 90],
    'Anarcho-punk': [110, 102, 60, 85],
    'Psychobilly': [110, 51, 150, 94],
    'Horrorpunk': [94, 51, 102, 110],
    'Oi!': [90, 51, 60, 73],
    'Street Punk': [90, 60, 150, 45],
    'Ska Punk': [110, 51, 102, 90],
    'Reggae Rock': [110, 102, 60, 85],
    'Dancehall': [110, 51, 150, 94],
    'Dub': [94, 51, 102, 110],
    'Lovers Rock': [90, 51, 60, 73],
    'Roots Reggae': [90, 60, 150, 45],
    'Ska (Second Wave)': [110, 51, 102, 90],
    'Rocksteady': [110, 102, 60, 85],	
	'Bluegrass': [110, 51, 150, 94],
    'Americana': [94, 51, 102, 110],
    'Alt-country': [90, 51, 60, 73],
    'Honky-tonk': [90, 60, 150, 45],
    'Western Swing': [110, 51, 102, 90],
    'Outlaw Country': [110, 102, 60, 85],
    'Contemporary Country': [110, 51, 150, 94],
    'Celtic Folk': [94, 51, 102, 110],
    'Chanson': [90, 51, 60, 73],
    'Fado': [90, 60, 150, 45],
    'Flamenco (Modern)': [110, 51, 102, 90],
    'Enka': [110, 102, 60, 85],
    'K-pop': [110, 51, 150, 94],
    'J-pop': [94, 51, 102, 110],
    'C-pop': [90, 51, 60, 73],
    'V-pop': [90, 60, 150, 45],
    'Cantopop': [110, 51, 102, 90],
    'Mandopop': [110, 102, 60, 85],
    'Latin Pop': [110, 51, 150, 94],
    'Reggaeton (Modern)': [94, 51, 102, 110],
    'Salsa (Modern)': [90, 51, 60, 73],
    'Merengue': [90, 60, 150, 45],
    'Cumbia': [110, 51, 102, 90],
    'Bachata (Modern)': [110, 102, 60, 85],
    'Mariachi': [110, 51, 150, 94],
    'Ranchera': [94, 51, 102, 110],
    'Bolero': [90, 51, 60, 73],
    'Bossanova (Modern)': [90, 60, 150, 45],
    'Samba (Modern)': [110, 51, 102, 90],
    'MPB': [110, 102, 60, 85],
    'Tropicália': [110, 51, 150, 94],
    'Calypso': [94, 51, 102, 110],
    'Soca': [90, 51, 60, 73],
    'Zouk': [90, 60, 150, 45],
    'Kizomba': [110, 51, 102, 90],
    'Kuduro': [110, 102, 60, 85],
    'Mbaqanga': [110, 51, 150, 94],
    'Highlife': [94, 51, 102, 110],
    'Desert Blues': [90, 51, 60, 73],
    'Gnawa': [90, 60, 150, 45],
    'Rai': [110, 51, 102, 90],
    'Qawwali': [110, 102, 60, 85],
    'Hindustani': [110, 51, 150, 94],
    'Carnatic': [94, 51, 102, 110],
    'Thai Pop': [90, 51, 60, 73],
    'Luk Thung': [90, 60, 150, 45],
    'Dangdut': [110, 51, 102, 90],
    'V-pop (Contemporary)': [110, 102, 60, 85],
    'P-pop': [110, 51, 150, 94],
    'Anison': [94, 51, 102, 110],
    'Video Game Music': [90, 51, 60, 73],
    'Chiptune': [90, 60, 150, 45],
    'Soundtrack': [110, 51, 102, 90],
    'Film Score': [110, 102, 60, 85],
    'Production Music': [110, 51, 150, 94],
    'Trailer Music': [94, 51, 102, 110],
    'Holiday Music': [90, 51, 60, 73],
    'Christian Music': [90, 60, 150, 45],
    'Gospel': [110, 51, 102, 90],
    'Contemporary Christian': [110, 102, 60, 85],
    'Children\'s Music': [110, 51, 150, 94],
    'Comedy Music': [94, 51, 102, 110],
    'Novelty Music': [90, 51, 60, 73],
    'Plunderphonics': [90, 60, 150, 45]
	
        };

        const GENRE_PERCUSSION = {
            'none':[],
            'Glitch Capitalism': [35, 38, 42],
            'soft': [36, 40, 42],
            'orchestral': [35, 40, 42],
            'electro': [36, 39, 42],
            '909': [36, 38, 42],
            '707': [36, 40, 42],
            'amen': [36, 38, 42],
            'heavy': [35, 38, 42],
            'boom-bap': [36, 40, 42],
            '808': [36, 39, 42],
            'pop': [36, 38, 42],
            'rock': [35, 38, 42],
            'metal': [35, 38, 42],
            'jazz': [35, 40, 42],
            'blues': [36, 38, 42],
            'funk': [36, 39, 42],
            'reggae': [36, 38, 42],
            'afro': [36, 42, 54],
            'latin': [36, 42, 54],
            'bossa': [36, 38, 42],
            'folk': [35, 38, 42],
            'tabla': [66, 60, 62],
            'daf': [35, 60, 54],
            'lofi': [36, 38, 42],
            'glitch': [36, 38, 42],
            'chinese': [60, 62, 54],
            'chinese_traditional': [60, 62, 77],
            'chips': [36, 38, 42],			
    'samba': [36, 38, 54],
    'tango': [36, 40, 42],
    'flamenco': [36, 37, 39],
    'highlife': [36, 38, 42],
    'soukous': [36, 38, 42],
    'bhangra': [36, 42, 54],
    'balkan': [36, 38, 42],
    'zydeco': [36, 38, 42],
    'cumbia': [36, 38, 42],
    'mariachi': [36, 38, 42],
    'polka': [36, 38, 42],
    'gospel': [36, 38, 42],
    'ska': [36, 38, 42],
    'soca': [36, 38, 42],
    'juju': [36, 38, 54],
    'mbalax': [36, 38, 54],
    'forro': [36, 38, 42],
    'calypso': [36, 38, 42],
    'gagaku': [66, 60, 77],
	    'griot': [36, 54, 77],
    'qawwali': [66, 60, 62],
    'fado': [36, 38, 42],
    'andean': [36, 54, 115],
    'chant': [47, 55, 14],
    'boogie': [36, 38, 42],
    'zydeco': [36, 38, 42],
    'ska': [36, 38, 42],
    'motown': [36, 38, 42],
    'disco': [36, 38, 42],
    'newwave': [36, 38, 42],
    'grunge': [36, 38, 42],
    'triphop': [36, 38, 42],
    'dub': [36, 38, 42],
    'psych': [36, 38, 42],
    'baroque': [47, 46, 14],
    'renaissance': [47, 46, 13],
    'minimal': [36, 38, 42],
    'postrock': [36, 38, 42],
    'shoegaze': [36, 38, 42],
    'noise': [36, 38, 118],
    'drone': [47, 55, 14],
    'waltz': [36, 38, 42],
    'march': [36, 38, 47],
    'shanty': [36, 38, 42],
	    'swing': [36, 38, 42],
    'bebop': [36, 38, 42],
    'cooljazz': [36, 38, 42],
    'hardbop': [36, 38, 42],
    'freejazz': [36, 38, 42],
    'modaljazz': [36, 38, 42],
    'fusion': [36, 38, 42],
    'smoothjazz': [36, 38, 42],
    'jpop': [36, 38, 42],
    'kpop': [36, 38, 42],
    'citypop': [36, 38, 42],
    'vaporwave': [36, 38, 42],
    'futurebass': [36, 38, 42],
    'witchhouse': [36, 38, 42],
    'synthpop': [36, 38, 42],
    'italo': [36, 38, 42],
    'eurodance': [36, 38, 42],
    'hardstyle': [36, 38, 42],
    'gabber': [36, 38, 42],
    'psytrance': [36, 38, 42],
    'goa': [36, 38, 42],
    'proghouse': [36, 38, 42],
    'deephouse': [36, 38, 42],
    'ukgarage': [36, 38, 42],
    'footwork': [36, 38, 42],
    'jungle': [36, 38, 42],
	    'gypsy': [36, 38, 42],
    'mambo': [36, 42, 54],
    'merengue': [36, 38, 42],
    'bachata': [36, 38, 42],
    'son': [36, 38, 42],
    'rumba': [36, 42, 54],
    'guaracha': [36, 38, 42],
    'chacha': [36, 38, 42],
    'danzon': [36, 38, 42],
    'bolero': [36, 38, 42],
    'pachanga': [36, 38, 42],
    'timba': [36, 38, 42],
    'charanga': [36, 38, 42],
    'mozambique': [36, 42, 54],
    'conga': [36, 42, 54],
    'bomba': [36, 42, 54],
    'plena': [36, 38, 42],
    'guajira': [36, 38, 42],
    'montuno': [36, 38, 42],
    'guaguanco': [36, 42, 54],
    'colombia': [36, 42, 54],
    'yambu': [36, 42, 54],
    'guarapachangueo': [36, 42, 54],
    'bata': [36, 42, 54],
    'iyesa': [36, 42, 54],
    'makuta': [36, 42, 54],
    'villancico': [36, 38, 42],
    'punto': [36, 38, 42],
    'tonada': [36, 38, 42],
    'darbuka': [36, 38, 42],       
    'bendir': [54, 56, 60],   
    'daf': [54, 56, 60],          
    'taarija': [37, 39, 43],      
    'tabla': [60, 62, 64],           
    'riqq': [65, 66, 67],            
    'rockkit': [36, 38, 42],         
    'electronic': [80, 81, 82],     
    'tbel': [75, 76, 77],            
    'qraqeb': [70, 71, 72],         
    'ney': [73, 74, 75],              
    'oud': [25, 26, 27],            
    'kanun': [28, 29, 30],           
    'neyzan': [76, 77, 78],          
    'gasba': [79, 80, 81],           
    'guembri': [31, 32, 33],        
    'lotar': [34, 35, 36],           
    'zurna': [82, 83, 84],           
    'mizmar': [85, 86, 87],          
    'rabab': [37, 38, 39],            
    'violin': [40, 41, 42],          
    'accordion': [43, 44, 45],       
    'synthesizer': [88, 89, 90],    
    'chant': [91, 92, 93],          
    'handclap': [39, 40, 41],        
    'fingercymbals': [42, 43, 44],   
    'waterdrum': [45, 46, 47],       
    'windchimes': [94, 95, 96],      
    'thunder': [97, 98, 99],         
    'rain': [100, 101, 102],         
	'Classical': [35, 40, 42],
    'Jazz': [36, 40, 42],
    'Blues': [36, 38, 42],
    'Rock': [36, 38, 42],
    'Metal': [35, 38, 42],
    'Pop': [36, 40, 42],
    'R&B': [36, 40, 42],
    'Soul': [36, 38, 42],
    'Funk': [36, 38, 42],
    'Disco': [36, 38, 42],
    'Reggae': [36, 40, 42],
    'Country': [36, 38, 42],
    'Electronic': [36, 39, 42],
    'Folk': [36, 40, 42],
    'Punk': [36, 38, 42],
    'Indie': [36, 40, 42],
    'Alternative': [36, 38, 42],
    'Ambient': [36, 40, 42],
    'Techno': [36, 38, 42],
    'House': [36, 38, 42],
    'Dubstep': [35, 38, 42],
    'Drum and Bass': [36, 38, 42],
    'Trap': [36, 39, 42],
    'Lo-fi': [36, 40, 42],
    'Synth-pop': [36, 39, 42],
    'Electropop': [36, 40, 42],
    'New Wave': [36, 40, 42],
    'Post-punk': [36, 38, 42],
    'Grunge': [36, 38, 42],
    'Emo': [36, 38, 42],
    'Progressive Rock': [36, 38, 42],
    'Psychedelic Rock': [36, 38, 42],
    'Hard Rock': [35, 38, 42],
    'Heavy Metal': [35, 38, 42],
    'Death Metal': [35, 38, 42],
    'Black Metal': [35, 38, 42],
    'Thrash Metal': [35, 38, 42],
    'Power Metal': [35, 38, 42],
    'Gothic Metal': [35, 38, 42],
    'Industrial': [36, 38, 42],
    'Hardcore': [36, 38, 42],
    'Ska': [36, 38, 42],
    'Reggaeton': [36, 39, 42],
    'Salsa': [36, 40, 42],
    'Bachata': [36, 40, 42],
    'Flamenco': [36, 40, 42],
    'Bossa Nova': [36, 40, 42],
    'Samba': [36, 40, 42],
    'Tango': [36, 40, 42],
    'Opera': [35, 40, 42],
    'Choral': [35, 40, 42],
    'Baroque': [35, 40, 42],
    'Romantic': [35, 40, 42],
    'Modern Classical': [35, 40, 42],
    'Minimalism': [36, 40, 42],
    'Avant-garde': [36, 40, 42],
    'Experimental': [36, 40, 42],
    'Noise': [35, 38, 42],
    'Drone': [36, 40, 42],
    'IDM': [36, 39, 42],
    'Glitch': [36, 39, 42],
    'Breakcore': [36, 38, 42],
    'Hardstyle': [35, 38, 42],
	'Gabber': [35, 38, 42],
    'Eurodance': [36, 38, 42],
    'Trance': [36, 38, 42],
    'Psytrance': [36, 38, 42],
    'Hard Trance': [36, 38, 42],
    'Goa Trance': [36, 38, 42],
    'Dream Trance': [36, 40, 42],
    'Progressive Trance': [36, 38, 42],
    'Deep House': [36, 38, 42],
    'Tech House': [36, 38, 42],
    'Acid House': [36, 38, 42],
    'Tropical House': [36, 40, 42],
    'Future House': [36, 38, 42],
    'G-House': [36, 39, 42],
    'Electro House': [36, 39, 42],
    'Big Room': [35, 38, 42],
    'Hard Techno': [35, 38, 42],
    'Minimal Techno': [36, 38, 42],
    'Dub Techno': [36, 40, 42],
    'Acid Techno': [36, 38, 42],
    'Detroit Techno': [36, 38, 42],
    'Liquid Funk': [36, 40, 42],
    'Neurofunk': [36, 38, 42],
    'Jump Up': [36, 38, 42],
    'Jungle': [36, 38, 42],
    'Ragga Jungle': [36, 38, 42],
    'UK Garage': [36, 38, 42],
    '2-Step': [36, 38, 42],
    'Grime': [36, 39, 42],
    'Future Bass': [36, 39, 42],
    'Vaporwave': [36, 40, 42],
    'Synthwave': [36, 39, 42],
    'Chillwave': [36, 40, 42],
    'Darkwave': [36, 38, 42],
    'EBM': [36, 38, 42],
    'Futurepop': [36, 40, 42],
    'Aggrotech': [35, 38, 42],
    'Downtempo': [36, 40, 42],
    'Trip Hop': [36, 39, 42],
    'Psybient': [36, 40, 42],
    'Illbient': [36, 40, 42],
    'Ambient House': [36, 40, 42],
    'Ambient Techno': [36, 40, 42],
    'Dark Ambient': [36, 40, 42],
    'New Age': [36, 40, 42],
    'Space Music': [36, 40, 42],
    'World Music': [36, 40, 42],
    'AfrobeatInMeasure': [36, 38, 42],
    'Ethno Jazz': [36, 40, 42],
    'Latin Jazz': [36, 40, 42],
    'Cool Jazz': [36, 40, 42],
    'Bebop': [36, 38, 42],
    'Hard Bop': [36, 38, 42],
    'Free Jazz': [36, 40, 42],
    'Jazz Fusion': [36, 38, 42],
    'Smooth Jazz': [36, 40, 42],
    'Swing': [36, 40, 42],
    'Big Band': [36, 40, 42],
    'Ragtime': [36, 40, 42],
    'Boogie-woogie': [36, 38, 42],
    'Dixieland': [36, 40, 42],
    'Delta Blues': [36, 38, 42],
    'Chicago Blues': [36, 38, 42],
    'Texas Blues': [36, 38, 42],
	'Jump Blues': [36, 38, 42],
    'Electric Blues': [36, 38, 42],
    'Blues Rock': [36, 38, 42],
    'Southern Rock': [36, 38, 42],
    'Rock and Roll': [36, 38, 42],
    'Rockabilly': [36, 38, 42],
    'Surf Rock': [36, 38, 42],
    'Garage Rock': [36, 38, 42],
    'Glam Rock': [36, 38, 42],
    'Soft Rock': [36, 40, 42],
    'Hard Rock (Alternative)': [35, 38, 42],
    'Arena Rock': [36, 38, 42],
    'Gothic Rock': [36, 38, 42],
    'Shoegaze': [36, 40, 42],
    'Dream Pop': [36, 40, 42],
    'Jangle Pop': [36, 40, 42],
    'Power Pop': [36, 40, 42],
    'Britpop': [36, 40, 42],
    'Madchester': [36, 38, 42],
    'Post-rock': [36, 40, 42],
    'Math Rock': [36, 38, 42],
    'Krautrock': [36, 38, 42],
    'Space Rock': [36, 38, 42],
    'Stoner Rock': [35, 38, 42],
    'Desert Rock': [36, 38, 42],
    'Sludge Metal': [35, 38, 42],
    'Doom Metal': [35, 38, 42],
    'Symphonic Metal': [35, 38, 42],
    'Folk Metal': [35, 38, 42],
    'Viking Metal': [35, 38, 42],
    'Pirate Metal': [35, 38, 42],
    'Nu Metal': [35, 38, 42],
    'Metalcore': [35, 38, 42],
    'Deathcore': [35, 38, 42],
    'Grindcore': [35, 38, 42],
    'Pop Punk': [36, 38, 42],
    'Skate Punk': [36, 38, 42],
    'Hardcore Punk': [36, 38, 42],
    'Post-hardcore': [36, 38, 42],
    'Screamo': [36, 38, 42],
    'Crust Punk': [36, 38, 42],
    'Anarcho-punk': [36, 38, 42],
    'Psychobilly': [36, 38, 42],
    'Horrorpunk': [36, 38, 42],
    'Oi!': [36, 38, 42],
    'Street Punk': [36, 38, 42],
    'Ska Punk': [36, 38, 42],
    'Reggae Rock': [36, 40, 42],
    'Dancehall': [36, 39, 42],
    'Dub': [36, 40, 42],
    'Lovers Rock': [36, 40, 42],
    'Roots Reggae': [36, 40, 42],
    'Ska (Second Wave)': [36, 38, 42],
    'Rocksteady': [36, 40, 42],
	'Bluegrass': [36, 40, 42],
    'Americana': [36, 38, 42],
    'Alt-country': [36, 38, 42],
    'Honky-tonk': [36, 38, 42],
    'Western Swing': [36, 40, 42],
    'Outlaw Country': [36, 38, 42],
    'Contemporary Country': [36, 38, 42],
    'Celtic Folk': [36, 40, 42],
    'Chanson': [36, 40, 42],
    'Fado': [36, 40, 42],
    'Flamenco (Modern)': [36, 40, 42],
    'Enka': [36, 40, 42],
    'K-pop': [36, 39, 42],
    'J-pop': [36, 40, 42],
    'C-pop': [36, 40, 42],
    'V-pop': [36, 40, 42],
    'Cantopop': [36, 40, 42],
    'Mandopop': [36, 40, 42],
    'Latin Pop': [36, 40, 42],
    'Reggaeton (Modern)': [36, 39, 42],
    'Salsa (Modern)': [36, 40, 42],
    'Merengue': [36, 40, 42],
    'Cumbia': [36, 40, 42],
    'Bachata (Modern)': [36, 40, 42],
    'Mariachi': [36, 40, 42],
    'Ranchera': [36, 40, 42],
    'Bolero': [36, 40, 42],
    'Bossanova (Modern)': [36, 40, 42],
    'Samba (Modern)': [36, 40, 42],
    'MPB': [36, 40, 42],
    'Tropicália': [36, 38, 42],
    'Calypso': [36, 40, 42],
    'Soca': [36, 40, 42],
    'Zouk': [36, 40, 42],
    'Kizomba': [36, 40, 42],
    'Kuduro': [36, 39, 42],
    'Mbaqanga': [36, 38, 42],
    'Highlife': [36, 38, 42],
    'Desert Blues': [36, 38, 42],
    'Gnawa': [36, 40, 42],
    'Rai': [36, 38, 42],
    'Qawwali': [36, 40, 42],
    'Hindustani': [35, 40, 42],
    'Carnatic': [35, 40, 42],
    'Thai Pop': [36, 40, 42],
    'Luk Thung': [36, 40, 42],
    'Dangdut': [36, 38, 42],
    'V-pop (Contemporary)': [36, 40, 42],
    'P-pop': [36, 40, 42],
    'Anison': [36, 39, 42],
    'Video Game Music': [36, 39, 42],
    'Chiptune': [36, 39, 42],
    'Soundtrack': [35, 40, 42],
    'Film Score': [35, 40, 42],
    'Production Music': [36, 40, 42],
    'Trailer Music': [35, 38, 42],
    'Holiday Music': [36, 40, 42],
    'Christian Music': [36, 40, 42],
    'Gospel': [36, 38, 42],
    'Contemporary Christian': [36, 40, 42],
    'Children\'s Music': [36, 40, 42],
    'Comedy Music': [36, 40, 42],
    'Novelty Music': [36, 40, 42],
    'Plunderphonics': [36, 39, 42]
	
        };
		
		
		const GENRE_PERCUSSION_ONS = {
            'Glitch Capitalism': [
  [(beatInMeasure) => (beatInMeasure % 7 === 0 || beatInMeasure % 13 === 0), 0.8], 
  [(beatInMeasure) => (beatInMeasure % 2 !== 0), 0.4], 
  [(beatInMeasure) => (Math.random() < 0.2), 0.9] 
],
    'soft': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 4 === 2), 0.3],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.7]
    ],
    'orchestral': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 0 || beatInMeasure % 16 === 8), 0.8]
    ],
    'electro': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.2],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 && Math.random() < 0.7), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || (beatInMeasure % 8 === 3 && Math.random() < 0.5)), 0.6]
    ],
    '909': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.25],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 1), 0.75]
    ],
    '707': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'amen': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.15],
        [(beatInMeasure) => (beatInMeasure % 8 === 2 || beatInMeasure % 8 === 6), 0.4],
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 8 === 3 || beatInMeasure % 8 === 5), 0.6]
    ],
    'heavy': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 && Math.random() < 0.8), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 1 || beatInMeasure % 8 === 3), 0.9]
    ],
    'boom-bap': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 && Math.random() < 0.6), 0.35],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.65],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || (beatInMeasure % 8 === 1 && Math.random() < 0.4)), 0.8]
    ],
    '808': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.2],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || (beatInMeasure % 8 === 6 && Math.random() < 0.3)), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 1 || (beatInMeasure % 16 === 11 && Math.random() < 0.5)), 0.9]
    ],
    'pop': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7]
    ],
    'rock': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || (beatInMeasure % 8 === 1 && Math.random() < 0.6)), 0.8]
    ],
    'metal': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0 && Math.random() < 0.7), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.8],
        [(beatInMeasure) => (beatInMeasure % 2 === 0 || (beatInMeasure % 4 === 1 && Math.random() < 0.5)), 0.9]
    ],
    'jazz': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 && Math.random() < 0.7), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 4 === 3), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 4), 0.7]
    ],
    'blues': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 4 === 2), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || (beatInMeasure % 8 === 1 && Math.random() < 0.3)), 0.7]
    ],
    'funk': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 && Math.random() < 0.8), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || (beatInMeasure % 8 === 4 && Math.random() < 0.5)), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 1 || beatInMeasure % 8 === 3), 0.7]
    ],
    'reggae': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 3), 0.8]
    ],
    'afro': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 || beatInMeasure % 4 === 1), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3 || beatInMeasure % 8 === 5), 0.7]
    ],
    'latin': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 || beatInMeasure % 4 === 1), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 4), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3), 0.7]
    ],
    'bossa': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.25],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3), 0.6]
    ],
    'folk': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 4 === 2), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7]
    ],
    'tabla': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 2), 0.4],
        [(beatInMeasure) => (beatInMeasure % 8 === 4 || beatInMeasure % 8 === 6), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 0 || beatInMeasure % 16 === 8 || beatInMeasure % 16 === 12), 0.8]
    ],
    'daf': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3), 0.7]
    ],
    'lofi': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 && Math.random() < 0.6), 0.25],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 && Math.random() < 0.8), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 && Math.random() < 0.9), 0.6]
    ],
    'glitch': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0 && Math.random() < 0.3), 0.2],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || (beatInMeasure % 8 === 5 && Math.random() < 0.4)), 0.4],
        [(beatInMeasure) => ((beatInMeasure % 3 === 0 || beatInMeasure % 5 === 0) && Math.random() < 0.6), 0.6]
    ],
    'chinese': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 4 === 2), 0.4],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 8 === 6), 0.8]
    ],
    'chinese_traditional': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 4 || beatInMeasure % 8 === 6), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 0 || beatInMeasure % 16 === 8), 0.9]
    ],
    'chips': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.2],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 1), 0.6]
    ],
	 'samba': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9]
    ],
    'tango': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.9]
    ],
    'flamenco': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 && Math.random() < 0.7), 0.4],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.6],
        [(beatInMeasure) => ((beatInMeasure % 3 === 0 || beatInMeasure % 5 === 0) && Math.random() < 0.5), 0.8]
    ],
    'highlife': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3), 0.8]
    ],
    'soukous': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 1 || beatInMeasure % 8 === 3), 0.7]
    ],
    'bhangra': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3 || beatInMeasure % 8 === 5), 0.8]
    ],
    'balkan': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0 && Math.random() < 0.8), 0.5],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || (beatInMeasure % 3 === 0 && Math.random() < 0.6)), 0.9]
    ],
    'zydeco': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 1), 0.8]
    ],
    'cumbia': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3), 0.7]
    ],
    'mariachi': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 1), 0.8]
    ],
    'polka': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9]
    ],
    'gospel': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 && Math.random() < 0.7), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 4), 0.8]
    ],
    'ska': [
        [(beatInMeasure) => (beatInMeasure % 2 === 1), 0.4], 
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'soca': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 1 || beatInMeasure % 8 === 3), 0.7]
    ],
    'juju': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3), 0.8]
    ],
    'mbalax': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 || beatInMeasure % 4 === 1), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3 || beatInMeasure % 8 === 5), 0.7]
    ],
    'forro': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 1), 0.8]
    ],
    'calypso': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3), 0.7]
    ],
    'gagaku': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.9]
    ],
	    'griot': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.9]
    ],
    'qawwali': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.9]
    ],
    'fado': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.9]
    ],
    'andean': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'chant': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.9]
    ],
    'boogie': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'disco': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.9]
    ],
    'newwave': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'triphop': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 && Math.random() < 0.6), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7]
    ],
    'baroque': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.9]
    ],
    'minimal': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.9]
    ],
    'waltz': [
        [(beatInMeasure) => (beatInMeasure % 3 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 6 === 3), 0.8],
        [(beatInMeasure) => (beatInMeasure % 12 === 0), 0.9]
    ],
    'march': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.9]
    ],
    'shanty': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.9]
    ],
	
	    'swing': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || (beatInMeasure % 8 === 1 && Math.random() < 0.3)), 0.8]
    ],
    'bebop': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0 && Math.random() < 0.7), 0.5],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || (beatInMeasure % 8 === 3 && Math.random() < 0.5)), 0.9]
    ],
    'cooljazz': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 && Math.random() < 0.6), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7]
    ],
    'hardbop': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || (beatInMeasure % 8 === 1 && Math.random() < 0.4)), 0.9]
    ],
    'freejazz': [
        [(beatInMeasure) => (Math.random() < 0.4), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || (beatInMeasure % 8 === 6 && Math.random() < 0.6)), 0.5],
        [(beatInMeasure) => ((beatInMeasure % 3 === 0 || beatInMeasure % 5 === 0) && Math.random() < 0.7), 0.7]
    ],
    'modaljazz': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 4 === 2), 0.4],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.8]
    ],
    'fusion': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 1), 0.8]
    ],
    'smoothjazz': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 && Math.random() < 0.8), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7]
    ],
    'jpop': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'kpop': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 1), 0.8]
    ],
    'citypop': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7]
    ],
    'vaporwave': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 && Math.random() < 0.7), 0.4],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.8]
    ],
    'futurebass': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || (beatInMeasure % 8 === 1 && Math.random() < 0.4)), 0.7]
    ],
    'witchhouse': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 && Math.random() < 0.6), 0.4],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 0 || beatInMeasure % 16 === 8), 0.8]
    ],
    'synthpop': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'italo': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 1), 0.8]
    ],
    'eurodance': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'hardstyle': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9]
    ],
    'gabber': [
        [(beatInMeasure) => (beatInMeasure % 0.5 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.9]
    ],
    'psytrance': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'goa': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || (beatInMeasure % 8 === 3 && Math.random() < 0.5)), 0.9]
    ],
    'proghouse': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'deephouse': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 && Math.random() < 0.7), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7]
    ],
    'ukgarage': [
        [(beatInMeasure) => (beatInMeasure % 2 === 1), 0.4], 
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'footwork': [
        [(beatInMeasure) => (beatInMeasure % 0.5 === 0 && Math.random() < 0.6), 0.3],
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.7]
    ],
    'jungle': [
        [(beatInMeasure) => (beatInMeasure % 0.5 === 0), 0.2],
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.8]
    ],
	    'gypsy': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || (beatInMeasure % 8 === 1 && Math.random() < 0.4)), 0.8]
    ],
    'mambo': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 1 || beatInMeasure % 8 === 3), 0.8]
    ],
    'merengue': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'bachata': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 4 === 2), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || (beatInMeasure % 8 === 1 && Math.random() < 0.3)), 0.7]
    ],
    'son': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'rumba': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 || beatInMeasure % 4 === 1), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3 || beatInMeasure % 8 === 5), 0.7]
    ],
    'guaracha': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'chacha': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 4 === 3), 0.8]
    ],
    'danzon': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.9]
    ],
    'bolero': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.9]
    ],
    'pachanga': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'timba': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 1 || beatInMeasure % 8 === 3), 0.8]
    ],
    'charanga': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'mozambique': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 || beatInMeasure % 4 === 1), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3 || beatInMeasure % 8 === 5), 0.7]
    ],
    'conga': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 || beatInMeasure % 4 === 1), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3 || beatInMeasure % 8 === 5), 0.7]
    ],
    'bomba': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 || beatInMeasure % 4 === 1), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3 || beatInMeasure % 8 === 5), 0.7]
    ],
    'plena': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'guajira': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'montuno': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'guaguanco': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 || beatInMeasure % 4 === 1), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3 || beatInMeasure % 8 === 5), 0.7]
    ],
    'colombia': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 || beatInMeasure % 4 === 1), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3 || beatInMeasure % 8 === 5), 0.7]
    ],
    'yambu': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 || beatInMeasure % 4 === 1), 0.3],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3 || beatInMeasure % 8 === 5), 0.7]
    ],
    'guarapachangueo': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8]
    ],
    'bata': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.9]
    ],
    'iyesa': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.9]
    ],
    'makuta': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.9]
    ],
    'villancico': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.9]
    ],
    'punto': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.9]
    ],
    'tonada': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.9]
    ],
	 'daf': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.3],                      
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 6), 0.5], 
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3), 0.7]  
    ],
    'darbuka': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0 || beatInMeasure % 4 === 1), 0.4], 
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 8 === 3), 0.6], 
        [(beatInMeasure) => (beatInMeasure % 8 === 4 || beatInMeasure % 8 === 7), 0.5]  
    ],
    'bendir': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.4],                       
        [(beatInMeasure) => (beatInMeasure % 2 === 0 && beatInMeasure % 4 !== 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 3 || beatInMeasure % 8 === 7), 0.5]  
    ],
    'taarija': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.5],                         
        [(beatInMeasure) => (beatInMeasure % 4 === 1), 0.4],                         
        [(beatInMeasure) => (beatInMeasure % 8 === 3 || beatInMeasure % 8 === 6), 0.6]  
    ],
    'tabla': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],                         
        [(beatInMeasure) => (beatInMeasure % 2 === 1), 0.6],                        
        [(beatInMeasure) => (beatInMeasure % 8 === 2 || beatInMeasure % 8 === 5), 0.4]  
   ],
    'riqq':[
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.3],                       
        [(beatInMeasure) => (beatInMeasure % 4 === 1), 0.5],                         
        [(beatInMeasure) => (beatInMeasure % 8 === 3 || beatInMeasure % 8 === 7), 0.7] 
    ],         
    'rockkit': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.3],                        
        [(beatInMeasure) => (beatInMeasure % 2 === 1), 0.5],                         
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.2]                       
    ],
    'electronic': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],                        
        [(beatInMeasure) => (beatInMeasure % 2 === 1), 0.6],                        
        [(beatInMeasure) => (beatInMeasure % 0.5 === 0), 0.4]                      
    ],
    'tbel': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.7],                        
        [(beatInMeasure) => (beatInMeasure % 4 === 1), 0.5],                        
        [(beatInMeasure) => (beatInMeasure % 8 === 3), 0.6]                         
    ],
    'qraqeb': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.4],                       
        [(beatInMeasure) => (beatInMeasure % 2 === 0.5), 0.6],                      
        [(beatInMeasure) => (beatInMeasure % 4 === 1.5), 0.5]                      
    ],
    'ney': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.3],                       
        [(beatInMeasure) => (beatInMeasure % 2 === 1), 0.2],                       
        [(beatInMeasure) => (beatInMeasure % 8 === 3), 0.4]                          
    ],
    'oud': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],                      
        [(beatInMeasure) => (beatInMeasure % 2 === 1), 0.3],                        
        [(beatInMeasure) => (beatInMeasure % 8 === 2), 0.6]                  
    ],
    'kanun': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.4],                       
        [(beatInMeasure) => (beatInMeasure % 2 === 0.5), 0.3],                   
        [(beatInMeasure) => (beatInMeasure % 8 === 3.5), 0.5]                   
    ],
    'neyzan': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.6],                        
        [(beatInMeasure) => (beatInMeasure % 4 === 1), 0.4],                       
        [(beatInMeasure) => (beatInMeasure % 8 === 3), 0.7]                 
    ],
    'gasba': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],                    
        [(beatInMeasure) => (beatInMeasure % 2 === 1), 0.3],                    
        [(beatInMeasure) => (beatInMeasure % 8 === 2.5), 0.6]                  
    ],
    'guembri': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.7],                    
        [(beatInMeasure) => (beatInMeasure % 4 === 1), 0.5],              
        [(beatInMeasure) => (beatInMeasure % 8 === 3.5), 0.6]                 
    ],
    'lotar': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],                       
        [(beatInMeasure) => (beatInMeasure % 2 === 1), 0.4],                         
        [(beatInMeasure) => (beatInMeasure % 8 === 2.5), 0.7]                 
    ],
    'zurna': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.8],                 
        [(beatInMeasure) => (beatInMeasure % 4 === 1), 0.6],                     
        [(beatInMeasure) => (beatInMeasure % 8 === 3), 0.9]                        
    ],
    'mizmar': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],                      
        [(beatInMeasure) => (beatInMeasure % 2 === 1), 0.5],                   
        [(beatInMeasure) => (beatInMeasure % 8 === 2.5), 0.8]                     
    ],
    'rabab': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.5],                
        [(beatInMeasure) => (beatInMeasure % 4 === 1), 0.3],                   
        [(beatInMeasure) => (beatInMeasure % 8 === 3.5), 0.6]                 
    ],
    'violin': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.4],               
        [(beatInMeasure) => (beatInMeasure % 2 === 0.5), 0.6],                    
        [(beatInMeasure) => (beatInMeasure % 8 === 2), 0.7]                    
    ],
    'accordion': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.5],                    
        [(beatInMeasure) => (beatInMeasure % 4 === 1), 0.4],                   
        [(beatInMeasure) => (beatInMeasure % 8 === 3.5), 0.6]                     
    ],
    'synthesizer': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],                         
        [(beatInMeasure) => (beatInMeasure % 2 === 1), 0.5],                       
        [(beatInMeasure) => (beatInMeasure % 8 === 2.5), 0.8]                  
    ],
    'chant': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],                      
        [(beatInMeasure) => (beatInMeasure % 2 === 1), 0.4],                
        [(beatInMeasure) => (beatInMeasure % 8 === 3), 0.7]                        
    ],
    'handclap': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.5],                       
        [(beatInMeasure) => (beatInMeasure % 4 === 1), 0.7],                      
        [(beatInMeasure) => (beatInMeasure % 8 === 3.5), 0.6]                    
    ],
    'fingercymbals': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.3],                       
        [(beatInMeasure) => (beatInMeasure % 2 === 0.5), 0.5],                
        [(beatInMeasure) => (beatInMeasure % 4 === 1.5), 0.4]              
    ],
    'waterdrum': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],                  
        [(beatInMeasure) => (beatInMeasure % 2 === 1), 0.4],           
        [(beatInMeasure) => (beatInMeasure % 8 === 2.5), 0.5]                    
    ],
    'windchimes': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.7],                       
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],                        
        [(beatInMeasure) => (beatInMeasure % 2 === 1), 0.3]                 
    ],
    'thunder': [
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.9],               
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],                
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5]                       
    ],
    'rain': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.2],                     
        [(beatInMeasure) => (beatInMeasure % 2 === 0.5), 0.4],                   
        [(beatInMeasure) => (beatInMeasure % 4 === 1.5), 0.3]                      
    ],
	    'Classical': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.4],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.8]
    ],
    'Jazz': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || (beatInMeasure % 4 === 3 && Math.random() < 0.3)), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 2 || beatInMeasure % 8 === 6), 0.4],
        [(beatInMeasure) => (beatInMeasure % 2 === 0 && Math.random() < 0.6), 0.3]
    ],
    'Blues': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 3 || beatInMeasure % 8 === 7), 0.3]
    ],
    'Rock': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4]
    ],
    'Metal': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 1 || beatInMeasure % 8 === 5), 0.6]
    ],
    'Pop': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5]
    ],
    'R&B': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.4]
    ],
    'Soul': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 6), 0.4]
    ],
    'Funk': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 3 || beatInMeasure % 16 === 11), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6]
    ],
    'Disco': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'Reggae': [
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'Country': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.4]
    ],
    'Electronic': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4]
    ],
    'Folk': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.4],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.6]
    ],
    'Punk': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.9]
    ],
    'Indie': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.4]
    ],
    'Alternative': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.3]
    ],
    'Ambient': [
        [(beatInMeasure) => (beatInMeasure % 16 === 0 && Math.random() < 0.4), 0.3],
        [(beatInMeasure) => (beatInMeasure % 32 === 16), 0.2],
        [(beatInMeasure) => (beatInMeasure % 64 === 0), 0.5]
    ],
    'Techno': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'House': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 2 || beatInMeasure % 16 === 10), 0.3]
    ],
    'Dubstep': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 16 === 8), 0.8],
        [(beatInMeasure) => (beatInMeasure % 32 === 28), 0.6]
    ],
    'Drum and Bass': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 8 === 3), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.6]
    ],
    'Trap': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 6 || beatInMeasure % 16 === 14), 0.5]
    ],
    'Lo-fi': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 8 === 3), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.4],
        [(beatInMeasure) => (beatInMeasure % 16 === 10 && Math.random() < 0.5), 0.3]
    ],
    'Synth-pop': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4]
    ],
    'Electropop': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5]
    ],
    'New Wave': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6]
    ],
    'Post-punk': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4]
    ],
    'Grunge': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.5]
    ],
    'Emo': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.4]
    ],
    'Progressive Rock': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4 || beatInMeasure % 16 === 14), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5]
    ],
	'Psychedelic Rock': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.4]
    ],
    'Hard Rock': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.6]
    ],
    'Heavy Metal': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.7]
    ],
    'Death Metal': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 1.0]
    ],
    'Black Metal': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.7]
    ],
    'Thrash Metal': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 1 === 0 && Math.random() < 0.5), 0.6]
    ],
    'Power Metal': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7]
    ],
    'Gothic Metal': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.8]
    ],
    'Industrial': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 6), 0.6]
    ],
    'Hardcore': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7]
    ],
    'Ska': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 1 || beatInMeasure % 4 === 3), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5]
    ],
    'Reggaeton': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 8 === 3), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4 || beatInMeasure % 8 === 6), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6]
    ],
    'Salsa': [
        [(beatInMeasure) => (beatInMeasure % 16 === 0 || beatInMeasure % 16 === 3 || beatInMeasure % 16 === 6), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 10 || beatInMeasure % 16 === 12), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5]
    ],
    'Bachata': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'Flamenco': [
        [(beatInMeasure) => (beatInMeasure % 12 === 0 || beatInMeasure % 12 === 3 || beatInMeasure % 12 === 6 || beatInMeasure % 12 === 8 || beatInMeasure % 12 === 10), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.4]
    ],
    'Bossa Nova': [
        [(beatInMeasure) => (beatInMeasure % 16 === 0 || beatInMeasure % 16 === 3 || beatInMeasure % 16 === 7 || beatInMeasure % 16 === 10), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5]
    ],
    'Samba': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 16 === 14), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 2 || beatInMeasure % 8 === 6), 0.6],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.5]
    ],
    'Tango': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 16 === 15), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 8), 0.5]
    ],
    'Opera': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.4],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.7]
    ],
    'Choral': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 8), 0.4],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.6]
    ],
    'Baroque': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.7]
    ],
    'Romantic': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.4],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.6]
    ],
    'Modern Classical': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 && Math.random() < 0.7), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.4],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.6]
    ],
    'Minimalism': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.4],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.3]
    ],
    'Avant-garde': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 && Math.random() < 0.5), 0.4],
        [(beatInMeasure) => (beatInMeasure % 7 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 13 === 0), 0.5]
    ],
    'Experimental': [
        [(beatInMeasure) => (Math.random() < 0.3), 0.4],
        [(beatInMeasure) => (beatInMeasure % 5 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.6]
    ],
    'Noise': [
        [(beatInMeasure) => (Math.random() < 0.8), 0.5],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6]
    ],
    'Drone': [
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 64 === 32), 0.2],
        [(beatInMeasure) => (beatInMeasure % 128 === 0), 0.4]
    ],
    'IDM': [
        [(beatInMeasure) => (beatInMeasure % 16 === 0 || (beatInMeasure % 16 === 11 && Math.random() < 0.7)), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4 || beatInMeasure % 32 === 27), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 && Math.random() < 0.4), 0.3]
    ],
    'Glitch': [
        [(beatInMeasure) => (Math.random() < 0.4), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.7]
    ],
    'Breakcore': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0 && Math.random() < 0.7), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 11 || beatInMeasure % 16 === 15), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9]
    ],
    'Hardstyle': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 1.0],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.9]
    ],
	'Soca': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 16 === 3 || beatInMeasure % 16 === 11), 0.8],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 6), 0.7]
    ],
    'Calypso': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 8 === 3), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'Grime': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 6 || beatInMeasure % 16 === 14), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 10 && Math.random() < 0.6), 0.5]
    ],
    'Garage': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 8 === 3), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 13 || beatInMeasure % 16 === 15), 0.6]
    ],
    'Dub': [
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.9],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.6],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.4]
    ],
    'Dancehall': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 8 === 3), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 6), 0.6]
    ],
    'Hard Trance': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.8],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.5]
    ],
    'Nu-Disco': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'Phonk': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 8 === 3), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 6), 0.4]
    ],
    'Synthpop': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'New Romantic': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.7]
    ],
    'Electro': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 16 === 10), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4]
    ],
    'Freestyle': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.5]
    ],
    'Electro Funk': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 3 || beatInMeasure % 16 === 11), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7]
    ],
    'Merengue': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 15), 0.5]
    ],
    'Mariachi': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.7]
    ],
    'K-pop': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'J-pop': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6]
    ],
    'City Pop': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'Viking Metal': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.6]
    ],
    'Pirate Metal': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 2 || beatInMeasure % 8 === 6), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.8],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.5]
    ],
    'Soundtrack': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 && Math.random() < 0.4), 0.4],
        [(beatInMeasure) => (beatInMeasure % 16 === 8), 0.3],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.6]
    ],
    'Film Score': [
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 32 === 16), 0.4],
        [(beatInMeasure) => (beatInMeasure % 64 === 0), 0.7]
    ],
    'Future Bass': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 11), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 8), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5]
    ],
    'Plunderphonics': [
        [(beatInMeasure) => (Math.random() < 0.5 && beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.4],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5]
    ],
    'Folktronica': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.4]
    ],
    'Indietronica': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4]
    ],
    'Synthwave': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6]
    ],
    'Vaporwave': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 8 === 3), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.4],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.3]
    ],
    'Chillwave': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.4]
    ],
    'Darkwave': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5]
    ],
    'Coldwave': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.8]
    ],
	'Eletro Funk': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 3 || beatInMeasure % 16 === 11), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6]
    ],
    'Merengue': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 15), 0.5]
    ],
    'Bachata': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 13), 0.4]
    ],
    'Tango': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 8 === 3), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'Mariachi': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.8]
    ],
    'K-pop': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.6]
    ],
    'J-pop': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5]
    ],
    'City Pop': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'Enka': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 8), 0.4],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.7]
    ],
    'Rai': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 16 === 3), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 6), 0.6],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.5]
    ],
    'Qawwali': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.4],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.8]
    ],
    'Bhangra': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 6 || beatInMeasure % 16 === 14), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 3), 0.6]
    ],
    'Carnatic': [
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 32 === 16), 0.4],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.6]
    ],
    'Hindustani': [
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 64 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.4]
    ],
    'Gamelan': [
        [(beatInMeasure) => (beatInMeasure % 16 === 0 || beatInMeasure % 16 === 10), 0.6],
        [(beatInMeasure) => (beatInMeasure % 32 === 4), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.7]
    ],
    'Flamenco': [
        [(beatInMeasure) => (beatInMeasure % 12 === 0 || beatInMeasure % 12 === 3 || beatInMeasure % 12 === 6 || beatInMeasure % 12 === 8 || beatInMeasure % 12 === 10), 0.8],
        [(beatInMeasure) => (beatInMeasure % 12 === 11), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5]
    ],
    'Fado': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.4],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.6]
    ],
    'Chanson': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.4],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.6]
    ],
    'Schlager': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'Klezmer': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 6), 0.6],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.4]
    ],
    'Celtic': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 2 || beatInMeasure % 8 === 6), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.7]
    ],
    'Polka': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.6]
    ],
    'Valse': [
        [(beatInMeasure) => (beatInMeasure % 3 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 3 === 1), 0.4],
        [(beatInMeasure) => (beatInMeasure % 12 === 0), 0.8]
    ],
    'Opera': [
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 32 === 16), 0.3],
        [(beatInMeasure) => (beatInMeasure % 64 === 0), 0.7]
    ],
    'Baroque': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.4],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.8]
    ],
    'Contemporary Classical': [
        [(beatInMeasure) => (Math.random() < 0.3 && beatInMeasure % 8 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 8), 0.3]
    ],
    'Minimalism': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 32 === 16), 0.5]
    ],
    'Experimental': [
        [(beatInMeasure) => (Math.random() < 0.4 && beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 13 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 7), 0.4]
    ],
    'Noise': [
        [(beatInMeasure) => (Math.random() < 0.7), 0.4],
        [(beatInMeasure) => (Math.random() < 0.2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.3]
    ],
    'Drone': [
        [(beatInMeasure) => (beatInMeasure % 64 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 128 === 64), 0.4],
        [(beatInMeasure) => (beatInMeasure % 256 === 0), 0.8]
    ],
    'Dark Ambient': [
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 64 === 32), 0.3],
        [(beatInMeasure) => (beatInMeasure % 128 === 0), 0.6]
    ],
    'IDM': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 11 || beatInMeasure % 32 === 26), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
	'Glitch': [
        [(beatInMeasure) => (beatInMeasure % 16 === 0 || beatInMeasure % 16 === 11 || beatInMeasure % 32 === 26), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 16 === 7), 0.7],
        [(beatInMeasure) => (Math.random() < 0.4), 0.6]
    ],
    'Breakcore': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 3 || beatInMeasure % 16 === 6 || beatInMeasure % 16 === 11), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 16 === 14), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 10 || beatInMeasure % 32 === 28), 0.7]
    ],
    'Hardstyle': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 1.0],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.6]
    ],
    'Gabber': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 1.0],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.5]
    ],
    'Happy Hardcore': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.6]
    ],
    'Eurodance': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.5]
    ],
    'Trance': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'Psytrance': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 1 || beatInMeasure % 4 === 2 || beatInMeasure % 4 === 3), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'Goa Trance': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 13 || beatInMeasure % 16 === 15), 0.6]
    ],
    'Progressive Trance': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'Dream Trance': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.4]
    ],
    'Uplifting Trance': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'Hardcore Techno': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 1.0],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 15), 0.5]
    ],
    'Acid Techno': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.6]
    ],
    'Dub Techno': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5]
    ],
    'Minimal Techno': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 8), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'Detroit Techno': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6]
    ],
    'Lounge': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'Chillout': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 8), 0.4],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.6]
    ],
    'Nu Jazz': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 6), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 3), 0.5]
    ],
    'Acid Jazz': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5]
    ],
    'Soul Jazz': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'Smooth Jazz': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 8), 0.4],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.7]
    ],
    'Jazz Fusion': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 7), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'Hard Bop': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 3), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.4]
    ],
    'Bebop': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 5), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'Cool Jazz': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.4],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.6]
    ],
    'Free Jazz': [
        [(beatInMeasure) => (Math.random() < 0.4), 0.5],
        [(beatInMeasure) => (beatInMeasure % 7 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 13 === 0), 0.4]
    ],
    'Modal Jazz': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 8), 0.5],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.7]
    ],
    'Post-bop': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 11), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'Latin Jazz': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 6 || beatInMeasure % 16 === 12), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 3), 0.6]
    ],
    'Gypsy Jazz': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.8]
    ],
	'Swing': [
        [(beatInMeasure) => (beatInMeasure % 12 === 0 || beatInMeasure % 12 === 8), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 12 === 4), 0.5]
    ],
    'Big Band': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4 || beatInMeasure % 16 === 14), 0.8]
    ],
    'Ragtime': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 2 || beatInMeasure % 8 === 6), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 4), 0.5]
    ],
    'Dixieland': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.5]
    ],
    'Third Stream': [
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 32 === 16), 0.4],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.6]
    ],
    'Jazz-funk': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6]
    ],
    'Acid Jazz (2nd Var)': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5]
    ],
    'Nu Jazz (2nd Var)': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 6), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'Bossa Nova': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 6 || beatInMeasure % 16 === 14), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 3), 0.5]
    ],
    'Samba': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 16 === 6 || beatInMeasure % 16 === 14), 0.9],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 2), 0.6]
    ],
    'AfrobeatInMeasure': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 4 || beatInMeasure % 16 === 10 || beatInMeasure % 16 === 14), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 7), 0.5]
    ],
    'Highlife': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 16 === 6), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'Juju': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 12), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.5]
    ],
    'Mbalax': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 16 === 7 || beatInMeasure % 16 === 15), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.5]
    ],
    'Makossa': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 16 === 10), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'Soukous': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 16 === 6 || beatInMeasure % 16 === 14), 0.9],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 11), 0.5]
    ],
    'Kwaito': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5]
    ],
    'Desert Blues': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 10), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'Ethio-jazz': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 6), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'Gnoua': [
        [(beatInMeasure) => (beatInMeasure % 12 === 0 || beatInMeasure % 12 === 4 || beatInMeasure % 12 === 8), 0.8],
        [(beatInMeasure) => (beatInMeasure % 12 === 6), 0.6],
        [(beatInMeasure) => (beatInMeasure % 3 === 0), 0.5]
    ],
    'Zouk': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 6 || beatInMeasure % 16 === 14), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.5]
    ],
    'Kizomba': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 7 || beatInMeasure % 16 === 15), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.4]
    ],
    'Soca (2nd Var)': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 16 === 6 || beatInMeasure % 16 === 10 || beatInMeasure % 16 === 14), 0.9],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 2), 0.6]
    ],
    'Calypso (2nd Var)': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 16 === 6), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'Dancehall (2nd Var)': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 6 || beatInMeasure % 16 === 14), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 3), 0.6]
    ],
    'Dub (2nd Var)': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.5],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.4]
    ],
    'Grime (2nd Var)': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 11 || beatInMeasure % 32 === 26), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.6]
    ],
    'Garage (2nd Var)': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 10 || beatInMeasure % 16 === 15), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5]
    ],
    '2-Step': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 10 || beatInMeasure % 16 === 15), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 6), 0.5]
    ],
    'Future Garage': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 10), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'UK Bass': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 11), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6]
    ],
    'Wonky': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 7 || beatInMeasure % 16 === 13), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 15), 0.5]
    ],
	'Downtempo': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.4]
    ],
    'Trip Hop': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 8 === 3), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'Illbient': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 11), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5],
        [(beatInMeasure) => (beatInMeasure % 32 === 28), 0.4]
    ],
    'Acid Hop': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 6), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 13), 0.5]
    ],
    'Glitch Hop': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0 || beatInMeasure % 16 === 11 || beatInMeasure % 32 === 26), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2 || beatInMeasure % 16 === 7), 0.6],
        [(beatInMeasure) => (Math.random() < 0.4), 0.5]
    ],
    'Nu-Metal': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.6]
    ],
    'Funk Metal': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 3 || beatInMeasure % 16 === 11), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6]
    ],
    'Industrial Rock': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.6]
    ],
    'Industrial Metal': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.7]
    ],
    'Digital Hardcore': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 15), 0.7]
    ],
    'EBM': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.6]
    ],
    'Aggrotech': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.7]
    ],
    'Futurepop': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'Synth-Goth': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.8]
    ],
    'Dark Electro': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.6]
    ],
    'Electro-Industrial': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.6]
    ],
    'Power Noise': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.9],
        [(beatInMeasure) => (Math.random() < 0.6), 0.7],
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.5]
    ],
    'Dark Ambient (2nd Var)': [
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.3],
        [(beatInMeasure) => (beatInMeasure % 64 === 32), 0.2],
        [(beatInMeasure) => (beatInMeasure % 128 === 0), 0.5]
    ],
    'Ritual Ambient': [
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.4],
        [(beatInMeasure) => (beatInMeasure % 32 === 8), 0.3],
        [(beatInMeasure) => (beatInMeasure % 64 === 0), 0.6]
    ],
    'Drone Doom': [
        [(beatInMeasure) => (beatInMeasure % 64 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 128 === 64), 0.4],
        [(beatInMeasure) => (beatInMeasure % 256 === 0), 0.7]
    ],
    'Stoner Doom': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.5]
    ],
    'Sludge Doom': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 8), 0.7],
        [(beatInMeasure) => (beatInMeasure % 32 === 28), 0.6]
    ],
    'Funeral Doom': [
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 32 === 16), 0.5],
        [(beatInMeasure) => (beatInMeasure % 64 === 0), 0.8]
    ],
    'Blackened Death Metal': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.7]
    ],
    'Technical Death Metal': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 16 === 3 || beatInMeasure % 16 === 7 || beatInMeasure % 16 === 11), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 1.0]
    ],
    'Melodic Death Metal': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.7]
    ],
    'Symphonic Death Metal': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7]
    ],
    'Brutal Death Metal': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 1.0],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.7]
    ],
    'Deathgrind': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 1.0],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.9],
        [(beatInMeasure) => (beatInMeasure % 16 === 15), 0.8]
    ],
    'Goregrind': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 1.0],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.8],
        [(beatInMeasure) => (Math.random() < 0.7), 0.6]
    ],
	'Porngrind': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 1.0],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 13), 0.7]
    ],
    'Noise Metal': [
        [(beatInMeasure) => (Math.random() < 0.7), 0.8],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 1 === 0 && Math.random() < 0.3), 0.5]
    ],
    'Mathcore': [
        [(beatInMeasure) => (beatInMeasure % 7 === 0 || beatInMeasure % 13 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 11), 0.7]
    ],
    'Screamo (2nd Var)': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.6]
    ],
    'Emocore': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.5]
    ],
    'Post-Hardcore': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.9]
    ],
    'Metalcore (2nd Var)': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.7]
    ],
    'Deathcore (2nd Var)': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 1.0],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 15), 0.7]
    ],
    'Nintendocore': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6]
    ],
    'Electronicore': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.6]
    ],
    'Synthcore': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.5]
    ],
    'Cybergrind': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 1.0],
        [(beatInMeasure) => (beatInMeasure % 16 === 11), 0.8],
        [(beatInMeasure) => (Math.random() < 0.6), 0.7]
    ],
    'Hardcore Punk': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 1.0]
    ],
    'Crust Punk': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.6]
    ],
    'D-beatInMeasure': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0 || beatInMeasure % 8 === 3 || beatInMeasure % 8 === 6), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 0.6]
    ],
    'Powerviolence': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 1.0],
        [(beatInMeasure) => (beatInMeasure % 16 === 7), 0.8],
        [(beatInMeasure) => (Math.random() < 0.5), 0.7]
    ],
    'Grindcore (2nd Var)': [
        [(beatInMeasure) => (beatInMeasure % 1 === 0), 1.0],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 16 === 15), 0.9]
    ],
    'Thrashcore': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.9],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.8],
        [(beatInMeasure) => (beatInMeasure % 1 === 0 && Math.random() < 0.6), 0.7]
    ],
    'Crossover Thrash': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.9]
    ],
    'Skate Punk': [
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.7],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6]
    ],
    'Pop Punk': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5]
    ],
    'Ska Punk': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 1 || beatInMeasure % 4 === 3), 0.8],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.6]
    ],
    'Reggae Rock': [
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.8],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 14), 0.4]
    ],
    'Dub Rock': [
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.7],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.6],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.5]
    ],
    'Post-Rock (2nd Var)': [
        [(beatInMeasure) => (beatInMeasure % 8 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 8), 0.4],
        [(beatInMeasure) => (beatInMeasure % 32 === 0), 0.7]
    ],
    'Math Rock': [
        [(beatInMeasure) => (beatInMeasure % 5 === 0 || beatInMeasure % 11 === 0), 0.7],
        [(beatInMeasure) => (beatInMeasure % 4 === 2), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 13), 0.5]
    ],
    'Space Rock': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 12), 0.7]
    ],
    'Krautrock (2nd Var)': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.8],
        [(beatInMeasure) => (beatInMeasure % 2 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.7]
    ],
    'Art Rock': [
        [(beatInMeasure) => (beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.4]
    ],
    'Experimental Rock': [
        [(beatInMeasure) => (Math.random() < 0.4), 0.5],
        [(beatInMeasure) => (beatInMeasure % 7 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 0), 0.7]
    ],
    'Avant-Garde Rock': [
        [(beatInMeasure) => (beatInMeasure % 13 === 0), 0.5],
        [(beatInMeasure) => (beatInMeasure % 5 === 0), 0.4],
        [(beatInMeasure) => (Math.random() < 0.3), 0.6]
    ],
    'Plunderphonics': [
        [(beatInMeasure) => (Math.random() < 0.5 && beatInMeasure % 4 === 0), 0.6],
        [(beatInMeasure) => (beatInMeasure % 16 === 10), 0.4],
        [(beatInMeasure) => (beatInMeasure % 8 === 4), 0.5]
    ]

	
};


//orgineel  major: [0, 2, 4, 5, 7, 9, 11],   major: [0, 2, 4, 6, 8, 10],
const SCALE_SEMITONES = {
    major: [0, 2, 4, 5, 7, 9, 11],
    minor: [0, 2, 3, 5, 7, 8, 10],
    dorian: [0, 2, 3, 5, 7, 9, 10],
    phrygian: [0, 1, 3, 5, 7, 8, 10],
    pentatonic: [0, 2, 4, 7, 9, 11],
    chromatic: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
    harmonic_minor: [0, 2, 3, 5, 7, 8, 11],
    blues: [0, 3, 5, 6, 7, 10],
    lydian: [0, 2, 4, 6, 7, 9, 11],
    mixolydian: [0, 2, 4, 5, 7, 9, 10],
    locrian: [0, 1, 3, 5, 6, 8, 10],
    harmonicMinor: [0, 2, 3, 5, 7, 8, 11],
    melodicMinor: [0, 2, 3, 5, 7, 9, 11],
    wholeTone: [0, 2, 4, 6, 8, 10],
    melodic_minor: [0, 2, 3, 5, 7, 9, 11],   
    whole_tone: [0, 2, 4, 6, 8, 10],        
    diminished: [0, 2, 3, 5, 6, 8, 9, 11],   
    augmented: [0, 3, 4, 7, 8, 11],        
    enigmatic: [0, 1, 4, 6, 8, 10, 11],      
    double_harmonic: [0, 1, 4, 5, 7, 8, 11], 
    hirajoshi: [0, 2, 3, 7, 8],              
    in_sen: [0, 1, 5, 7, 10],                
    yo: [0, 2, 5, 7, 9],                    
    hungarian_minor: [0, 2, 3, 6, 7, 8, 11],  
    gypsy: [0, 2, 3, 6, 7, 8, 10],           
    neapolitan_minor: [0, 1, 3, 5, 7, 8, 11], 
    persian: [0, 1, 4, 5, 6, 8, 11],         
    arabic: [0, 1, 4, 5, 7, 8, 11],           
    byzantine: [0, 1, 4, 5, 7, 8, 11],      
    balinese: [0, 1, 3, 5, 7, 8],             
    pelog: [0, 1, 3, 5, 7, 8, 10],           
    iwato: [0, 1, 5, 6, 10],                 
    prometheus: [0, 2, 4, 6, 9, 10],         
    tritone: [0, 1, 4, 6, 7, 10] ,
hyper_exploitation: [0, 1, 2, 6, 7, 8, 11],
    maqam_bayati: [0, 1, 3, 5, 7, 8, 10], 
    maqam_rast: [0, 2, 4, 5, 7, 9, 11], 
    maqam_shur: [0, 1, 3, 5, 7, 8, 10],
    maqam_saba: [0, 1, 3, 4, 7, 8, 10],
    maqam_hijaz: [0, 1, 4, 5, 7, 8, 10],
    harmonic_minor: [0, 2, 3, 5, 7, 8, 11],
minorPentatonic: [0, 3, 5, 7, 10],
chromatic: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
wholeTone: [0, 2, 4, 6, 8, 10],
diminished: [0, 2, 3, 5, 6, 8, 9, 11] 
} 


var SCALE_SEMITONES_ = new Array();
var terfdfg=0;
SCALE_SEMITONES_[terfdfg]=     [0, 2, 4, 5, 7, 9, 11];
terfdfg++;     SCALE_SEMITONES_[terfdfg]= [0, 2, 3, 5, 7, 8, 10];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 3, 5, 7, 9, 10];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 1, 3, 5, 7, 8, 10];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 4, 7, 9];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 4, 5, 7, 9, 10];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 3, 5, 7, 8, 11];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 3, 5, 6, 7, 10];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 4, 6, 7, 9, 11];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 4, 5, 7, 9, 10];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 1, 3, 5, 6, 8, 10];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 3, 5, 7, 8, 11];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 3, 5, 7, 9, 11];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 4, 6, 8, 10];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 3, 5, 7, 9, 11];   
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 4, 6, 8, 10];     
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 3, 5, 6, 8, 9, 11];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 3, 4, 7, 8, 11];       
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 1, 4, 6, 8, 10, 11];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 1, 4, 5, 7, 8, 11];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 3, 7, 8];              
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 1, 5, 7, 10];                
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 5, 7, 9];                   
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 3, 6, 7, 8, 11];
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 3, 6, 7, 8, 10];           
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 1, 3, 5, 7, 8, 11]; 
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 1, 4, 5, 6, 8, 11];         
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 1, 4, 5, 7, 8, 11];           
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 1, 4, 5, 7, 8, 11];      
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 1, 3, 5, 7, 8];             
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 1, 3, 5, 7, 8, 10];           
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 1, 5, 6, 10];                 
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 2, 4, 6, 9, 10];         
terfdfg++;     SCALE_SEMITONES_[terfdfg]=[0, 1, 4, 6, 7, 10];  



var modulus113 = Math.pow(2, 32);
var modulus101 = Math.pow(2, 32);
var a113 = 1664525;
var c11333 = 1013904223;
var a11xx33 = 1664525;
var sseed11=Math.round(400000000*Math.random());
// 1. Create a variable to hold the internal state
var  globalSeed = Math.floor(Math.random() * 999999999);

/**
 * wielsieder() - The primary entropy generator for the music engine.
 * It uses a PRNG (Pseudo-Random Number Generator) to ensure that 
 * while results are 'random', they can be influenced by a specific seed.
 */
function wielsieder() {
    // We use the mulberry32 algorithm logic found in your snippet 
    // to transform the seed into a float between 0 and 1.
    globalSeed |= 0; 
    globalSeed = (globalSeed + 0x6D2B79F5) | 0;
    let t = Math.imul(globalSeed ^ (globalSeed >>> 15), 1 | globalSeed);
    t = (t + Math.imul(t ^ (t >>> 7), 61 | t)) ^ t;
    return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
}

/**
 * setWielsiederSeed(newSeed)
 * Allows the system to reset the entropy based on a new track or time.
 */
function setWielsiederSeed(newSeed) {
    globalSeed = typeof newSeed === 'string' ? hashStringToInt(newSeed) : newSeed;
}


var MIDIFA;
var  genreName;
var genreIndex;
var  tdD="";
var twoDCaCounterrrrr=0;
        var lastCompByRole = null;
        var lastBpm = 120;
	var maintis=0;



var twoDCaCounter=1;


var twoDCaCounterrr=0;

/**
 * Genereert een "Live" genre-object door willekeurige elementen uit alle bestaande genres te combineren.
 * De selectie is mondiaal synchroon door een tijdgebaseerde seed te gebruiken.
 * * @param {Array<Object>} GENRES - De lijst van bestaande GENRES.
 * @param {function(number=): number} wielsieder - De seeded random functie.
 * - wielsieder(seed) om de generator te initialiseren met een seed (de globale tijd).
 * - wielsieder() om een willekeurige float tussen 0 (incl) en 1 (excl) te krijgen.
 * @returns {Object} Het nieuwe "Live" genre-object.
 */
/**
 * Genereert een mondiaal synchroon "Live" genre.
 */
function generateLiveGenre(GEN) {
    // --- 1. Bereken de mondiale seed op basis van de tijd ---
    // We gebruiken 1 januari 1972 als nulpunt.
    const EPOCH_1972 = new Date(Date.UTC(1972, 0, 1, 0, 0, 0)).getTime();
    const TWO_MINUTES_MS = 2 * 60 * 1000;
    
    const nu = new Date().getTime();
    const verstrekenTijd = nu - EPOCH_1972;
    
    // De 'seed' is het aantal blokken van 2 minuten sinds 1972.
    // Iedereen op de wereld krijgt hier exact hetzelfde gehele getal uit (mits de klok klopt).
    const tijdSeed = Math.floor(verstrekenTijd / TWO_MINUTES_MS);
    
    // Overschrijf de globale sseed11 voor de wielsieder
    sseed11 = tijdSeed;

    // --- 2. Hulpfunctie om geseede willekeurige items te kiezen ---
    const getSeededRandomItem = (array) => {
        const r = wielsieder(); // Gebruikt de nieuwe tijd-seed
        return array[Math.floor(r * array.length)];
    };

    // --- 3. Verzamel alle unieke bouwstenen uit de bestaande GENRES ---
    let pool = {
        scales: [], roots: [], bpms: [], waves: [],
        leads: [], basses: [], chords: [], drums: [],
        leadOpts: [], bassOpts: [], chordsOpts: []
    };

    GEN.forEach(g => {
        if (!pool.scales.includes(g.scale)) pool.scales.push(g.scale);
        if (!pool.roots.includes(g.root)) pool.roots.push(g.root);
        if (!pool.bpms.includes(g.bpm)) pool.bpms.push(g.bpm);
        if (!pool.waves.includes(g.wave)) pool.waves.push(g.wave);
        
        pool.leads.push(g.instruments.lead);
        pool.basses.push(g.instruments.bass);
        pool.chords.push(g.instruments.chords);
        pool.drums.push(g.roles.drums.kit);
        
        // Voeg alle opties toe aan de grote vijver
        pool.leadOpts.push(...g.leadOptions);
        pool.bassOpts.push(...g.bassOptions);
        pool.chordsOpts.push(...g.chordsOptions);
    });

    // Maak de opties-lijsten uniek om dubbelingen te voorkomen
    pool.leadOpts = [...new Set(pool.leadOpts)];
    pool.bassOpts = [...new Set(pool.bassOpts)];
    pool.chordsOpts = [...new Set(pool.chordsOpts)];

    // --- 4. Stel het Live-object samen ---
    // Omdat we wielsieder() telkens in dezelfde volgorde aanroepen, 
    // zal elk onderdeel (sub-i) voor iedereen op de wereld hetzelfde zijn.
    
    const liveGenre = {
        name: "Live",
        scale: getSeededRandomItem(pool.scales),
        root: getSeededRandomItem(pool.roots),
        bpm: getSeededRandomItem(pool.bpms),
        wave: getSeededRandomItem(pool.waves),
        roles: {
            lead: { oct: [4, 5] }, 
            bass: { oct: [2, 3] },
            chords: { oct: [3, 4] },
            drums: { kit: getSeededRandomItem(pool.drums) }
        },
        instruments: {
            lead: getSeededRandomItem(pool.leads),
            bass: getSeededRandomItem(pool.basses),
            chords: getSeededRandomItem(pool.chords)
        },
        // We vullen de lijst aan tot 15 elementen voor de compositie-engine
        leadOptions: Array.from({length: 15}, () => getSeededRandomItem(pool.leadOpts)),
        bassOptions: Array.from({length: 15}, () => getSeededRandomItem(pool.bassOpts)),
        chordsOptions: Array.from({length: 15}, () => getSeededRandomItem(pool.chordsOpts))
    };

    return liveGenre;
}


ee=generateLiveGenre(GENRES );
GENRES[GENRES.length]=ee;




/**
 * Genereert een "Live" ECA-regel object door willekeurige, unieke regels uit alle bestaande ECA-genres te combineren.
 * De selectie is mondiaal synchroon door de tijdgebaseerde globale sseed11 te gebruiken.
 * * @param {Object} GENRE_ECA_RULES - Het object met genre namen en arrays van ECA regels.
 * @returns {Object} Een object { name: 'Live', rules: [array van 4 unieke ECA regels] }.
 */







function generateLiveECA(GENR) {
  
}



        // ==================== AUDIO SYSTEM ====================
        let audioCtx = null;
        let masterGain = null;
        let filterNode = null;
        let convolver = null;
        let reverbGain = null;
        let soundfontPlayer = null;

        function ensureAudio() {
            if (audioCtx) return;
            
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            
            if (audioCtx.state === 'suspended') {
                audioCtx.resume().then(() => {
                    console.log('AudioContext resumed successfully');
                });
            }
            
            masterGain = audioCtx.createGain();
            masterGain.gain.value = 0.12;
            masterGain.connect(audioCtx.destination);

            ensureAudio.dryGain = masterGain;
            
            soundfontPlayer = new SoundFontPlayer(audioCtx);
            
            console.log("Audio context initialized");
        }

        // ==================== SIMPLIFIED SOUNDFONT PLAYER ====================
        class SoundFontPlayer {
            constructor(audioContext) {
                this.audioContext = audioContext;
                this.sf2 = null;
                this.zoneBuffers = [];
            }

            async loadSoundFont(arrayBuffer) {
                statusText.textContent = "Loading SoundFont...";
                loadingBar.style.display = 'block';
                loadingProgress.style.width = '5%';

                try {
                    // Simplified SF2 loading - just store the buffer
                    this.sf2 = { arrayBuffer };
                    this.zoneBuffers = [];
                    
                    loadingProgress.style.width = '100%';
                    soundfontInfo.textContent = "SoundFont loaded successfully";
                    statusText.textContent = "SoundFont ready for playback";
                    
                    setTimeout(() => {
                        loadingBar.style.display = 'none';
                    }, 300);
                    return true;
                    
                } catch (err) {
                    console.error("SF2 load error:", err);
                    statusText.textContent = "Error loading SoundFont - using fallback synth";
                    soundfontInfo.textContent = "Error loading SoundFont - fallback synth active";
                    loadingBar.style.display = 'none';
                    return false;
                }
            }

            playNote(startTime, duration, midiNote, velocity, program, channel) {
                console.log(`🎹 Play: ch=${channel}, prog=${program}, note=${midiNote}, vel=${velocity}`);
                
                // Always use channel 9 for drums
                if (channel === 9) {
                    console.log(`🥁 Drum: note=${midiNote}`);
                    this.playDrumSynth(startTime, duration, midiNote, velocity);
                    return;
                }

                // Fallback to basic synth
                const freq = 440 * Math.pow(2, (midiNote - 69) / 12);
                const wave = this.getWaveformForProgram(program);
                this.playBasicSynth(startTime, duration, freq, velocity, wave);
            }

            getWaveformForProgram(program) {
                if (program >= 0 && program <= 7) return 'sine';
                if (program >= 8 && program <= 15) return 'sine';
                if (program >= 16 && program <= 23) return 'triangle';
                if (program >= 24 && program <= 31) return 'triangle';
                if (program === 32 || program === 33) return 'triangle';
                if (program === 35) return 'sine';
                if (program === 34 || program === 36 || program === 37) return 'square';
                if (program === 38 || program === 39) return 'triangle';
                if (program >= 40 && program <= 47) return 'sine';
                if (program >= 48 && program <= 55) return 'triangle';
                if (program >= 56 && program <= 63) return 'sawtooth';
                if (program >= 64 && program <= 79) return 'triangle';
                if (program >= 80 && program <= 87) return 'square';
                if (program >= 88 && program <= 95) return 'sine';
                return 'sine';
            }

            playBasicSynth(startTime, duration, frequency, velocity, type = 'sine') {
                if (!audioCtx) return;
                
                const v = Math.max(0.05, Math.min(1.0, velocity));
                const attack = 0.02;
                const decay = 0.1;
                const sustain = 0.6 * v;
                const release = Math.min(0.3, duration * 0.5);
                const noteMaster = audioCtx.createGain();
                
                noteMaster.gain.setValueAtTime(0, startTime);
                noteMaster.gain.linearRampToValueAtTime(v, startTime + attack);
                noteMaster.gain.linearRampToValueAtTime(sustain, startTime + attack + decay);
                noteMaster.gain.setValueAtTime(sustain, startTime + Math.max(0, duration - release));
                noteMaster.gain.linearRampToValueAtTime(0.0001, startTime + duration + release);
                
                if (masterGain) noteMaster.connect(masterGain);

                let oscCount = 1;
                let detuneAmount = 0;

                if (type === 'sawtooth' || type === 'square') {
                    oscCount = 3;
                    detuneAmount = 12;
                }

                for (let i = 0; i < oscCount; i++) {
                    const osc = audioCtx.createOscillator();
                    osc.type = type;
                    let offset = 0;
                    if (i === 1) offset = detuneAmount;
                    if (i === 2) offset = -detuneAmount;

                    osc.detune.value = offset;
                    osc.frequency.setValueAtTime(frequency, startTime);

                    if (type === 'sawtooth') {
                        const filter = audioCtx.createBiquadFilter();
                        filter.type = 'lowpass';
                        filter.Q.value = 3;
                        filter.frequency.setValueAtTime(frequency * 1.5, startTime);
                        filter.frequency.exponentialRampToValueAtTime(frequency * 4, startTime + attack);
                        filter.frequency.exponentialRampToValueAtTime(frequency * 2, startTime + duration);
                        osc.connect(filter);
                        filter.connect(noteMaster);
                    } else {
                        osc.connect(noteMaster);
                    }

                    osc.start(startTime);
                    osc.stop(startTime + duration + release + 0.1);
                }
            }

            playDrumSynth(startTime, duration, midiNote, velocity) {
                if (!audioCtx) return;
                
                const osc = audioCtx.createOscillator();
                const amp = audioCtx.createGain();
                const filter = audioCtx.createBiquadFilter();
                
                if (midiNote === 36 || midiNote === 35) {
                    osc.type = 'sine';
                    osc.frequency.setValueAtTime(80, startTime);
                    osc.frequency.exponentialRampToValueAtTime(30, startTime + 0.1);
                    filter.frequency.setValueAtTime(200, startTime);
                    filter.type = 'lowpass';
                } else if (midiNote === 38 || midiNote === 40) {
                    osc.type = 'square';
                    filter.type = 'bandpass';
                    filter.frequency.setValueAtTime(1200, startTime);
                    filter.Q.setValueAtTime(0.8, startTime);
                } else {
                    osc.type = 'square';
                    filter.type = 'highpass';
                    filter.frequency.setValueAtTime(6000, startTime);
                }
                
                const v = Math.max(0.05, Math.min(.86, velocity));
                amp.gain.setValueAtTime(v, startTime);
                amp.gain.exponentialRampToValueAtTime(0.0001, startTime + Math.max(0.05, duration * 0.8));
                osc.connect(filter);
                filter.connect(amp);
                
                if (masterGain) amp.connect(masterGain);
                
                osc.start(startTime);
                osc.stop(startTime + duration + 0.02);
            }
        }

        // ==================== MUSIC GENERATION CORE ====================


        const ROOT_TO_SEMITONE = {
            C: 0, 'C#': 1, D: 2, 'D#': 3, E: 4, F: 5, 'F#': 6, 
            G: 7, 'G#': 8, A: 9, 'A#': 10, B: 11
        };

        function midiToFreq(m) {
            return 440 * Math.pow(2, (m - 69) / 12);
        }

        
        function hashStringToInt(s) {
    // Initial prime offset (entropy start)
    let h = 2166136261; 
    for (let i = 0; i < s.length; i++) {
        // XOR the hash with the character code
        h ^= s.charCodeAt(i);
        // Multiply by the FNV prime to distribute bits
        h = Math.imul(h, 16777619); 
    }
    // Return as a 32-bit unsigned integer
    return h >>> 0; 
}
        
        
        
        function mulberry32(seed) {
    return function() {
        // Ensure seed is a 32-bit integer
        seed |= 0; 
        seed = (seed + 0x6D2B79F5) | 0;
        let t = Math.imul(seed ^ (seed >>> 15), 1 | seed);
        t = (t + Math.imul(t ^ (t >>> 7), 61 | t)) ^ t;
        // Divide by 2^32 to get a float between 0 and 1
        return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
    };
}




    function getUniquePitch(baseMidi) {
    // 1. Randomize the Root (C, C#, D, etc.)
    const roots = Object.values(ROOT_TO_SEMITONE);
    const rootOffset = roots[Math.floor(wielsieder() * roots.length)];
    
    // 2. Randomize the Octave shift (-1 to +2)
    const octaveShift = (Math.floor(wielsieder() * 4) - 1) * 12;
    
    // 3. Apply a "Humanization" micro-tuning (Time dependency)
    const microTuning = wielsieder() * 0.1; 
    
    return baseMidi + rootOffset + octaveShift + microTuning;
}
    
    
    function getUniqueDuration(baseDuration) {
    // 1. Introduce a 'Staccato vs Legato' variable (0.1 to 2.0)
    // This makes notes either very short or overlapping
    const articulation = 0.2 + (wielsieder() * 1.8);
    
    // 2. Introduce a 'Rhythmic Swing'
    // Offsets the end of the note so they don't all stop on the grid
    const swing = (wielsieder() - 0.5) * 0.05;
    
    return (baseDuration * articulation) + swing;
}













function evolveGeneralizedCA(rule, width, height, cyclic, radial, rng_, seedRowStrategy, r_) {
    // 1. Setup the rows container
    const rows = new Array(height);
    let row = new Array(width);

    // Use the passed rng_ (wielsieder) if available, else Math.random

    // 2. Initial Seed Row Strategy
    // bwbbb is the threshold for the initial random state
    const bwbbb =  randomFunc();

    for (let i = 0; i < width; i++) {
        // Initialize with 1 (active) or 0 (inactive)
        row[i] = randomFunc() < bwbbb ? 1 : 0;
    }
    rows[0] = row.slice();

    // 3. Rule Bit Pre-calculation
    const neighborhoodCount = Math.pow(2, 2 * radial + 1);
    let currentRule = r_; // Keep track of the actual rule number for mutation
    let ruleBits = new Array(neighborhoodCount);
    
    // Helper to refresh the lookup table when the rule mutates
    const updateRuleBits = (r) => {
        for (let mask = 0; mask < neighborhoodCount; mask++) {
            ruleBits[mask] = (r >> mask) & 1;
        }
    };
    updateRuleBits(currentRule);

    // 4. Evolution Loop
    for (let h = 1; h < height; h++) {
        
        // FINDING 2: Rule Mutation
        // Every 16 rows, there is a 15% chance to flip one bit of the rule.
        // This ensures the "DNA" of the music evolves and doesn't get stuck in a loop.
        if (h % 16 === 0 && randomFunc() < 0.15 && false) {
            const bitToFlip = Math.floor(randomFunc() * 8);
            currentRule = currentRule ^ (1 << bitToFlip);
            updateRuleBits(currentRule);
            // console.log(`Mutation at row ${h}: New Rule ${currentRule}`);
        }

        const next = new Array(width);
        for (let x = 0; x < width; x++) {
            let neighborhoodIndex = 0;

            for (let j = -radial; j <= radial; j++) {
                let cellState;

                if (cyclic) {
                    const neighborIndex = (x + j + width) % width;
                    cellState = row[neighborIndex];
                } else {
                    const neighborIndex = x + j;
                    if (neighborIndex < 0 || neighborIndex >= width) {
                        cellState = 0;
                    } else {
                        cellState = row[neighborIndex];
                    }
                }

                // Map neighborhood to a bit position index (e.g., 4, 2, 1)
                const bitPos = radial - j;

                // Check for 1 or true (supporting both numeric and boolean states)
                if (cellState === 1 || cellState === true) {
                    neighborhoodIndex += Math.pow(2, bitPos);
                }
            }

            // Determine the next cell state using the (potentially mutated) ruleBits
            next[x] = ruleBits[neighborhoodIndex];
        }
        
        rows[h] = next;
        row = next; // Update current row reference for the next vertical step
    }

    return rows;
}



function rng(){
return Math.random();
}



function rngg(){
return Math.random();
}


function randomFunc(){
return Math.random();
}


        

// Dynamic quantization that varies over time
function getDynamicStepTime(step, bpm, baseNotesPerBeat) {

}










        function ___evolveGeneralizedCA(rule, width, height, cyclic, radial, rng_, seedRowStrategy, r_) {
		   const rows = new Array(width);
  
let row = new Array(width).fill(0);
// bwbb is de drempelwaarde voor deze sessie (bijv. 0.3)
const bwbb = 0.25 + (0.5 * Math.random());

for (let i = 0; i < width; i++) {
    // Genereer een unieke kans voor deze specifieke cel
    let celKans = Math.random();
    
    // Vergelijk de individuele kans met de sessie-drempel
    // Als de kans groter is dan bwbb -> cel wordt 1
    // Anders (kans is kleiner of gelijk) -> cel wordt 0
    row[i] = (celKans < bwbb) ? 1 : 0;
}

rows[0] = row.slice();
  
/*
		   const rows = new Array(width);
			const bb5=.3+(.2*Math.random());
			for(cc=0;cc<width;cc++){
				let row = new Array();
			    for (let i = 0; i < width; i++)
					{
					row[i]=0;
					if(Math.random()>bb5){
					row[i]=1;
					}
					}
			
				
				
				rows[cc]=row;
			
			
			
			}
			            rows[0] = row.slice();
			*/
			
			/*
            let row = new Array(width).fill(0);
const bwbb=.1+(.4*Math.random());
            if (seedRowStrategy === 'randomSparse' || true) {
                for (let i = 0; i < width; i++)
                    row[i] = Math.random() < bwbb ? 1 : 0;
            } else {
                row[Math.floor(width / 2)] = 1;
            }
            rows[0] = row.slice();
			
			*/

            const neighborhoodCount = Math.pow(2, 2 * radial + 1);
            const ruleBits = new Array(neighborhoodCount);
            for (let mask = 0; mask < neighborhoodCount; mask++) {
                ruleBits[mask] = (r_ >> mask) & 1;
            }

            for (let h = 1; h < height; h++) {
                const next = new Array(width);
                for (let x = 0; x < width; x++) {
                    let neighborhoodIndex = 0;

                    for (let j = -radial; j <= radial; j++) {
                        let cellState;

                        if (cyclic) {
                            const neighborIndex = (x + j + width) % width;
                            cellState = row[neighborIndex];
                        } else {
                            const neighborIndex = x + j;
                            if (neighborIndex < 0 || neighborIndex >= width) {
                                cellState = 0;
                            } else {
                                cellState = row[neighborIndex];
                            }
                        }

                        const bitPos = radial - j;

                        if (cellState === 1) {
                            neighborhoodIndex += Math.pow(2, bitPos);
                        }
                    }

                    next[x] = ruleBits[neighborhoodIndex];
                }
                rows[h] = next;
                row = next;
            }
            return rows;
        }

        function getRulde(genreNamee, role) {
            const ruleSet = GENRE_ECA_RULES[genreNamee] || [90, 60, 102];
            if (role === 'lead') return ruleSet[0];
            if (role === 'bass') return ruleSet[1];
            if (role === 'chords') return ruleSet[2];
            if (role === 'drums') return ruleSet[3];
 
        }
function rng(){
return Math.random();
}
        




var twoDCaCounterrr =0;

var twoDCaCounterrrr =0;



        function mapRoleEvents(gnri, rows, role, scaleName, rootName, bpm, notesPerBeat, durationSec, xxrng__) {
    // 1. Ensure we use the passed SEEDED RNG, not Math.random()
    // If xxrng__ isn't a function, we fallback to a simple seeded one
  //  const rng = (typeof xxrng__ === 'function') ? xxrng__ : () => Math.random();

    const scale = SCALE_SEMITONES[scaleName] || SCALE_SEMITONES.pentatonic;
    const root = ROOT_TO_SEMITONE[rootName] || 0;

    const secondsPerBeat = 60 / bpm;
    const stepDur = secondsPerBeat / notesPerBeat;

    // 2. Use RNG for duration multiplier so track lengths vary uniquely
    const durationMultiplier = 1 + rng() * 1.5;
    const extendedDurationSec = durationSec * durationMultiplier;
    const totalSteps = Math.floor(extendedDurationSec / stepDur);

    const width = rows[0].length, height = rows.length;
    const events = [];

    // 3. Seeded Silence Periods (Breaks the monotony of constant notes)
    const silencePeriods = [];
    const numSilencePeriods = Math.floor(rng() * 4);
    for (let i = 0; i < numSilencePeriods; i++) {
        const startStep = Math.floor(rng() * totalSteps * 0.8);
        const durationSteps = Math.floor(2 + rng() * 12);
        silencePeriods.push({ start: startStep, duration: durationSteps });
    }

    // 4. GENERATE UNIQUE TRACK CONSTANTS BASED ON SEED
    // Instead of const octa0 = 2, we make them unique per track:
    const trackEntropy = {
        abab: 2 + Math.floor(rng() * 6),
        ababab: 2 + Math.floor(rng() * 6),
        octa0: 1 + Math.floor(rng() * 3), // Bass Octave (1-3)
        octa1: 3 + Math.floor(rng() * 3), // Lead Variation Octave
        octaLeadBase: 4 + Math.floor(rng() * 2), // Standard Lead Octave
        octa3: 3 + Math.floor(rng() * 2), // Chord Octave
        probSilence: rng() * 0.5,
        swing: rng() * 0.2
    };

    for (let t = 0; t < totalSteps; t++) {
        let inSilence = false;
        for (const silence of silencePeriods) {
            if (t >= silence.start && t < silence.start + silence.duration) {
                inSilence = true;
                break;
            }
        }

        const r = Math.floor((t / totalSteps) * (height - 1));
        const c = t % width;
        const cell = rows[r][c];
        const beatInMeasure = t % (4 * notesPerBeat); 

        let scaleIdx, octave, durMult = 1.0, rest = false, vel = 0.5;

        if (role === 'lead') {
            // Note logic depends on the cell AND the track's unique abab value
            const baseIdx = (cell ? 3 : 0) + (t % trackEntropy.abab);
            scaleIdx = baseIdx % scale.length;
            octave = (rng() < 0.15) ? trackEntropy.octa1 : trackEntropy.octaLeadBase;
            vel = 0.5 + 0.3 * (cell ? 1 : 0.4);
            // Probability of rest is now seeded
            rest = inSilence || (t % trackEntropy.abab === 0 && rng() < trackEntropy.probSilence);
            durMult = (t % 4 === 0) ? 1.1 : 0.85;
            
        } else if (role === 'bass') {
            const baseIdx = (cell ? 0 : 1) + (t % (trackEntropy.abab + 1));
            scaleIdx = baseIdx % Math.min(scale.length, 4); 
            octave = trackEntropy.octa0;
            vel = 0.6 + 0.2 * (cell ? 1 : 0.2);
            // Bass usually plays on the beat, but rng adds syncopation
            rest = inSilence || ((t % 4 !== 0) && rng() < 0.3);
            durMult = 0.9 + (rng() * 0.5);

        } else if (role === 'chords') {
            const baseIdx = (cell ? 1 : 0) + ((t + trackEntropy.abab) % 3);
            scaleIdx = baseIdx % scale.length;
            octave = trackEntropy.octa3;
            vel = 0.4 + 0.3 * (cell ? 1 : 0.5);
            rest = inSilence || (t % trackEntropy.ababab === 0 && rng() < 0.5);
            durMult = 1.5;

        } else if (role === 'drums') {
            const genre = GENRES[gnri] || GENRES[0];
            const kitName = genre.roles.drums.kit;
            const percussionNotes = GENRE_PERCUSSION[kitName] || [36, 38, 42];
            const rhythmPatterns = GENRE_PERCUSSION_ONS[kitName] || GENRE_PERCUSSION_ONS['pop'];

            const [hatOnFn, hatDur] = rhythmPatterns[0];
            const [snareOnFn, snareDur] = rhythmPatterns[1];
            const [kickOnFn, kickDur] = rhythmPatterns[2];

            // Drums now react to the grid (cell) OR a seeded random chance
            const hatOn = hatOnFn(beatInMeasure) && !inSilence && (cell || rng() < 0.7);
            const snareOn = snareOnFn(beatInMeasure) && !inSilence && (cell || rng() < 0.8);
            const kickOn = kickOnFn(beatInMeasure) && !inSilence && (cell || rng() < 0.9);

            if (hatOn) events.push({ role: 'drums', lane: 'hat', startStep: t, dur: stepDur * hatDur, vel: 0.7, rest: false, midi: percussionNotes[0] });
            if (snareOn) events.push({ role: 'drums', lane: 'snare', startStep: t, dur: stepDur * snareDur, vel: 0.9, rest: false, midi: percussionNotes[1] });
            if (kickOn) events.push({ role: 'drums', lane: 'kick', startStep: t, dur: stepDur * kickDur, vel: 1.0, rest: false, midi: percussionNotes[2] });
            continue;
        }

        const midi = 12 * octave + root + scale[scaleIdx];
        const freq = midiToFreq(midi);
        // Apply track-specific swing to duration
        const dur = stepDur * durMult * (rest ? 0 : 1) * (1 - trackEntropy.swing);
        
        events.push({ role, startStep: t, dur, freq, vel, rest, midi });
    }

    return { events, stepDur, extendedDurationSec };
}
        

                function rng(){

                return Math.random();
                }
                function randomActiveRoles(mode, rng______) {
    const allRoles = ['lead', 'bass', 'chords', 'drums'];

    // 1. Handle explicit presets first
    const presets = {
        'all': allRoles,
        'leadBass': ['lead', 'bass'],
        'leadChords': ['lead', 'chords'],
        'bassDrums': ['bass', 'drums']
    };
    if (mode === 'all') return allRoles;


    const chosen = [];
    const roll = rng();


    if (roll > 0.3) {
        chosen.push('bass', 'drums');
    } else if (roll > 0.1) {
        chosen.push('bass'); // Solo bass is more common than solo drums
    }


    if (rng() > 0.4) {
        chosen.push('chords');
    }

    if (chosen.length < 2 || rng() > 0.5) {
        chosen.push('lead');
    }

    // 3. Cleanup: Remove duplicates and ensure it's not empty
    const uniqueChosen = [...new Set(chosen)];
    return uniqueChosen.length > 0 ? uniqueChosen : ['chords']; // Fallback
}













		function mapRoleeeeEvents(rows, role, scaleName, rootName, bpm, notesPerBeat, durationSec, rng__) {
    const scale = SCALE_SEMITONES[scaleName] || SCALE_SEMITONES.pentatonic;
    const root = ROOT_TO_SEMITONE[rootName] || 0;
    const secondsPerBeat = 60 / bpm;
    const stepDur = secondsPerBeat / notesPerBeat;

    const durationMultiplier = 1 + rng() * 2;
    const extendedDurationSec = durationSec * durationMultiplier;
    const totalSteps = Math.floor(extendedDurationSec / stepDur);

    const width = rows[0].length, height = rows.length;
    const events = [];

    const silencePeriods = [];
    const numSilencePeriods = Math.floor(rng() * 3);
    for (let i = 0; i < numSilencePeriods; i++) {
        const startStep = Math.floor(rng() * totalSteps * 0.7);
        const durationSteps = Math.floor(4 + rng() * 16);
        silencePeriods.push({ start: startStep, duration: durationSteps });
    }

    for (let t = 0; t < totalSteps; t++) {
        let inSilence = false;
        for (const silence of silencePeriods) {
            if (t >= silence.start && t < silence.start + silence.duration) {
                inSilence = true;
                break;
            }
        }

        const r = Math.floor((t / totalSteps) * (height - 1));
        const c = t % width;
        const cell = rows[r][c];
        
        // Calculate beatInMeasure based on time and time signature
        const beatsPerMeasure = 4; // Common time signature
        const stepsPerBeat = 1; // Since we're working in steps already
        const stepsPerMeasure = beatsPerMeasure * stepsPerBeat;
        const beatInMeasure = t % stepsPerMeasure;

        let scaleIdx, octave, durMult = 1.0, rest = false, vel = 0.5;

        if (role === 'lead') {
            const baseIdx = (cell ? 2 : 1) + (t % 4) + Math.floor(wielsieder() * 2);
            scaleIdx = baseIdx % scale.length;
            octave = rng() < 0.2 ? 6 : 5;
            vel = 0.5 + 0.4 * (cell ? 1 : 0.3);
            rest = inSilence || (t % 8 === 0 && rng() < 0.3);
            durMult = (t % 4 === 0) ? 1.2 : 0.9;
        } else if (role === 'bass') {
            const baseIdx = (cell ? 0 : 1) + (t % 2);
            scaleIdx = baseIdx % Math.min(scale.length, 5);
            octave = 2;
            vel = 0.4 + 0.25 * (cell ? 1 : 0.5);
            rest = inSilence || ((t % 8 !== 0) && rng() < 0.15);
            durMult = 1.4;
        } else if (role === 'chords') {
            const baseIdx = (cell ? 1 : 0) + (t % 3);
            scaleIdx = baseIdx % scale.length;
            octave = 4;
            vel = 0.45 + 0.4 * (cell ? 1 : 0.3);
            rest = inSilence || (t % 8 === 4 && rng() < 0.4);
            durMult = 1.6;
        } else if (role === 'drums') {
            const genreIndex = parseInt(ctrl.genreSelect.value, 10);
            const genre = GENRES[genreIndex];
            const kitName = genre.roles.drums.kit;
            const percussionNotes = GENRE_PERCUSSION[kitName] || [36, 38, 42];
            const rhythmPatterns = GENRE_PERCUSSION_ONS[kitName] || GENRE_PERCUSSION_ONS['pop'];

            const hatNote = percussionNotes[2] || 42;
            const snareNote = percussionNotes[1] || 38;
            const kickNote = percussionNotes[0] || 36;

            // Use genre-specific rhythm patterns with proper beatInMeasure
            const [hatOnFn, hatDur] = rhythmPatterns[0];
            const [snareOnFn, snareDur] = rhythmPatterns[1];
            const [kickOnFn, kickDur] = rhythmPatterns[2];

            const hatOn = hatOnFn(beatInMeasure) && !inSilence && (cell || rng() < 0.7);
            const snareOn = snareOnFn(beatInMeasure) && !inSilence && (cell || rng() < 0.8);
            const kickOn = kickOnFn(beatInMeasure) && !inSilence && (cell || rng() < 0.9);

            if (hatOn) events.push({
                role: 'drums', lane: 'hat', startStep: t,
                dur: stepDur * hatDur, vel: 0.8, rest: false, midi: hatNote
            });
            if (snareOn) events.push({
                role: 'drums', lane: 'snare', startStep: t,
                dur: stepDur * snareDur, vel: 1.0, rest: false, midi: snareNote
            });
            if (kickOn) events.push({
                role: 'drums', lane: 'kick', startStep: t,
                dur: stepDur * kickDur, vel: 1.0, rest: false, midi: kickNote
            });
            continue;
        }

        const midi = 12 * octave + root + scale[scaleIdx];
        const freq = midiToFreq(midi);
        const dur = stepDur * durMult * (rest ? 0 : 1);
        events.push({ role, startStep: t, dur, freq, vel, rest, midi });
    }
    
    return { events, stepDur, extendedDurationSec };
}
		
		
		function rng(){
		
		return Math.random();
		}
		function randomActiveRoles(mode, rng______) {
    const allRoles = ['lead', 'bass', 'chords', 'drums'];
    
    // 1. Handle explicit presets first
    const presets = {
        'all': allRoles,
        'leadBass': ['lead', 'bass'],
        'leadChords': ['lead', 'chords'],
        'bassDrums': ['bass', 'drums']
    };
    if (mode === 'all') return allRoles;

    // 2. Realistic Probability Logic (The "Smart" Random)
    const chosen = [];
    const roll = rng();

    // Rule A: The Rhythm Section (Bass & Drums)
    // In realistic music, these usually go together.
    if (roll > 0.3) {
        chosen.push('bass', 'drums');
    } else if (roll > 0.1) {
        chosen.push('bass'); // Solo bass is more common than solo drums
    }

    // Rule B: Harmonic Foundation (Chords)
    // Chords are likely if there is a lead, or just to fill space.
    if (rng() > 0.4) {
        chosen.push('chords');
    }

    // Rule C: The Melodic Focus (Lead)
    // If we have very few instruments, the lead is more likely to appear 
    // to keep the listener's interest.
    if (chosen.length < 2 || rng() > 0.5) {
        chosen.push('lead');
    }

    // 3. Cleanup: Remove duplicates and ensure it's not empty
    const uniqueChosen = [...new Set(chosen)];
    return uniqueChosen.length > 0 ? uniqueChosen : ['chords']; // Fallback
}
		
		
		
        function randomActiveRolerrrs(mode, rng) {
            const roles = ['lead', 'bass', 'chords', 'drums'];
            if (mode === 'all') return roles;
            if (mode === 'leadBass') return ['lead', 'bass'];
            if (mode === 'leadChords') return ['lead', 'chords'];
            if (mode === 'bassDrums') return ['bass', 'drums'];
            const count = 2 + Math.floor(rng() * 3);
            const pool = roles.slice();
            const chosen = [];
            for (let i = 0; i < count; i++) {
                const idx = Math.floor(rng() * pool.length);
                chosen.push(pool[idx]);
                pool.splice(idx, 1);
            }
            return chosen;
        }

     
     


/*
  function generateAll() {
                const genre = GENRES[parseInt(ctrl.genreSelect.value, 10)];
                xxx = ctrl.ruleNumber.value;
                xx = xxx.split('#');
                if (xx.length > 1) {

                    const rule = parseInt(xx[1], 10);
                } else {
                    const rule = parseInt(ctrl.ruleNumber.value, 10);
                }
                const seedStr = ctrl.seed.value;
                const height = parseInt(ctrl.height.value, 10);
                const width = parseInt(ctrl.width.value, 10);
                const cyclic = ctrl.cyclic.checked;

                let ruleNumber;

                if (currentRadial === 2) {
                    const numRules = rultypeRad2.length;
                    const ruleIndex = variationIndex % numRules;

                    ruleNumber = rultypeRad2[ruleIndex];
                    statusText.textContent = `Radiaal 2 Geselecteerd. Regel Index: ${ruleIndex} (Waarde: ${ruleNumber})`;

                } else {//ruleNumber = parseInt(ctrl.ruleNumber.value, 10); 
                // statusText.textContent = `Radiaal 1 Geselecteerd. Regel: ${ruleNumber}`;
                }

                const genreIndex = parseInt(ctrl.genreSelect.value, 10);
                document.getElementById('playerTitle').innerHTML = GENRES[genreIndex].name;
                const genreName = GENRES[genreIndex].name;

                const ruleSet = GENRE_ECA_RULES[genreName];
                // || [90, 60, 102]; // Default to a safe set (90, 60, 102)

                function getRule(genreName, role) {
                    let rule = 90;
                    // Default Rule 90 for safety
                    //alert(genreName);
                    if (role === 'lead') {
                        rule = ruleSet[0];

                        xxx = ctrl.ruleNumber.value;
                        xx = xxx.split('#');
                        if (xx.length > 1) {
                            rule = parseInt(xx[1], 10);

                        } else {
                            document.getElementById('ruleNumber').value = ruleSet[0];

                        }

                        //document.getElementById('ruleNumber').value="#"+rule;
                        //ctrl.ruleNumber.value=rule;

                    } else if (role === 'bass') {
                        rule = ruleSet[1];
                    } else if (role === 'chords') {
                        rule = ruleSet[2];
                    } else if (role === 'drums') {
                        rule = ruleSet[3];
                    }

                    return rule;
                    // Returns the simple ECA rule (e.g., 51, 90, 110)
                }

                const bpm = parseInt(ctrl.bpm.value, 10);
                const npb = parseInt(ctrl.notesPerBeat.value, 10);
                const durationSec = parseFloat(ctrl.durationSec.value);

                const baseSeedInt = hashStringToInt(`${genreName}|${seedStr}|${height}|${width}|${cyclic}|${bpm}|${npb}|${durationSec}|${variationIndex}`);
                const rng = mulberry32(baseSeedInt);

                const scaleName = genre.scale;
                const rootName = genre.root;
                const activeRoles = randomActiveRoles(ctrl.roleMode.value, rng);

                const compByRole = {};
                const instrumentByRole = {};

                function chooseWave(base) {
                    const w = ['sine', 'triangle', 'sawtooth', 'square'];
                    if (base === 'sine')
                        return rng() < 0.7 ? 'sine' : w[Math.floor(rng() * w.length)];
                    if (base === 'triangle')
                        return rng() < 0.7 ? 'triangle' : w[Math.floor(rng() * w.length)];
                    if (base === 'sawtooth')
                        return rng() < 0.7 ? 'sawtooth' : w[Math.floor(rng() * w.length)];
                    return rng() < 0.7 ? 'square' : w[Math.floor(rng() * w.length)];
                }

                let gridHash = '';
                let extendedDuration = durationSec;

                activeRoles.forEach(role => {

                    const roleRule = getRule(genreName, role);

                    const roleSeedInt = hashStringToInt(`${genreName}|${roleRule}|${role}|${seedStr}|${height}|${width}|${cyclic}|${bpm}|${npb}|${durationSec}|${variationIndex}`);
                    const roleRng = mulberry32(roleSeedInt);

                    const seedStrategy = roleRng() < 0.5 ? 'randomSparse' : 'singleCenter';

                    const rows = evolveGeneralizedCA(roleRule, width, height, cyclic, currentRadial, roleRng, seedStr);

                    const currentGridHash = hashRows(rows);
                    if (role === 'lead' && currentGridHash === gridHash) {
                        rows[0][Math.floor(roleRng() * width)] ^= 1;
                    }
                    gridHash = currentGridHash;

                    const comp = mapRoleEvents(rows, role, scaleName, rootName, bpm, npb, durationSec, roleRng);
                    comp.events.forEach(ev => {
                        if (role !== 'drums' && ev.freq) {
                            ev.midi = Math.round(69 + 12 * Math.log2(ev.freq / 440));
                        }
                    }
                    );

                    compByRole[role] = comp;
                    instrumentByRole[role] = {
                        wave: chooseWave(genre.wave)
                    };

                    extendedDuration = Math.max(extendedDuration, comp.extendedDurationSec || durationSec);
                }
                );

                lastCompByRole = compByRole;
                lastBpm = bpm;

                if (ctrl.showEvolution.checked) {
                    const lastRole = activeRoles[activeRoles.length - 1];
                    const lastRoleRule = getRule(genreName, lastRole);
                    const lastRoleSeedInt = hashStringToInt(`${genreName}|${lastRoleRule}|${lastRole}|${seedStr}|${height}|${width}|${cyclic}|${bpm}|${npb}|${durationSec}|${variationIndex}`);
                    const lastRoleRng = mulberry32(lastRoleSeedInt);
                    const lastRows = evolveGeneralizedCA(lastRoleRule, width, height, cyclic, currentRadial, lastRoleRng, seedStr);
                    drawEvolution(lastRows);
                }

                statusText.textContent = `${genreName} | roles: ${activeRoles.join(', ')} | rules: [${getRule(genreName, 'lead')}, ${getRule(genreName, 'bass')}, ${getRule(genreName, 'chords')}] | seed "${seedStr}", ${height}x${width}, cyclic=${cyclic}. Variation ${variationIndex}. Duration: ${extendedDuration.toFixed(1)}s`;

                if (ctrl.playAudio.checked)
                    scheduleMulti(compByRole, instrumentByRole);
            }

  
*/

var twoDCaCounter=1;







function initgame5(wi, he, density5){



 ngridgame5=new Array();
for(c=0;c<he;c++){
ngridgame5[c]=[];

}
for(x=0;x<he;x++){
				for(y=0;y<wi;y++){


					if( wielsieder()<density5){						
						gridgame5[x][y]=true;
	ngridgame5[x][y]=true;
					}
					else{
						gridgame5[x][y]=false;
	ngridgame5[x][y]=false;		
					}					
				}
}
}





function findBestMatch(targetStr, dataArray) {
  let bestMatch = null;
  let minDistance = Infinity;

Object.entries(dataArray).forEach(([name, data]) => {
  const item=data;
  
  
  
     
  
  
    const currentName = name;
    const distance = levenshteinDistance(targetStr, currentName);

    if (distance < minDistance) {
      minDistance = distance;
      bestMatch = item;
    }
  });

  return bestMatch;
}

/**
 * Helper function: Calculates Levenshtein distance between two strings
 */
function levenshteinDistance(s1, s2) {
  const track = Array(s2.length + 1).fill(null).map(() =>
    Array(s1.length + 1).fill(null));

  for (let i = 0; i <= s1.length; i += 1) track[0][i] = i;
  for (let j = 0; j <= s2.length; j += 1) track[j][0] = j;

  for (let j = 1; j <= s2.length; j += 1) {
    for (let i = 1; i <= s1.length; i += 1) {
      const indicator = s1[i - 1] === s2[j - 1] ? 0 : 1;
      track[j][i] = Math.min(
        track[j][1 - 1] + 1, // deletion
        track[j - 1][i] + 1, // insertion
        track[j - 1][i - 1] + indicator // substitution
      );
    }
  }
  return track[s2.length][s1.length];
}






var MIDIFA;
var  genreName;
var genreIndex;
var  tdD="";
var twoDCaCounterrrrr=0;
function generateAllo() {
    variationIndex=Math.floor(10000000*Math.random());
    
    tdD="_0_";
    
        currentRadial = 1;
    ctrl.radialSelect.value = currentRadial.toString();



    ctrl.seed.value = Math.floor(wielsieder() * 999999999);


 variationIndex = Math.round(Math.random()*100000000000);

    var  genreIdx = Math.floor(wielsieder() * GENRES.length);
ctrl.genreSelect.value = genreIdx;

	/*
   // ctrl.genreSelect.value = genreIdx;
   // applyGenreSettings(genreIdx);

  //  if (ctrl.roleMode && ctrl.roleMode.options) {
   //     const randomIndex = Math.floor(wielsieder() * ctrl.roleMode.options.length);
   //     ctrl.roleMode.value = ctrl.roleMode.options[randomIndex].value;
   // }

    // Additional random instrument selection
    if (ctrl.leadInstrument.options.length > 0) {
        ctrl.leadInstrument.selectedIndex = Math.floor(wielsieder() * ctrl.leadInstrument.options.length);
    }
    if (ctrl.bassInstrument.options.length > 0) {
        ctrl.bassInstrument.selectedIndex = Math.floor(wielsieder() * ctrl.bassInstrument.options.length);
    }
    if (ctrl.chordsInstrument.options.length > 0) {
        ctrl.chordsInstrument.selectedIndex = Math.floor(wielsieder() * ctrl.chordsInstrument.options.length);
    }

    */
    
             genreIndex = genreIdx; //parseInt(ctrl.genreSelect.value, 10);
            const genre = GENRES[genreIndex];
            genreName = genre.name
            eeg=generateTrackFromDescription("genreName");
            if(eeg!=""){
            genreName=eeg;
            }


		populateGenreInstruments(genreIndex);
variationIndex=Math.floor(10000000*Math.random());
			rwerr=GENRE_ECA_RULES[genreName];
			ctrl.ruleNumber.value=rwerr;
			console.log(genreName+"debug::::"+rwerr);
            const ruleNumber = parseInt(ctrl.ruleNumber.value, 10);

ctrl.seed.value=Math.round(10000000000*Math.random());
            var seedStr = Math.floor(10000000*Math.random());
            const height = parseInt(ctrl.height.value, 10);
            const width = parseInt(ctrl.width.value, 10);
            const cyclic = ctrl.cyclic.checked;
    
       ctrl.bpm.value=genre.bpm;
            var bpm = parseInt(ctrl.bpm.value, 10);

                        eeg=generateTrackFromDescription("bpm");
            if(eeg!=""){
            bpm=eeg;
            }

    lastBpm=bpm;
    
        ctrl.notesPerBeat.value = 2 + Math.floor(wielsieder() * 2);
    const npb = parseInt(ctrl.notesPerBeat.value, 10);
            const durationSec = parseFloat(ctrl.durationSec.value);
variationIndex=Math.floor(10000000*Math.random());
            const baseSeedInt = hashStringToInt(`${genreName}|${seedStr}|${height}|${width}|${cyclic}|${bpm}|${npb}|${durationSec}|${variationIndex}`);
			variationIndex=Math.floor(10000000*Math.random());
            const rng = mulberry32(baseSeedInt);

            var scaleName = genre.scale;



                                    eeg=generateTrackFromDescription("scale");
            if(eeg!=""){
            scaleName=eeg;
            }

            const rootName = genre.root;

			variationIndex=Math.floor(10000000*Math.random());
            const activeRoles = randomActiveRoles(ctrl.roleMode.value, rng);



const terr=findBestMatch(genreName, GENRE_ECA_RULES);
var reee=new Array();
var reeer=["lead", "bass", "chords", "drums"];

var tolti=0;
for(let uj=0;uj<(terr.length-1);uj++){
	if(wielsieder()>(terr[uj]/100)){
	reee[tolti]=reeer[uj];
	tolti++;
	}
}
if(tolti==0){
reee[0]=terr[0];
}


twoDCaCounterrr=twoDCaCounterrr+1;

//const activeRoles=reee;

            const compByRole = {};
            const instrumentByRole = {};

            let extendedDuration = durationSec;
	
    if (ctrl.leadInstrument.options.length > 0) {
        ctrl.leadInstrument.selectedIndex = Math.floor(wielsieder() * ctrl.leadInstrument.options.length);
    }
    if (ctrl.bassInstrument.options.length > 0) {
        ctrl.bassInstrument.selectedIndex = Math.floor(wielsieder() * ctrl.bassInstrument.options.length);
    }
    if (ctrl.chordsInstrument.options.length > 0) {
        ctrl.chordsInstrument.selectedIndex = Math.floor(wielsieder() * ctrl.chordsInstrument.options.length);
    }

			MIDIF=genreName+(Math.floor(100000000*wielsieder()))+'.mid'; 






            activeRoles.forEach(role => {
			
			
			variationIndex=Math.floor(Math.random()*10000000000);
				seedStr=Math.floor(Math.random()*10000000000);
			
                var roleRule = getRulde(genreName, role);

                                                    eeg=generateTrackFromDescription("rule");
            if(eeg!=""){
            roleRule=eeg;
            }

				    var rule = roleRule
				console.log(role+"_ _ _ _           _ _ _ _ _ _          _____"+rule);
				if(role=="lead"){
				ctrl.ruleNumber.value = roleRule;
	
				}
				
                const roleSeedInt = hashStringToInt(`${genreName}|${rule}|${role}|${seedStr}|${height}|${rule}|${cyclic}|${bpm}|${npb}|${durationSec}|${variationIndex}`);
    

console.log(`${genreName}|${rule}|${role}|${seedStr}|${height}|${rule}|${cyclic}|${bpm}|${npb}|${durationSec}|${variationIndex}`);

                const seedStrategy = Math.random() < 0.5 ? 'randomSparse' : 'singleCenter';
                const rows = evolveGeneralizedCA(roleRule, width, height, cyclic, 1, Math.random(), seedStr,rule);


if(  role!="lead"  ||   (twoDCaCounterrr%6)<2){
                const comp = mapRoleEvents(genreIndex, rows, role, scaleName, rootName, bpm, npb, durationSec, Math.random());
				
				
				
				                comp.events.forEach(ev => {
                    if (role !== 'drums' ) {
                        ev.midi = Math.round(69 + 12 * Math.log2(ev.freq / 440));
                    }
                });

                compByRole[role] = comp;
				        extendedDuration = Math.max(extendedDuration, comp.extendedDurationSec || durationSec);
				}
				else{
				

				
				
				
				
				
				
				
				
			
        // 1. INITIALIZE GoL GRID (Random Seed)
        let currentGrid = [];
        for (let y = 0; y < (height/8); y++) {
            currentGrid[y] = [];
            for (let x = 0; x < width; x++) {
                currentGrid[y][x] = Math.random() > 0.5 ? 1 : 0; // 30% density
            }
        }

       
        const timeSteps = [];
		 const timeSteps2 = [];
        const totalSteps = Math.floor((durationSec * bpm * npb) / 120);
twoDCaCounterrrr=twoDCaCounterrrrr%4;
                    	console.log(twoDCaCounter+". . ///////////////////////////..            twoDCaCounter      .....                     ...................."+twoDCaCounterrrr);
        for (let t = 0; t < totalSteps; t++) {
            // Take the current state as the "row" for this slice of time
            // Flatten or map the 2D grid to a format mapRoleEvents expects
            // Usually, mapRoleEvents expects an array of rows (the grid)
            timeSteps.push(currentGrid[Math.floor(  (t%64))]); 
            




          
		
			
			if((twoDCaCounterrrr-0)==0){
			    currentGrid = evolveGameOfLife(currentGrid);
			    tdD="_A_";	
			}
			else if((twoDCaCounterrrr-0)==1){
				    currentGrid =_evolveGameOfLife(currentGrid);
 				 tdD="_B_";	
			}
			else if((twoDCaCounterrrr-0)==2){
				    currentGrid = __evolveGameOfLife(currentGrid);
  tdD="_C_";	
			}
			else{
			       currentGrid = _____evolveGameOfLife(currentGrid);
  tdD="_D_";	
			}
        
        }

     twoDCaCounterrrrr++;               
        // 3. MAP TO MIDI/AUDIO
		///roleRng=Math.random();
        const comp = mapRoleEvents(genreIndex, rows, role, scaleName, rootName, bpm, npb, durationSec, Math.random());
				        extendedDuration = Math.max(extendedDuration, comp.extendedDurationSec || durationSec);
				
				                comp.events.forEach(ev => {
                    if (role !== 'drums' ) {
                        ev.midi = Math.round(69 + 12 * Math.log2(ev.freq / 440));
                    }
                });

                compByRole[role] = comp;
				
				}
				
				
				
				

      
	  // Identify the current genre object from the GENRES array
const genreObj = GENRES.find(g => g.name === genreName) || GENRES[0];

// Randomly choose an instrument from the genre's variation pool
let selectedInst;
if (role === 'lead') {
    selectedInst = genreObj.leadOptions[Math.floor(Math.random() * genreObj.leadOptions.length)];
} else if (role === 'bass') {
    selectedInst = genreObj.bassOptions[Math.floor(Math.random() * genreObj.bassOptions.length)];
} else if (role === 'chords') {
    selectedInst = genreObj.chordsOptions[Math.floor(Math.random() * genreObj.chordsOptions.length)];
} else if (role === 'drums') {
    selectedInst = parseInt(ctrl.drumsKit.value); // Drums usually use a kit ID
}
console.log(selectedInst+"?????????????????????????????????????????????");
// Assign the randomly chosen instrument to the role
instrumentByRole[role] = { 
    wave: genreObj.wave,
    program: selectedInst // This adds the program ID directly to the role
};

        
            }
			
			
			
			
			);
			
            lastCompByRole = compByRole;
            lastBpm = bpm;
		

            statusText.textContent = `${genreName} | roles: ${activeRoles.join(', ')} | rules: [${getRulde(genreName, 'lead')}, ${getRulde(genreName, 'bass')}, ${getRulde(genreName, 'chords')}] | seed "${seedStr}", ${height}x${width}, cyclic=${cyclic}. Variation ${variationIndex}. Duration: ${extendedDuration.toFixed(1)}s`;



     //       if (ctrl.playAudio.checked   &&   loadedSF == true) scheduleMulti(compByRole, instrumentByRole);
        }














function generateAll55o() {
            const genreIndex = parseInt(ctrl.genreSelect.value, 10);
            const genre = GENRES[genreIndex];
            const genreName = genre.name;


		populateGenreInstruments(genreIndex);
variationIndex=Math.floor(10000000*Math.random());
			rwerr=GENRE_ECA_RULES[genreName];
			ctrl.ruleNumber.value=rwerr;
			console.log(genreName+"debug::::"+rwerr);
            const ruleNumber = parseInt(ctrl.ruleNumber.value, 10);

ctrl.seed.value=Math.round(10000000000*Math.random());
            var seedStr = Math.floor(10000000*Math.random());
            const height = parseInt(ctrl.height.value, 10);
            const width = parseInt(ctrl.width.value, 10);
            const cyclic = ctrl.cyclic.checked;
            const bpm = parseInt(ctrl.bpm.value, 10);
            const npb = parseInt(ctrl.notesPerBeat.value, 10);
            const durationSec = parseFloat(ctrl.durationSec.value);
variationIndex=Math.floor(10000000*Math.random());
            const baseSeedInt = hashStringToInt(`${genreName}|${seedStr}|${height}|${width}|${cyclic}|${bpm}|${npb}|${durationSec}|${variationIndex}`);
			variationIndex=Math.floor(10000000*Math.random());
            const rng = mulberry32(baseSeedInt);

            const scaleName = genre.scale;
            const rootName = genre.root;

			variationIndex=Math.floor(10000000*Math.random());
            const activeRoles = randomActiveRoles(ctrl.roleMode.value, rng);


const GENRE_ECA_RULESR = {
    'Techno': [46, 21, 42, 37, 'drums'],
    'House': [31, 29, 17, 24, 'lead'],
    'Trance': [27, 12, 36, 23, 'chords'],
    'Drum&Bass': [26, 14, 29, 31, 'drums'],
    'Chiptune': [33, 19, 22, 27, 'lead'],
    'Ambient': [26, 17, 43, 13, 'chords'],
    'Pop': [16, 23, 39, 22, 'chords'],
    'Jazz': [39, 23, 16, 20, 'chords'],
    'Blues': [16, 24, 40, 20, 'chords'],
    'Funk': [26, 29, 17, 27, 'bass'],
    'Bossa Nova': [24, 40, 16, 19, 'chords'],
    'Bluegrass': [26, 18, 44, 23, 'chords'],
    'Dubstep': [11, 18, 34, 37, 'drums'],
    'Experimental': [10, 30, 35, 24, 'lead'],
    'Chinese Classical': [25, 32, 28, 15, 'chords'],
    'Chinese Traditional': [24, 31, 26, 19, 'chords'],
    'Lo-Fi': [29, 18, 31, 21, 'lead'],
    'Rock': [24, 20, 33, 23, 'drums'],
    'Metal': [25, 14, 30, 31, 'drums'],
    'Hip-Hop': [26, 30, 18, 26, 'bass'],
    'Trap': [27, 15, 30, 28, 'lead'],
    'Cinematic': [17, 29, 35, 20, 'chords'],
    'Indian Raga': [20, 37, 30, 22, 'bass'],
    'Middle Eastern': [20, 35, 28, 23, 'bass'],
    'Afrobeats': [23, 23, 15, 24, 'drums'],
    'Salsa': [23, 15, 38, 25, 'drums'],
    'Reggae': [31, 27, 18, 24, 'bass'],
    'Klezmer': [20, 41, 17, 21, 'chords'],
    'Ribab (Rwira)': [20, 41, 16, 23, 'chords'],
    'Rai': [22, 27, 18, 27, 'lead'],
    'Oriental': [20, 35, 28, 22, 'bass'],
    'Samba': [24, 28, 17, 30, 'drums'],
    'Tango': [25, 20, 34, 19, 'lead'],
    'Flamenco': [31, 14, 29, 25, 'lead'],
    'Highlife': [23, 15, 38, 24, 'drums'],
    'Soukous': [26, 29, 17, 28, 'drums'],
    'Bhangra': [28, 25, 17, 30, 'drums'],
    'Balkan Brass': [28, 13, 26, 30, 'drums'],
    'Zydeco': [23, 39, 16, 22, 'chords'],
    'Cumbia': [24, 16, 40, 21, 'chords'],
    'Mariachi': [25, 20, 34, 21, 'lead'],
    'Polka': [24, 20, 33, 22, 'drums'],
    'Gospel': [17, 29, 35, 20, 'chords'],
    'Ska': [24, 20, 33, 23, 'drums'],
    'Soca': [26, 29, 17, 28, 'drums'],
    'Juju': [23, 15, 39, 23, 'drums'],
    'Mbalax': [26, 29, 17, 27, 'drums'],
    'Forró': [23, 38, 15, 23, 'chords'],
    'Calypso': [23, 15, 39, 22, 'chords'],
    'Gagaku': [20, 34, 28, 18, 'bass'],
    'Griot': [20, 35, 28, 22, 'bass'],
    'Qawwali': [17, 29, 35, 20, 'chords'],
    'Fado': [25, 21, 34, 18, 'lead'],
    'Andean': [24, 16, 39, 21, 'chords'],
    'Gregorian Chant': [21, 37, 30, 18, 'bass'],
    'Boogie Woogie': [24, 20, 33, 21, 'lead'],
    'Zydeco': [23, 39, 16, 22, 'chords'],
    'Ska': [24, 20, 33, 23, 'drums'],
    'Motown': [26, 30, 18, 26, 'bass'],
    'Disco': [26, 30, 17, 27, 'drums'],
    'New Wave': [28, 15, 30, 26, 'lead'],
    'Grunge': [24, 20, 33, 22, 'lead'],
    'Trip Hop': [28, 18, 31, 23, 'lead'],
    'Dub': [28, 15, 31, 21, 'lead'],
    'Psychedelic Rock': [24, 20, 33, 21, 'lead'],
    'Baroque': [17, 30, 35, 19, 'chords'],
    'Renaissance': [20, 37, 30, 22, 'bass'],
    'Minimalism': [26, 18, 44, 19, 'chords'],
    'Post Rock': [28, 18, 30, 25, 'lead'],
    'Shoegaze': [27, 15, 29, 26, 'lead'],
    'Noise': [9, 28, 33, 30, 'drums'],
    'Drone': [26, 18, 44, 16, 'chords'],
    'Waltz': [25, 21, 34, 19, 'lead'],
    'March': [24, 20, 33, 21, 'drums'],
    'Sea Shanty': [23, 39, 15, 20, 'chords'],
    'Swing': [24, 20, 33, 21, 'lead'],
    'Bebop': [38, 23, 15, 25, 'chords'],
    'Cool Jazz': [24, 16, 40, 21, 'chords'],
    'Hard Bop': [24, 20, 33, 21, 'lead'],
    'Free Jazz': [9, 29, 34, 26, 'lead'],
    'Modal Jazz': [24, 16, 39, 21, 'chords'],
    'Jazz Fusion': [27, 15, 29, 26, 'lead'],
    'Smooth Jazz': [24, 16, 40, 20, 'chords'],
    'J-Pop': [26, 30, 18, 26, 'bass'],
    'K-Pop': [28, 15, 30, 27, 'lead'],
    'City Pop': [26, 30, 18, 25, 'bass'],
    'Vaporwave': [29, 18, 31, 21, 'lead'],
    'Future Bass': [27, 15, 30, 28, 'lead'],
    'Witch House': [29, 15, 30, 24, 'lead'],
    'Synthpop': [26, 30, 18, 26, 'bass'],
    'Italo Disco': [26, 30, 18, 26, 'drums'],
    'Eurodance': [26, 29, 17, 27, 'drums'],
    'Hardstyle': [26, 14, 29, 31, 'drums'],
    'Gabber': [8, 25, 29, 32, 'drums'],
    'Psytrance': [27, 15, 29, 29, 'lead'],
    'Goa Trance': [27, 15, 29, 28, 'lead'],
    'Progressive House': [26, 30, 18, 26, 'bass'],
    'Deep House': [24, 16, 39, 21, 'chords'],
    'UK Garage': [27, 15, 29, 26, 'lead'],
    'Footwork': [26, 14, 29, 31, 'drums'],
    'Jungle': [26, 14, 29, 30, 'lead'],
    'Gypsy Jazz': [24, 20, 33, 21, 'lead'],
    'Mambo': [31, 14, 29, 28, 'lead'],
    'Merengue': [26, 29, 17, 27, 'drums'],
    'Bachata': [23, 15, 39, 22, 'chords'],
    'Son Cubano': [23, 39, 15, 23, 'chords'],
    'Rumba': [23, 15, 39, 21, 'chords'],
    'Guaracha': [31, 14, 29, 27, 'lead'],
    'Cha Cha Cha': [26, 29, 17, 27, 'drums'],
    'Danzón': [17, 30, 35, 19, 'chords'],
    'Bolero': [20, 37, 30, 22, 'bass'],
    'Pachanga': [30, 14, 29, 26, 'lead'],
    'Timba': [27, 15, 30, 28, 'lead'],
    'Charanga': [23, 39, 15, 22, 'chords'],
    'Mozambique': [26, 29, 17, 26, 'drums'],
    'Conga': [26, 29, 17, 27, 'drums'],
    'Bomba': [23, 15, 39, 22, 'chords'],
    'Plena': [23, 39, 15, 23, 'chords'],
    'Guajira': [23, 15, 39, 21, 'chords'],
    'Son Montuno': [23, 39, 15, 23, 'chords'],
    'Guaguancó': [23, 15, 39, 22, 'chords'],
    'Colombia': [20, 35, 28, 22, 'bass'],
    'Yambú': [17, 30, 35, 19, 'chords'],
    'Guarapachangueo': [27, 15, 30, 28, 'lead'],
    'Batá': [23, 15, 39, 22, 'chords'],
    'Iyesá': [23, 15, 39, 21, 'chords'],
    'Makuta': [26, 29, 17, 26, 'drums'],
    'Villancico': [17, 30, 35, 19, 'chords'],
    'Punto Cubano': [20, 37, 30, 22, 'bass'],
    'Tonada': [17, 29, 35, 19, 'chords'],
    'Chaabi': [18, 22, 27, 33, 'drums'],
    'Rai': [16, 26, 21, 37, 'drums'],
    'Gnawa': [22, 18, 27, 33, 'drums'],
    'Andalusisch': [14, 25, 28, 34, 'drums'],
    'Malhoun': [27, 18, 22, 32, 'drums'],
    'Kabyle': [18, 27, 22, 33, 'drums'],
    'Tuareg': [32, 21, 17, 30, 'lead'],
    'DesertBlues': [28, 19, 23, 30, 'drums'],
    'Shaabi': [32, 17, 21, 30, 'lead'],
    'Mahraganat': [27, 22, 18, 33, 'drums'],
    'Tarab': [14, 25, 28, 34, 'drums'],
    'Dabke': [30, 20, 24, 27, 'lead'],
    'Khaliji': [27, 18, 22, 33, 'drums'],
    'Mugham': [25, 14, 28, 34, 'drums'],
    'PersianPop': [22, 27, 18, 33, 'drums'],
    'Arabesk': [18, 22, 27, 32, 'drums'],
    'Fasi': [11, 20, 23, 35, 'drums'],
    'Hawzi': [18, 22, 27, 32, 'drums'],
    'Mezwed': [29, 24, 19, 28, 'lead'],
    'MusiqueOrientale': [12, 24, 29, 36, 'drums'],
    'SaharanRock': [29, 19, 23, 28, 'lead'],
    'MoorishRock': [28, 19, 23, 30, 'drums'],
    'Izran': [18, 22, 27, 33, 'drums'],
    'AmazighRock': [30, 19, 23, 28, 'lead'],
    'Ahidous': [22, 27, 18, 33, 'drums'],
    'Ahwash': [27, 18, 22, 33, 'drums'],
    'Rwayes': [25, 14, 28, 34, 'drums'],
    'Tagnawit': [22, 27, 18, 33, 'drums'],
    'Taqtoqa': [30, 19, 24, 28, 'lead'],
    'Tindé': [18, 22, 27, 32, 'drums']
};

const terr=findBestMatch(genreName, GENRE_ECA_RULES);
var reee=new Array();
var reeer=["lead", "bass", "chords", "drums"];

var tolti=0;
for(let uj=0;uj<(terr.length-1);uj++){
	if(wielsieder()>(terr[uj]/100)){
	reee[tolti]=reeer[uj];
	tolti++;
	}
}
if(tolti==0){
reee[0]=terr[0];
}




//const activeRoles=reee;

            const compByRole = {};
            const instrumentByRole = {};

            let extendedDuration = durationSec;
	
    if (ctrl.leadInstrument.options.length > 0) {
        ctrl.leadInstrument.selectedIndex = Math.floor(wielsieder() * ctrl.leadInstrument.options.length);
    }
    if (ctrl.bassInstrument.options.length > 0) {
        ctrl.bassInstrument.selectedIndex = Math.floor(wielsieder() * ctrl.bassInstrument.options.length);
    }
    if (ctrl.chordsInstrument.options.length > 0) {
        ctrl.chordsInstrument.selectedIndex = Math.floor(wielsieder() * ctrl.chordsInstrument.options.length);
    }

			MIDIF=genreName+(Math.floor(100000000*wielsieder()))+'.mid'; 

if(twoDCaCounter==4 || true ){




            activeRoles.forEach(role => {
			
			
			variationIndex=Math.floor(Math.random()*10000000000);
				seedStr=Math.floor(Math.random()*10000000000);
			
                const roleRule = getRulde(genreName, role);

				    const rule = roleRule
				console.log(role+"_ _ _ _           _ _ _ _ _ _          _____"+rule);
				if(role=="lead"){
				//ctrl.ruleNumber.value = roleRule;
	
				}
				
                const roleSeedInt = hashStringToInt(`${genreName}|${rule}|${role}|${seedStr}|${height}|${rule}|${cyclic}|${bpm}|${npb}|${durationSec}|${variationIndex}`);
                const roleRng = Math.random(); //mulberry32(roleSeedInt);

console.log(`${genreName}|${rule}|${role}|${seedStr}|${height}|${rule}|${cyclic}|${bpm}|${npb}|${durationSec}|${variationIndex}`);

                const seedStrategy = Math.random() < 0.5 ? 'randomSparse' : 'singleCenter';
                const rows = evolveGeneralizedCA(roleRule, width, height, cyclic, 1, roleRng, seedStr,rule);


if( twoDCaCounter!=0  || role!="lead"  || true){
                const comp = mapRoleEvents(rows, role, scaleName, rootName, bpm, npb, durationSec, roleRng);
				
				
				
				                comp.events.forEach(ev => {
                    if (role !== 'drums' ) {
                        ev.midi = Math.round(69 + 12 * Math.log2(ev.freq / 440));
                    }
                });

                compByRole[role] = comp;
				        extendedDuration = Math.max(extendedDuration, comp.extendedDurationSec || durationSec);
				}
				else{
				

				
				
				
				
				
				
				
				
			
        // 1. INITIALIZE GoL GRID (Random Seed)
        let currentGrid = [];
        for (let y = 0; y < height; y++) {
            currentGrid[y] = [];
            for (let x = 0; x < width; x++) {
                currentGrid[y][x] = Math.random() > 0.5 ? 1 : 0; // 30% density
            }
        }

        // 2. EVOLVE THROUGH TIME (Animation steps)
        // We treat each step in time as a 'row' for the mapRoleEvents function
        const timeSteps = [];
		 const timeSteps2 = [];
        const totalSteps = Math.floor((durationSec * bpm * npb) / 120);

        for (let t = 0; t < totalSteps; t++) {
            // Take the current state as the "row" for this slice of time
            // Flatten or map the 2D grid to a format mapRoleEvents expects
            // Usually, mapRoleEvents expects an array of rows (the grid)
            timeSteps.push(currentGrid[Math.floor(  (t%64))]); 
            




            // Evolve the simulation for the next delta t
			console.log(twoDCaCounter+". . ..            twoDCaCounter      .....                     ....................");
			
			if(twoDCaCounter==0){
			    currentGrid = evolveGameOfLife(currentGrid);
			}
			else if(twoDCaCounter==1){
				    currentGrid =_evolveGameOfLife(currentGrid);
			}
			else if(twoDCaCounter==2){
				    currentGrid = __evolveGameOfLife(currentGrid);
			}
			else{
			       currentGrid = _____evolveGameOfLife(currentGrid);
			}
        
        }

        // 3. MAP TO MIDI/AUDIO
		///roleRng=Math.random();
        const comp = mapRoleEvents(rows, role, scaleName, rootName, bpm, npb, durationSec, roleRng);
				        extendedDuration = Math.max(extendedDuration, comp.extendedDurationSec || durationSec);
				
				                comp.events.forEach(ev => {
                    if (role !== 'drums' ) {
                        ev.midi = Math.round(69 + 12 * Math.log2(ev.freq / 440));
                    }
                });

                compByRole[role] = comp;
				
				}
				
				
				
				

      
	  // Identify the current genre object from the GENRES array
const genreObj = GENRES.find(g => g.name === genreName) || GENRES[0];

// Randomly choose an instrument from the genre's variation pool
let selectedInst;
if (role === 'lead') {
    selectedInst = genreObj.leadOptions[Math.floor(Math.random() * genreObj.leadOptions.length)];
} else if (role === 'bass') {
    selectedInst = genreObj.bassOptions[Math.floor(Math.random() * genreObj.bassOptions.length)];
} else if (role === 'chords') {
    selectedInst = genreObj.chordsOptions[Math.floor(Math.random() * genreObj.chordsOptions.length)];
} else if (role === 'drums') {
    selectedInst = parseInt(ctrl.drumsKit.value); // Drums usually use a kit ID
}

// Assign the randomly chosen instrument to the role
instrumentByRole[role] = { 
    wave: genreObj.wave,
    program: selectedInst // This adds the program ID directly to the role
};

        
            }
			
			
			
			
			);
			
			
			

            lastCompByRole = compByRole;
            lastBpm = bpm;
		

            statusText.textContent = `${genreName} | roles: ${activeRoles.join(', ')} | rules: [${getRulde(genreName, 'lead')}, ${getRulde(genreName, 'bass')}, ${getRulde(genreName, 'chords')}] | seed "${seedStr}", ${height}x${width}, cyclic=${cyclic}. Variation ${variationIndex}. Duration: ${extendedDuration.toFixed(1)}s`;
}
else{










variationIndex=Math.floor(Math.random()*1000000000000);


            activeRoles.forEach(role => {
			
			
			
			
			
                const roleRule = getRulde(genreName, role);

				    const rule = roleRule
				console.log(role+"_ _ _ _           _ _ _ _ _ _          _____"+rule);
				if(role!="lead"){
				
				
				
				//ctrl.ruleNumber.value = roleRule;
	
		
				
                const roleSeedInt = hashStringToInt(`${genreName}|${roleRule}|${role}|${seedStr}|${height}|${width}|${cyclic}|${bpm}|${npb}|${durationSec}|${variationIndex}`);
                const roleRng = mulberry32(roleSeedInt);

console.log(`${genreName}|${roleRule}|${role}|${seedStr}|${height}|${width}|${cyclic}|${bpm}|${npb}|${durationSec}|${variationIndex}`);

                const seedStrategy = roleRng() < 0.5 ? 'randomSparse' : 'singleCenter';
                const rows = evolveGeneralizedCA(roleRule, width, height, cyclic, currentRadial, roleRng, seedStr,rule);

                const comp = mapRoleEvents(rows, role, scaleName, rootName, bpm, npb, durationSec, roleRng);
                comp.events.forEach(ev => {
                    if (role !== 'drums' && ev.freq) {
                        ev.midi = Math.round(69 + 12 * Math.log2(ev.freq / 440));
                    }
                });

                compByRole[role] = comp;
                instrumentByRole[role] = { wave: genre.wave };
                extendedDuration = Math.max(extendedDuration, comp.extendedDurationSec || durationSec);
				
				
				
				
				
				
            }
			else{
			
			
			
        // 1. INITIALIZE GoL GRID (Random Seed)
        let currentGrid = [];
        for (let y = 0; y < height; y++) {
            currentGrid[y] = [];
            for (let x = 0; x < width; x++) {
                currentGrid[y][x] = Math.random() > 0.5 ? 1 : 0; // 30% density
            }
        }

        // 2. EVOLVE THROUGH TIME (Animation steps)
        // We treat each step in time as a 'row' for the mapRoleEvents function
        const timeSteps = [];
		 const timeSteps2 = [];
        const totalSteps = Math.floor((durationSec * bpm * npb) / 60);

        for (let t = 0; t < totalSteps; t++) {
            // Take the current state as the "row" for this slice of time
            // Flatten or map the 2D grid to a format mapRoleEvents expects
            // Usually, mapRoleEvents expects an array of rows (the grid)
            timeSteps.push(currentGrid[Math.floor(  (t%64))]); 
            




            // Evolve the simulation for the next delta t
			console.log(twoDCaCounter+". . ..            twoDCaCounter      .....                     ....................");
			
			if(twoDCaCounter==0){
			    currentGrid = evolveGameOfLife(currentGrid);
			}
			else if(twoDCaCounter==1){
				    currentGrid =_evolveGameOfLife(currentGrid);
			}
			else if(twoDCaCounter==2){
				    currentGrid = __evolveGameOfLife(currentGrid);
			}
			else{
			       currentGrid = _____evolveGameOfLife(currentGrid);
			}
        
        }

        // 3. MAP TO MIDI/AUDIO
		roleRng=Math.random();
        const comp = mapRoleEvents(timeSteps, role, scaleName, rootName, bpm, npb, durationSec, roleRng);
			
			 compByRole[role] = comp;
                instrumentByRole[role] = { wave: genre.wave };
                extendedDuration = Math.max(extendedDuration, comp.extendedDurationSec || durationSec);
			
			}
			
			
			}
			
			);
			
			
			

            lastCompByRole = compByRole;
            lastBpm = bpm;
		

            statusText.textContent = `${genreName} | roles: ${activeRoles.join(', ')} | rules: [${getRulde(genreName, 'lead')}, ${getRulde(genreName, 'bass')}, ${getRulde(genreName, 'chords')}] | seed "${seedStr}", ${height}x${width}, cyclic=${cyclic}. Variation ${variationIndex}. Duration: ${extendedDuration.toFixed(1)}s`;








}

      //      if (ctrl.playAudio.checked) scheduleMulti(compByRole, instrumentByRole);
        }





  function generateAll() {
            const genreIndex = parseInt(ctrl.genreSelect.value, 10);
            const genre = GENRES[genreIndex];
            const genreName = genre.name;

            const ruleNumber = parseInt(ctrl.ruleNumber.value, 10);
            const seedStr = ctrl.seed.value;
            const height = parseInt(ctrl.height.value, 10);
            const width = parseInt(ctrl.width.value, 10);
            const cyclic = ctrl.cyclic.checked;
            const bpm = parseInt(ctrl.bpm.value, 10);
            const npb = parseInt(ctrl.notesPerBeat.value, 10);
            const durationSec = parseFloat(ctrl.durationSec.value);

            const baseSeedInt = hashStringToInt(`${genreName}|${seedStr}|${height}|${width}|${cyclic}|${bpm}|${npb}|${durationSec}|${variationIndex}`);
            const rng = mulberry32(baseSeedInt);

            const scaleName = genre.scale;
            const rootName = genre.root;
        //    const activeRoles = randomActiveRoles(ctrl.roleMode.value, rng);

            const compByRole = {};
            const instrumentByRole = {};

            let extendedDuration = durationSec;

            
	
const GENRE_ECA_RULESR = {
    'Techno': [46, 21, 42, 37, 'drums'],
    'House': [31, 29, 17, 24, 'lead'],
    'Trance': [27, 12, 36, 23, 'chords'],
    'Drum&Bass': [26, 14, 29, 31, 'drums'],
    'Chiptune': [33, 19, 22, 27, 'lead'],
    'Ambient': [26, 17, 43, 13, 'chords'],
    'Pop': [16, 23, 39, 22, 'chords'],
    'Jazz': [39, 23, 16, 20, 'chords'],
    'Blues': [16, 24, 40, 20, 'chords'],
    'Funk': [26, 29, 17, 27, 'bass'],
    'Bossa Nova': [24, 40, 16, 19, 'chords'],
    'Bluegrass': [26, 18, 44, 23, 'chords'],
    'Dubstep': [11, 18, 34, 37, 'drums'],
    'Experimental': [10, 30, 35, 24, 'lead'],
    'Chinese Classical': [25, 32, 28, 15, 'chords'],
    'Chinese Traditional': [24, 31, 26, 19, 'chords'],
    'Lo-Fi': [29, 18, 31, 21, 'lead'],
    'Rock': [24, 20, 33, 23, 'drums'],
    'Metal': [25, 14, 30, 31, 'drums'],
    'Hip-Hop': [26, 30, 18, 26, 'bass'],
    'Trap': [27, 15, 30, 28, 'lead'],
    'Cinematic': [17, 29, 35, 20, 'chords'],
    'Indian Raga': [20, 37, 30, 22, 'bass'],
    'Middle Eastern': [20, 35, 28, 23, 'bass'],
    'Afrobeats': [23, 23, 15, 24, 'drums'],
    'Salsa': [23, 15, 38, 25, 'drums'],
    'Reggae': [31, 27, 18, 24, 'bass'],
    'Klezmer': [20, 41, 17, 21, 'chords'],
    'Ribab (Rwira)': [20, 41, 16, 23, 'chords'],
    'Rai': [22, 27, 18, 27, 'lead'],
    'Oriental': [20, 35, 28, 22, 'bass'],
    'Samba': [24, 28, 17, 30, 'drums'],
    'Tango': [25, 20, 34, 19, 'lead'],
    'Flamenco': [31, 14, 29, 25, 'lead'],
    'Highlife': [23, 15, 38, 24, 'drums'],
    'Soukous': [26, 29, 17, 28, 'drums'],
    'Bhangra': [28, 25, 17, 30, 'drums'],
    'Balkan Brass': [28, 13, 26, 30, 'drums'],
    'Zydeco': [23, 39, 16, 22, 'chords'],
    'Cumbia': [24, 16, 40, 21, 'chords'],
    'Mariachi': [25, 20, 34, 21, 'lead'],
    'Polka': [24, 20, 33, 22, 'drums'],
    'Gospel': [17, 29, 35, 20, 'chords'],
    'Ska': [24, 20, 33, 23, 'drums'],
    'Soca': [26, 29, 17, 28, 'drums'],
    'Juju': [23, 15, 39, 23, 'drums'],
    'Mbalax': [26, 29, 17, 27, 'drums'],
    'Forró': [23, 38, 15, 23, 'chords'],
    'Calypso': [23, 15, 39, 22, 'chords'],
    'Gagaku': [20, 34, 28, 18, 'bass'],
    'Griot': [20, 35, 28, 22, 'bass'],
    'Qawwali': [17, 29, 35, 20, 'chords'],
    'Fado': [25, 21, 34, 18, 'lead'],
    'Andean': [24, 16, 39, 21, 'chords'],
    'Gregorian Chant': [21, 37, 30, 18, 'bass'],
    'Boogie Woogie': [24, 20, 33, 21, 'lead'],
    'Zydeco': [23, 39, 16, 22, 'chords'],
    'Ska': [24, 20, 33, 23, 'drums'],
    'Motown': [26, 30, 18, 26, 'bass'],
    'Disco': [26, 30, 17, 27, 'drums'],
    'New Wave': [28, 15, 30, 26, 'lead'],
    'Grunge': [24, 20, 33, 22, 'lead'],
    'Trip Hop': [28, 18, 31, 23, 'lead'],
    'Dub': [28, 15, 31, 21, 'lead'],
    'Psychedelic Rock': [24, 20, 33, 21, 'lead'],
    'Baroque': [17, 30, 35, 19, 'chords'],
    'Renaissance': [20, 37, 30, 22, 'bass'],
    'Minimalism': [26, 18, 44, 19, 'chords'],
    'Post Rock': [28, 18, 30, 25, 'lead'],
    'Shoegaze': [27, 15, 29, 26, 'lead'],
    'Noise': [9, 28, 33, 30, 'drums'],
    'Drone': [26, 18, 44, 16, 'chords'],
    'Waltz': [25, 21, 34, 19, 'lead'],
    'March': [24, 20, 33, 21, 'drums'],
    'Sea Shanty': [23, 39, 15, 20, 'chords'],
    'Swing': [24, 20, 33, 21, 'lead'],
    'Bebop': [38, 23, 15, 25, 'chords'],
    'Cool Jazz': [24, 16, 40, 21, 'chords'],
    'Hard Bop': [24, 20, 33, 21, 'lead'],
    'Free Jazz': [9, 29, 34, 26, 'lead'],
    'Modal Jazz': [24, 16, 39, 21, 'chords'],
    'Jazz Fusion': [27, 15, 29, 26, 'lead'],
    'Smooth Jazz': [24, 16, 40, 20, 'chords'],
    'J-Pop': [26, 30, 18, 26, 'bass'],
    'K-Pop': [28, 15, 30, 27, 'lead'],
    'City Pop': [26, 30, 18, 25, 'bass'],
    'Vaporwave': [29, 18, 31, 21, 'lead'],
    'Future Bass': [27, 15, 30, 28, 'lead'],
    'Witch House': [29, 15, 30, 24, 'lead'],
    'Synthpop': [26, 30, 18, 26, 'bass'],
    'Italo Disco': [26, 30, 18, 26, 'drums'],
    'Eurodance': [26, 29, 17, 27, 'drums'],
    'Hardstyle': [26, 14, 29, 31, 'drums'],
    'Gabber': [8, 25, 29, 32, 'drums'],
    'Psytrance': [27, 15, 29, 29, 'lead'],
    'Goa Trance': [27, 15, 29, 28, 'lead'],
    'Progressive House': [26, 30, 18, 26, 'bass'],
    'Deep House': [24, 16, 39, 21, 'chords'],
    'UK Garage': [27, 15, 29, 26, 'lead'],
    'Footwork': [26, 14, 29, 31, 'drums'],
    'Jungle': [26, 14, 29, 30, 'lead'],
    'Gypsy Jazz': [24, 20, 33, 21, 'lead'],
    'Mambo': [31, 14, 29, 28, 'lead'],
    'Merengue': [26, 29, 17, 27, 'drums'],
    'Bachata': [23, 15, 39, 22, 'chords'],
    'Son Cubano': [23, 39, 15, 23, 'chords'],
    'Rumba': [23, 15, 39, 21, 'chords'],
    'Guaracha': [31, 14, 29, 27, 'lead'],
    'Cha Cha Cha': [26, 29, 17, 27, 'drums'],
    'Danzón': [17, 30, 35, 19, 'chords'],
    'Bolero': [20, 37, 30, 22, 'bass'],
    'Pachanga': [30, 14, 29, 26, 'lead'],
    'Timba': [27, 15, 30, 28, 'lead'],
    'Charanga': [23, 39, 15, 22, 'chords'],
    'Mozambique': [26, 29, 17, 26, 'drums'],
    'Conga': [26, 29, 17, 27, 'drums'],
    'Bomba': [23, 15, 39, 22, 'chords'],
    'Plena': [23, 39, 15, 23, 'chords'],
    'Guajira': [23, 15, 39, 21, 'chords'],
    'Son Montuno': [23, 39, 15, 23, 'chords'],
    'Guaguancó': [23, 15, 39, 22, 'chords'],
    'Colombia': [20, 35, 28, 22, 'bass'],
    'Yambú': [17, 30, 35, 19, 'chords'],
    'Guarapachangueo': [27, 15, 30, 28, 'lead'],
    'Batá': [23, 15, 39, 22, 'chords'],
    'Iyesá': [23, 15, 39, 21, 'chords'],
    'Makuta': [26, 29, 17, 26, 'drums'],
    'Villancico': [17, 30, 35, 19, 'chords'],
    'Punto Cubano': [20, 37, 30, 22, 'bass'],
    'Tonada': [17, 29, 35, 19, 'chords'],
    'Chaabi': [18, 22, 27, 33, 'drums'],
    'Rai': [16, 26, 21, 37, 'drums'],
    'Gnawa': [22, 18, 27, 33, 'drums'],
    'Andalusisch': [14, 25, 28, 34, 'drums'],
    'Malhoun': [27, 18, 22, 32, 'drums'],
    'Kabyle': [18, 27, 22, 33, 'drums'],
    'Tuareg': [32, 21, 17, 30, 'lead'],
    'DesertBlues': [28, 19, 23, 30, 'drums'],
    'Shaabi': [32, 17, 21, 30, 'lead'],
    'Mahraganat': [27, 22, 18, 33, 'drums'],
    'Tarab': [14, 25, 28, 34, 'drums'],
    'Dabke': [30, 20, 24, 27, 'lead'],
    'Khaliji': [27, 18, 22, 33, 'drums'],
    'Mugham': [25, 14, 28, 34, 'drums'],
    'PersianPop': [22, 27, 18, 33, 'drums'],
    'Arabesk': [18, 22, 27, 32, 'drums'],
    'Fasi': [11, 20, 23, 35, 'drums'],
    'Hawzi': [18, 22, 27, 32, 'drums'],
    'Mezwed': [29, 24, 19, 28, 'lead'],
    'MusiqueOrientale': [12, 24, 29, 36, 'drums'],
    'SaharanRock': [29, 19, 23, 28, 'lead'],
    'MoorishRock': [28, 19, 23, 30, 'drums'],
    'Izran': [18, 22, 27, 33, 'drums'],
    'AmazighRock': [30, 19, 23, 28, 'lead'],
    'Ahidous': [22, 27, 18, 33, 'drums'],
    'Ahwash': [27, 18, 22, 33, 'drums'],
    'Rwayes': [25, 14, 28, 34, 'drums'],
    'Tagnawit': [22, 27, 18, 33, 'drums'],
    'Taqtoqa': [30, 19, 24, 28, 'lead'],
    'Tindé': [18, 22, 27, 32, 'drums']
};

const terr=findBestMatch(genreName, GENRE_ECA_RULESR);
var reee=new Array();
var reeer=["lead", "bass", "chords", "drums"];

var tolti=0;
for(let uj=0;uj<(terr.length-1);uj++){
	if(wielsieder()>(terr[uj]/100)){
	reee[tolti]=reeer[uj];
	tolti++;
	}
}
if(tolti==0){
reee[0]=terr[(terr.length-1)];
}
const activeRoles=reee;		
		
MIDIF=genreName+(Math.floor(100000000*wielsieder()))+'.mid'; 
if(twoDCaCounter==0){
		
			
            activeRoles.forEach(role => {
                const roleRule = getRulde(genreName, role);

				    const rule = roleRule
				
				if(role=="lead"){
				ctrl.ruleNumber.value = roleRule;
	
				}
				
                const roleSeedInt = hashStringToInt(`${genreName}|${roleRule}|${role}|${seedStr}|${height}|${width}|${cyclic}|${bpm}|${npb}|${durationSec}|${variationIndex}`);
                const roleRng = mulberry32(roleSeedInt);

                const seedStrategy = roleRng() < 0.5 ? 'randomSparse' : 'singleCenter';
                const rows = evolveGeneralizedCA(roleRule, width, height, cyclic, currentRadial, roleRng, seedStr);

                const comp = mapRoleEvents(rows, role, scaleName, rootName, bpm, npb, durationSec, roleRng);
                comp.events.forEach(ev => {
                    if (role !== 'drums' && ev.freq) {
                        ev.midi = Math.round(69 + 12 * Math.log2(ev.freq / 440));
                    }
                });

                compByRole[role] = comp;
                instrumentByRole[role] = { wave: genre.wave };
                extendedDuration = Math.max(extendedDuration, comp.extendedDurationSec || durationSec);
            });
			
            lastCompByRole = compByRole;
            lastBpm = bpm;

            statusText.textContent = `${genreName} | roles: ${activeRoles.join(', ')} | rules: [${getRulde(genreName, 'lead')}, ${getRulde(genreName, 'bass')}, ${getRulde(genreName, 'chords')}] | seed "${seedStr}", ${height}x${width}, cyclic=${cyclic}. Variation ${variationIndex}. Duration: ${extendedDuration.toFixed(1)}s`;

            if (ctrl.playAudio.checked) scheduleMulti(compByRole, instrumentByRole);
			
			}
			else{
					
activeRoles.forEach(role => {
        const roleSeedInt = hashStringToInt(`${genreName}|${role}|${seedStr}`);
        const roleRng = mulberry32(roleSeedInt);


	
                const roleRule = getRulde(genreName, role);

				    const rule = roleRule
				
				if(role!="lead"){
				ctrl.ruleNumber.value = roleRule;
	
				
				
                const roleSeedInt = hashStringToInt(`${genreName}|${roleRule}|${role}|${seedStr}|${height}|${width}|${cyclic}|${bpm}|${npb}|${durationSec}|${variationIndex}`);
                const roleRng = mulberry32(roleSeedInt);

                const seedStrategy = roleRng() < 0.5 ? 'randomSparse' : 'singleCenter';
                const rows = evolveGeneralizedCA(roleRule, width, height, cyclic, currentRadial, roleRng, seedStr);

                const comp = mapRoleEvents(rows, role, scaleName, rootName, bpm, npb, durationSec, roleRng);
                comp.events.forEach(ev => {
                    if (role !== 'drums' && ev.freq) {
                        ev.midi = Math.round(69 + 12 * Math.log2(ev.freq / 440));
                    }
                });
				
				
				}
				else{

        // 1. INITIALIZE GoL GRID (Random Seed)
        let currentGrid = [];
        for (let y = 0; y < height; y++) {
            currentGrid[y] = [];
            for (let x = 0; x < width; x++) {
                currentGrid[y][x] = roleRng() > 0.7 ? 1 : 0; // 30% density
            }
        }

        // 2. EVOLVE THROUGH TIME (Animation steps)
        // We treat each step in time as a 'row' for the mapRoleEvents function
        const timeSteps = [];
		 const timeSteps2 = [];
        const totalSteps = Math.floor((durationSec * bpm * npb) / 60);

        for (let t = 0; t < totalSteps; t++) {
            // Take the current state as the "row" for this slice of time
            // Flatten or map the 2D grid to a format mapRoleEvents expects
            // Usually, mapRoleEvents expects an array of rows (the grid)
            timeSteps.push(currentGrid[Math.floor(  (t%30))]); 
            

            // Evolve the simulation for the next delta t
			if(twoDCaCounter==1){
			    currentGrid = evolveGameOfLife(currentGrid);
			}
			else if(twoDCaCounter==2){
				    currentGrid =_evolveGameOfLife(currentGrid);
			}
			else if(twoDCaCounter==3){
				    currentGrid = __evolveGameOfLife(currentGrid);
			}
			else{
			       currentGrid = _____evolveGameOfLife(currentGrid);
			}
			
			
        }

        // 3. MAP TO MIDI/AUDIO
        const comp = mapRoleEvents(timeSteps, role, scaleName, rootName, bpm, npb, durationSec, roleRng);
        
        comp.events.forEach(ev => {
            if (role !== 'drums' && ev.freq) {
                ev.midi = Math.round(69 + 12 * Math.log2(ev.freq / 440));
            }
        });
}
        compByRole[role] = comp;
        instrumentByRole[role] = { wave: genre.wave };
        extendedDuration = Math.max(extendedDuration, comp.extendedDurationSec || durationSec);
    });

			
            lastCompByRole = compByRole;
            lastBpm = bpm;

            statusText.textContent = `${genreName} | roles: ${activeRoles.join(', ')} | rules: [${getRulde(genreName, 'lead')}, ${getRulde(genreName, 'bass')}, ${getRulde(genreName, 'chords')}] | seed "${seedStr}", ${height}x${width}, cyclic=${cyclic}. Variation ${variationIndex}. Duration: ${extendedDuration.toFixed(1)}s`;

            if (ctrl.playAudio.checked) scheduleMulti(compByRole, instrumentByRole);
			}
        }

        // ==================== PLAYBACK SCHEDULER ====================
        let playbackTimer = null;
        let isAutoPlaying = true;

        function scheduleMulti(compByRole, instrumentByRole) {
            ensureAudio();
            chorusEnhancer.advanceSection(); // Start with first section

            const now = audioCtx.currentTime;
            const lookAhead = 0.15;
            const scheduleInterval = 50;

            const indices = { lead: 0, bass: 0, chords: 0, drums: 0 };
            const steps = {
                lead: compByRole.lead?.stepDur || 0.2,
                bass: compByRole.bass?.stepDur || 0.2,
                chords: compByRole.chords?.stepDur || 0.2,
                drums: compByRole.drums?.stepDur || 0.2
            };

            playbackTimer = setInterval(() => {
                var ct = 1;
				try{ ct = audioCtx.currentTime; }
				catch(v){ }

                function process(role) {
                    const comp = compByRole[role];
                    if (!comp) return;
                    const inst = instrumentByRole[role];
                    
					    const genreIndex = parseInt(ctrl.genreSelect.value, 10);
    const genre = GENRES[genreIndex];
					
					
                    while (indices[role] < comp.events.length) {
                        const ev = comp.events[indices[role]];
                        const start = now + ev.startStep * steps[role];
                        
                        if (start < ct + lookAhead) {
                            if (!ev.rest) {
                                if (role === 'drums') {
                                    const doubledVelocity = Math.min(1.0, ev.vel * 2);
                                    if (soundfontPlayer) {
                                        soundfontPlayer.playNote(start, ev.dur, ev.midi, doubledVelocity, 0, 9);
                                    }
                                } else {
                                    const programMap = {
                                        lead: parseInt(ctrl.leadInstrument.value, 10) || genre.instruments?.lead || 0,
                                        bass: parseInt(ctrl.bassInstrument.value, 10) || genre.instruments?.bass || 32,
                                        chords: parseInt(ctrl.chordsInstrument.value, 10) || genre.instruments?.chords || 0
                                    };
                                    
                                    const program = programMap[role] || 0;
                                    const channelMap = { lead: 0, bass: 1, chords: 2, drums: 9 };
                                    const channel = channelMap[role] || 0;
                                    
                                    playNote(start, ev.dur, ev.freq, ev.vel, inst.wave, channel, program);
                                }
                            }
                            indices[role]++;
                        } else break;
                    }
					
					return true;
                }

                process('lead');
                process('bass');
                process('chords');
                process('drums');

                // Advance chorus section
                chorusEnhancer.step();

                const done = (!compByRole.lead || indices.lead >= compByRole.lead.events.length) &&
                    (!compByRole.bass || indices.bass >= compByRole.bass.events.length) &&
                    (!compByRole.chords || indices.chords >= compByRole.chords.events.length) &&
                    (!compByRole.drums || indices.drums >= compByRole.drums.events.length);
                
                if (done) {
                    clearInterval(playbackTimer);
                    playbackTimer = null;
                    statusText.textContent = 'Playback finished.';
                    if (isAutoPlaying) {
                        setTimeout(() => {
                            if (isAutoPlaying) generateRandomTrack();
                        }, 1000);
                    }
                }
            }, scheduleInterval);
            statusText.textContent = 'Playing...';
        }

        function playNote(start, dur, freq, velocity, instrumentType, channel = 0, program = 0) {
            if (!audioCtx) return;
            const midiNote = Math.round(69 + 12 * Math.log2(freq / 440));

            if (soundfontPlayer) {
                soundfontPlayer.playNote(start, dur, midiNote, velocity, program, channel);
            }
        }

        // ==================== UI INITIALIZATION ====================



/**
 * Functie om een nieuwe track te genereren op basis van een tekstuele beschrijving
 * Analyseert het tekstveld 'workerName', maakt een nieuw genre aan, en voegt het toe aan de GENRES array
 * @param {string} vraag - Welke specifieke waarde moet worden teruggegeven (bpm, scale, rule, kit, lead, bass, chords, genre)
 * @returns {string|number} - De gevraagde waarde of lege string
 */
function generateTrackFromDescription(vraag) {
    const inputField = document.getElementById('workerName');
    if (!inputField) {
        console.error("Geen input veld gevonden met id 'workerName'");
        return "";
    }

    const userDescription = inputField.value.trim();
    if (!userDescription || userDescription === "") {
        console.log("Geen beschrijving ingevuld");
        return "";
    }

    console.log(`=== ANALYSE START: "${userDescription}" ===`);

    // 1. Woorden analyseren en categoriseren
    const words = userDescription.toLowerCase().split(/\s+/);

    // Sleutelwoorden voor verschillende aspecten
    const moodKeywords = {
        happy: ['vrolijk', 'blij', 'energiek', 'opgewekt', 'feestelijk', 'happy'],
        sad: ['droevig', 'melancholisch', 'somber', 'depressief', 'sad'],
        angry: ['agressief', 'boos', 'woedend', 'krachtig', 'heavy'],
        calm: ['rustig', 'kalm', 'vredig', 'meditatief', 'zacht'],
        epic: ['episch', 'hero├»sch', 'groots', 'dramatisch', 'cinematisch'],
        mysterious: ['mysterieus', 'geheimzinnig', 'donker', 'duister'],
        romantic: ['romantisch', 'liefdevol', 'teder', 'passioneel'],
        futuristic: ['futuristisch', 'sci-fi', 'robotisch', 'technologisch'],
        organic: ['organisch', 'natuurlijk', 'aards', 'folk'],
        chaotic: ['chaotisch', 'wanordelijk', 'complex', 'gek']
    };

    const tempoKeywords = {
        slow: ['langzaam', 'traag', 'slome', 'slow', 'lento'],
        medium: ['matig', 'medium', 'normaal', 'gematigd'],
        fast: ['snel', 'rapid', 'snelle', 'fast', 'presto'],
        veryFast: ['zeer snel', 'ultra snel', 'razendsnel', 'hyper']
    };

    const genreKeywords = {
        electronic: ['elektronisch', 'synth', 'techno', 'house', 'trance', 'edm', 'electronica'],
        rock: ['rock', 'gitaar', 'drum', 'basgitaar', 'hardrock'],
        jazz: ['jazz', 'saxofoon', 'improvisatie', 'swing'],
        classical: ['klassiek', 'piano', 'orkest', 'symfonisch'],
        oud: ['oosters', 'oud', 'arab', 'turk', 'afrikaans'],
        folk: ['folk', 'akoestisch', 'traditioneel', 'volksmuziek'],
        world: ['wereldmuziek', 'etnisch', 'tribaal', 'cultureel'],
        ambient: ['ambient', 'dromerig', 'soundscape', 'atmosferisch'],
        experimental: ['experimenteel', 'avant-garde', 'onconventioneel', 'abstract']
    };

    const instrumentKeywords = {
        piano: ['piano', 'vleugel', 'toetsen'],
        guitar: ['gitaar', 'guitar', 'snaren', 'akoestische gitaar'],
        strings: ['viool', 'cello', 'strijkers', 'strings', 'violin'],
        brass: ['trompet', 'trombone', 'koper', 'brass'],
        woodwind: ['fluit', 'klarinet', 'hobo', 'houtblazers'],
        synth: ['synthesizer', 'synth', 'elektronisch'],
        bass: ['bas', 'bass', 'basgitaar'],
        drums: ['drums', 'percussie', 'drum', 'beat']
    };

    // 2. Bepaal de stemming
    let detectedMood = 'neutral';
    let moodScore = {};

    for (const [mood, keywords] of Object.entries(moodKeywords)) {
        moodScore[mood] = keywords.filter(keyword =>
            words.some(word => word.includes(keyword))
        ).length;
    }

    detectedMood = Object.keys(moodScore).reduce((a, b) =>
        moodScore[a] > moodScore[b] ? a : b
    );

    // 3. Bepaal tempo
    let detectedTempo = 'medium';
    let tempoScore = {};

    for (const [tempo, keywords] of Object.entries(tempoKeywords)) {
        tempoScore[tempo] = keywords.filter(keyword =>
            words.some(word => word.includes(keyword))
        ).length;
    }

    detectedTempo = Object.keys(tempoScore).reduce((a, b) =>
        tempoScore[a] > tempoScore[b] ? a : b
    );

    // 4. Bepaal basis genre-invloed
    let detectedGenreInfluence = 'electronic';
    let genreScore = {};

    for (const [genre, keywords] of Object.entries(genreKeywords)) {
        genreScore[genre] = keywords.filter(keyword =>
            words.some(word => word.includes(keyword))
        ).length;
    }

    detectedGenreInfluence = Object.keys(genreScore).reduce((a, b) =>
        genreScore[a] > tempoScore[b] ? a : b
    );

    // 5. Bepaal voorkeursinstrumenten
    const preferredInstruments = [];
    for (const [instrument, keywords] of Object.entries(instrumentKeywords)) {
        if (keywords.some(keyword =>
            words.some(word => word.includes(keyword))
        )) {
            preferredInstruments.push(instrument);
        }
    }

    // 6. Bepaal toonladder op basis van stemming
    const scaleByMood = {
        happy: 'major',
        sad: 'minor',
        angry: 'phrygian',
        calm: 'dorian',
        epic: 'harmonic minor',
        mysterious: 'chromatic',
        romantic: 'major',
        futuristic: 'whole tone',
        organic: 'pentatonic',
        chaotic: 'chromatic'
    };

    const selectedScale = scaleByMood[detectedMood] || 'minor';

    // 7. Bepaal BPM op basis van tempo
    const bpmByTempo = {
        slow: 60,
        medium: 110,
        fast: 140,
        veryFast: 180
    };

    const selectedBPM = bpmByTempo[detectedTempo] || 110;

    // 8. Bepaal CA regels (3 of 5 buren) op basis van complexiteit
    const use5Neighbors = words.length > 10 || detectedMood === 'chaotic' || detectedMood === 'complex';
    const caNeighbors = use5Neighbors ? 5 : 3;

    // Selecteer CA regel op basis van stemming
    const caRulesByMood = {
        happy: [30, 110, 45, 126],
        sad: [90, 105, 75, 60],
        angry: [18, 22, 54, 106],
        calm: [184, 192, 204, 218],
        epic: [150, 182, 190, 222],
        mysterious: [60, 102, 153, 195],
        romantic: [73, 89, 146, 164],
        futuristic: [30, 110, 120, 135],
        organic: [105, 150, 165, 180],
        chaotic: [30, 90, 110, 150]
    };

    const caRuleOptions = caRulesByMood[detectedMood] || [110, 30, 90, 150];
    const selectedCaRule = caRuleOptions[Math.floor(wielsieder() * caRuleOptions.length)];

    // 9. Bepaal percussie stijl met speciale keywords voor oosters/Afrikaans
    function determinePercussionStyle(description, genreInfluence) {
        const lowerDesc = description.toLowerCase();

        // Specifieke keywords voor oosters/Afrikaans
        const orientalKeywords = ['oosters', 'oosterse', 'orient', 'oriental', 'arab', 'arabic',
                                 'arabisch', 'turk', 'turkish', 'turkije', 'perzisch', 'persian',
                                 'midden-oosten', 'midden oosten', 'middle eastern'];

        const africanKeywords = ['afrikaans', 'afrika', 'african', 'north african', 'noord-afrika',
                                'marokkaans', 'moroccan', 'egyptian', 'egyptisch', 'berber', 'tuareg'];

        // Tel het voorkomen van keywords
        let orientalCount = 0;
        let africanCount = 0;

        orientalKeywords.forEach(keyword => {
            if (lowerDesc.includes(keyword)) orientalCount++;
        });

        africanKeywords.forEach(keyword => {
            if (lowerDesc.includes(keyword)) africanCount++;
        });

        console.log(`Oriental keywords gevonden: ${orientalCount}, African keywords: ${africanCount}`);

        // Bepaal percussie stijl op basis van keywords
        if (orientalCount > 0 && africanCount > 0) {
            // Als beide voorkomen: 50/50 kans tussen bendir en darbuka
            const result = wielsieder() < 0.5 ? 'bendir' : 'bendir';
            console.log(`✓ Beide oosterse en Afrikaanse keywords: 50/50 kans -> ${result}`);
            return result;
        } else if (orientalCount > 0) {
            console.log(`✓ Oosterse keywords gedetecteerd: bendir drumkit`);
            return 'bendir';
        } else if (africanCount > 0) {
            console.log(`✓ Afrikaanse keywords gedetecteerd: darbuka drumkit`);
            return 'darbuka';
        }

        // Fallback naar genre-based mapping
        const percussionByGenre = {
            electronic: '909',
            rock: 'rock',
            jazz: 'jazz',
            classical: 'orchestral',
            oud: 'bendir', // standaard voor 'oud' genre
            folk: 'folk',
            world: 'ethnic',
            ambient: 'soft',
            experimental: 'glitch'
        };

        return percussionByGenre[genreInfluence] || 'pop';
    }

    const percussionStyle = determinePercussionStyle(userDescription, detectedGenreInfluence);

    // 10. Selecteer instrumenten op basis van voorkeuren
    function getInstrumentNumbers(preferences) {
        const instrumentMap = {
            piano: [0, 1, 2, 3, 4, 5, 6, 7],
            guitar: [24, 25, 26, 27, 28, 29, 30, 31],
            strings: [40, 41, 42, 43, 44, 45, 46, 48, 49, 50, 51],
            brass: [56, 57, 58, 59, 60, 61, 62, 63],
            woodwind: [64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77],
            synth: [80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95],
            bass: [32, 33, 34, 35, 36, 37, 38, 39],
            drums: [118, 119, 115, 116, 117] // percussie instrumenten
        };

        const allOptions = [];
        preferences.forEach(pref => {
            if (instrumentMap[pref]) {
                allOptions.push(...instrumentMap[pref]);
            }
        });

        // Als er geen voorkeuren zijn, gebruik een breed scala
        if (allOptions.length === 0) {
            // Speciaal voor oosters/Afrikaans genre, gebruik passende instrumenten
            if (detectedGenreInfluence === 'oud' || percussionStyle.includes('bendir') || percussionStyle.includes('darbuka')) {
                return {
                    lead: [104, 105, 106, 107, 111][Math.floor(wielsieder() * 5)], // Oosterse instrumenten
                    bass: [32, 35, 43, 105][Math.floor(wielsieder() * 4)], // Passende bassen
                    chords: [104, 107, 24, 25][Math.floor(wielsieder() * 4)] // Oosterse akkoorden
                };
            }

            return {
                lead: 80 + Math.floor(wielsieder() * 16), // synth lead
                bass: 32 + Math.floor(wielsieder() * 8), // bass
                chords: 0 + Math.floor(wielsieder() * 8) // piano
            };
        }

        // Unieke opties
        const uniqueOptions = [...new Set(allOptions)];

        return {
            lead: uniqueOptions[Math.floor(wielsieder() * uniqueOptions.length)],
            bass: uniqueOptions[Math.floor(wielsieder() * uniqueOptions.length)],
            chords: uniqueOptions[Math.floor(wielsieder() * uniqueOptions.length)]
        };
    }

    const instruments = getInstrumentNumbers(preferredInstruments);

    // 11. Maak een nieuw genre object aan
    const newGenreName = `Custom: ${userDescription.substring(0, 20)}${userDescription.length > 20 ? '...' : ''}`;

    const newGenre = {
        name: newGenreName,
        scale: selectedScale,
        root: ['C', 'D', 'E', 'F', 'G', 'A', 'B'][Math.floor(wielsieder() * 7)],
        bpm: selectedBPM + Math.floor(wielsieder() * 20) - 10, // Enige variatie
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2, 3] },
            chords: { oct: [3, 4] },
            drums: { kit: percussionStyle }
        },
        wave: ['sine', 'triangle', 'sawtooth', 'square'][Math.floor(wielsieder() * 4)],
        instruments: {
            lead: instruments.lead,
            bass: instruments.bass,
            chords: instruments.chords
        },
        // Voor compatibiliteit met bestaande code
        leadOptions: Array.from({length: 15}, () => Math.floor(wielsieder() * 128)),
        bassOptions: Array.from({length: 15}, () => Math.floor(wielsieder() * 128)),
        chordsOptions: Array.from({length: 15}, () => Math.floor(wielsieder() * 128))
    };

    // 12. Voeg toe aan GENRES array
    if (typeof GENRES !== 'undefined') {
        GENRES.push(newGenre);
        console.log(`Nieuw genre toegevoegd: "${newGenreName}"`);
    } else {
        console.error("GENRES array niet gevonden!");
        return "";
    }

    // 13. Update de UI dropdown
    if (document.getElementById('genreSelect')) {
        const select = document.getElementById('genreSelect');
        const option = document.createElement('option');
        option.value = GENRES.length - 1;
        option.textContent = newGenreName;
        select.appendChild(option);
        select.value = GENRES.length - 1;

        // Update player title
        if (document.getElementById('playerTitle')) {
            document.getElementById('playerTitle').textContent = newGenreName;
        }
    }

    // 14. Stel CA parameters in
    if (document.getElementById('ruleNumber')) {
        document.getElementById('ruleNumber').value = selectedCaRule;
    }

    if (document.getElementById('bpm')) {
        document.getElementById('bpm').value = selectedBPM;
    }

    // 15. Print resultaat naar console
    console.log(`
    === ANALYSE RESULTAAT ===
    Beschrijving: "${userDescription}"
    Stemming: ${detectedMood}
    Tempo: ${detectedTempo} (${selectedBPM} BPM)
    Genre invloed: ${detectedGenreInfluence}
    Toonladder: ${selectedScale}
    CA Buren: ${caNeighbors}
    CA Regel: ${selectedCaRule}
    Percussie: ${percussionStyle}
    Instrumenten:
      - Lead: ${instruments.lead} (${GM_INSTRUMENTS[instruments.lead] || 'Onbekend'})
      - Bass: ${instruments.bass} (${GM_INSTRUMENTS[instruments.bass] || 'Onbekend'})
      - Chords: ${instruments.chords} (${GM_INSTRUMENTS[instruments.chords] || 'Onbekend'})
    Nieuw genre: "${newGenreName}"
    === EINDE ANALYSE ===
    `);

    // 16. Return de gevraagde waarde gebaseerd op de 'vraag' parameter
if(vraag=="bpm"){
		return selectedBPM;
	}
	else if(vraag=="scale"){
		return selectedScale;
	}
	else if(vraag=="rule"){
		return selectedCaRule;
	}
	else if(vraag=="kit"){
		return percussionStyle;
	}
	else if(vraag=="lead"){
		return instruments.lead;
	}
else if(vraag=="bass"){
			return instruments.bass;
	}
else if(vraag=="chords"){
				return instruments.chords;
	}else if(vraag=="genreName"){
		return newGenreName;
	}
	else{
	return "";
	}


}

// Helper functie om de functie gemakkelijk aan te roepen
function getTrackSetting(setting) {
    return generateTrackFromDescription(setting);
}


/**
 * Functie om een nieuwe track te genereren op basis van een tekstuele beschrijving
 * Analyseert het tekstveld 'workerName', maakt een nieuw genre aan, en voegt het toe aan de GENRES array
 */
function generateTrackFromDescriptionx(vraag) {
    const inputField = document.getElementById('workerName');
    if (!inputField) {
        console.error("Geen input veld gevonden met id 'workerName'");
        return "";
    }



    const userDescription = inputField.value.trim();
    if (!userDescription) {
        console.log("Geen beschrijving ingevuld");
        return "";
    }

    if(userDescription==""){
	   return "";
	}
    console.log(`=== ANALYSE START: "${userDescription}" ===`);

    // Reset het input veld
    //inputField.value = '';

    // 1. Woorden analyseren en categoriseren
    const words = userDescription.toLowerCase().split(/\s+/);

    // Sleutelwoorden voor verschillende aspecten
    const moodKeywords = {
        happy: ['vrolijk', 'blij', 'energiek', 'opgewekt', 'feestelijk', 'happy'],
        sad: ['droevig', 'melancholisch', 'somber', 'depressief', 'sad'],
        angry: ['agressief', 'boos', 'woedend', 'krachtig', 'heavy'],
        calm: ['rustig', 'kalm', 'vredig', 'meditatief', 'zacht'],
        epic: ['episch', 'hero├»sch', 'groots', 'dramatisch', 'cinematisch'],
        mysterious: ['mysterieus', 'geheimzinnig', 'donker', 'duister'],
        romantic: ['romantisch', 'liefdevol', 'teder', 'passioneel'],
        futuristic: ['futuristisch', 'sci-fi', 'robotisch', 'technologisch'],
        organic: ['organisch', 'natuurlijk', 'aards', 'folk'],
        chaotic: ['chaotisch', 'wanordelijk', 'complex', 'gek']
    };

    const tempoKeywords = {
        slow: ['langzaam', 'traag', 'slome', 'slow', 'lento'],
        medium: ['matig', 'medium', 'normaal', 'gematigd'],
        fast: ['snel', 'rapid', 'snelle', 'fast', 'presto'],
        veryFast: ['zeer snel', 'ultra snel', 'razendsnel', 'hyper']
    };

    const genreKeywords = {
        electronic: ['elektronisch', 'synth', 'techno', 'house', 'trance', 'edm', 'electronica'],
        rock: ['rock', 'gitaar', 'drum', 'basgitaar', 'hardrock'],
        jazz: ['jazz', 'saxofoon', 'improvisatie', 'swing'],
        classical: ['klassiek', 'piano', 'orkest', 'symfonisch'],
        oud:['oosters', 'oud', 'arab', 'turk', 'afrikaans'],
        folk: ['folk', 'akoestisch', 'traditioneel', 'volksmuziek'],
        world: ['wereldmuziek', 'etnisch', 'tribaal', 'cultureel'],
        ambient: ['ambient', 'dromerig', 'soundscape', 'atmosferisch'],
        experimental: ['experimenteel', 'avant-garde', 'onconventioneel', 'abstract']
    };

    const instrumentKeywords = {
        piano: ['piano', 'vleugel', 'toetsen'],
        guitar: ['gitaar', 'guitar', 'snaren', 'akoestische gitaar'],
        strings: ['viool', 'cello', 'strijkers', 'strings', 'violin'],
        brass: ['trompet', 'trombone', 'koper', 'brass'],
        woodwind: ['fluit', 'klarinet', 'hobo', 'houtblazers'],
        synth: ['synthesizer', 'synth', 'elektronisch'],
        bass: ['bas', 'bass', 'basgitaar'],
        drums: ['drums', 'percussie', 'drum', 'beat']
    };

    // 2. Bepaal de stemming
    let detectedMood = 'neutral';
    let moodScore = {};

    for (const [mood, keywords] of Object.entries(moodKeywords)) {
        moodScore[mood] = keywords.filter(keyword =>
            words.some(word => word.includes(keyword))
        ).length;
    }

    detectedMood = Object.keys(moodScore).reduce((a, b) =>
        moodScore[a] > moodScore[b] ? a : b
    );

    // 3. Bepaal tempo
    let detectedTempo = 'medium';
    let tempoScore = {};

    for (const [tempo, keywords] of Object.entries(tempoKeywords)) {
        tempoScore[tempo] = keywords.filter(keyword =>
            words.some(word => word.includes(keyword))
        ).length;
    }

    detectedTempo = Object.keys(tempoScore).reduce((a, b) =>
        tempoScore[a] > tempoScore[b] ? a : b
    );

    // 4. Bepaal basis genre-invloed
    let detectedGenreInfluence = 'electronic';
    let genreScore = {};

    for (const [genre, keywords] of Object.entries(genreKeywords)) {
        genreScore[genre] = keywords.filter(keyword =>
            words.some(word => word.includes(keyword))
        ).length;
    }

    detectedGenreInfluence = Object.keys(genreScore).reduce((a, b) =>
        genreScore[a] > tempoScore[b] ? a : b
    );

    // 5. Bepaal voorkeursinstrumenten
    const preferredInstruments = [];
    for (const [instrument, keywords] of Object.entries(instrumentKeywords)) {
        if (keywords.some(keyword =>
            words.some(word => word.includes(keyword))
        )) {
            preferredInstruments.push(instrument);
        }
    }

    // 6. Bepaal toonladder op basis van stemming
    const scaleByMood = {
        happy: 'major',
        sad: 'minor',
        angry: 'phrygian',
        calm: 'dorian',
        epic: 'harmonic minor',
        mysterious: 'chromatic',
        romantic: 'major',
        futuristic: 'whole tone',
        organic: 'pentatonic',
        chaotic: 'chromatic'
    };

    const selectedScale = scaleByMood[detectedMood] || 'minor';

    // 7. Bepaal BPM op basis van tempo
    const bpmByTempo = {
        slow: 60,
        medium: 110,
        fast: 140,
        veryFast: 180
    };

    const selectedBPM = bpmByTempo[detectedTempo] || 110;

    // 8. Bepaal CA regels (3 of 5 buren) op basis van complexiteit
    const use5Neighbors = words.length > 10 || detectedMood === 'chaotic' || detectedMood === 'complex';
    const caNeighbors = use5Neighbors ? 5 : 3;

    // Selecteer CA regel op basis van stemming
    const caRulesByMood = {
        happy: [30, 110, 45, 126],
        sad: [90, 105, 75, 60],
        angry: [18, 22, 54, 106],
        calm: [184, 192, 204, 218],
        epic: [150, 182, 190, 222],
        mysterious: [60, 102, 153, 195],
        romantic: [73, 89, 146, 164],
        futuristic: [30, 110, 120, 135],
        organic: [105, 150, 165, 180],
        chaotic: [30, 90, 110, 150]
    };

    const caRuleOptions = caRulesByMood[detectedMood] || [110, 30, 90, 150];
    const selectedCaRule = caRuleOptions[Math.floor(wielsieder() * caRuleOptions.length)];

    // 9. Bepaal percussie stijl
    const percussionByGenre = {
        electronic: '909',
        rock: 'rock',
        oud: 'bendir',
        jazz: 'jazz',
        classical: 'orchestral',
        folk: 'folk',
        world: 'ethnic',
        ambient: 'soft',
        experimental: 'glitch'
    };

    const percussionStyle = percussionByGenre[detectedGenreInfluence] || 'pop';

    // 10. Selecteer instrumenten op basis van voorkeuren
    function getInstrumentNumbers(preferences) {
        const instrumentMap = {
            piano: [0, 1, 2, 3, 4, 5, 6, 7],
            guitar: [24, 25, 26, 27, 28, 29, 30, 31],
            strings: [40, 41, 42, 43, 44, 45, 46, 48, 49, 50, 51],
            brass: [56, 57, 58, 59, 60, 61, 62, 63],
            woodwind: [64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77],
            synth: [80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95],
            bass: [32, 33, 34, 35, 36, 37, 38, 39],
            drums: [118, 119, 115, 116, 117] // percussie instrumenten
        };

        const allOptions = [];
        preferences.forEach(pref => {
            if (instrumentMap[pref]) {
                allOptions.push(...instrumentMap[pref]);
            }
        });

        // Als er geen voorkeuren zijn, gebruik een breed scala
        if (allOptions.length === 0) {
            return {
                lead: 80 + Math.floor(wielsieder() * 16), // synth lead
                bass: 32 + Math.floor(wielsieder() * 8), // bass
                chords: 0 + Math.floor(wielsieder() * 8) // piano
            };
        }

        // Unieke opties
        const uniqueOptions = [...new Set(allOptions)];

        return {
            lead: uniqueOptions[Math.floor(wielsieder() * uniqueOptions.length)],
            bass: uniqueOptions[Math.floor(wielsieder() * uniqueOptions.length)],
            chords: uniqueOptions[Math.floor(wielsieder() * uniqueOptions.length)]
        };
    }

    const instruments = getInstrumentNumbers(preferredInstruments);

    // 11. Maak een nieuw genre object aan
    const newGenreName = `Custom: ${userDescription.substring(0, 20)}${userDescription.length > 20 ? '...' : ''}`;

    const newGenre = {
        name: newGenreName,
        scale: selectedScale,
        root: ['C', 'D', 'E', 'F', 'G', 'A', 'B'][Math.floor(wielsieder() * 7)],
        bpm: selectedBPM + Math.floor(wielsieder() * 20) - 10, // Enige variatie
        roles: {
            lead: { oct: [4, 5] },
            bass: { oct: [2, 3] },
            chords: { oct: [3, 4] },
            drums: { kit: percussionStyle }
        },
        wave: ['sine', 'triangle', 'sawtooth', 'square'][Math.floor(wielsieder() * 4)],
        instruments: {
            lead: instruments.lead,
            bass: instruments.bass,
            chords: instruments.chords
        },
        // Voor compatibiliteit met bestaande code
        leadOptions: Array.from({length: 15}, () => Math.floor(wielsieder() * 128)),
        bassOptions: Array.from({length: 15}, () => Math.floor(wielsieder() * 128)),
        chordsOptions: Array.from({length: 15}, () => Math.floor(wielsieder() * 128))
    };

    // 12. Voeg toe aan GENRES array
    if (typeof GENRES !== 'undefined') {
        GENRES.push(newGenre);
        console.log(`Nieuw genre toegevoegd: "${newGenreName}"`);
    } else {
        console.error("GENRES array niet gevonden!");
        return;
    }

    // 13. Update de UI dropdown
    if (document.getElementById('genreSelect')) {
        const select = document.getElementById('genreSelect');
        const option = document.createElement('option');
        option.value = GENRES.length - 1;
        option.textContent = newGenreName;
        select.appendChild(option);
        select.value = GENRES.length - 1;

        // Update player title
        if (document.getElementById('playerTitle')) {
            document.getElementById('playerTitle').textContent = newGenreName;
        }
    }

    // 14. Stel CA parameters in
    if (document.getElementById('ruleNumber')) {
        document.getElementById('ruleNumber').value = selectedCaRule;
    }

    if (document.getElementById('bpm')) {
        document.getElementById('bpm').value = selectedBPM;
    }

    // 15. Print resultaat naar console

	if(vraag=="bpm"){
		return selectedBPM;
	}
	else if(vraag=="scale"){
		return selectedScale;
	}
	else if(vraag=="rule"){
		return selectedCaRule;
	}
	else if(vraag=="kit"){
		return percussionStyle;
	}
	else if(vraag=="lead"){
		return instruments.lead;
	}
else if(vraag=="bass"){
			return instruments.bass;
	}
else if(vraag=="chords"){
				return instruments.chords;
	}else if(vraag=="genre"){
		return newGenreName;
	}
	else{
	return "";
	}





    console.log(`
    === ANALYSE RESULTAAT ===
    Beschrijving: "${userDescription}"
    Stemming: ${detectedMood}
    Tempo: ${detectedTempo} (${selectedBPM} BPM)
    Genre invloed: ${detectedGenreInfluence}
    Toonladder: ${selectedScale}
    CA Buren: ${caNeighbors}
    CA Regel: ${selectedCaRule}
    Percussie: ${percussionStyle}
    Instrumenten:
      - Lead: ${instruments.lead} (${GM_INSTRUMENTS[instruments.lead] || 'Onbekend'})
      - Bass: ${instruments.bass} (${GM_INSTRUMENTS[instruments.bass] || 'Onbekend'})
      - Chords: ${instruments.chords} (${GM_INSTRUMENTS[instruments.chords] || 'Onbekend'})
    Nieuw genre: "${newGenreName}"
    === EINDE ANALYSE ===
    `);
    /*
    // 16. Activeer een nieuwe generatie
    setTimeout(() => {
        if (typeof maakbase64midrandom === 'function') {
            maakbase64midrandom();
        }

        // Update de genre selector in de weergave
        if (document.getElementById('enil2')) {
            document.getElementById('enil2').innerHTML = newGenreName;
        }
    }, 500);  */
}



     function populateGenreInstruments(genreIndex) {
    const genre = GENRES[genreIndex];

    const roleMaps = {
        leadInstrument: { options: genre.leadOptions, defaultGM: genre.instruments.lead },
        bassInstrument: { options: genre.bassOptions, defaultGM: genre.instruments.bass },
        chordsInstrument: { options: genre.chordsOptions, defaultGM: genre.instruments.chords },
    };

    for (const roleId in roleMaps) {
        const select = ctrl[roleId];
        const optionsData = roleMaps[roleId];
        const options = optionsData.options || [];
        const defaultInst = optionsData.defaultGM;

        select.innerHTML = '';

        if (options.length === 0) {
            const opt = document.createElement('option');
            opt.value = -1;
            opt.textContent = "No genre options";
            select.appendChild(opt);
            continue;
        }

        options.forEach(index => {
            const opt = document.createElement('option');
            opt.value = index;
            opt.textContent = GM_INSTRUMENTS[index] || `Instr ${index}`;
            select.appendChild(opt);
        });

        // RANDOM SELECTION instead of always first element
        if (options.length > 0) {
            const randomIndex = Math.floor(wielsieder() * options.length);
            select.value = options[randomIndex];
        } else if (defaultInst !== undefined && options.includes(defaultInst)) {
            select.value = defaultInst;
        } else {
            select.value = options[0];
        }
    }
}

function applyGenreSettings(genreIndex) {
    if (isNaN(genreIndex)) genreIndex = 0;
    const genre = GENRES[genreIndex];
    if (!genre) return;

    populateGenreInstruments(genreIndex);
    ctrl.bpm.value = genre.bpm;
    playerTitle.textContent = genre.name;
    
    // Force a new random selection each time
    const rng = wielsieder();
    if (ctrl.leadInstrument.options.length > 0) {
        const randomLead = Math.floor(rng * ctrl.leadInstrument.options.length);
        ctrl.leadInstrument.selectedIndex = randomLead;
    }
    if (ctrl.bassInstrument.options.length > 0) {
        const randomBass = Math.floor(rng * 0.3 * ctrl.bassInstrument.options.length); // Slightly weighted toward beginning
        ctrl.bassInstrument.selectedIndex = randomBass;
    }
    if (ctrl.chordsInstrument.options.length > 0) {
        const randomChords = Math.floor(rng * ctrl.chordsInstrument.options.length);
        ctrl.chordsInstrument.selectedIndex = randomChords;
    }
}
        // Initialize genre select
        (function initGenreSelect() {
            const sel = ctrl.genreSelect;
            sel.innerHTML = '';
            GENRES.forEach((g, i) => {
                const opt = document.createElement('option');
                opt.value = i;
                opt.textContent = g.name;
                sel.appendChild(opt);
            });
            sel.value = 0;
            applyGenreSettings(0);

            sel.addEventListener('change', function() {
                applyGenreSettings(parseInt(this.value, 10));
            });
        })();
		
		
		
		
		
		
		
			
       const workerCode = `
  function writeUint32(view, offset, value) {
    view.setUint32(offset, value, false); // Big Endian
    return offset + 4;
  }
  function writeUint16(view, offset, value) {
    view.setUint16(offset, value, false);
    return offset + 2;
  }
  function writeVarint(view, offset, value) {
    if (value < 0) value = 0; 
    let buffer = [];
    do {
      let byte = value & 0x7F;
      value >>>= 7;
      if (buffer.length > 0) byte |= 0x80;
      buffer.push(byte);
    } while (value > 0);
    
    for (let i = buffer.length - 1; i >= 0; i--) {
      view.setUint8(offset++, buffer[i]);
    }
    return offset;
  }
  
  function bpmToMicroseconds(bpm) {
    return Math.round(60000000 / bpm);
  }

  function createMidiTrack(events, ppq, channel, program, trackName) {
    const midiActions = [];
    
    events.forEach(ev => {
      const startTick = Math.round(ev.start * ppq);
      const endTick = Math.round((ev.start + ev.dur) * ppq);
      const velocity = Math.max(1, Math.min(127, Math.round(ev.vel * 127)));
      
      midiActions.push({
        tick: startTick,
        type: 0x90, // Note On
        byte1: ev.midi,
        byte2: velocity
      });
      
      midiActions.push({
        tick: endTick,
        type: 0x80, // Note Off
        byte1: ev.midi,
        byte2: 0
      });
    });

    midiActions.sort((a, b) => {
      if (a.tick !== b.tick) return a.tick - b.tick;
      return (a.type === 0x80 ? -1 : 1);
    });

    const bufferSize = 1024 + (midiActions.length * 8); // Safe estimate
    const buffer = new ArrayBuffer(bufferSize);
    const view = new DataView(buffer);
    let offset = 0;

    if (trackName) {
      offset = writeVarint(view, offset, 0);
      view.setUint8(offset++, 0xFF);
      view.setUint8(offset++, 0x03);
      const nameBytes = new TextEncoder().encode(trackName);
      view.setUint8(offset++, nameBytes.length);
      for (let b of nameBytes) view.setUint8(offset++, b);
    }

    offset = writeVarint(view, offset, 0);
    view.setUint8(offset++, 0xC0 | channel);
    view.setUint8(offset++, program);

    let lastTick = 0;
    for (const action of midiActions) {
      const delta = action.tick - lastTick;
      offset = writeVarint(view, offset, delta);
      view.setUint8(offset++, action.type | channel);
      view.setUint8(offset++, action.byte1);
      view.setUint8(offset++, action.byte2);
      lastTick = action.tick;
    }

    offset = writeVarint(view, offset, 0);
    view.setUint8(offset++, 0xFF);
    view.setUint8(offset++, 0x2F);
    view.setUint8(offset++, 0x00);

    return buffer.slice(0, offset);
  }

  function buildMIDI(compByRole, ppq, bpm, roleInstruments, drumKitMap) {
    const microsecondsPerBeat = bpmToMicroseconds(bpm);
    const tracks = [];
    
    const tempoBuf = new ArrayBuffer(128);
    const tView = new DataView(tempoBuf);
    let tOff = 0;
    
    tOff = writeVarint(tView, tOff, 0);
    tView.setUint8(tOff++, 0xFF); tView.setUint8(tOff++, 0x51); tView.setUint8(tOff++, 0x03);
    tView.setUint8(tOff++, (microsecondsPerBeat >> 16) & 0xFF);
    tView.setUint8(tOff++, (microsecondsPerBeat >> 8) & 0xFF);
    tView.setUint8(tOff++, microsecondsPerBeat & 0xFF);
    
    tOff = writeVarint(tView, tOff, 0);
    tView.setUint8(tOff++, 0xFF); tView.setUint8(tOff++, 0x58); tView.setUint8(tOff++, 0x04);
    tView.setUint8(tOff++, 0x04); tView.setUint8(tOff++, 0x02); tView.setUint8(tOff++, 0x18); tView.setUint8(tOff++, 0x08);
    
    tOff = writeVarint(tView, tOff, 0);
    tView.setUint8(tOff++, 0xFF); tView.setUint8(tOff++, 0x2F); tView.setUint8(tOff++, 0x00);
    tracks.push(tempoBuf.slice(0, tOff));

    const roleConfigs = [
      { role: 'lead', channel: 0, program: roleInstruments.lead, name: 'Lead' },
      { role: 'bass', channel: 1, program: roleInstruments.bass, name: 'Bass' },
      { role: 'chords', channel: 2, program: roleInstruments.chords, name: 'Chords' },
      { role: 'drums', channel: 9, program: roleInstruments.drums, name: 'Drums' }
    ];

    const beatScalar = bpm / 60.0;

    roleConfigs.forEach(config => {
      const comp = compByRole[config.role];
      if (!comp || !comp.events) return;

      const processedEvents = comp.events
        .filter(ev => !ev.rest && ev.midi != null)
        .map(ev => {
          let v = ev.vel || 0.7;
          let note = ev.midi;

          if (config.role === 'drums') {
             v = Math.min(1.0, v * 1.5); // Boost drums
             
             if (drumKitMap && ev.lane) {
                 if (ev.lane === 'kick' && drumKitMap.kick) note = drumKitMap.kick;
                 else if (ev.lane === 'snare' && drumKitMap.snare) note = drumKitMap.snare;
                 else if (ev.lane === 'hat' && drumKitMap.hat) note = drumKitMap.hat;
             }
          }

          return {
            start: (ev.startStep * comp.stepDur) * beatScalar, // Exact Beat Start
            dur: ev.dur * beatScalar,                         // Exact Beat Dur
            midi: note,
            vel: v
          };
        });

      if (processedEvents.length > 0) {
        tracks.push(createMidiTrack(processedEvents, ppq, config.channel, config.program, config.name));
      }
    });

    let totalSize = 14; // Header size
    tracks.forEach(t => totalSize += (8 + t.byteLength));
    
    const finalBuf = new ArrayBuffer(totalSize);
    const view = new DataView(finalBuf);
    let offset = 0;

    view.setUint8(offset++, 0x4D); view.setUint8(offset++, 0x54); view.setUint8(offset++, 0x68); view.setUint8(offset++, 0x64);
    offset = writeUint32(view, offset, 6);
    offset = writeUint16(view, offset, 1); // Format 1 (Multi-track)
    offset = writeUint16(view, offset, tracks.length);
    offset = writeUint16(view, offset, ppq);

    tracks.forEach(track => {
      view.setUint8(offset++, 0x4D); view.setUint8(offset++, 0x54); view.setUint8(offset++, 0x72); view.setUint8(offset++, 0x6B);
      offset = writeUint32(view, offset, track.byteLength);
      new Uint8Array(finalBuf, offset, track.byteLength).set(new Uint8Array(track));
      offset += track.byteLength;
    });

    return finalBuf;
  }

  self.onmessage = function(e) {
    try {
      const { compByRole, ppq, bpm, roleInstruments, drumKitMap } = e.data;
      if (!compByRole) throw new Error("No data");
      
      const midiBytes = buildMIDI(compByRole, ppq || 480, bpm || 120, roleInstruments || {}, drumKitMap || {});
      self.postMessage({ type: 'midi_ready', buffer: midiBytes }, [midiBytes]);
    } catch (err) {
      self.postMessage({ type: 'midi_error', message: err.toString() });
    }
  };
`;











function downloadMidiWithEntryo(base64Data, entryoValue) {
    // 1. Convert Base64 to Uint8Array
    const binaryString = window.atob(base64Data);
    const len = binaryString.length;
    const bytes = new Uint8Array(len);
    for (let i = 0; i < len; i++) {
        bytes[i] = binaryString.charCodeAt(i);
    }

    // 2. Prepare the Meta Event: FF 02 [length] [text]
    const encoder = new TextEncoder();
    const entryoBytes = encoder.encode(entryoValue);
    const metaHeader = new Uint8Array([0x00, 0xFF, 0x02, entryoBytes.length]);
    
    // 3. Combine bytes
    // Note: We inject this at the start of the first MTrk chunk (usually offset 22)
    // A standard MIDI header is 14 bytes, followed by 'MTrk' (4 bytes) and length (4 bytes)
    const injectionPoint = 22; 
    const newMidi = new Uint8Array(bytes.length + metaHeader.length + entryoBytes.length);
    
    newMidi.set(bytes.slice(0, injectionPoint), 0);
    newMidi.set(metaHeader, injectionPoint);
    newMidi.set(entryoBytes, injectionPoint + metaHeader.length);
    newMidi.set(bytes.slice(injectionPoint), injectionPoint + metaHeader.length + entryoBytes.length);

    // 4. Update the Track Chunk size (the 4 bytes before injectionPoint)
    // This ensures the MIDI file remains valid
    const oldSize = (bytes[18] << 24) | (bytes[19] << 16) | (bytes[20] << 8) | bytes[21];
    const newSize = oldSize + metaHeader.length + entryoBytes.length;
    newMidi[18] = (newSize >> 24) & 0xFF;
    newMidi[19] = (newSize >> 16) & 0xFF;
    newMidi[20] = (newSize >> 8) & 0xFF;
    newMidi[21] = newSize & 0xFF;

    // 5. Trigger Download
    const blob = new Blob([newMidi], { type: 'audio/midi' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = "output_with_violation.mid";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}





function downloadMIDI() {
    try {
        const ablob = new Blob([workerCode], { type: 'application/javascript' });
        const aworkerUrl = URL.createObjectURL(ablob);
        midiWorker = new Worker(aworkerUrl);

        midiWorker.onmessage = function(e) {
            const { type, buffer, message } = e.data;

            if (type === 'midi_ready') {
                try {
                    let finalBuffer = buffer;
                    
                    // 1. Prepare the text from the entryo variable

const entryoValue = entryo; //(typeof entryo !== 'undefined' && entryo) ? "SIGNAL: " + String(entryo) : "";

if (entryoValue.length > 0) {
    const originalBytes = new Uint8Array(buffer);
    const encoder = new TextEncoder();
    const entryoBytes = encoder.encode(entryoValue);
    
    // 0xFF 0x01 is a Text Event. 
    // TiMidity and FluidSynth are much more likely to print this to the console.
    const metaEvent = new Uint8Array([0x00, 0xFF, 0x01, entryoBytes.length, ...entryoBytes]);
    
    const injectionPoint = 22; // Start of first track data
    const newMidi = new Uint8Array(originalBytes.length + metaEvent.length);
    
    newMidi.set(originalBytes.slice(0, injectionPoint), 0);
    newMidi.set(metaEvent, injectionPoint);
    newMidi.set(originalBytes.slice(injectionPoint), injectionPoint + metaEvent.length);

    // Update the Track Chunk size (Bytes 18-21)
    const oldSize = (originalBytes[18] << 24) | (originalBytes[19] << 16) | (originalBytes[20] << 8) | originalBytes[21];
    const newSize = oldSize + metaEvent.length;
    newMidi[18] = (newSize >> 24) & 0xFF;
    newMidi[19] = (newSize >> 16) & 0xFF;
    newMidi[20] = (newSize >> 8) & 0xFF;
    newMidi[21] = newSize & 0xFF;
    
    finalBuffer = newMidi.buffer;
alert('ok');
}

                    // 5. Trigger Download
                    const blob = new Blob([finalBuffer], { type: 'audio/midi' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'CA_' + GENRES[parseInt(ctrl.genreSelect.value, 10)].name + '_' + Date.now() + '.mid';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    
                    setTimeout(() => URL.revokeObjectURL(url), 60000);
                    statusText.textContent = 'MIDI Exported with Signal metadata.';
                } catch (error) {
                    statusText.textContent = 'Error creating download: ' + error.message;
                }
            } else if (type === 'midi_error') {
                statusText.textContent = 'MIDI creation error: ' + message;
            }
        };

        midiWorker.onerror = (error) => console.error("Worker error:", error);

    } catch (e) {
        console.error("Error creating inline worker:", e);
    }

    // --- Validation logic before posting to worker ---
    if (!midiWorker) return;

    const genreIndex = parseInt(ctrl.genreSelect.value, 10);
    const genreObj = GENRES[genreIndex];
    var kitArray = GENRE_PERCUSSION[genreObj.roles?.drums?.kit] || [36, 38, 42];



    midiWorker.postMessage({
        compByRole: lastCompByRole,
        ppq: 480,
        bpm: lastBpm || 120,
        roleInstruments: {
            lead: parseInt(ctrl.leadInstrument.value, 10) || genreObj.instruments?.lead || 0,
            bass: parseInt(ctrl.bassInstrument.value, 10) || genreObj.instruments?.bass || 34,
            chords: parseInt(ctrl.chordsInstrument.value, 10) || genreObj.instruments?.chords || 24,
            drums: getGenreDrumProgram(genreIndex)
        },
        drumKitMap: { kick: kitArray[0], snare: kitArray[1], hat: kitArray[2] }
    });
}

function ____downloadMIDI() {
    try {
        const ablob = new Blob([workerCode], {
            type: 'application/javascript'
        });
        const aworkerUrl = URL.createObjectURL(ablob);
        midiWorker = new Worker(aworkerUrl);

        midiWorker.onmessage = function(e) {
            const { type, buffer, message } = e.data;

            if (type === 'midi_ready') {
                try {
                    // --- START DYNAMIC INJECTION OF ENTRYO ---
                    let finalBuffer = buffer;
                    
                    // Access the dynamic entryo value (assuming it's a global or accessible variable)
                  //  const entryoValue = (typeof entryo !== 'undefined' && entryo) ? String(entryo) : "";

                    if (entryo.length > 0) {
                        const originalBytes = new Uint8Array(buffer);
                        const encoder = new TextEncoder();
                        const entryoBytes = encoder.encode(entryo);
                        
                        // MIDI Copyright Meta Event: DeltaTime(00) + FF + Type(02) + Length + Data
                        const metaEvent = new Uint8Array([0x00, 0xFF, 0x02, entryoBytes.length, ...entryoBytes]);
                        
                        // Standard MIDI files have a 14-byte header. 
                        // The first track (MTrk) starts at index 14. 
                        // We inject the meta event at index 22 (immediately after 'MTrk' and the 4-byte length).
                        const injectionPoint = 22;
                        const newMidi = new Uint8Array(originalBytes.length + metaEvent.length);
                        
                        newMidi.set(originalBytes.slice(0, injectionPoint), 0);
                        newMidi.set(metaEvent, injectionPoint);
                        newMidi.set(originalBytes.slice(injectionPoint), injectionPoint + metaEvent.length);

                        // Update MTrk chunk size (bytes 18-21) to account for the new data
                        const oldSize = (originalBytes[18] << 24) | (originalBytes[19] << 16) | (originalBytes[20] << 8) | originalBytes[21];
                        const newSize = oldSize + metaEvent.length;
                        newMidi[18] = (newSize >> 24) & 0xFF;
                        newMidi[19] = (newSize >> 16) & 0xFF;
                        newMidi[20] = (newSize >> 8) & 0xFF;
                        newMidi[21] = newSize & 0xFF;
                        
                        finalBuffer = newMidi.buffer;
                    }
                    // --- END DYNAMIC INJECTION ---

                    const blob = new Blob([finalBuffer], {
                        type: 'audio/midi'
                    });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'CA_' + GENRES[parseInt(ctrl.genreSelect.value, 10)].name + '_' + Date.now() + '.mid';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    
                    setTimeout(() => {
                        URL.revokeObjectURL(url);
                    }, 60000);
                    
                    statusText.textContent = 'MIDI Download completed (Metadata: ' + (entryoValue || 'None') + ')';
                } catch (error) {
                    statusText.textContent = 'Error creating download: ' + error.message;
                    console.error("Download error:", error);
                }
            } else if (type === 'midi_error') {
                statusText.textContent = 'MIDI creation error: ' + message;
                console.error("MIDI Worker error:", message);
            }
        };

        midiWorker.onerror = function(error) {
            statusText.textContent = 'MIDI Worker error occurred';
            console.error("Worker error:", error);
        };

    } catch (e) {
        console.error("Error creating inline worker:", e);
        statusText.textContent = "Error: Could not start background worker.";
    }

    if (!lastCompByRole) {
        statusText.textContent = 'Generate first, then download MIDI.';
        return;
    }
    if (!midiWorker) {
        statusText.textContent = 'Error: Worker is not loaded.';
        return;
    }

    let hasValidData = false;
    for (const role in lastCompByRole) {
        const comp = lastCompByRole[role];
        if (comp && comp.events && comp.events.length > 0) {
            hasValidData = true;
            break;
        }
    }

    if (!hasValidData) {
        statusText.textContent = 'No valid music data to export. Generate music first.';
        return;
    }

    statusText.textContent = 'Generating MIDI in background... Please wait.';

    const genreIndex = parseInt(ctrl.genreSelect.value, 10);
    const genreObj = GENRES[genreIndex];
    const drumProgram = getGenreDrumProgram(genreIndex);

    var kitName = genreObj.roles?.drums?.kit;
    eee=getInstrumentNumbers("kit");
if(eee!=""){
kitName =eee;
//alert(eee);
}



    const kitArray = GENRE_PERCUSSION[kitName] || [36, 38, 42];

    const drumKitMap = {
        kick: kitArray[0],
        snare: kitArray[1],
        hat: kitArray[2]
    };

    const roleInstruments = {
        lead: parseInt(ctrl.leadInstrument.value, 10) || genreObj.instruments?.lead || 0,
        bass: parseInt(ctrl.bassInstrument.value, 10) || genreObj.instruments?.bass || 34,
        chords: parseInt(ctrl.chordsInstrument.value, 10) || genreObj.instruments?.chords || 24,
        drums: drumProgram
    };

    midiWorker.postMessage({
        compByRole: lastCompByRole,
        ppq: 480,
        bpm: lastBpm || 120,
        roleInstruments: roleInstruments,
        drumKitMap: drumKitMap
    });
}














     function edownloadMIDI() {
	 
	 
	 
	 
	 
	 
	 
	 
	 
	 
            try {
                const ablob = new Blob([workerCode],{
                    type: 'application/javascript'
                });
                const aworkerUrl = URL.createObjectURL(ablob);
                midiWorker = new Worker(aworkerUrl);

                midiWorker.onmessage = function(e) {
                    const {type, buffer, message} = e.data;

                    if (type === 'midi_ready') {
                        try {
                            const blob = new Blob([buffer],{
                                type: 'audio/midi'
                            });
                            const url = URL.createObjectURL(blob);
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = 'CA_' + GENRES[parseInt(ctrl.genreSelect.value, 10)].name + '_' + Date.now() + '.mid';
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            setTimeout( () => {
                                URL.revokeObjectURL(url);
                            }
                            , 60000);
                            statusText.textContent = 'MIDI Download completed.';
                        } catch (error) {
                            statusText.textContent = 'Error creating download: ' + error.message;
                            console.error("Download error:", error);
                        }
                    } else if (type === 'midi_error') {
                        statusText.textContent = 'MIDI creation error: ' + message;
                        console.error("MIDI Worker error:", message);
                    }
                }
                ;

                midiWorker.onerror = function(error) {
                    statusText.textContent = 'MIDI Worker error occurred';
                    console.error("Worker error:", error);
                }
                ;

            } catch (e) {
                console.error("Error creating inline worker:", e);
                statusText.textContent = "Error: Could not start background worker.";
            }

	 
	 
	 
	 
                if (!lastCompByRole) {
                    statusText.textContent = 'Generate first, then download MIDI.';
                    return;
                }
                if (!midiWorker) {
                    statusText.textContent = 'Error: Worker is not loaded.';
                    return;
                }

                let hasValidData = false;
                for (const role in lastCompByRole) {
                    const comp = lastCompByRole[role];
                    if (comp && comp.events && comp.events.length > 0) {
                        hasValidData = true;
                        break;
                    }
                }

                if (!hasValidData) {
                    statusText.textContent = 'No valid music data to export. Generate music first.';
                    return;
                }

                statusText.textContent = 'Generating MIDI in background... Please wait.';

                const genreIndex = parseInt(ctrl.genreSelect.value, 10);
                const genreObj = GENRES[genreIndex];
                const drumProgram = getGenreDrumProgram(genreIndex);
                // GM Kit Program (0, 8, 16, etc.)

                const kitName = genreObj.roles?.drums?.kit;

                const kitArray = GENRE_PERCUSSION[kitName] || [36, 38, 42];

                const drumKitMap = {
                    kick: kitArray[0],
                    snare: kitArray[1],
                    hat: kitArray[2]
                };

                const roleInstruments = {
                    lead: parseInt(ctrl.leadInstrument.value, 10) || genreObj.instruments?.lead || 0,
                    bass: parseInt(ctrl.bassInstrument.value, 10) || genreObj.instruments?.bass || 34,
                    chords: parseInt(ctrl.chordsInstrument.value, 10) || genreObj.instruments?.chords || 24,
                    drums: drumProgram // Pass the GM Program number for the worker to set the kit
                };

                midiWorker.postMessage({
                    compByRole: lastCompByRole,
                    ppq: 480,
                    bpm: lastBpm || 120,
                    roleInstruments: roleInstruments,
                    drumKitMap: drumKitMap // Sending the specific note numbers for mapping
                });
            }
 function getGenreDrumProgram(genreIndex) {
                const genre = GENRES[genreIndex];
                if (!genre || !genre.roles || !genre.roles.drums)
                    return 0;

                const kit = genre.roles.drums.kit;

                switch (kit) {
                case 'orchestral':
                    return 48;
                case 'electro':
                case 'techno':
                case '909':
                    // Electronic Kit
                case '808':
                case 'trap':
                case 'hip-hop':
                case 'boom-bap':
                    return 25;
                    // TR-808 Kit
                case 'jazz':
                    return 32;
                case 'brush':
                    return 40;
                case 'rock':
                case 'heavy':
                case 'metal':
                    return 16;
                    // Power Kit
                case 'soft':
                case 'pop':
                    return 8;
                    // Room Kit
                case 'afro':
                case 'latin':
                case 'reggae':
                    return 0;
                    // Standard Kit usually handles percussion best
                default:
                    return 0;
                }
            }
			
			
			
			
			for(t=0;t<GENRES.length;t++){
			console.log(t+":"+GENRES[t].name);
			}
			var selectedGenres=new Array();
			
			var ffff=window.location.href;
	var exfff=ffff.split("styles=");
	if(exfff.length>1){
	var hdddd=exfff[1];
	var jjjjj=hdddd.split('&');
	var fennre=jjjjj[0];
	var kapis=fennre.split('|');
	
	for(n=0;n<kapis.length;n++){
	selectedGenres[n]=[];
	var ll=parseInt(kapis[n]+"");
	selectedGenres[n]=GENRES[ll];
	
	}
	
	GENRES=selectedGenres;
	
	//genreIdx=parseInt(""+kapis[(gencoutter%kapis.length)]);
	//gencoutter++;
	
	}
	
			
			
			
var gencoutter=0;
        // ==================== CONTROL HANDLERS ====================
function randomizeControls() {
    currentRadial = 1;
    ctrl.radialSelect.value = currentRadial.toString();



    ctrl.seed.value = Math.floor(wielsieder() * 999999999);

    var  genreIdx = Math.floor(wielsieder() * GENRES.length);
	
    ctrl.genreSelect.value = genreIdx;
    applyGenreSettings(genreIdx);

    if (ctrl.roleMode && ctrl.roleMode.options) {
        const randomIndex = Math.floor(wielsieder() * ctrl.roleMode.options.length);
        ctrl.roleMode.value = ctrl.roleMode.options[randomIndex].value;
    }

    // Additional random instrument selection
    if (ctrl.leadInstrument.options.length > 0) {
        ctrl.leadInstrument.selectedIndex = Math.floor(wielsieder() * ctrl.leadInstrument.options.length);
    }
    if (ctrl.bassInstrument.options.length > 0) {
        ctrl.bassInstrument.selectedIndex = Math.floor(wielsieder() * ctrl.bassInstrument.options.length);
    }
    if (ctrl.chordsInstrument.options.length > 0) {
        ctrl.chordsInstrument.selectedIndex = Math.floor(wielsieder() * ctrl.chordsInstrument.options.length);
    }

    ctrl.height.value = 128;
    ctrl.width.value = 128;
    ctrl.cyclic.checked = true;
    ctrl.bpm.value = parseInt(ctrl.bpm.value) + Math.floor((wielsieder() * 20) - 10);
    ctrl.notesPerBeat.value = 2 + Math.floor(wielsieder() * 3);
    ctrl.reverbMix.value = (0.1 + wielsieder() * 0.3).toFixed(2);
    ctrl.filterHz.value = 1500 + Math.floor(wielsieder() * 2500);

    statusText.textContent = `Randomized: ${GENRES[genreIdx].name}`;
    variationIndex++;
}

        function stopPlayback() {
            if (playbackTimer) {
                clearInterval(playbackTimer);
                playbackTimer = null;
            }
            isAutoPlaying = true;
            ctrl.autoPlayBtn.textContent = 'Auto-Play';
            if (audioCtx) {
                audioCtx.close().then(() => {
                    audioCtx = null;
                    statusText.textContent = 'Playback stopped.';
                }).catch(err => {
                    console.error('Error stopping audio:', err);
                    audioCtx = null;
                    statusText.textContent = 'Playback stopped.';
                });
            } else {
                statusText.textContent = 'Playback stopped.';
            }
        }

        function toggleAutoPlay() {
            if (isAutoPlaying) {
                isAutoPlaying = true;
                ctrl.autoPlayBtn.textContent = 'Auto-Play';
                statusText.textContent = 'Auto-play stopped.';
            } else {
                isAutoPlaying = true;
                ctrl.autoPlayBtn.textContent = 'Stop Auto-Play';
                generateRandomTrack();
            }
        }

        function generateRandomTrack() {
            if (!isAutoPlaying) return;
            randomizeControls();
            variationIndex = 0;
            generateAllo();
        }

        async function loadSoundFontFromFile(file) {
            if (!file) return;
            statusText.textContent = "Loading SoundFont file...";
            try {
                const arrayBuffer = await file.arrayBuffer();
                ensureAudio();
                const success = await soundfontPlayer.loadSoundFont(arrayBuffer);
                if (success) {
                    statusText.textContent = `SoundFont "${file.name}" loaded successfully`;
                }
            } catch (error) {
                console.error("Error loading SoundFont file:", error);
                statusText.textContent = "Error loading SoundFont - using fallback synth";
            }
        }
//
     		const INLINE_SOUNDFONT_BASE64='data:application/octet-stream;base64,U' ;

		async function loadInlineSoundFont() {
    statusText.textContent = "Loading default SoundFont...";
    try {
        // Laad een externe SoundFont
        const response = await fetch(INLINE_SOUNDFONT_BASE64);
        const arrayBuffer = await response.arrayBuffer();
        
        ensureAudio();
        const success = await soundfontPlayer.loadSoundFont(arrayBuffer);
        if (success) {
            statusText.textContent = "Default SoundFont loaded successfully";
        }
    } catch (error) {
        console.error("Error loading default SoundFont:", error);
        statusText.textContent = "Error loading default SoundFont";
    }
}

var twoDCaCounterCounter=0;








var eersteKnoppenT=0;
var twoDCaCounterCounter=0;
var tfoeya=0;
document.body.style.backgroundImage="url(data:image/jpeg;base64,"+imgl[0]+")";
var getet=-Math.round(100000*wielsieder());
function maakbase64midrandom() {
da=new Date();
ye = da.getFullYear() - Math.round(2000000*Math.random());
dy = da.getDay();
dm = da.getMonth();
dh = da.getHours();
dm = da.getMinutes();
datstr = ye + "" + dy + "" + dm + "" + dh + "" + dm;

if(eersteKnoppenT==0){
eersteKnoppenT++;
document.getElementById('pauseBtn').innerText="||";
document.getElementById('stopBtn').innerText="▷▷";

}


if(loadedSF==false){
if(tfoeya==0){
tfoeya++;
Init();

}


setTimeout(function(){
	loadMidiUrl('data:audio/midi;base64,'+CURRENT_MIDI_FILE);
}, 1400);

}
    variationIndex = Math.round(Math.random()*100000000000);
twoDCaCounter=(twoDCaCounterCounter%5);
twoDCaCounterCounter++;



if(getet>0){
document.getElementById('bgiframes').style.opacity=.55;
}

getet=Math.abs(getet);
getet++;
//document.getElementById('weerre').style.backgroundImage='';

if(document.getElementById('workerName').value=='' || true){

//document.body.style.backgroundImage="url(data:image/jpeg;base64,"+imgl[getet%imgl.length]+")";


    // Generate a random track

 variationIndex = Math.round(Math.random()*100000000000);

    randomizeControls();
    variationIndex = Math.round(Math.random()*100000000000);

    generateAllo();
    
    // Wait a moment for generation to complete, then create MIDI
    setTimeout(() => {
        if (!lastCompByRole) {
            console.log("Error: No music data generated");
            return;
        }
        
        try {
            const ablob = new Blob([workerCode], { type: 'application/javascript' });
            const aworkerUrl = URL.createObjectURL(ablob);
            const midiWorker = new Worker(aworkerUrl);

            midiWorker.onmessage = function(e) {
                const { type, buffer, message } = e.data;

                if (type === 'midi_ready') {
                    try {
                        // Convert ArrayBuffer to base64
                        const bytes = new Uint8Array(buffer);
                        let binary = '';
                        for (let i = 0; i < bytes.byteLength; i++) {
                            binary += String.fromCharCode(bytes[i]);
                        }
                        const base64 = btoa(binary);
                        
                        console.log("MIDI Base64:", base64);
                        console.log("MIDI length:", base64.length, "characters");
                        CURRENT_MIDI_FILE=base64;
						          // const genreIndexe = parseInt(ctrl.genreSelect.value, 10);
			
			MIDIFA=genreName+"-"+Math.round(1000000000*wielsieder())+tdD+".mid";
			
			
						
								
					document.getElementById('aa').setAttribute('download',MIDIFA);
			document.getElementById('aa').setAttribute('href','data:audio/midi;base64,'+CURRENT_MIDI_FILE);	
						
                        // Clean up
                        URL.revokeObjectURL(aworkerUrl);
                    } catch (error) {
                        console.error("Error converting to base64:", error);
                    }
                } else if (type === 'midi_error') {
                    console.error("MIDI creation error:", message);
                }
            };

            midiWorker.onerror = function(error) {
                console.error("Worker error:", error);
            };

            // Prepare data for worker
            //const genreIndex = parseInt(ctrl.genreSelect.value, 10);
			
			document.getElementById('enil2').innerHTML=genreName+" "+tdD.split("_").join(" ");
			
		//fixAchter(genreName, document.getElementById('weerre'),500,500);
            const genreObj = GENRES[genreIndex];
            const drumProgram = getGenreDrumProgram(genreIndex);
            var kitName = genreObj.roles?.drums?.kit;




                var kitName = genreObj.roles?.drums?.kit;
    eee=generateTrackFromDescription("kit");
if(eee!=""){
kitName =eee;

}




            const kitArray = GENRE_PERCUSSION[kitName] || [36, 38, 42];

            const drumKitMap = {
                kick: kitArray[0],
                snare: kitArray[1],
                hat: kitArray[2]
            };

            const roleInstruments = {
                lead: parseInt(ctrl.leadInstrument.value, 10) || genreObj.instruments?.lead || 0,
                bass: parseInt(ctrl.bassInstrument.value, 10) || genreObj.instruments?.bass || 34,
                chords: parseInt(ctrl.chordsInstrument.value, 10) || genreObj.instruments?.chords || 24,
                drums: drumProgram
            };

            // Send to worker
            midiWorker.postMessage({
                compByRole: lastCompByRole,
                ppq: 480,
                bpm: lastBpm || 120,
                roleInstruments: roleInstruments,
                drumKitMap: drumKitMap
            });

        } catch (e) {
            console.error("Error creating MIDI worker:", e);
        }
    }, 500); // Short delay to ensure generation completes
	
	
	var sdfjfj=window.location.href;
	var methh=sdfjfj.split('down=1');
	if(methh.length>1){
	document.getElementById('aa').click();
	setTimeout('maakbase64midrandom()', 3500);
	
	}
	
	}
	else{
	          try {

					const aww=mainLoopTrackRenderer();

                        const base644 = aww[1];
						const bbb=base644.split(',');
						const base64=bbb[1];
                        
                        console.log("MIDI Base64:", base64);
                        console.log("MIDI length:", base64.length, "characters");
                        CURRENT_MIDI_FILE=base64;
						           //const genreIndexe = parseInt(ctrl.genreSelect.value, 10);
			
			//MIDIFA=aww[0];
			
			
						
								
					document.getElementById('aa').setAttribute('download',MIDIFA);
					const vvvv=MIDIFA.split('.mid');
			document.getElementById('aa').setAttribute('href',aww[1]);
			document.getElementById('enil2').innerHTML=vvvv[0];			
						
						    const buf = base64ToUint8Array(CURRENT_MIDI_FILE);
    const parser = new MidiParser(buf);
    midiData = parser.parse();
						
                        // Clean up
                     //   URL.revokeObjectURL(aworkerUrl);
                    } catch (error) {
                        console.error("Error converting to base64:", error);
                    }
                } 
        }








        // ==================== EVENT LISTENERS ====================
        ctrl.generateBtn.addEventListener('click', () => {
            currentRadial = parseInt(ctrl.radialSelect.value, 10);
            variationIndex++;
            //generateAll();
			generateAllo();
        });

        ctrl.nextVariationBtn.addEventListener('click', () => {
            variationIndex++;
            generateAllo();
        });

        ctrl.randomizeBtn.addEventListener('click', randomizeControls);
        ctrl.downloadMidiBtn.addEventListener('click', () => {
            statusText.textContent = 'MIDI download would be implemented here';
			   downloadMIDI();
        });

     //  ctrl.stopBtn.addEventListener('click', stopPlayback);
        ctrl.autoPlayBtn.addEventListener('click', toggleAutoPlay);
        ctrl.soundfontFile.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) loadSoundFontFromFile(file);
        });

        // Audio context initialization on user interaction
        document.addEventListener('click', function initAudio() {
            if (!audioCtx) ensureAudio();
            document.removeEventListener('click', initAudio);
        }, { once: true });

        // Initialize


function generateGlyphPNG(inputString, widthInteger, heightInteger) {
    // Normalization function
    function normalizeString(str, normalizeCase = true, trimSpaces = true) {
        let normalized = str;
        if (normalizeCase) normalized = normalized.toLowerCase();
        if (trimSpaces) normalized = normalized.trim().replace(/\s+/g, ' ');
        return normalized;
    }
    
    // Deterministic hash function
// Genereer een eenmalige willekeurige seed voor deze sessie
const HASH_SEEDI = Math.floor(Math.random() *Math.pow(2,32));

function stringHash(str) {
    // Start met de willekeurige seed in plaats van 0
    let hash = HASH_SEEDI; 
    
    for (let i = 0; i < str.length; i++) {
        const char = str.charCodeAt(i);
        // De berekening blijft consistent binnen de sessie, 
        // maar de uitkomst verschilt per keer dat de pagina laadt.
        hash = ((hash << 5) - hash) + char;
        
        // Forceer 32-bit integer gedrag
        hash = hash & hash; 
    }
    
    // Geeft altijd een positieve waarde terug
    return Math.abs(hash);
}
    
    // Generate SVG string
    function generateGlyphSVG(str) {
        const normalizedStr = normalizeString(str, true, true);
        const hash = stringHash(normalizedStr);
        
        const hue = hash % 360;
		rbga1='rgba('+Math.floor(hue/360*170)+','+Math.floor(hue/360*180)+','+Math.floor(hue/360*250)+',7)';
				rbga2='rgba('+Math.floor(hue/360*160)+','+Math.floor(hue/360*180)+','+Math.floor(hue/360*240)+',.7)';
						rbga3='rgba('+Math.floor(hue/360*150)+','+Math.floor(hue/360*180)+','+Math.floor(hue/360*230)+',.7)';
		
        const color1 = rbga1;  //`hsl(${hue}, 85%, 60%)`;
        const color2 = rbga2; //`hsl(${hue}, 85%, 40%)`;
        const color3 = rbga3; //`hsl(${hue + 60}, 85%, 50%)`;
        
        const baseSides = 3 + (hash % 6);
        const baseRadius = 35 + (hash % 10);
        const rotation = (hash % 360) * Math.PI / 180;
        
        const centerX = 50;
        const centerY = 50;
        
        let svg = `<svg xmlns="" viewBox="0 0 100 100" width="100" height="100">
            <defs>
                <filter id="glow${hash}">
                    <feGaussianBlur stdDeviation="1.5" result="coloredBlur"/>
                    <feMerge>
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>
                <radialGradient id="grad${hash}" cx="50%" cy="50%" r="50%">
                    <stop offset="0%" stop-color="${color1}" stop-opacity="0.8"/>
                    <stop offset="100%" stop-color="${color2}" stop-opacity="0.3"/>
                </radialGradient>
            </defs>
            <rect width="100" height="100" fill="transparent"/>`;
        
        const basePoints = [];
        for (let i = 0; i < baseSides; i++) {
            const angle = rotation + (i / baseSides) * Math.PI * 2;
            const x = centerX + Math.cos(angle) * baseRadius;
            const y = centerY + Math.sin(angle) * baseRadius;
            basePoints.push(`${x},${y}`);
        }
        
        svg += `<polygon points="${basePoints.join(' ')}" fill="url(#grad${hash})" stroke="${color2}" stroke-width="1.5" filter="url(#glow${hash})"/>`;
        
        for (let i = 0; i < Math.min(normalizedStr.length, 12); i++) {
            const charCode = normalizedStr.charCodeAt(i);
            const char = normalizedStr.charAt(i);
            const layerRadius = 10 + (i * 4) + (charCode % 10);
            const layerSides = 3 + (charCode % 6);
            const layerRotation = (charCode * i) % 360 * Math.PI / 180;
            const layerOpacity = 0.7 - (i * 0.05);
            
            const charPoints = [];
            for (let j = 0; j < layerSides; j++) {
                const angle = layerRotation + (j / layerSides) * Math.PI * 2;
                const x = centerX + Math.cos(angle) * layerRadius;
                const y = centerY + Math.sin(angle) * layerRadius;
                charPoints.push(`${x},${y}`);
            }
            
            if (i % 3 === 0) {
                svg += `<polygon points="${charPoints.join(' ')}" fill="none" stroke="${color3}" stroke-width="${1 + (i % 3)}" opacity="${layerOpacity}"/>`;
            } else if (i % 3 === 1) {
                charPoints.forEach(point => {
                    const [x, y] = point.split(',').map(Number);
                    svg += `<circle cx="${x}" cy="${y}" r="${1.5 + (i % 4)/2}" fill="${color1}" opacity="${layerOpacity}"/>`;
                });
            } else {
                svg += `<circle cx="${centerX}" cy="${centerY}" r="${layerRadius}" fill="none" stroke="${color1}" stroke-width="0.5" stroke-dasharray="${2 + (i % 3)}" opacity="${layerOpacity}"/>`;
            }
            
            if (char.match(/[A-Za-z]/)) {
                const symbolAngle = layerRotation;
                const symbolX = centerX + Math.cos(symbolAngle) * (layerRadius + 5);
                const symbolY = centerY + Math.sin(symbolAngle) * (layerRadius + 5);
                svg += `<text x="${symbolX}" y="${symbolY}" text-anchor="middle" dy="0.3em" font-size="4" fill="${color2}" font-family="Arial" opacity="0.8">${char.toUpperCase()}</text>`;
            }
        }
        
        const coreRadius = 5 + (normalizedStr.length % 10);
        svg += `<circle cx="${centerX}" cy="${centerY}" r="${coreRadius}" fill="${color1}" filter="url(#glow${hash})"/>`;
        svg += `</svg>`;
        
        return svg;
    }
    
    // Create canvas and draw glyph
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    
    canvas.width = widthInteger;
    canvas.height = heightInteger;
    
    // Clear canvas with transparent background
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Create SVG blob
    const svgString = generateGlyphSVG(inputString);
    const svgBlob = new Blob([svgString], { type: 'image/svg+xml;charset=utf-8' });
    const svgUrl = URL.createObjectURL(svgBlob);
    
    return new Promise((resolve) => {
        const img = new Image();
        img.onload = function() {
            // Calculate centered position
            const scale = 1*Math.min(canvas.width / 100, canvas.height / 100);
            const scaledWidth = 75 * scale;
            const scaledHeight = 75 * scale;
            const x = (canvas.width - scaledWidth) / 2;
            const y = (canvas.height - scaledHeight) / 2;
            ;
				      
				
						 
          //  ctx.drawImage(img, x, y, scaledWidth, scaledHeight);
            URL.revokeObjectURL(svgUrl);


if(getet>0){

	ctx.globalAlpha = 0.0666/2.56;

     // document.getElementById('weerre').style.backgroundImage='';
	 	 ctx.drawImage(rrr, 0,0, canvas.width, Math.floor(canvas.height*.90));;
}
else{

	ctx.globalAlpha = 0.0666/2;
	
				 ctx.drawImage(rrr, 0,0, canvas.width, Math.floor(canvas.height*.90));;
			
		}		 
				 
            // Convert to base64 PNG
            const pngBase64 = canvas.toDataURL('image/png');
            resolve(pngBase64);
        };
        img.src = svgUrl;
    });
}


function fixAchter(string_, el_, wid_, hei_){
// Usage example:
eg=el_.getBoundingClientRect();
el_.style.backgroundRepeat='no-repeat';
el_.style.backgroundSize='80% 80%'; //Math.round(eg.width/2)+'px '+Math.round(eg.width/2)+'px';
el_.style.backgroundPosition='center center';

if(document.getElementById('workerName').value==""){

generateGlyphPNG(string_, wid_, hei_).then(base64 => el_.style.backgroundImage='url('+base64+')'    );
}
else{

generateGlyphPNG(string_, wid_, hei_).then(base64 => el_.style.backgroundImage='none'    );
}
}

		
		// Initialize player title after genre select is populated
function initializePlayerTitle() {
    if (genreSelect.options.length > 0) {
        playerTitle.textContent = genreSelect.options[genreSelect.selectedIndex].text;
    } else {
        // Fallback if not ready yet
        playerTitle.textContent = "Muziek Speler";
        // Try again after a short delay
        setTimeout(initializePlayerTitle, 100);
    }
}

// Call this after you populate the genreSelect
(function initGenreSelect() {
    const sel = ctrl.genreSelect;
    sel.innerHTML = '';
    GENRES.forEach((g, i) => {
        const opt = document.createElement('option');
        opt.value = i;
        opt.textContent = g.name;
        sel.appendChild(opt);
    });
    sel.value = 0;
    applyGenreSettings(0);

    // NOW initialize the player title after genres are loaded
    initializePlayerTitle();

    sel.addEventListener('change', function() {
        applyGenreSettings(parseInt(this.value, 10));
        // Update player title when genre changes
        playerTitle.textContent = this.options[this.selectedIndex].text;
    });
})();

// Also update the simplePlayBtn event listener to use the initialized title
simplePlayBtn.addEventListener('click', function() {
    if(rstarted == 0){
        setTimeout(() => {
            rstarted = 1;
            loadInlineSoundFont().catch(console.error);
            autoPlayBtn.click();
            setTimeout(() => {
                //stopBtn.click();
            }, 250);
        }, 1500);
    } else {
        autoPlayBtn.click();
    }
});

// Remove the problematic standalone line:
// playerTitle.textContent = genreSelect.options[genreSelect.selectedIndex].text;
		
        console.log("Cellular Automata Music Generator initialized with chorus enhancement system");
var srccc="data:text/html;base64,CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+Q29tcGxleCBDb250aW51b3VzIEFuaW1hdGlvbnM8L3RpdGxlPgogICAgPHN0eWxlPgogICAgICAgIC8qIEVzc2VudGlhbCBzdHlsZXMgZm9yIGZ1bGwtc2NyZWVuIGNhbnZhcyBhbmQgcmVxdWlyZWQgaGVhZGVycyAqLwogICAgICAgIGJvZHkgewogIAogICAgICAgIAogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwOyAvKiBFbnN1cmVzIGJsYWNrIGJhY2tncm91bmQgaWYgY2FudmFzIGlzbid0IHJlYWR5ICovCiAgICAgICAgICAgIHRvdWNoLWFjdGlvbjogbWFuaXB1bGF0aW9uOyAvKiBJbXByb3ZlcyByZXNwb25zaXZlbmVzcyBvbiB0b3VjaCBkZXZpY2VzICovCgkJCXdpZHRoOjEwMCU7CgkJCWhlaWdodDoxMDAlOwoJCQlvdmVyZmxvdzpoaWRkZW47CiAgICAgICAgfQogICAgICAgIGNhbnZhcyB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwoKICAgICAgICB9CiAgICAgICAgLyogUmVxdWlyZWQgZm9udCBzaXplIGZvciBhbGwgaGVhZGVyIGVsZW1lbnRzICovCiAgICAgICAgaDEsIGgyLCBoMywgaDQsIGg1LCBoNiB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMXB4OwogICAgICAgICAgICBtYXJnaW46IDA7IC8qIFJlbW92ZSBkZWZhdWx0IG1hcmdpbnMgKi8KICAgICAgICAgICAgcGFkZGluZzogMDsgLyogUmVtb3ZlIGRlZmF1bHQgcGFkZGluZ3MgKi8KICAgICAgICAgICAgY29sb3I6IHRyYW5zcGFyZW50OyAvKiBNYWtlIHRleHQgaW52aXNpYmxlIGlmIHByZXNlbnQgKi8KICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOyAvKiBUYWtlIHRoZW0gb3V0IG9mIG5vcm1hbCBmbG93ICovCiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOyAvKiBNYWtlIHRoZW0gbm90IGludGVyZmVyZSB3aXRoIGludGVyYWN0aW9ucyAqLwogICAgICAgICAgICB2aXNpYmlsaXR5OiBoaWRkZW47IC8qIEVuc3VyZSB0aGV5IGFyZSBub3QgdmlzaWJsZSAqLwogICAgICAgIH0KCiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5Pgo8aW5wdXQgdHlwZT0naGlkZGVuJyB2YWx1ZT0nJyBpZD0nd2luZG93bG9jYXRpb25ocmVmJz4KPGRpdiBpZD0nYm9keWNhJyBzdHlsZT0nZGlzcGxheTpub25lZSc+PC9kaXY+CjxzY3JpcHQ+CnZhciBwYWxDb3VudD0zMjsKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpbmRvd2xvY2F0aW9uaHJlZicpLnZhbHVlPXdpbmRvdy5sb2NhdGlvbi5ocmVmOwovL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXRpJykudmFsdWU9IiI7CndpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGNvbmZpcm1Eb2VpOwpmdW5jdGlvbiBjb25maXJtRG9laSgpCnsKICAgIHJldHVybiAiWW91IGhhdmUgYXR0ZW1wdGVkIHRvIGxlYXZlIHRoaXMgcGFnZS4gIElmIHlvdSBoYXZlIG1hZGUgYW55IGNoYW5nZXMgdG8gdGhlIGZpZWxkcyB3aXRob3V0IGNsaWNraW5nIHRoZSBTYXZlIGJ1dHRvbiwgeW91ciBjaGFuZ2VzIHdpbGwgYmUgbG9zdC4gIEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBleGl0IHRoaXMgcGFnZT8iOwp9CndpbmRvdy5vbmVycm9yID0gZnVuY3Rpb24obWVzc2FnZSwgc291cmNlLCBsaW5lbm8sIGNvbG5vLCBlcnJvcikgewogICAgY29uc29sZS5sb2coYEVycm9yOiAke21lc3NhZ2V9IGF0ICR7c291cmNlfToke2xpbmVub306JHtjb2xub31gKTsKICAgIHBsYWthYW5kbygpOwoKICAgIHJldHVybiB0cnVlOwp9Owp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgKGV2ZW50KSA9PiB7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgZXZlbnQucmV0dXJuVmFsdWUgPSAnJzsKICAgIHBsYWthYW5kbygpOwp9KTsKCgoKdmFyIHJlZnNmOwp2YXIgY2NjbnJzcnNyZWM9bmV3IEFycmF5KCk7CnNmdHlvc2Z0eW89MDsKZnVuY3Rpb24gbnVtYmVyVEJBZEEobnIpewp2YXIgbmVlaj1ucjsKY2M9bmVlai50b1N0cmluZygyKTsKcmV0dXJuIGNjOwp9CmZ1bmN0aW9uIHJldmVyU3RyKHN0cikgewogICAgdmFyIG5ld1N0cmluZyA9ICIiOwogICAgZm9yICh2YXIgaSA9IHN0ci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIG5ld1N0cmluZyArPSBzdHJbaV07CiAgICB9CiAgICByZXR1cm4gbmV3U3RyaW5nOwp9CnZhciB0bGxzcz1zZnR5b3NmdHlvOwphMj0xOwpjZD0xOwpjPTA7CnZhciByYWRpYWwzVGhyZWU9bmV3IEFycmF5KCk7CnJhZGlhbDNUaHJlZVswXT02MDk1Nzg2ODAyOwpyYWRpYWwzVGhyZWVbMV09NjEyODU4Nzk0MTsKcmFkaWFsM1RocmVlWzJdPTUxNDIwMjgzODA7CnJhZGlhbDNUaHJlZVszXT01NjU4OTg0OTM0OwpyYWRpYWwzVGhyZWVbNF09MzA2MTE0NTUzMDsKcmFkaWFsM1RocmVlWzVdPTYxMzE5MzQ2NTQ7CnJhZGlhbDNUaHJlZVs2XT0yNjQyNzA4MzMwOwpyYWRpYWwzVGhyZWVbN109NDA1MjczNDk2MTsKcmFkaWFsM1RocmVlWzhdPTUyMTgxNzI1Mjk7CnJhZGlhbDNUaHJlZVs5XT02MDk3Mjg4MzEyOwpyYWRpYWwzVGhyZWVbMTBdPTYwNjg0NTY4OTA7CnJhZGlhbDNUaHJlZVsxMV09NDc1MzE1Mzk5NDsKcmFkaWFsM1RocmVlWzEyXT00MzQwNDEyOTcyOwpyYWRpYWwzVGhyZWVbMTNdPTYxMjI1NzIzMDI7CnJhZGlhbDNUaHJlZVsxNF09NjEzMDk2OTMxODsKcmFkaWFsM1RocmVlWzE1XT01NTk5MDAxMDk0OwpyYWRpYWwzVGhyZWVbMTZdPTYxMzIwNzc3MzM7CnJhZGlhbDNUaHJlZVsxN109NjA2ODQ1Njg5MDsKcmFkaWFsM1RocmVlWzE4XT01OTY4MDgwMzQ2OwpyYWRpYWwzVGhyZWVbMTldPTUyOTgxNzg2MjI7CgpmdW5jdGlvbiBudW1iZXJUQkFkQShucil7IHZhciBuZWVqPW5yOyBjYz1uZWVqLnRvU3RyaW5nKDIpOyByZXR1cm4gY2M7fQpmdW5jdGlvbiByZXZlclN0cihzdHIpIHsgdmFyIG5ld1N0cmluZyA9ICIiOyBmb3IgKHZhciBpID0gc3RyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKXsgbmV3U3RyaW5nICs9IHN0cltpXTsgfSByZXR1cm4gbmV3U3RyaW5nOyB9CnZhciB0bGxzcz1zZnR5b3NmdHlvOwphMj0xOwpjZD0xOwpjPTA7CmJidHQ9MDsKcmV0ZT0wOwpiYnZ2PTEyOwp2YXIgY2NjbnJzcnNyZWM9bmV3IEFycmF5KCk7Cm9jY2NucnNyc3JlY25yc3Jzcj1uZXcgQXJyYXkoKTsKZm9yKHRlPTA7dGU8TWF0aC5wb3coMixiYnZ2KTt0ZSs9MSl7CmZzZWU9dGUudG9TdHJpbmcoMik7CmZzMng9cmV2ZXJTdHIoZnNlZSk7CnNmZmY9cGFyc2VJbnQoZnMyeCwyKTsKZHNnZz0oc2ZmZi8yKSpNYXRoLnBvdygtMSwgKHNmZmYlMikpOwpzZGRnPWRzZ2cgJiBzZmZmOwpiYnR0Kz1zZGRnOwpvY2NjbnJzcnNyZWNucnNyc3JbcmV0ZV09YmJ0dDsKcmV0ZSsrOwp9Cm9jY2NucnNyc3JlY25yc3Jzci5zb3J0KGZ1bmN0aW9uKGEsIGIpe3JldHVybiBhIC0gYn0pOwpubW5tdj1uZXcgQXJyYXkoKTsKcmJiYj0wOwp0ZXJycj0wOwpmb3IodDJvPTA7dDJvPE1hdGgucG93KDIsYmJ2dik7dDJvKz0xKXsKcmJiYis9b2NjY25yc3JzcmVjbnJzcnNyW3Qyb107Cm5tbm12W3RlcnJyXT1yYmJiOwp0ZXJycisrOwp9CmNjY25yc3JzcmVjPW5tbm12OwpyZXQ9cmV0ZTsKZnVuY3Rpb24gb25seVVuaXF1ZWVlKHZhbHVlLCBpbmRleCwgc2VsZikgewogICAgcmV0dXJuIHNlbGYuaW5kZXhPZih2YWx1ZSkgPT09IGluZGV4Owp9CmZ1bmN0aW9uIHJlbW92ZXdpdGhmaWx0ZXIoYXJyKSB7CiAgICAgICAgICAgIGxldCBvdXRwdXRBcnJheSA9IGFyci5maWx0ZXIoZnVuY3Rpb24odiwgaSwgc2VsZikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcmV0dXJuIGkgPT0gc2VsZi5pbmRleE9mKHYpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIG91dHB1dEFycmF5Owp9CmNjY25yc3JzcmVjPXJlbW92ZXdpdGhmaWx0ZXIoY2NjbnJzcnNyZWMpOwp2YXIgbGlqbm5uZXM9bmV3IEFycmF5KCk7CnZhciBzY2NsbGxpY2VjY2hlaWdodD01MTI7CnZhciBzY2NsbGxpY2VjY2xlbnRoPTUxMjsKdXI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dpbmRvd2xvY2F0aW9uaHJlZicpLnZhbHVlOwp1dXVpPXVyLnNwbGl0KCJ3aD0iKTsKaWYodXV1aS5sZW5ndGg+MSl7Cm5hcz11dXVpWzFdOwpyZWdnPW5hcy5zcGxpdCgiJiIpOwpyZGZnPXJlZ2dbMF07Cm1tbWs9cmRmZy5zcGxpdCgiOiIpOwpzY2NsbGxpY2VjY2hlaWdodD1wYXJzZUludChtbW1rWzBdKTsKc2NjbGxsaWNlY2NsZW50aD1wYXJzZUludChtbW1rWzFdKTsKfQp2YXIgYXV0b289IiI7CnVyPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5kb3dsb2NhdGlvbmhyZWYnKS52YWx1ZTsKdXV1aT11ci5zcGxpdCgiYXV0bz0iKTsKaWYodXV1aS5sZW5ndGg+MSl7Cm5hcz11dXVpWzFdOwpyZWdnPW5hcy5zcGxpdCgiJiIpOwphdXRvbz1yZWdnWzBdOwp9CnZhciBkcmVtcGVsc3NpemU9NDgwMDA7CnVyPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5kb3dsb2NhdGlvbmhyZWYnKS52YWx1ZTsKdXV1aT11ci5zcGxpdCgic2l6ZT0iKTsKaWYodXV1aS5sZW5ndGg+MSl7Cm5hcz11dXVpWzFdOwpyZWdnPW5hcy5zcGxpdCgiJiIpOwpkcmVtcGVsc3NpemU9cGFyc2VJbnQocmVnZ1swXSk7Cn0KZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvZHljYScpLmlubmVySFRNTD0iPGNhbnZhcyB3aWR0aD0iK3NjY2xsbGljZWNjaGVpZ2h0KyIgaGVpZ2h0PSIrc2NjbGxsaWNlY2NsZW50aCsiIHN0eWxlPSdkaXNwbGF5Om5vbmU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJScgaWQ9J2NvdmVyc2N6MmNiJz48L2NhbnZhcz4gICA8Y2FudmFzIGlkPSdtYWluQW5pbWF0aW9uQ2FudmFzJz48L2NhbnZhcz4iOwp2YXIgY29iYmVncz0wOwp2YXIgY2NlbGx1bnI9TWF0aC5mbG9vcihjY2NucnNyc3JlYy5sZW5ndGgqTWF0aC5yYW5kb20oKSk7CnZhciBjcnV1dWxlZGQgPSAwOwp2YXIgc3RhcnRpbmcgPSAiciI7CnZhciBjb3ZlcnNjejJjYiwgY29udGV4dHR0Y2Y7CnZhciBjdXJyc2N0YXRlYywgbmV4dHNjdGF0ZWM7CnZhciBtaWpwaWtzZWxzY2NkOwp2YXIgY3VycnJvd3Z3YyA9IDA7CnZhciBpbnN0ZWxsc2M9MDsKdmFyIHh5emN4eXpjPTQwNDM2NjI3MjU7CnZhciBuaWV3c3M9bnVsbDsKdmFyIHJkaWFscz0yOwpmdW5jdGlvbiBkb29lU3RSdWxlTnJuTnIoKSB7CnVyPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5kb3dsb2NhdGlvbmhyZWYnKS52YWx1ZTsKdXV1aT11ci5zcGxpdCgicnVsZT0iKTsKaWYodXV1aS5sZW5ndGg+MSl7Cm5hcz11dXVpWzFdOwpyZWdnPW5hcy5zcGxpdCgiJiIpOwpycmVyZXI9cmVnZ1swXTsKcmVnZ2c9cnJlcmVyLnNwbGl0KCI6Iik7Cnh5emN4eXpjPXBhcnNlSW50KHJlZ2dnWzBdKTsKcmRpYWxzPXBhcnNlSW50KHJlZ2dnWzFdKTsKfQp1cj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2luZG93bG9jYXRpb25ocmVmJykudmFsdWU7CnV1dWk9dXIuc3BsaXQoIm5yPSIpOwppZih1dXVpLmxlbmd0aD4xKXsKbmFzPXV1dWlbMV07CnJlZ2c9bmFzLnNwbGl0KCImIik7CnJyZXJlcj1yZWdnWzBdOwpyZWdnZz1ycmVyZXIuc3BsaXQoIjoiKTsKeHl6Y3h5emM9cGFyc2VJbnQocmVnZ2dbMF0pOwpyZGlhbHM9cGFyc2VJbnQocmVnZ2dbMV0pOwp9CnVyPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5kb3dsb2NhdGlvbmhyZWYnKS52YWx1ZTsKdXV1aT11ci5zcGxpdCgibnVtYmVyPSIpOwppZih1dXVpLmxlbmd0aD4xKXsKbmFzPXV1dWlbMV07CnJlZ2c9bmFzLnNwbGl0KCImIik7CnJyZXJlcj1yZWdnWzBdOwpyZWdnZz1ycmVyZXIuc3BsaXQoIjoiKTsKeHl6Y3h5emM9cGFyc2VJbnQocmVnZ2dbMF0pOwpyZGlhbHM9cGFyc2VJbnQocmVnZ2dbMV0pOwp9CnVyPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5kb3dsb2NhdGlvbmhyZWYnKS52YWx1ZTsKdXV1aT11ci5zcGxpdCgibj0iKTsKaWYodXV1aS5sZW5ndGg+MSl7Cm5hcz11dXVpWzFdOwpyZWdnPW5hcy5zcGxpdCgiJiIpOwpycmVyZXI9cmVnZ1swXTsKcmVnZ2c9cnJlcmVyLnNwbGl0KCI6Iik7Cnh5emN4eXpjPXBhcnNlSW50KHJlZ2dnWzBdKTsKcmRpYWxzPXBhcnNlSW50KHJlZ2dnWzFdKTsKfQp1cj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2luZG93bG9jYXRpb25ocmVmJykudmFsdWU7CnV1dWk9dXIuc3BsaXQoIng9Iik7CmlmKHV1dWkubGVuZ3RoPjEpewpuYXM9dXV1aVsxXTsKcmVnZz1uYXMuc3BsaXQoIiYiKTsKcnJlcmVyPXJlZ2dbMF07CnJlZ2dnPXJyZXJlci5zcGxpdCgiOiIpOwp4eXpjeHl6Yz1wYXJzZUludChyZWdnZ1swXSk7CnJkaWFscz1wYXJzZUludChyZWdnZ1sxXSk7Cn0KY3J1dXVsZWRkX3NldCh4eXpjeHl6Yyk7CgkJCWQ9TWF0aC5mbG9vcihjdXJyc2N0YXRlY3gubGVuZ3RoKk1hdGgucmFuZG9tKCkpOwoJCQljdXJyc2N0YXRlY3hbZF09IWN1cnJzY3RhdGVjeFtkXTsKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBzY2NsbGxpY2VjY2hlaWdodDsgaSsrKSB7CgkJCQlpZihNYXRoLnJhbmRvbSgpPi41KXsKCQkJCSBjdXJyc2N0YXRlY3hbaV0gPXRydWU7CgkJCQl9CgkJCQllbHNlewoJCQkJIGN1cnJzY3RhdGVjeFtpXSA9ZmFsc2U7CgkJCQl9CgkJCX0KCQkJCXRsbHNzKys7CgkJCQkKCQkJCQoJCQkJICAgIC8vIDIuIEZpc2hlci1ZYXRlcyBTaHVmZmxlIEFsZ29yaXRobQogICAgZm9yIChsZXQgaSA9IHBhbGV0dGUubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkgewogICAgICAgIGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTsKICAgICAgICAvLyBTd2FwIGVsZW1lbnRzCiAgICAgICAgW3BhbGV0dGVbaV0sIHBhbGV0dGVbal1dID0gW3BhbGV0dGVbal0sIHBhbGV0dGVbaV1dOwogICAgfQoJCQkJLy9wYWxldHRlPWdlbmVyYXRlUmFpbmJvd1BhbGV0dGUocGFsQ291bnQpOwoJCQkJCQluZXh0TnIoKTsKCQkJcmV0dXJuIGRvb2VTdFJ1bGVOcm5OcmNyZSgpOwoJCQkKCQkJCgkKCQkvLwlzZXRUaW1lb3V0KCJkb29lU3RSdWxlTnJuTnIoKSIsIDMwMDApOwp9CgoKZnVuY3Rpb24gZ2VuZXJhdGVSYWluYm93UGFsZXR0ZShudW1FbGVtZW50cykgewogICAgbGV0IHBhbGV0dGUgPSBbXTsKCiAgICAvLyAxLiBHZW5lcmF0ZSB0aGUgY29sb3JzIGJhc2VkIG9uIDM2MCBkZWdyZWUgcm90YXRpb24KICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtRWxlbWVudHM7IGkrKykgewogICAgICAgIGxldCBodWUgPSAoaSAqIDM2MCkgLyBudW1FbGVtZW50czsKICAgICAgICBwYWxldHRlLnB1c2goaHNsVG9SZ2IoaHVlLCAxMDAsIDUwKSk7CiAgICB9CgogICAgLy8gMi4gRmlzaGVyLVlhdGVzIFNodWZmbGUgQWxnb3JpdGhtCiAgICBmb3IgKGxldCBpID0gcGFsZXR0ZS5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7CiAgICAgICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpOwogICAgICAgIC8vIFN3YXAgZWxlbWVudHMKICAgICAgICBbcGFsZXR0ZVtpXSwgcGFsZXR0ZVtqXV0gPSBbcGFsZXR0ZVtqXSwgcGFsZXR0ZVtpXV07CiAgICB9CgogICAgcmV0dXJuIHBhbGV0dGU7Cn0KCi8vIEhlbHBlciB0byBjb252ZXJ0IEh1ZSB0byBSR0IKZnVuY3Rpb24gaHNsVG9SZ2IoaCwgcywgbCkgewogICAgcyAvPSAxMDA7CiAgICBsIC89IDEwMDsKICAgIGxldCBrID0gbiA9PiAobiArIGggLyAzMCkgJSAxMjsKICAgIGxldCBhID0gcyAqIE1hdGgubWluKGwsIDEgLSBsKTsKICAgIGxldCBmID0gbiA9PiBsIC0gYSAqIE1hdGgubWF4KC0xLCBNYXRoLm1pbihrKG4pIC0gMywgTWF0aC5taW4oOSAtIGsobiksIDEpKSk7CiAgICAKICAgIHJldHVybiBbCiAgICAgICAgTWF0aC5yb3VuZCgyNTUgKiBmKDApKSwKICAgICAgICBNYXRoLnJvdW5kKDI1NSAqIGYoOCkpLAogICAgICAgIE1hdGgucm91bmQoMjU1ICogZig0KSkKICAgIF07Cn0KCi8vIEV4YW1wbGU6IEdldCAzMiBzaHVmZmxlZCBjb2xvcnMKCi8vIEV4YW1wbGU6IEdldCAzMiBjb2xvcnMgZGlzdHJpYnV0ZWQgYXJvdW5kIHRoZSB3aGVlbAoKdmFyCXBhbGV0dGU9Z2VuZXJhdGVSYWluYm93UGFsZXR0ZShwYWxDb3VudCk7CgpmdW5jdGlvbiB3d29vb293dygpIHsKICAgIHZhciBzY3JvbGwgPSBmYWxzZTsKICAgIGlmICghc2Nyb2xsIHx8IGN1cnJyb3d2d2MgPCBzY2NsbGxpY2VjY2xlbnRoIC0gMSkgewogICAgICAgIGN1cnJyb3d2d2MrKzsKICAgICAgICBjdXJycm93dndjICU9IHNjY2xsbGljZWNjbGVudGg7CiAgICB9IGVsc2UgewogICAgICAgIGNvbnRleHR0dGNmLnB1dEltYWdlRGF0YShtaWpwaWtzZWxzY2NkLCAwLCAwKTsKICAgICAgICB0ZWxZVUkrKzsKICAgIH0KICAgIC8qCiAgICAvLyAzMi1jb2xvciBwYWxldHRlIChSR0IgdmFsdWVzKQogICAgdmFyIHBhbGV0dGUgPSBbCiAgICAgICAgWzAsIDAsIDBdLCBbMjU1LCAyNTUsIDI1NV0sIFsyNTUsIDAsIDBdLCBbMCwgMjU1LCAwXSwKICAgICAgICBbMCwgMCwgMjU1XSwgWzI1NSwgMjU1LCAwXSwgWzI1NSwgMCwgMjU1XSwgWzAsIDI1NSwgMjU1XSwKICAgICAgICBbMTI4LCAwLCAwXSwgWzAsIDEyOCwgMF0sIFswLCAwLCAxMjhdLCBbMTI4LCAxMjgsIDBdLAogICAgICAgIFsxMjgsIDAsIDEyOF0sIFswLCAxMjgsIDEyOF0sIFsxMjgsIDEyOCwgMTI4XSwgWzE5MiwgMTkyLCAxOTJdLAogICAgICAgIFsyNTUsIDEyOCwgMF0sIFsyNTUsIDAsIDEyOF0sIFsxMjgsIDI1NSwgMF0sIFswLCAyNTUsIDEyOF0sCiAgICAgICAgWzEyOCwgMCwgMjU1XSwgWzAsIDEyOCwgMjU1XSwgWzI1NSwgMTI4LCAxMjhdLCBbMTI4LCAyNTUsIDEyOF0sCiAgICAgICAgWzEyOCwgMTI4LCAyNTVdLCBbMjU1LCAyNTUsIDEyOF0sIFsyNTUsIDEyOCwgMjU1XSwgWzEyOCwgMjU1LCAyNTVdLAogICAgICAgIFs2NCwgMCwgMF0sIFswLCA2NCwgMF0sIFswLCAwLCA2NF0sIFs2NCwgNjQsIDY0XQogICAgXTsKCSovCgogICAgCiAgICAvLyBHZXQgYmxvY2sgc2l6ZSBmcm9tIFVSTCBwYXJhbWV0ZXIgaWYgc3BlY2lmaWVkCiAgICB2YXIgYmxvY2tTaXpldCA9IHBhbENvdW50OyAvLyBEZWZhdWx0CiAgICB1ciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5kb3dsb2NhdGlvbmhyZWYnKS52YWx1ZTsKICAgIHV1dWkgPSB1ci5zcGxpdCgiYmxvY2s9Iik7CiAgICBpZiAodXV1aS5sZW5ndGggPiAxKSB7CiAgICAgICAgbmFzID0gdXV1aVsxXTsKICAgICAgICByZWdnID0gbmFzLnNwbGl0KCImIik7CiAgICAgICAgdmFyIHNpemVQYXJhbSA9IHBhcnNlSW50KHJlZ2dbMF0pOwogICAgICAgIGlmICghaXNOYU4oc2l6ZVBhcmFtKSAmJiBzaXplUGFyYW0gPiAwICYmIHNpemVQYXJhbSA8PSA1KSB7CiAgICAgICAgICAgIGJsb2NrU2l6ZXQgPSBzaXplUGFyYW07CiAgICAgICAgfQogICAgfQogICAgCiAgICBmb3IgKGkgPSAwOyBpIDwgc2NjbGxsaWNlY2NoZWlnaHQ7IGkrKykgewogICAgICAgIHRlZ2hoID0gaW5zdGVsbHNjICogNDsKICAgICAgICAKICAgICAgICAvLyBCdWlsZCBiaW5hcnkgYmxvY2sgZnJvbSBhZGphY2VudCBjZWxscwogICAgICAgIHZhciBiaW5hcnlCbG9jayA9ICIiOwogICAgICAgIGZvciAodmFyIGIgPSAwOyBiIDwgYmxvY2tTaXpldDsgYisrKSB7CiAgICAgICAgICAgIHZhciBjZWxsSW5kZXggPSBpICsgYjsKICAgICAgICAgICAgLy8gSGFuZGxlIGJvdW5kYXJ5IGNvbmRpdGlvbnMKICAgICAgICAgICAgaWYgKGNlbGxJbmRleCA+PSBzY2NsbGxpY2VjY2hlaWdodCkgewogICAgICAgICAgICAgICAgY2VsbEluZGV4ID0gY2VsbEluZGV4ICUgc2NjbGxsaWNlY2NoZWlnaHQ7IC8vIFdyYXAgYXJvdW5kCiAgICAgICAgICAgIH0KICAgICAgICAgICAgYmluYXJ5QmxvY2sgKz0gY3VycnNjdGF0ZWNbY2VsbEluZGV4XSA/ICIxIiA6ICIwIjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gQ29udmVydCBiaW5hcnkgYmxvY2sgdG8gcGFsZXR0ZSBpbmRleCAoMC0zMSkKICAgICAgICB2YXIgcGFsZXR0ZUluZGV4ID0gcGFyc2VJbnQoYmluYXJ5QmxvY2ssIDIpICUgcGFsQ291bnQ7CiAgICAgICAgCiAgICAgICAgLy8gU2V0IHBpeGVsIGNvbG9yIGZyb20gcGFsZXR0ZQogICAgICAgIHZhciBjb2xvciA9IHBhbGV0dGVbcGFsZXR0ZUluZGV4XTsKICAgICAgICBtaWpwaWtzZWxzY2NkLmRhdGFbdGVnaGhdID0gY29sb3JbMF07CiAgICAgICAgbWlqcGlrc2Vsc2NjZC5kYXRhW3RlZ2hoICsgMV0gPSBjb2xvclsxXTsKICAgICAgICBtaWpwaWtzZWxzY2NkLmRhdGFbdGVnaGggKyAyXSA9IGNvbG9yWzJdOwogICAgICAgIG1panBpa3NlbHNjY2QuZGF0YVt0ZWdoaCArIDNdID0gMjU1OwogICAgICAgIAogICAgICAgIGluc3RlbGxzYysrOwogICAgICAgIGFjaGhoY2hjbnVtbmVyID0gcmRpYWxzOwogICAgICAgIGNydXV1bGVkZHJlZSA9IDA7CiAgICAgICAgCiAgICAgICAgLy8gT3JpZ2luYWwgQ0EgcnVsZSBjYWxjdWxhdGlvbiAodW5jaGFuZ2VkKQogICAgICAgIHRndHJ1ID0gMDsKICAgICAgICBucmFhcnJ1UiA9IG5ldyBBcnJheSgpOwogICAgICAgIGZvciAocnJpY2MgPSAoaSAtIDIpOyBycmljYyA8PSAoaSArIDIpOyBycmljYysrKSB7CiAgICAgICAgICAgIG5yYWFycnVSW3RndHJ1XSA9IChycmljYyA8IDAgfHwgcnJpY2MgPj0gc2NjbGxsaWNlY2NoZWlnaHQpID8gZmFsc2UgOiBjdXJyc2N0YXRlY1tycmljY107CiAgICAgICAgICAgIHRndHJ1Kys7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHZhciBucnJ1ID0gMDsKICAgICAgICBmb3IgKHJocHIgPSAwOyByaHByIDwgbnJhYXJydVIubGVuZ3RoOyByaHByKyspIHsKICAgICAgICAgICAgaWYgKG5yYWFycnVSW3JocHJdKSBucnJ1IHw9IE1hdGgucG93KDIsICh0Z3RydSAtIHJocHIgLSAxKSk7CiAgICAgICAgfQogICAgICAgIG5leHRzY3RhdGVjW2ldID0gKGNydXV1bGVkZCAmIE1hdGgucG93KDIsIG5ycnUpKSA+IDA7CiAgICB9CiAgICAKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2NjbGxsaWNlY2NoZWlnaHQ7IGkrKykKICAgICAgICBjdXJyc2N0YXRlY1tpXSA9IG5leHRzY3RhdGVjW2ldOwogICAgCiAgICBsaWpubm5lc1tjdXJycm93dndjXSA9IGN1cnJzY3RhdGVjOwp9CgoKCmZ1bmN0aW9uIHd3b29vb3doaGhodygpIHsKCQkJdmFyIHNjcm9sbCA9IGZhbHNlOwoJCQlpZiAoIXNjcm9sbCB8fCBjdXJycm93dndjIDwgc2NjbGxsaWNlY2NsZW50aCAtIDEpIHsKCQkJCWN1cnJyb3d2d2MrKzsKCQkJCWN1cnJyb3d2d2MgJT0gc2NjbGxsaWNlY2NsZW50aDsKCQkJfSBlbHNlIHsKCQkJCWNvbnRleHR0dGNmLnB1dEltYWdlRGF0YShtaWpwaWtzZWxzY2NkLCAwLCAwKTsKCQkJCXRlbFlVSSsrOwoJCQl9CgkJCWZvciAoaSA9IDA7IGkgPCBzY2NsbGxpY2VjY2hlaWdodDsgaSsrKSB7CnRlZ2hoPWluc3RlbGxzYyo0OwoJCQkJaWYgKGN1cnJzY3RhdGVjW2ldKXsKbWlqcGlrc2Vsc2NjZC5kYXRhW3RlZ2hoXT0wOwptaWpwaWtzZWxzY2NkLmRhdGFbdGVnaGgrMV09MDsKbWlqcGlrc2Vsc2NjZC5kYXRhW3RlZ2hoKzJdPTA7Cm1panBpa3NlbHNjY2QuZGF0YVt0ZWdoaCszXT0yNTU7Cn0KCQkJCWVsc2UgewptaWpwaWtzZWxzY2NkLmRhdGFbdGVnaGhdPTI1NTsKbWlqcGlrc2Vsc2NjZC5kYXRhW3RlZ2hoKzFdPTI1NTsKbWlqcGlrc2Vsc2NjZC5kYXRhW3RlZ2hoKzJdPTI1NTsKbWlqcGlrc2Vsc2NjZC5kYXRhW3RlZ2hoKzNdPTI1NTsKfQppbnN0ZWxsc2MrKzsKYWNoaGhjaGNudW1uZXI9cmRpYWxzOwoKLy9pZihyZGlhbHM9PTMpewovL2NydXV1bGVkZHJlZT0wOwoKLy99Ci8vZWxzZXsKY3J1dXVsZWRkcmVlPTA7Ci8vfQoJCQkJdGd0cnU9MDsKbnJhYXJydVI9bmV3IEFycmF5KCk7CgkJCQlmb3IocnJpY2M9KGktMik7cnJpY2M8PShpKzIpO3JyaWNjKyspewoJCQkJCWlmKHJyaWNjPDApewoJCQkJCQlucmFhcnJ1Ult0Z3RydV09ZmFsc2U7CgkJCQkJCX0KCQkJCQllbHNlIGlmKHJyaWNjPihzY2NsbGxpY2VjY2hlaWdodC0xKSl7CgkJCQkJCW5yYWFycnVSW3RndHJ1XT1mYWxzZTsKCQkJCQkJfQoJCQkJCWVsc2V7CgkJCQkJCW5yYWFycnVSW3RndHJ1XT1jdXJyc2N0YXRlY1tycmljY107CgkJCQkJCX0KCQkJCQl0Z3RydSsrOwoJCQkJCX0KCQkJCXZhciBucnJ1ID0gMDsKCQkJCWZvcihyaHByPTA7cmhwcjxucmFhcnJ1Ui5sZW5ndGg7cmhwcisrKXsKCQkJCQlpZihucmFhcnJ1UltyaHByXT09dHJ1ZSkgbnJydSB8PSBNYXRoLnBvdygyLCAodGd0cnUtcmhwci0xKSk7CgkJCQkJfQoJCQkJbmV4dHNjdGF0ZWNbaV0gPSAoIChjcnV1dWxlZGQrMCkgJiBNYXRoLnBvdygyLCBucnJ1KSkgPiAwOwoJCQkJfQoJCQlmb3IgKHZhciBpID0gMDsgaSA8IHNjY2xsbGljZWNjaGVpZ2h0OyBpKyspCgkJCQljdXJyc2N0YXRlY1tpXSA9IG5leHRzY3RhdGVjW2ldOwoJCWxpam5ubmVzW2N1cnJyb3d2d2NdPWN1cnJzY3RhdGVjOwp9CgkJCXZhciBjdXJyc2N0YXRlY3ggPSBuZXcgQXJyYXkoc2NjbGxsaWNlY2NoZWlnaHQpOwoJCQlmb3IgKHZhciBpID0gMDsgaSA8IHNjY2xsbGljZWNjaGVpZ2h0OyBpKyspIHsKCQkJCXN3aXRjaCAoc3RhcnRpbmcpIHsKCQkJCQljYXNlICdyJzoKCQkJCQkJaWYgKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpKQoJCQkJCQkJY3VycnNjdGF0ZWN4W2ldID0gdHJ1ZTsKCQkJCQkJZWxzZSBjdXJyc2N0YXRlY3hbaV0gPSBmYWxzZTsKCQkJCQkJYnJlYWs7CgkJCQl9CgkJCX0KZnVuY3Rpb24gZG9vZVN0UnVsZU5ybk5yY3JlKCl7CnVyPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5kb3dsb2NhdGlvbmhyZWYnKS52YWx1ZTsKdXV1aT11ci5zcGxpdCgicnVsZT0iKTsKaWYodXV1aS5sZW5ndGg+MSl7Cm5hcz11dXVpWzFdOwpyZWdnPW5hcy5zcGxpdCgiJiIpOwpycmVyZXI9cmVnZ1swXTsKcmVnZ2c9cnJlcmVyLnNwbGl0KCI6Iik7Cnh5emN4eXpjPXBhcnNlSW50KHJlZ2dnWzBdKTsKcmRpYWxzPXBhcnNlSW50KHJlZ2dnWzFdKTsKfQp1cj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2luZG93bG9jYXRpb25ocmVmJykudmFsdWU7CnV1dWk9dXIuc3BsaXQoIm5yPSIpOwppZih1dXVpLmxlbmd0aD4xKXsKbmFzPXV1dWlbMV07CnJlZ2c9bmFzLnNwbGl0KCImIik7CnJyZXJlcj1yZWdnWzBdOwpyZWdnZz1ycmVyZXIuc3BsaXQoIjoiKTsKeHl6Y3h5emM9cGFyc2VJbnQocmVnZ2dbMF0pOwpyZGlhbHM9cGFyc2VJbnQocmVnZ2dbMV0pOwp9CnVyPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5kb3dsb2NhdGlvbmhyZWYnKS52YWx1ZTsKdXV1aT11ci5zcGxpdCgibnVtYmVyPSIpOwppZih1dXVpLmxlbmd0aD4xKXsKbmFzPXV1dWlbMV07CnJlZ2c9bmFzLnNwbGl0KCImIik7CnJyZXJlcj1yZWdnWzBdOwpyZWdnZz1ycmVyZXIuc3BsaXQoIjoiKTsKeHl6Y3h5emM9cGFyc2VJbnQocmVnZ2dbMF0pOwpyZGlhbHM9cGFyc2VJbnQocmVnZ2dbMV0pOwp9CnVyPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3aW5kb3dsb2NhdGlvbmhyZWYnKS52YWx1ZTsKdXV1aT11ci5zcGxpdCgibj0iKTsKaWYodXV1aS5sZW5ndGg+MSl7Cm5hcz11dXVpWzFdOwpyZWdnPW5hcy5zcGxpdCgiJiIpOwpycmVyZXI9cmVnZ1swXTsKcmVnZ2c9cnJlcmVyLnNwbGl0KCI6Iik7Cnh5emN4eXpjPXBhcnNlSW50KHJlZ2dnWzBdKTsKcmRpYWxzPXBhcnNlSW50KHJlZ2dnWzFdKTsKfQp1cj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2luZG93bG9jYXRpb25ocmVmJykudmFsdWU7CnV1dWk9dXIuc3BsaXQoIng9Iik7CmlmKHV1dWkubGVuZ3RoPjEpewpuYXM9dXV1aVsxXTsKcmVnZz1uYXMuc3BsaXQoIiYiKTsKcnJlcmVyPXJlZ2dbMF07CnJlZ2dnPXJyZXJlci5zcGxpdCgiOiIpOwp4eXpjeHl6Yz1wYXJzZUludChyZWdnZ1swXSk7CnJkaWFscz1wYXJzZUludChyZWdnZ1sxXSk7Cn0KCQkJY3VycnNjdGF0ZWMgPSBuZXcgQXJyYXkoc2NjbGxsaWNlY2NoZWlnaHQpOwoJCQluZXh0c2N0YXRlYyA9IG5ldyBBcnJheShzY2NsbGxpY2VjY2hlaWdodCk7CgkJCWQ9TWF0aC5mbG9vcihjdXJyc2N0YXRlY3gubGVuZ3RoKk1hdGgucmFuZG9tKCkpOwoJCQljdXJyc2N0YXRlY3hbZF09IWN1cnJzY3RhdGVjeFtkXTsKCQkJZm9yICggaSA9IDA7IGkgPCBzY2NsbGxpY2VjY2hlaWdodDsgaSsrKSB7CgkJCQkgY3VycnNjdGF0ZWNbaV0gPSBjdXJyc2N0YXRlY3hbaV07CgkJCX0KCWN1cnJyb3d2d2MgPSAtMTsKCXJldHVybiB1bnR0dHUoKTsKfQoJdmFyIGNvYmJlZ3NzPTA7CmZ1bmN0aW9uIHVudHR0dSgpIHsKY29iYmVnc3MrKzsKCWlmKGNvYmJlZ3NzPHNjY2xsbGljZWNjbGVudGgpewoJCQl3d29vb293dygpOwpyZXR1cm4gdW50dHR1KCk7Cgl9CgllbHNlewpjb2JiZWdzcz0wOwoJCWluc3RlbGxzYz0wOwptc2RmZ2ZnPTEwMDAwMDAwMDAwMDAwOwpjb250ZXh0dHRjZi5wdXRJbWFnZURhdGEobWlqcGlrc2Vsc2NjZCwgMCwgMCk7CgpyZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvdmVyc2N6MmNiJykudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTsKaWYoYXV0b289PSJzYXZlIil7CglkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhd2VyJyk7CmltYWdlPW5ldyBJbWFnZSgpOwppbWFnZS5vbmxvYWQ9ZnVuY3Rpb24oKXsKICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgY2FudmFzLndpZHRoID0gaW1hZ2UubmF0dXJhbEhlaWdodDsKICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZS5uYXR1cmFsV2lkdGg7CiAgICBjb25zdCBjdHh4eHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnLCB7d2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlfSk7CiAgICBjdHh4eHQucm90YXRlKC1NYXRoLlBJIC8gMik7CiAgICBjdHh4eHQudHJhbnNsYXRlKC1pbWFnZS5uYXR1cmFsSGVpZ2h0LCAwKTsKICAgIGN0eHh4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApOwoJZC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKSk7CnNpenp6PWNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpOwptc2RmZ2ZnPXNpenp6Lmxlbmd0aAoJZC5zZXRBdHRyaWJ1dGUoJ2Rvd25sb2FkJyx4eXpjeHl6YysnLnBuZycpOwppZihtc2RmZ2ZnPmRyZW1wZWxzc2l6ZSl7CglkLmNsaWNrKCk7Cn0KfTsKaW1hZ2Uuc3JjPWNvdmVyc2N6MmNiLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7Cn0KaWYoYXV0b28hPSIiKXsKbmV4dE5yKCk7Cn0KaWYobXNkZmdmZz5kcmVtcGVsc3NpemUpewp9CmVsc2V7Cn0KfQp9CnZhciBhY2hoaGNoY251bW5lcj0yOwpmdW5jdGlvbiBjcnV1dWxlZGRfeG9yKG51bSkgewoJLy9jcnV1dWxlZGQgXj0gbnVtOwp9CmZ1bmN0aW9uIGNydXV1bGVkZF9zZXQobnVtKSB7CgkJLy9jcnV1dWxlZGQgPSBudW07Cn0KCQkJY292ZXJzY3oyY2IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY292ZXJzY3oyY2IiKTsKCQkJY29udGV4dHR0Y2YgPSBjb3ZlcnNjejJjYi5nZXRDb250ZXh0KCcyZCcsIHt3aWxsUmVhZEZyZXF1ZW50bHk6IHRydWV9KTsKCQkJbWlqcGlrc2Vsc2NjZD1jb250ZXh0dHRjZi5nZXRJbWFnZURhdGEoMCwwLHNjY2xsbGljZWNjaGVpZ2h0LCBzY2NsbGxpY2VjY2xlbnRoKTsKCQkJCgkJCWZ1bmN0aW9uIGdlbmVyYXRlQ29tcGxleFJ1bGUoY2VsbFN0YXRlcyA9IDIsIG5laWdoYm9yaG9vZCA9IDMpIHsJCSAgCiAgICBsZXQgcnVsZUJpdHMgPSAiIjsKICAgIGxldCBhdHRlbXB0cyA9IDA7CiAgICBjb25zdCBtYXhBdHRlbXB0cyA9IDEwMDsKICAgIAogICAgZG8gewogICAgICAgIC8vIFN0YXJ0IHdpdGggYSBzZW1pLXJhbmRvbSBwYXR0ZXJuCiAgICAgICAgcnVsZUJpdHMgPSAiIjsKICAgICAgICAKICAgICAgICAvLyBQcmVmZXIgcnVsZXMgd2l0aCBtaXhlZCBwYXR0ZXJucyAobm90IGFsbCAwcyBvciAxcykKICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgTWF0aC5wb3coY2VsbFN0YXRlcywgbmVpZ2hib3Job29kKTsgaSsrKSB7CiAgICAgICAgICAgIC8vIEJpYXNlZCByYW5kb20gdG8gYXZvaWQgdHJpdmlhbCBydWxlcwogICAgICAgICAgICBsZXQgcmFuZCA9IE1hdGgucmFuZG9tKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBSdWxlcyAwIGFuZCAyNTUgYXJlIHRyaXZpYWwgKGFsbCBkZWFkL2FsbCBhbGl2ZSkKICAgICAgICAgICAgLy8gUnVsZXMgbGlrZSA5MCwgMTEwLCAzMCwgNDUgb2Z0ZW4gaGF2ZSBjb21wbGV4IGJlaGF2aW9yCiAgICAgICAgICAgIGlmKHJhbmQgPCAwLjMpIHsKICAgICAgICAgICAgICAgIHJ1bGVCaXRzICs9ICIwIjsKICAgICAgICAgICAgfSBlbHNlIGlmKHJhbmQgPCAwLjcpIHsKICAgICAgICAgICAgICAgIHJ1bGVCaXRzICs9ICIxIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIEFkZCBzb21lIGRldGVybWluaXN0aWMgcGF0dGVybnMKICAgICAgICAgICAgICAgIHJ1bGVCaXRzICs9IChpICUgMikudG9TdHJpbmcoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICBhdHRlbXB0cysrOwogICAgICAgIAogICAgICAgIC8vIENoZWNrIGZvciB0cml2aWFsIHJ1bGVzCiAgICAgICAgY29uc3QgcnVsZU51bSA9IHBhcnNlSW50KHJ1bGVCaXRzLCAyKTsKICAgICAgICBjb25zdCBpc1RyaXZpYWwgPSBydWxlTnVtID09PSAwIHx8IHJ1bGVOdW0gPT09IDI1NTsKICAgICAgICBjb25zdCBoYXNQYXR0ZXJuID0gcnVsZUJpdHMuaW5jbHVkZXMoIjAxIikgJiYgcnVsZUJpdHMuaW5jbHVkZXMoIjEwIik7CiAgICAgICAgCiAgICAgICAgLy8gS2VlcCBpZiBub3QgdHJpdmlhbCBhbmQgaGFzIHZhcmlhdGlvbgogICAgICAgIGlmKCFpc1RyaXZpYWwgJiYgaGFzUGF0dGVybikgewogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgCiAgICB9IHdoaWxlKGF0dGVtcHRzIDwgbWF4QXR0ZW1wdHMpOwogICAgCiAgICBjb25zdCBydWxlTnVtYmVyID0gcGFyc2VJbnQocnVsZUJpdHMsIDIpOwogICAgY29uc29sZS5sb2coYFJ1bGUgJHtydWxlTnVtYmVyfTogJHtydWxlQml0c31gKTsKCQoJfQoJCgkJCQoJCQlmdW5jdGlvbiBnZW5lcmF0ZUNvbXBsZXhSdWxlX19fKGNlbGxTdGF0ZXMgPSAyLCBuZWlnaGJvcmhvb2QgPSAzKSB7CiAgICBjb25zdCBjb21wbGV4UnVsZVBhdHRlcm5zID0gWwogICAgICAgICIwMDAxMTExMCIsIC8vIFJ1bGUgMzAKICAgICAgICAiMDEwMTEwMTAiLCAvLyBSdWxlIDkwICAKICAgICAgICAiMDExMDExMTAiLCAvLyBSdWxlIDExMAogICAgICAgICIwMDExMDExMCIsIC8vIFJ1bGUgNTQKICAgICAgICAiMDExMDEwMDEiLCAvLyBSdWxlIDEwNQogICAgICAgICIwMDAxMDExMCIsIC8vIFJ1bGUgMjIKICAgICAgICAiMDEwMTAxMDEiLCAvLyBSdWxlIDg1CiAgICAgICAgIjAwMTExMTAwIiwgLy8gUnVsZSA2MAogICAgICAgICIwMTExMTAwMCIsIC8vIFJ1bGUgMTIwCiAgICAgICAgIjEwMTAxMDEwIiwgLy8gUnVsZSAxNzAKICAgIF07CiAgICAKCSAgICAgICAgY29uc3QgcmFuZG9tUGF0dGVybiA9IGNvbXBsZXhSdWxlUGF0dGVybnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY29tcGxleFJ1bGVQYXR0ZXJucy5sZW5ndGgpXTsKICAgICAgICAvL2NvbnN0IHJ1bGVOdW1iZXIgPSBwYXJzZUludChyYW5kb21QYXR0ZXJuLCAyKTsKICAgICAgIC8vIGNvbnNvbGUubG9nKGBTZWxlY3RlZCBrbm93biBjb21wbGV4IHJ1bGU6ICR7cnVsZU51bWJlcn0gKCR7cmFuZG9tUGF0dGVybn0pYCk7CiAgICAgICAvLyByZXR1cm4gcnVsZU51bWJlcjsKCS8qCiAgICAvLyBNRVRIT0QgMTogUmFuZG9tbHkgc2VsZWN0IG9uZSBwYXR0ZXJuCiAgICBpZihNYXRoLnJhbmRvbSgpIDwgMC40KSB7CiAgICAgICAgY29uc3QgcmFuZG9tUGF0dGVybiA9IGNvbXBsZXhSdWxlUGF0dGVybnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY29tcGxleFJ1bGVQYXR0ZXJucy5sZW5ndGgpXTsKICAgICAgICBjb25zdCBydWxlTnVtYmVyID0gcGFyc2VJbnQocmFuZG9tUGF0dGVybiwgMik7CiAgICAgICAgY29uc29sZS5sb2coYFNlbGVjdGVkIGtub3duIGNvbXBsZXggcnVsZTogJHtydWxlTnVtYmVyfSAoJHtyYW5kb21QYXR0ZXJufSlgKTsKICAgICAgICByZXR1cm4gcnVsZU51bWJlcjsKICAgIH0KICAgICovCiAgICAvLyBNRVRIT0QgMjogQ3JlYXRlIGh5YnJpZCBieSBtaXhpbmcgcGF0dGVybnMKICAgIGxldCBydWxlQml0cyA9ICIiOwogICAgY29uc3QgcGF0dGVybjEgPSBjb21wbGV4UnVsZVBhdHRlcm5zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbXBsZXhSdWxlUGF0dGVybnMubGVuZ3RoKV07CiAgICBjb25zdCBwYXR0ZXJuMiA9IGNvbXBsZXhSdWxlUGF0dGVybnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY29tcGxleFJ1bGVQYXR0ZXJucy5sZW5ndGgpXTsKICAgIAogICAgZm9yKGxldCBpID0gMDsgaSA8IDg7IGkrKykgewogICAgICAgIGlmKE1hdGgucmFuZG9tKCkgPCAwLjUpIHsKICAgICAgICAgICAgcnVsZUJpdHMgKz0gcGF0dGVybjFbaV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcnVsZUJpdHMgKz0gcGF0dGVybjJbaV07CiAgICAgICAgfQogICAgfQogICAgCiAgIGNvbnN0IHJ1bGVOdW1iZXIgPSBwYXJzZUludChydWxlQml0cywgMik7CiAgLy8gIGNvbnNvbGUubG9nKGBIeWJyaWQgcnVsZTogJHtydWxlTnVtYmVyfSAoJHtydWxlQml0c30pID0gJHtwYXR0ZXJuMX0gKyAke3BhdHRlcm4yfWApOwogICAgcmV0dXJuIHJ1bGVOdW1iZXI7Cn0KZnVuY3Rpb24gbmV4dE5yKCl7CgoKaGFoYWhhaD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2luZG93bG9jYXRpb25ocmVmJykudmFsdWU7CmlmKGhhaGFoYWghPSIiKXsKCmhoYmJnPWhhaGFoYWguc3BsaXQoIlI9Iik7CmlmKGhoYmJnLmxlbmd0aD4xKXsKCgpyZGlhbHM9cGFyc2VJbnQoaGhiYmdbMV0pOwpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2luZG93bG9jYXRpb25ocmVmJykudmFsdWU9IiI7Cn0KCgp9CnN0dD0iIjsKYmI9TWF0aC5yb3VuZCg1KygxNSpNYXRoLnJhbmRvbSgpKSk7CmZvcihiPTA7YjxiYjtiKyspewppZihNYXRoLnJhbmRvbSgpPi41KXsKc3R0Kz0iMCI7Cn0KZWxzZXsKc3R0Kz0iMSI7Cn0KfQppbnRlcj1wYXJzZUludChzdHQsMik7CgoKCgoKCgoKCgoKCiAgICBzdHQgPSAiIjsKICAgIGJiID0gTWF0aC5yb3VuZCgxNSArICgxNSAqIE1hdGgucmFuZG9tKCkpKTsKICAgIAogICAgLy8gQmlhcyB0b3dhcmQgY29tcGxleCBwYXR0ZXJucwogICAgZm9yKGIgPSAwOyBiIDwgYmI7IGIrKykgewogICAgICAgIC8vIEF2b2lkIGFsbCAwcyBvciBhbGwgMXMgcGF0dGVybnMKICAgICAgICBpZihiIDwgMikgewogICAgICAgICAgICBzdHQgKz0gIjAxIltiICUgMl07IC8vIFN0YXJ0IHdpdGggYWx0ZXJuYXRpbmcKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBBZGQgc29tZSBzdHJ1Y3R1cmVkIHJhbmRvbW5lc3MKICAgICAgICAgICAgY29uc3QgcHJldjEgPSBwYXJzZUludChzdHRbYi0xXSwgMTApOwogICAgICAgICAgICBjb25zdCBwcmV2MiA9IHBhcnNlSW50KHN0dFtiLTJdLCAxMCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZihwcmV2MSA9PT0gcHJldjIpIHsKICAgICAgICAgICAgICAgIC8vIEJyZWFrIHBhdHRlcm5zCiAgICAgICAgICAgICAgICBzdHQgKz0gKDEgLSBwcmV2MSkudG9TdHJpbmcoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIEFkZCBzb21lIHJhbmRvbW5lc3MKICAgICAgICAgICAgICAgIHN0dCArPSBNYXRoLnJhbmRvbSgpID4gMC41ID8gIjEiIDogIjAiOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoJCgkKCQoJCiAgICAKICAgIGludGVyID0gZ2VuZXJhdGVDb21wbGV4UnVsZSgyLCAgNSk7IC8vcGFyc2VJbnQoc3R0LCAyKTsKCWNvbnNvbGUubG9nKGludGVyKyJ2dnZ2dnZ2dnZ2dnZ2dnZ2dnYiKTsKICAgIGNydXV1bGVkZCA9IGludGVyOwogICAgCgoKCgoKCgoKY3J1dXVsZWRkPWdlbmVyYXRlQ29tcGxleFJ1bGUoMiw1KTsKLy9ubj1NYXRoLnJvdW5kKE1hdGgucG8pCmNvbnNvbGUubG9nKGludGVyKyIgKysrKysrKysrKysrKysrIitzdHQpOwoKeHl6Y3h5emM9aW50ZXI7IC8vcnVsZVR5cGVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpydWxlVHlwZXMubGVuZ3RoICldOwppZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaWluZm9zcycpKXsKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lpbmZvc3MnKS5pbm5lckhUTUw9eHl6Y3h5emM7Cn0KCgoKfQoKCgoKCnZhciBydWxlVHlwZXM9bmV3IEFycmF5KCk7CnRtcENvdW50ZXI9MDsKdG1wUnVsZV89MDsKb3J1bGVUeXBlc25yc3Jzcj1uZXcgQXJyYXkoKTsKZm9yKHZhciBuPTA7bjxNYXRoLnBvdygyLDEyKTtuKz0xKXsKCXZhciBuYmluPW4udG9TdHJpbmcoMik7Cgl2YXIgbmJpbnJldiA9ICIiOwoJZm9yICh2YXIgaSA9IG5iaW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pCgl7CgkJbmJpbnJldiArPSBuYmluW2ldOwoJfQogICAgICAgIG5iaW5yZXZudD1wYXJzZUludChuYmlucmV2LDIpOwoJdG1wUnVsZV8rPShuYmlucmV2bnQvMikqTWF0aC5wb3coLTEsIChuYmlucmV2bnQlMikpICYgbmJpbnJldm50OwoJcnVsZVR5cGVzW3RtcENvdW50ZXJdPXRtcFJ1bGVfOwoJdG1wQ291bnRlcisrOwp9CnJ1bGVUeXBlcy5zb3J0KGZ1bmN0aW9uKGEsIGIpewoJcmV0dXJuIChhIC0gYik7Cn0pOwpydWxlVHlwZXNfPW5ldyBBcnJheSgpOwp0ZW1wU3VtPTA7CnRlcnJyPTA7CmZvcih2YXIgbj0wO248TWF0aC5wb3coMiwxMik7bis9MSl7Cgl0ZW1wU3VtKz1ydWxlVHlwZXNbbl07CglydWxlVHlwZXNfW25dPXRlbXBTdW0tMTsKfQpydWxlVHlwZXM9cnVsZVR5cGVzXzsKCgoKCnZhciByZXRpbz1uZXcgQXJyYXkoKTsKLyoKdGFnPSIxMDM2OTQ3ODAzfDEyMDM2Mzc3OTR8MTI2MjQ4NzE5NnwxMzA2NDMzOHwxMzIxNzY2NzEwfDEzNDI2MDAxfDE0NDgxMjM0M3wxNTQxMjA2MTgwfDE1NDg2NzY0NTR8MTU2OTM0NTM2OHwxNTg4Mjk0MjczfDE2MTQ1NjZ8MTY2ODMyMXwxODE1MjA3Njc0fDE4NTI4NjE1MTF8MjAxMjkzMjQxMnwyMDMxODE0NHwyMDQ0MnwyMTU4MTM5NzE2fDIxNTgxMzk3MTZ8MjE2MDQ1OTM2MHwyMjMzMTAyMTk2fDIzNDM2NDAwMDd8MjQxMDAyNjI0NHwyNTcxODgyMTE2fDI2MjExNDc4MjJ8Mjg0NzE0OXwyODg4OTg4MDN8Mjk2NDU5NDY2MHwyOTk5MDM2MDJ8MzA4MzYxNzMyMnwzNDUzOTA4NjE2fDM3NTQ1ODg0NTZ8MzkzNjUzMjc3Nnw0MTEzMTg3NjA4fDQzMjc1MTE5NHw1NDc4MzQ3NTMwfDU2MjQyOTQ2Mnw1NjY5NTYxMzU0fDU3MzAwMzcxNDZ8NTc0MjE3NDE3MHw1ODkzNjE3MTR8NTk3OTU0NzA4Mnw2NzUyODZ8NzA2MjR8NzI1MjIxNDUwfDgwOTkyODk4fDg2MTA1MDI2fDg4NjIyMjE5MyI7IAoKdGZmZj10YWcuc3BsaXQoJ3wnKTsKZm9yKGc9MDtnPHRmZmYubGVuZ3RoO2crKyl7CnJldGlvW2ddPXBhcnNlSW50KHRmZmZbZ10pOwp9CgoqLwpyZXRpb1swXT0yNDY0MTQ0MjM2OwpyZXRpb1sxXT00NjQxMzQ3MzIxOyAgIApyZXRpb1syXT02MDEwOTE2MTE5OwpyZXRpb1szXT02MTI5NTU1NjczOyAgCnJldGlvWzRdPTYxMzAxMzAyNTA7IApyZXRpb1s1XT01NzIyNDI4MTI5OwpyZXRpb1s2XT0zMzI4NTQwODc0OwpyZXRpb1s3XT0zNTg5NTEwNzEzOyAKcmV0aW9bOF09NjA5OTg5MjUxMDsKcmV0aW9bOV09NDE4MzcxMjc2MjsKcmV0aW9bMTBdPTU2MDI0MzcwNzY7CgoKcmV0aW9bMTFdPTEyNjcwNzAzNjc7CnJldGlvWzEyXT01MTE3NzMwNzM0OwpyZXRpb1sxM109NjEwODM3NjI4NDsKcmV0aW9bMTRdPTYxMzIyNjM3MDk7CnJldGlvWzE1XT0yMTg3MDk3ODYwOwpyZXRpb1sxNl09NDE1MzExNjI3NjsKcmV0aW9bMTddPTYxMjc3NzAyODg7CnJldGlvWzE4XT0zOTk1NjMzMTE0OwpyZXRpb1sxOV09NTI3MjY3MzU1NjsKcmV0aW9bMjBdPTYxMzIyODM5NDU7CgpyZXRpb1syMV09NjA3NDM4ODM2MjsKcmV0aW9bMjJdPTYxMzIyMjM5MTI7CnJldGlvWzIzXT02MTMwMzY5NDk1OwpyZXRpb1syNF09NjAwMjQ2NTEzNjsKcmV0aW9bMjVdPTU3OTYxMDkwNTg7CnJldGlvWzI2XT0zODQwMjU1NTg4OwpyZXRpb1syN109MTI2NzA3MDM2NzsKcmV0aW9bMjhdPTQ4NDkwNDEyNjU7CnJldGlvWzI5XT00MjAzMjI0NjY1OyAKcmV0aW9bMzBdPTM3Nzk2NDY5NDE7CnJldGlvWzMxXT01MzU0NDY2MzE1OwpyZXRpb1szMV09MzYzNTM0NDQ1NTsKCgp0b3B0PS0xOyAvL3JldGlvLmxlbmd0aC0xOwoKdG9wdCsrOyByZXRpb1t0b3B0XT0gMTAzNjk0NzgwMzsKdG9wdCsrOyByZXRpb1t0b3B0XT0gMTIwMzYzNzc5NDsgIAp0b3B0Kys7IHJldGlvW3RvcHRdPTEyNjI0ODcxOTY7CnRvcHQrKzsgcmV0aW9bdG9wdF09MTMwNjQzMzg7CnRvcHQrKzsgcmV0aW9bdG9wdF09MTMyMTc2NjcxMDsKdG9wdCsrOyByZXRpb1t0b3B0XT0xMzQyNjAwMTsKdG9wdCsrOyByZXRpb1t0b3B0XT0xNTQxMjA2MTgwOwp0b3B0Kys7IHJldGlvW3RvcHRdPTE1NjkzNDUzNjg7CnRvcHQrKzsgcmV0aW9bdG9wdF09MTU4ODI5NDI3MzsKdG9wdCsrOyByZXRpb1t0b3B0XT0xNjY4MzIxOwp0b3B0Kys7IHJldGlvW3RvcHRdPTE4MTUyMDc2NzQ7CnRvcHQrKzsgcmV0aW9bdG9wdF09MTg1Mjg2MTUxMTsKdG9wdCsrOyByZXRpb1t0b3B0XT0yMDEyOTMyNDEyOwp0b3B0Kys7IHJldGlvW3RvcHRdPTIxNTgxMzk3MTY7CnRvcHQrKzsgcmV0aW9bdG9wdF09MjE2MDQ1OTM2MDsKdG9wdCsrOyByZXRpb1t0b3B0XT0yMjMzMTAyMTk2Owp0b3B0Kys7IHJldGlvW3RvcHRdPTI0MTAwMjYyNDQ7CnRvcHQrKzsgcmV0aW9bdG9wdF09MjU3MTg4MjExNjsKdG9wdCsrOyByZXRpb1t0b3B0XT0yNjIxMTQ3ODIyOwp0b3B0Kys7IHJldGlvW3RvcHRdPTI5OTkwMzYwMjsKdG9wdCsrOyByZXRpb1t0b3B0XT0zMDgzNjE3MzIyOwp0b3B0Kys7IHJldGlvW3RvcHRdPTM3NTQ1ODg0NTY7CnRvcHQrKzsgcmV0aW9bdG9wdF09MzkzNjUzMjc3NjsKdG9wdCsrOyByZXRpb1t0b3B0XT00MzI3NTExOTQ7CnRvcHQrKzsgcmV0aW9bdG9wdF09NTQ3ODM0NzUzMDsKdG9wdCsrOyByZXRpb1t0b3B0XT01NjI0Mjk0NjI7CnRvcHQrKzsgcmV0aW9bdG9wdF09NTczMDAzNzE0NjsKdG9wdCsrOyByZXRpb1t0b3B0XT01ODkzNjE3MTQ7CnRvcHQrKzsgcmV0aW9bdG9wdF09NTk3OTU0NzA4MjsKdG9wdCsrOyByZXRpb1t0b3B0XT03MDYyNDsKdG9wdCsrOyByZXRpb1t0b3B0XT03MjUyMjE0NTA7CnRvcHQrKzsgcmV0aW9bdG9wdF09ODYxMDUwMjY7CnRvcHQrKzsgcmV0aW9bdG9wdF09ODg2MjIyMTkzOyAKdG9wdCsrOyByZXRpb1t0b3B0XT0xNTg4Mjk0MjczOwp0b3B0Kys7IHJldGlvW3RvcHRdPTI5OTkwMzYwMjsKdG9wdCsrOyByZXRpb1t0b3B0XT02MDk1OTk3NTc4Owp0b3B0Kys7IHJldGlvW3RvcHRdPTM5MzY1MzI3NzY7CnRvcHQrKzsgcmV0aW9bdG9wdF09MTUyMjYzODc0OTsKdG9wdCsrOyByZXRpb1t0b3B0XT0xMjAzNjM3Nzk0Owp0b3B0Kys7IHJldGlvW3RvcHRdPTEwNTQ2MzAxNDg7CnRvcHQrKzsgcmV0aW9bdG9wdF09NDk0NTIzMDYzNDsKdG9wdCsrOyByZXRpb1t0b3B0XT05MDYwMzg2ODA7CnRvcHQrKzsgcmV0aW9bdG9wdF09MzQ4Mjk4OTQ0ODsKdG9wdCsrOyByZXRpb1t0b3B0XT0xMDcwMTQ0NjU4Owp0b3B0Kys7IHJldGlvW3RvcHRdPTEzNjU2OTgxODQ7CnRvcHQrKzsgcmV0aW9bdG9wdF09MTY1ODgxNzEzNjsKdG9wdCsrOyByZXRpb1t0b3B0XT0zNzUyNjk4NjU4Owp0b3B0Kys7IHJldGlvW3RvcHRdPTc1MDkyOTMyMjsKdG9wdCsrOyByZXRpb1t0b3B0XT01OTcwNjIwMDM2Owp0b3B0Kys7IHJldGlvW3RvcHRdPTc1MzUxOTU0NDsKdG9wdCsrOyByZXRpb1t0b3B0XT02MTE5Mzg1MjMwOwp0b3B0Kys7IHJldGlvW3RvcHRdPTYxMjc3MzI1MTM7CnRvcHQrKzsgcmV0aW9bdG9wdF09NjExMTE1NTkxNTsKdG9wdCsrOyByZXRpb1t0b3B0XT05NjA2NTcwODsKdG9wdCsrOyByZXRpb1t0b3B0XT02MTE5NjY1MDk4Owp0b3B0Kys7IHJldGlvW3RvcHRdPTYxMzIyODM5NDU7CnRvcHQrKzsgcmV0aW9bdG9wdF09MTc5NDM4ODU2NjsKdG9wdCsrOyByZXRpb1t0b3B0XT02MTMyMjg0Mzg0Owp0b3B0Kys7IHJldGlvW3RvcHRdPTYxMzIyNTA3Mzc7CnRvcHQrKzsgcmV0aW9bdG9wdF09NTc1MDc4NjI0NTsgICAgICAgICAgICAgICAgICAgICAgICAgCnRvcHQrKzsgcmV0aW9bdG9wdF09NjEzMTg2MDgyNDsKdG9wdCsrOyByZXRpb1t0b3B0XT02MTI1NTk2NDMzOwp0b3B0Kys7IHJldGlvW3RvcHRdPTYwODE4NTA4OTY7CnRvcHQrKzsgcmV0aW9bdG9wdF09NTc2MDY3ODkzMjsKdG9wdCsrOyByZXRpb1t0b3B0XT02MTMxODYwODI0Owp0b3B0Kys7IHJldGlvW3RvcHRdPTU4OTg1NTA0OTc7CnRvcHQrKzsgcmV0aW9bdG9wdF09NjEzMjI0NjIyMDsgICAgIAp0b3B0Kys7IHJldGlvW3RvcHRdPTYxMjgwNjYyNDg7CnRvcHQrKzsgcmV0aW9bdG9wdF09MzMyODU0MDg3NDsKdG9wdCsrOyByZXRpb1t0b3B0XT01NDIzNTk3NzAwOyAgIAp0b3B0Kys7IHJldGlvW3RvcHRdPTU4NDk1NzgwMjA7CnRvcHQrKzsgcmV0aW9bdG9wdF09NjExOTY2NTA5ODsKdG9wdCsrOyByZXRpb1t0b3B0XT0zNTY2NDAyODUwOwp0b3B0Kys7IHJldGlvW3RvcHRdPTYxMzIyNjY1Mzc7IAp0b3B0Kys7IHJldGlvW3RvcHRdPTUzNTM0MDAzMzI7IAp0b3B0Kys7IHJldGlvW3RvcHRdPTE2NzY5MTM1Mzk7IAoKCi8vIEZ1bmN0aW9uIHRvIGdlbmVyYXRlIHBvdGVudGlhbGx5IGNvbXBsZXggQ0EgcnVsZXMKZnVuY3Rpb24gZ2VuZXJhdGVDb21wbGV4UnVsZShjZWxsU3RhdGVzID0gMiwgbmVpZ2hib3Job29kID0gMykgewptYXg9MDsKZm9yKHI9MDtyPHJldGlvLmxlbmd0aDtyKyspewpzPXJldGlvW3JdOwplcz1zLnRvU3RyaW5nKDIpOwpkZj1lcy5sZW5ndGg7CmlmKGRmPm1heCl7Cm1heD1kZgp9Cgp9CgoKCnd3Zj1yZXRpb1tNYXRoLmZsb29yKHJldGlvLmxlbmd0aCpNYXRoLnJhbmRvbSgpKV07Cnd3Zz1yZXRpb1tNYXRoLmZsb29yKHJldGlvLmxlbmd0aCpNYXRoLnJhbmRvbSgpKV07CmJ3d2Y9d3dmLnRvU3RyaW5nKDIpOwpid3dnPXd3Zy50b1N0cmluZygyKTsKCgpid3djb209IiI7CmFid3djb209bmV3IEFycmF5KCk7CmZvcih5eT0wO3l5PGJ3d2YubGVuZ3RoO3l5KyspewphYnd3Y29tW3l5XT1id3dmLmNoYXJBdCh5eSk7Cn0KCmVlPU1hdGgucmFuZG9tKCkqLjQ0Owpmb3IobD1NYXRoLnJvdW5kKChid3dmLmxlbmd0aCouNSktZWUpO2w8TWF0aC5yb3VuZCgoYnd3Zi5sZW5ndGgqLjUpK2VlKTtsKyspewphYnd3Y29tW2xdPWJ3d2cuY2hhckF0KGwpOwp9CmZvcih5eT0wO3l5PGFid3djb20ubGVuZ3RoO3l5Kyspewpid3djb20rPSIiK2Fid3djb21beXldOwp9CgovL2xldCBtaWQgPSBNYXRoLmZsb29yKGJ3d2YubGVuZ3RoIC8gMik7CmNvbnNvbGUubG9nKHd3ZisiICIrd3dnKyIsIitwYXJzZUludChid3djb20sIDIpKTsKLy8gMi4gVGFrZSB0aGUgbGVmdCBwYXJ0IG9mIGJ3d2YgYW5kIHRoZSByaWdodCBwYXJ0IG9mIGJ3d2cKLy9sZXQgYnd3Y29tID0gYnd3Zi5zbGljZSgwLCAobWlkLTEpKSArIGJ3d2cuc2xpY2UobWlkKTsKCnJldHVybiBwYXJzZUludChid3djb20sIDIpOwogICAgLy8gRWxlbWVudGFyeSBDQTogOCBiaXRzIGZvciBydWxlIG51bWJlciAoMC0yNTUpCiAgICAvLyBHZW5lcmF0ZSB3aXRoIHBhdHRlcm5zIHRoYXQgYXZvaWQgdHJpdmlhbCBiZWhhdmlvcgogICAgLyoKICAgIGxldCBydWxlQml0cyA9ICIiOwogICAgbGV0IGF0dGVtcHRzID0gMDsKICAgIGNvbnN0IG1heEF0dGVtcHRzID0gMTAwOwogICAgCiAgICBkbyB7CiAgICAgICAgLy8gU3RhcnQgd2l0aCBhIHNlbWktcmFuZG9tIHBhdHRlcm4KICAgICAgICBydWxlQml0cyA9ICIiOwogICAgICAgIAogICAgICAgIC8vIFByZWZlciBydWxlcyB3aXRoIG1peGVkIHBhdHRlcm5zIChub3QgYWxsIDBzIG9yIDFzKQogICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBNYXRoLnBvdyhjZWxsU3RhdGVzLCBuZWlnaGJvcmhvb2QpOyBpKyspIHsKICAgICAgICAgICAgLy8gQmlhc2VkIHJhbmRvbSB0byBhdm9pZCB0cml2aWFsIHJ1bGVzCiAgICAgICAgICAgIGxldCByYW5kID0gTWF0aC5yYW5kb20oKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFJ1bGVzIDAgYW5kIDI1NSBhcmUgdHJpdmlhbCAoYWxsIGRlYWQvYWxsIGFsaXZlKQogICAgICAgICAgICAvLyBSdWxlcyBsaWtlIDkwLCAxMTAsIDMwLCA0NSBvZnRlbiBoYXZlIGNvbXBsZXggYmVoYXZpb3IKICAgICAgICAgICAgaWYocmFuZCA8IDAuMykgewogICAgICAgICAgICAgICAgcnVsZUJpdHMgKz0gIjAiOwogICAgICAgICAgICB9IGVsc2UgaWYocmFuZCA8IDAuNykgewogICAgICAgICAgICAgICAgcnVsZUJpdHMgKz0gIjEiOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gQWRkIHNvbWUgZGV0ZXJtaW5pc3RpYyBwYXR0ZXJucwogICAgICAgICAgICAgICAgcnVsZUJpdHMgKz0gKGkgJSAyKS50b1N0cmluZygpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGF0dGVtcHRzKys7CiAgICAgICAgCiAgICAgICAgLy8gQ2hlY2sgZm9yIHRyaXZpYWwgcnVsZXMKICAgICAgICBjb25zdCBydWxlTnVtID0gcGFyc2VJbnQocnVsZUJpdHMsIDIpOwogICAgICAgIGNvbnN0IGlzVHJpdmlhbCA9IHJ1bGVOdW0gPT09IDAgfHwgcnVsZU51bSA9PT0gMjU1OwogICAgICAgIGNvbnN0IGhhc1BhdHRlcm4gPSBydWxlQml0cy5pbmNsdWRlcygiMDEiKSAmJiBydWxlQml0cy5pbmNsdWRlcygiMTAiKTsKICAgICAgICAKICAgICAgICAvLyBLZWVwIGlmIG5vdCB0cml2aWFsIGFuZCBoYXMgdmFyaWF0aW9uCiAgICAgICAgaWYoIWlzVHJpdmlhbCAmJiBoYXNQYXR0ZXJuKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICAKICAgIH0gd2hpbGUoYXR0ZW1wdHMgPCBtYXhBdHRlbXB0cyk7CiAgICAKICAgIGNvbnN0IHJ1bGVOdW1iZXIgPSBwYXJzZUludChydWxlQml0cywgMik7CiAgICBjb25zb2xlLmxvZyhgUnVsZSAke3J1bGVOdW1iZXJ9OiAke3J1bGVCaXRzfWApOwogICAgcmV0dXJuIHJ1bGVOdW1iZXI7CgkKCSovCn0KCgovLyBGdW5jdGlvbiB0byBnZW5lcmF0ZSBwb3RlbnRpYWxseSBjb21wbGV4IENBIHJ1bGVzCmZ1bmN0aW9uIGdlbmVyYXRlQ29tcGxleFJ1bGJiYmUoY2VsbFN0YXRlcyA9IDIsIG5laWdoYm9yaG9vZCA9IDMpIHsKICAgIC8vIEVsZW1lbnRhcnkgQ0E6IDggYml0cyBmb3IgcnVsZSBudW1iZXIgKDAtMjU1KQogICAgLy8gR2VuZXJhdGUgd2l0aCBwYXR0ZXJucyB0aGF0IGF2b2lkIHRyaXZpYWwgYmVoYXZpb3IKICAgIAogICAgbGV0IHJ1bGVCaXRzID0gIiI7CiAgICBsZXQgYXR0ZW1wdHMgPSAwOwogICAgY29uc3QgbWF4QXR0ZW1wdHMgPSAxMDA7CiAgICAKICAgIGRvIHsKICAgICAgICAvLyBTdGFydCB3aXRoIGEgc2VtaS1yYW5kb20gcGF0dGVybgogICAgICAgIHJ1bGVCaXRzID0gIiI7CiAgICAgICAgCiAgICAgICAgLy8gUHJlZmVyIHJ1bGVzIHdpdGggbWl4ZWQgcGF0dGVybnMgKG5vdCBhbGwgMHMgb3IgMXMpCiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IE1hdGgucG93KGNlbGxTdGF0ZXMsIG5laWdoYm9yaG9vZCk7IGkrKykgewogICAgICAgICAgICAvLyBCaWFzZWQgcmFuZG9tIHRvIGF2b2lkIHRyaXZpYWwgcnVsZXMKICAgICAgICAgICAgbGV0IHJhbmQgPSBNYXRoLnJhbmRvbSgpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gUnVsZXMgMCBhbmQgMjU1IGFyZSB0cml2aWFsIChhbGwgZGVhZC9hbGwgYWxpdmUpCiAgICAgICAgICAgIC8vIFJ1bGVzIGxpa2UgOTAsIDExMCwgMzAsIDQ1IG9mdGVuIGhhdmUgY29tcGxleCBiZWhhdmlvcgogICAgICAgICAgICBpZihyYW5kIDwgMC4zKSB7CiAgICAgICAgICAgICAgICBydWxlQml0cyArPSAiMCI7CiAgICAgICAgICAgIH0gZWxzZSBpZihyYW5kIDwgMC43KSB7CiAgICAgICAgICAgICAgICBydWxlQml0cyArPSAiMSI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBBZGQgc29tZSBkZXRlcm1pbmlzdGljIHBhdHRlcm5zCiAgICAgICAgICAgICAgICBydWxlQml0cyArPSAoaSAlIDIpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgYXR0ZW1wdHMrKzsKICAgICAgICAKICAgICAgICAvLyBDaGVjayBmb3IgdHJpdmlhbCBydWxlcwogICAgICAgIGNvbnN0IHJ1bGVOdW0gPSBwYXJzZUludChydWxlQml0cywgMik7CiAgICAgICAgY29uc3QgaXNUcml2aWFsID0gcnVsZU51bSA9PT0gMCB8fCBydWxlTnVtID09PSAyNTU7CiAgICAgICAgY29uc3QgaGFzUGF0dGVybiA9IHJ1bGVCaXRzLmluY2x1ZGVzKCIwMSIpICYmIHJ1bGVCaXRzLmluY2x1ZGVzKCIxMCIpOwogICAgICAgIAogICAgICAgIC8vIEtlZXAgaWYgbm90IHRyaXZpYWwgYW5kIGhhcyB2YXJpYXRpb24KICAgICAgICBpZighaXNUcml2aWFsICYmIGhhc1BhdHRlcm4pIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIAogICAgfSB3aGlsZShhdHRlbXB0cyA8IG1heEF0dGVtcHRzKTsKICAgIAogICAgY29uc3QgcnVsZU51bWJlciA9IHBhcnNlSW50KHJ1bGVCaXRzLCAyKTsKICAgIGNvbnNvbGUubG9nKGBSdWxlICR7cnVsZU51bWJlcn06ICR7cnVsZUJpdHN9YCk7CiAgICByZXR1cm4gcnVsZU51bWJlcjsKfQoKbmV4dE5yKCk7Ci8vY29uc29sZS5sb2coKTsKCjwvc2NyaXB0PgoKCiAgICA8IS0tIFRoZSBtYWluIGNhbnZhcyB3aGVyZSBhbGwgYW5pbWF0aW9ucyB3aWxsIGJlIGRyYXduIC0tPgogCgogICAgPHNjcmlwdD4KCgppbnA9Jyc7Cgp2YXIgaW1nZ2w9aW5wLnNwbGl0KCI8YnI+Iik7CmlucD0iIjsKICAgICAgICAvLyAtLS0gTW9jayBnZXRSYW5kb20oKSBmdW5jdGlvbiBmb3Igc3RhbmRhbG9uZSB0ZXN0aW5nIC0tLQogICAgICAgIC8vIElmIHdpbmRvdy5wYXJlbnQuZ2V0UmFuZG9tIGFscmVhZHkgZXhpc3RzLCB0aGlzIG1vY2sgd2lsbCBiZSBza2lwcGVkLgogICAgIAogICAgICAgICAgIGZ1bmN0aW9uIGdldFJhbmRvbSgpewoJCSAgIAogICAgICAgICAgICAgICByZXR1cm4gZG9vZVN0UnVsZU5ybk5yKCk7IC8vImRhdGE6aW1hZ2UvanBlZztiYXNlNjQsIitpbWdnbFtNYXRoLmZsb29yKGltZ2dsLmxlbmd0aCpNYXRoLnJhbmRvbSgpKV07CgogICAgICAgIH0KCiAgICAgICAgLy8gLS0tIFV0aWxpdHkgZnVuY3Rpb25zIC0tLQoKICAgICAgICAvLyBMb2FkcyBhbiBpbWFnZSBhbmQgcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBJbWFnZSBvYmplY3QKICAgICAgICBmdW5jdGlvbiBsb2FkSW1hZ2UodXJsKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTsKICAgICAgICAgICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKGltZyk7CiAgICAgICAgICAgICAgICBpbWcub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIGltYWdlOiAke3VybH1gKSk7CiAgICAgICAgICAgICAgICBpbWcuc3JjID0gdXJsOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8vIEdldHMgdGhlIG1haW4gZnVsbC1zY3JlZW4gY2FudmFzIGFuZCBpdHMgMkQgY29udGV4dAogICAgICAgIGZ1bmN0aW9uIGdldEZ1bGxTY3JlZW5DYW52YXMoaWQpIHsKICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOwogICAgICAgICAgICBpZiAoIWNhbnZhcykgewogICAgICAgICAgICAgICAgLy8gSWYgZm9yIHNvbWUgcmVhc29uIHRoZSBjYW52YXMgaXMgbm90IGluIEhUTUwsIGNyZWF0ZSBpdCBkeW5hbWljYWxseQogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBDYW52YXMgd2l0aCBJRCAnJHtpZH0nIG5vdCBmb3VuZCBpbiBIVE1MLCBjcmVhdGluZyBkeW5hbWljYWxseS5gKTsKICAgICAgICAgICAgICAgIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICAgICAgICAgICAgY2FudmFzLmlkID0gaWQ7CiAgICAgICAgICAgICAgICBjYW52YXMuc3R5bGUud2lkdGggPSAnMTAwJSc7CiAgICAgICAgICAgICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIEVuc3VyZSBjYW52YXMgZGltZW5zaW9ucyBtYXRjaCBhY3R1YWwgdmlld3BvcnQgZm9yIGRyYXdpbmcgcmVzb2x1dGlvbgogICAgICAgICAgICBjYW52YXMud2lkdGggPTUxMjsKICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IDUxMjsKICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgIHJldHVybiB7IGNhbnZhcywgY3R4IH07CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0gQW5pbWF0aW9uIE9yY2hlc3RyYXRpb24gLS0tCgogICAgICAgIGNvbnN0IGFuaW1hdGlvblN0YWdlcyA9IFtdOyAvLyBBcnJheSB0byBob2xkIGFsbCBvdXIgdW5pcXVlIGFuaW1hdGlvbiBmdW5jdGlvbnMKICAgICAgICBsZXQgY3VycmVudEFuaW1hdGlvbkluZGV4ID0gMDsKICAgICAgICBsZXQgY3VycmVudEltYWdlID0gbnVsbDsgLy8gU3RvcmVzIHRoZSBpbWFnZSBmcm9tIHRoZSBwcmV2aW91cyBsb29wJ3MgZW5kCgogICAgICAgIC8vIE1haW4gYW5pbWF0aW9uIGxvb3AgY29udHJvbGxlcgogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHN0YXJ0QW5pbWF0aW9uTG9vcCgpIHsKICAgICAgICAgICAgY29uc3QgeyBjYW52YXMsIGN0eCB9ID0gZ2V0RnVsbFNjcmVlbkNhbnZhcygnbWFpbkFuaW1hdGlvbkNhbnZhcycpOwoKICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBjdXJyZW50SW1hZ2UgaWYgaXQncyB0aGUgdmVyeSBmaXJzdCBsb29wCiAgICAgICAgICAgIGlmICghY3VycmVudEltYWdlKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJbWFnZSA9IGF3YWl0IGxvYWRJbWFnZShnZXRSYW5kb20oKSk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkluaXRpYWwgaW1hZ2UgbG9hZCBmYWlsZWQ6IiwgZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIGEgcGxhY2Vob2xkZXIgb3Igc3RvcAogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gR2V0IHRoZSBVUkwgZm9yIHRoZSBuZXh0IGltYWdlIGFuZCBsb2FkIGl0CiAgICAgICAgICAgIGNvbnN0IG5leHRJbWFnZVVybCA9IGdldFJhbmRvbSgpOwogICAgICAgICAgICBsZXQgbmV4dEltYWdlOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbmV4dEltYWdlID0gYXdhaXQgbG9hZEltYWdlKG5leHRJbWFnZVVybCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBMb2FkaW5nIG5leHQgaW1hZ2UgKCR7bmV4dEltYWdlVXJsfSkgZmFpbGVkOmAsIGVycm9yKTsKICAgICAgICAgICAgICAgIC8vIElmIG5leHQgaW1hZ2UgZmFpbHMsIHVzZSB0aGUgY3VycmVudCBpbWFnZSBmb3IgdGhlIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgbG9vcCBkb2Vzbid0IGJyZWFrLgogICAgICAgICAgICAgICAgbmV4dEltYWdlID0gY3VycmVudEltYWdlOwogICAgICAgICAgICB9CgoKICAgICAgICAgICAgY29uc3QgYW5pbWF0ZSA9IGFuaW1hdGlvblN0YWdlc1tjdXJyZW50QW5pbWF0aW9uSW5kZXhdOwogICAgICAgICAgICBjb25zb2xlLmxvZyhgU3RhcnRpbmcgYW5pbWF0aW9uICR7Y3VycmVudEFuaW1hdGlvbkluZGV4ICsgMX0vJHthbmltYXRpb25TdGFnZXMubGVuZ3RofTogJHthbmltYXRlLm5hbWV9YCk7CgogICAgICAgICAgICAvLyBFeGVjdXRlIHRoZSBjdXJyZW50IGFuaW1hdGlvbiBhbmQgYXdhaXQgaXRzIGNvbXBsZXRpb24KICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgICAgICAgICBhbmltYXRlKGN1cnJlbnRJbWFnZSwgbmV4dEltYWdlLCBjYW52YXMsIGN0eCwgcmVzb2x2ZSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY29uc29sZS5sb2coYEFuaW1hdGlvbiAke2N1cnJlbnRBbmltYXRpb25JbmRleCArIDF9IGZpbmlzaGVkLCB3YWl0aW5nIDNzLi4uYCk7CiAgICAgICAgICAgIC8vIFdhaXQgZm9yIDMgc2Vjb25kcyBiZWZvcmUgcHJvY2VlZGluZyB0byB0aGUgbmV4dCBhbmltYXRpb24gc3RhZ2UKICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDMwMDApKTsKCiAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIHRoZSBuZXh0IGxvb3A6IHRoZSAnbmV4dEltYWdlJyBiZWNvbWVzIHRoZSAnY3VycmVudEltYWdlJwogICAgICAgICAgICBjdXJyZW50SW1hZ2UgPSBuZXh0SW1hZ2U7CiAgICAgICAgICAgIC8vIE1vdmUgdG8gdGhlIG5leHQgYW5pbWF0aW9uIGluIHRoZSBzZXF1ZW5jZSwgbG9vcGluZyBiYWNrIHRvIHRoZSBzdGFydCBpZiBuZWVkZWQKICAgICAgICAgICAgY3VycmVudEFuaW1hdGlvbkluZGV4ID0gKGN1cnJlbnRBbmltYXRpb25JbmRleCArIDEpICUgYW5pbWF0aW9uU3RhZ2VzLmxlbmd0aDsKICAgICAgICAgICAgc3RhcnRBbmltYXRpb25Mb29wKCk7IC8vIENhbGwgaXRzZWxmIHRvIHJ1biBpbmRlZmluaXRlbHkKICAgICAgICB9CgkJCgkJCgkJCgkJCgkJYW5pbWF0aW9uU3RhZ2VzLnB1c2goZnVuY3Rpb24gYW5pbWF0aW9uX1BsYW5ldGFyeU9yYml0VHJhbnNpdGlvbihjdXJyZW50SW1nLCBuZXh0SW1nLCBjYW52YXMsIGN0eCwgcmVzb2x2ZSkgewogICAgY29uc3QgdG90YWxTdGVwcyA9IDkwOwogICAgbGV0IHN0ZXAgPSAwOwogICAgY29uc3QgcGxhbmV0Q291bnQgPSA1OwogICAgY29uc3QgcGxhbmV0cyA9IFtdOwogICAgY29uc3Qgc3RhcnMgPSBbXTsKICAgIAogICAgLy8gQ3JlYXRlIHBsYW5ldHMKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGxhbmV0Q291bnQ7IGkrKykgewogICAgICAgIGNvbnN0IGFuZ2xlID0gKGkgLyBwbGFuZXRDb3VudCkgKiBNYXRoLlBJICogMjsKICAgICAgICBjb25zdCBkaXN0YW5jZSA9IDE1MCArIE1hdGgucmFuZG9tKCkgKiAyMDA7CiAgICAgICAgY29uc3Qgc2l6ZSA9IDIwICsgTWF0aC5yYW5kb20oKSAqIDQwOwogICAgICAgIAogICAgICAgIHBsYW5ldHMucHVzaCh7CiAgICAgICAgICAgIG9yYml0Q2VudGVyWDogY2FudmFzLndpZHRoLzIsCiAgICAgICAgICAgIG9yYml0Q2VudGVyWTogY2FudmFzLmhlaWdodC8yLAogICAgICAgICAgICBvcmJpdFJhZGl1czogZGlzdGFuY2UsCiAgICAgICAgICAgIGFuZ2xlOiBhbmdsZSwKICAgICAgICAgICAgc3BlZWQ6IDAuMDEgKyBNYXRoLnJhbmRvbSgpICogMC4wMiwKICAgICAgICAgICAgc2l6ZTogc2l6ZSwKICAgICAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgICAgIHJvdGF0aW9uU3BlZWQ6IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDAuMDIsCiAgICAgICAgICAgIGltYWdlOiBNYXRoLnJhbmRvbSgpID4gMC41ID8gY3VycmVudEltZyA6IG5leHRJbWcsCiAgICAgICAgICAgIHJpbmdzOiBNYXRoLnJhbmRvbSgpID4gMC43LAogICAgICAgICAgICByaW5nU2l6ZTogc2l6ZSAqIDIsCiAgICAgICAgICAgIHJpbmdBbmdsZTogTWF0aC5yYW5kb20oKSAqIE1hdGguUEksCiAgICAgICAgICAgIGF0bW9zcGhlcmU6IE1hdGgucmFuZG9tKCkgPiAwLjUsCiAgICAgICAgICAgIGF0bW9zcGhlcmVTaXplOiBzaXplICogMS4yCiAgICAgICAgfSk7CiAgICB9CiAgICAKICAgIC8vIENyZWF0ZSBzdGFycwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyMDA7IGkrKykgewogICAgICAgIHN0YXJzLnB1c2goewogICAgICAgICAgICB4OiBNYXRoLnJhbmRvbSgpICogY2FudmFzLndpZHRoLAogICAgICAgICAgICB5OiBNYXRoLnJhbmRvbSgpICogY2FudmFzLmhlaWdodCwKICAgICAgICAgICAgc2l6ZTogTWF0aC5yYW5kb20oKSAqIDIsCiAgICAgICAgICAgIGJyaWdodG5lc3M6IDAuMyArIE1hdGgucmFuZG9tKCkgKiAwLjcsCiAgICAgICAgICAgIHR3aW5rbGVTcGVlZDogTWF0aC5yYW5kb20oKSAqIDAuMQogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGRyYXdGcmFtZSgpIHsKICAgICAgICBpZiAoc3RlcCA+IHRvdGFsU3RlcHMpIHsKICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICBjdHguZHJhd0ltYWdlKG5leHRJbWcsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgIGNvbnN0IHByb2dyZXNzID0gc3RlcCAvIHRvdGFsU3RlcHM7CiAgICAgICAgY29uc3QgdGltZSA9IHN0ZXAgKiAwLjAzOwogICAgICAgIAogICAgICAgIC8vIERyYXcgc3RhcmZpZWxkIGJhY2tncm91bmQKICAgICAgICBzdGFycy5mb3JFYWNoKHN0YXIgPT4gewogICAgICAgICAgICBjb25zdCB0d2lua2xlID0gTWF0aC5zaW4odGltZSAqIHN0YXIudHdpbmtsZVNwZWVkKSAqIDAuNSArIDAuNTsKICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gc3Rhci5icmlnaHRuZXNzICogdHdpbmtsZSAqIHByb2dyZXNzOwogICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmZmZmYnOwogICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgIGN0eC5hcmMoc3Rhci54LCBzdGFyLnksIHN0YXIuc2l6ZSwgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQWRkIHN0YXIgZ2xvdwogICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBzdGFyLmJyaWdodG5lc3MgKiB0d2lua2xlICogMC4zICogcHJvZ3Jlc3M7CiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgY3R4LmFyYyhzdGFyLngsIHN0YXIueSwgc3Rhci5zaXplICogMywgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIC8vIERyYXcgbmVidWxhIGJhY2tncm91bmQKICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuMyAqIHByb2dyZXNzOwogICAgICAgIGNvbnN0IG5lYnVsYUdyYWRpZW50ID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KAogICAgICAgICAgICBjYW52YXMud2lkdGgvMiwgY2FudmFzLmhlaWdodC8yLCAwLAogICAgICAgICAgICBjYW52YXMud2lkdGgvMiwgY2FudmFzLmhlaWdodC8yLCBjYW52YXMud2lkdGgvMgogICAgICAgICk7CiAgICAgICAgbmVidWxhR3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsICdyZ2JhKDEwMCwgNTAsIDE1MCwgMC41KScpOwogICAgICAgIG5lYnVsYUdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjUsICdyZ2JhKDUwLCAxMDAsIDE1MCwgMC4zKScpOwogICAgICAgIG5lYnVsYUdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCAncmdiYSgwLCAwLCAwLCAwKScpOwogICAgICAgIAogICAgICAgIGN0eC5maWxsU3R5bGUgPSBuZWJ1bGFHcmFkaWVudDsKICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgY3R4LmFyYyhjYW52YXMud2lkdGgvMiwgY2FudmFzLmhlaWdodC8yLCBjYW52YXMud2lkdGgvMiwgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICAKICAgICAgICAvLyBVcGRhdGUgYW5kIGRyYXcgcGxhbmV0cwogICAgICAgIHBsYW5ldHMuZm9yRWFjaChwbGFuZXQgPT4gewogICAgICAgICAgICAvLyBVcGRhdGUgb3JiaXQKICAgICAgICAgICAgcGxhbmV0LmFuZ2xlICs9IHBsYW5ldC5zcGVlZDsKICAgICAgICAgICAgcGxhbmV0LnJvdGF0aW9uICs9IHBsYW5ldC5yb3RhdGlvblNwZWVkOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgeCA9IHBsYW5ldC5vcmJpdENlbnRlclggKyBNYXRoLmNvcyhwbGFuZXQuYW5nbGUpICogcGxhbmV0Lm9yYml0UmFkaXVzOwogICAgICAgICAgICBjb25zdCB5ID0gcGxhbmV0Lm9yYml0Q2VudGVyWSArIE1hdGguc2luKHBsYW5ldC5hbmdsZSkgKiBwbGFuZXQub3JiaXRSYWRpdXM7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBEcmF3IHBsYW5ldCBvcmJpdCBwYXRoCiAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuMSAqIHByb2dyZXNzOwogICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzQ0ODhmZic7CiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAxOwogICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgIGN0eC5hcmMocGxhbmV0Lm9yYml0Q2VudGVyWCwgcGxhbmV0Lm9yYml0Q2VudGVyWSwgcGxhbmV0Lm9yYml0UmFkaXVzLCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIERyYXcgcGxhbmV0CiAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoeCwgeSk7CiAgICAgICAgICAgIGN0eC5yb3RhdGUocGxhbmV0LnJvdGF0aW9uKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIENyZWF0ZSBwbGFuZXQgY2xpcHBpbmcgbWFzawogICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgIGN0eC5hcmMoMCwgMCwgcGxhbmV0LnNpemUsIDAsIE1hdGguUEkgKiAyKTsKICAgICAgICAgICAgY3R4LmNsaXAoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIERyYXcgaW1hZ2Ugb24gcGxhbmV0CiAgICAgICAgICAgIGNvbnN0IGltZ1Byb2dyZXNzID0gKHBsYW5ldC5pbWFnZSA9PT0gY3VycmVudEltZykgPyAoMSAtIHByb2dyZXNzKSA6IHByb2dyZXNzOwogICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBpbWdQcm9ncmVzczsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBzb3VyY2UgcmVjdGFuZ2xlIGZyb20gaW1hZ2UKICAgICAgICAgICAgY29uc3Qgc3JjU2l6ZSA9IE1hdGgubWluKGN1cnJlbnRJbWcud2lkdGgsIGN1cnJlbnRJbWcuaGVpZ2h0KSAqIDAuMzsKICAgICAgICAgICAgY29uc3Qgc3JjWCA9ICh4IC8gY2FudmFzLndpZHRoKSAqIGN1cnJlbnRJbWcud2lkdGggLSBzcmNTaXplLzI7CiAgICAgICAgICAgIGNvbnN0IHNyY1kgPSAoeSAvIGNhbnZhcy5oZWlnaHQpICogY3VycmVudEltZy5oZWlnaHQgLSBzcmNTaXplLzI7CiAgICAgICAgICAgIAogICAgICAgICAgICBjdHguZHJhd0ltYWdlKAogICAgICAgICAgICAgICAgcGxhbmV0LmltYWdlLAogICAgICAgICAgICAgICAgTWF0aC5tYXgoMCwgTWF0aC5taW4oc3JjWCwgcGxhbmV0LmltYWdlLndpZHRoIC0gc3JjU2l6ZSkpLAogICAgICAgICAgICAgICAgTWF0aC5tYXgoMCwgTWF0aC5taW4oc3JjWSwgcGxhbmV0LmltYWdlLmhlaWdodCAtIHNyY1NpemUpKSwKICAgICAgICAgICAgICAgIHNyY1NpemUsIHNyY1NpemUsCiAgICAgICAgICAgICAgICAtcGxhbmV0LnNpemUsIC1wbGFuZXQuc2l6ZSwgcGxhbmV0LnNpemUgKiAyLCBwbGFuZXQuc2l6ZSAqIDIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIERyYXcgcGxhbmV0IGF0bW9zcGhlcmUKICAgICAgICAgICAgaWYgKHBsYW5ldC5hdG1vc3BoZXJlKSB7CiAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjMgKiBpbWdQcm9ncmVzczsKICAgICAgICAgICAgICAgIGNvbnN0IGF0bW9zcGhlcmVHcmFkaWVudCA9IGN0eC5jcmVhdGVSYWRpYWxHcmFkaWVudCgwLCAwLCBwbGFuZXQuc2l6ZSwgMCwgMCwgcGxhbmV0LmF0bW9zcGhlcmVTaXplKTsKICAgICAgICAgICAgICAgIGF0bW9zcGhlcmVHcmFkaWVudC5hZGRDb2xvclN0b3AoMCwgJ3JnYmEoMTAwLCAxNTAsIDI1NSwgMC41KScpOwogICAgICAgICAgICAgICAgYXRtb3NwaGVyZUdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCAncmdiYSgxMDAsIDE1MCwgMjU1LCAwKScpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYXRtb3NwaGVyZUdyYWRpZW50OwogICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgY3R4LmFyYygwLCAwLCBwbGFuZXQuYXRtb3NwaGVyZVNpemUsIDAsIE1hdGguUEkgKiAyKTsKICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIERyYXcgcGxhbmV0IHJpbmdzCiAgICAgICAgICAgIGlmIChwbGFuZXQucmluZ3MpIHsKICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICBjdHgucm90YXRlKHBsYW5ldC5yaW5nQW5nbGUpOwogICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC43ICogaW1nUHJvZ3Jlc3M7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnN0IHJpbmdHcmFkaWVudCA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgtcGxhbmV0LnJpbmdTaXplLzIsIDAsIHBsYW5ldC5yaW5nU2l6ZS8yLCAwKTsKICAgICAgICAgICAgICAgIHJpbmdHcmFkaWVudC5hZGRDb2xvclN0b3AoMCwgJ3JnYmEoMjAwLCAyMDAsIDE1MCwgMC44KScpOwogICAgICAgICAgICAgICAgcmluZ0dyYWRpZW50LmFkZENvbG9yU3RvcCgwLjUsICdyZ2JhKDI1NSwgMjU1LCAyMDAsIDAuOSknKTsKICAgICAgICAgICAgICAgIHJpbmdHcmFkaWVudC5hZGRDb2xvclN0b3AoMSwgJ3JnYmEoMjAwLCAyMDAsIDE1MCwgMC44KScpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gcmluZ0dyYWRpZW50OwogICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgY3R4LmVsbGlwc2UoMCwgMCwgcGxhbmV0LnJpbmdTaXplLzIsIHBsYW5ldC5yaW5nU2l6ZS84LCAwLCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBBZGQgcmluZyBzaGFkb3cgb24gcGxhbmV0CiAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjM7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwgMCwgMCwgMC41KSc7CiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICBjdHguZWxsaXBzZSgwLCAwLCBwbGFuZXQuc2l6ZSwgcGxhbmV0LnNpemUvNCwgMCwgMCwgTWF0aC5QSSk7CiAgICAgICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIERyYXcgcGxhbmV0IHRyYWlsCiAgICAgICAgICAgIGNvbnN0IHRyYWlsTGVuZ3RoID0gMTA7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJhaWxMZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgdHJhaWxQcm9ncmVzcyA9IGkgLyB0cmFpbExlbmd0aDsKICAgICAgICAgICAgICAgIGNvbnN0IHRyYWlsQW5nbGUgPSBwbGFuZXQuYW5nbGUgLSB0cmFpbFByb2dyZXNzICogMC4xOwogICAgICAgICAgICAgICAgY29uc3QgdHJhaWxYID0gcGxhbmV0Lm9yYml0Q2VudGVyWCArIE1hdGguY29zKHRyYWlsQW5nbGUpICogcGxhbmV0Lm9yYml0UmFkaXVzOwogICAgICAgICAgICAgICAgY29uc3QgdHJhaWxZID0gcGxhbmV0Lm9yYml0Q2VudGVyWSArIE1hdGguc2luKHRyYWlsQW5nbGUpICogcGxhbmV0Lm9yYml0UmFkaXVzOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gKDEgLSB0cmFpbFByb2dyZXNzKSAqIDAuMiAqIHByb2dyZXNzOwogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjODhhYWZmJzsKICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGN0eC5hcmModHJhaWxYLCB0cmFpbFksIHBsYW5ldC5zaXplICogKDEgLSB0cmFpbFByb2dyZXNzKSAqIDAuMywgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICAKICAgICAgICAvLyBEcmF3IGNlbnRyYWwgc3VuIHdpdGggaW1hZ2UgdHJhbnNpdGlvbgogICAgICAgIGNvbnN0IHN1blNpemUgPSA2MCArIE1hdGguc2luKHRpbWUpICogMTA7CiAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICBjdHgudHJhbnNsYXRlKGNhbnZhcy53aWR0aC8yLCBjYW52YXMuaGVpZ2h0LzIpOwogICAgICAgIAogICAgICAgIC8vIERyYXcgc3VuIGNvcm9uYQogICAgICAgIGNvbnN0IGNvcm9uYUdyYWRpZW50ID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KDAsIDAsIHN1blNpemUgKiAwLjcsIDAsIDAsIHN1blNpemUgKiAyKTsKICAgICAgICBjb3JvbmFHcmFkaWVudC5hZGRDb2xvclN0b3AoMCwgJ3JnYmEoMjU1LCAyMDAsIDEwMCwgMC44KScpOwogICAgICAgIGNvcm9uYUdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCAncmdiYSgyNTUsIDEwMCwgNTAsIDApJyk7CiAgICAgICAgCiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gcHJvZ3Jlc3M7CiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvcm9uYUdyYWRpZW50OwogICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICBjdHguYXJjKDAsIDAsIHN1blNpemUgKiAyLCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAKICAgICAgICAvLyBEcmF3IHN1biB3aXRoIGltYWdlCiAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgIGN0eC5hcmMoMCwgMCwgc3VuU2l6ZSwgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgIGN0eC5jbGlwKCk7CiAgICAgICAgCiAgICAgICAgLy8gQmxlbmQgY3VycmVudCBhbmQgbmV4dCBpbWFnZXMgaW4gc3VuCiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMSAtIHByb2dyZXNzOwogICAgICAgIGN0eC5kcmF3SW1hZ2UoY3VycmVudEltZywgCiAgICAgICAgICAgIC1jYW52YXMud2lkdGgvMiwgLWNhbnZhcy5oZWlnaHQvMiwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAKICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBwcm9ncmVzczsKICAgICAgICBjdHguZHJhd0ltYWdlKG5leHRJbWcsIAogICAgICAgICAgICAtY2FudmFzLndpZHRoLzIsIC1jYW52YXMuaGVpZ2h0LzIsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgCiAgICAgICAgLy8gRHJhdyBzdW4gc3VyZmFjZSBkZXRhaWwKICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjM7CiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwgMTAwLCAwLCAwLjUpJzsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDIwOyBpKyspIHsKICAgICAgICAgICAgY29uc3QgYW5nbGUgPSBNYXRoLnJhbmRvbSgpICogTWF0aC5QSSAqIDI7CiAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLnJhbmRvbSgpICogc3VuU2l6ZTsKICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IDIgKyBNYXRoLnJhbmRvbSgpICogNTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgY3R4LmFyYygKICAgICAgICAgICAgICAgIE1hdGguY29zKGFuZ2xlKSAqIGRpc3QsCiAgICAgICAgICAgICAgICBNYXRoLnNpbihhbmdsZSkgKiBkaXN0LAogICAgICAgICAgICAgICAgc2l6ZSwgMCwgTWF0aC5QSSAqIDIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICB9CiAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICAKICAgICAgICAvLyBEcmF3IHNob290aW5nIHN0YXJzIG9jY2FzaW9uYWxseQogICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4wNSAqIHByb2dyZXNzKSB7CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0WCA9IE1hdGgucmFuZG9tKCkgKiBjYW52YXMud2lkdGg7CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0WSA9IDA7CiAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5QSS80ICsgKE1hdGgucmFuZG9tKCkgLSAwLjUpICogTWF0aC5QSS82OwogICAgICAgICAgICBjb25zdCBsZW5ndGggPSAxMDAgKyBNYXRoLnJhbmRvbSgpICogMTAwOwogICAgICAgICAgICAKICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNmZmZmZmYnOwogICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMjsKICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC44OwogICAgICAgICAgICAKICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICBjdHgubW92ZVRvKHN0YXJ0WCwgc3RhcnRZKTsKICAgICAgICAgICAgY3R4LmxpbmVUbygKICAgICAgICAgICAgICAgIHN0YXJ0WCArIE1hdGguY29zKGFuZ2xlKSAqIGxlbmd0aCwKICAgICAgICAgICAgICAgIHN0YXJ0WSArIE1hdGguc2luKGFuZ2xlKSAqIGxlbmd0aAogICAgICAgICAgICApOwogICAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBBZGQgZ2xvdwogICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMTsKICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC4zOwogICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzg4YWFmZic7CiAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICB9CgogICAgICAgIHN0ZXArKzsKICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhd0ZyYW1lKTsKICAgIH0KICAgIGRyYXdGcmFtZSgpOwp9KTsKCQkKCQkKCQkKCQkKYW5pbWF0aW9uU3RhZ2VzLnB1c2goZnVuY3Rpb24gYW5pbWF0aW9uX05ldXJhbE5ldHdvcmtBY3RpdmF0aW9uKGN1cnJlbnRJbWcsIG5leHRJbWcsIGNhbnZhcywgY3R4LCByZXNvbHZlKSB7CiAgICBjb25zdCB0b3RhbFN0ZXBzID0gNzU7CiAgICBsZXQgc3RlcCA9IDA7CiAgICBjb25zdCBsYXllckNvdW50ID0gNDsKICAgIGNvbnN0IG5vZGVzUGVyTGF5ZXIgPSA4OwogICAgY29uc3Qgbm9kZXMgPSBbXTsKICAgIGNvbnN0IGNvbm5lY3Rpb25zID0gW107CiAgICAKICAgIC8vIENyZWF0ZSBuZXVyYWwgbmV0d29yayBub2RlcwogICAgZm9yIChsZXQgbGF5ZXIgPSAwOyBsYXllciA8IGxheWVyQ291bnQ7IGxheWVyKyspIHsKICAgICAgICBjb25zdCBsYXllck5vZGVzID0gW107CiAgICAgICAgY29uc3QgbGF5ZXJYID0gKGxheWVyICsgMSkgKiAoY2FudmFzLndpZHRoIC8gKGxheWVyQ291bnQgKyAxKSk7CiAgICAgICAgCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlc1BlckxheWVyOyBpKyspIHsKICAgICAgICAgICAgY29uc3Qgbm9kZVkgPSAoaSArIDEpICogKGNhbnZhcy5oZWlnaHQgLyAobm9kZXNQZXJMYXllciArIDEpKTsKICAgICAgICAgICAgY29uc3QgYWN0aXZhdGlvbiA9IE1hdGgucmFuZG9tKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBsYXllck5vZGVzLnB1c2goewogICAgICAgICAgICAgICAgeDogbGF5ZXJYLAogICAgICAgICAgICAgICAgeTogbm9kZVkgKyAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiA1MCwKICAgICAgICAgICAgICAgIHJhZGl1czogMTUsCiAgICAgICAgICAgICAgICBhY3RpdmF0aW9uOiBhY3RpdmF0aW9uLAogICAgICAgICAgICAgICAgdGFyZ2V0QWN0aXZhdGlvbjogTWF0aC5yYW5kb20oKSwKICAgICAgICAgICAgICAgIHB1bHNlOiAwLAogICAgICAgICAgICAgICAgbGF5ZXI6IGxheWVyLAogICAgICAgICAgICAgICAgaW5kZXg6IGkKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIG5vZGVzLnB1c2goLi4ubGF5ZXJOb2Rlcyk7CiAgICB9CiAgICAKICAgIC8vIENyZWF0ZSBjb25uZWN0aW9ucyBiZXR3ZWVuIGxheWVycwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbm9kZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgaWYgKG5vZGVzW2pdLmxheWVyID09PSBub2Rlc1tpXS5sYXllciArIDEgJiYgTWF0aC5yYW5kb20oKSA+IDAuNykgewogICAgICAgICAgICAgICAgY29ubmVjdGlvbnMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgZnJvbTogaSwKICAgICAgICAgICAgICAgICAgICB0bzogaiwKICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IE1hdGgucmFuZG9tKCksCiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiBmYWxzZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZHJhd0ZyYW1lKCkgewogICAgICAgIGlmIChzdGVwID4gdG90YWxTdGVwcykgewogICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UobmV4dEltZywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBzdGVwIC8gdG90YWxTdGVwczsKICAgICAgICBjb25zdCB0aW1lID0gc3RlcCAqIDAuMTsKICAgICAgICAKICAgICAgICAvLyBVcGRhdGUgbm9kZSBhY3RpdmF0aW9ucwogICAgICAgIG5vZGVzLmZvckVhY2gobm9kZSA9PiB7CiAgICAgICAgICAgIG5vZGUucHVsc2UgPSBNYXRoLnNpbih0aW1lICsgbm9kZS54ICogMC4wMSArIG5vZGUueSAqIDAuMDEpICogMC41ICsgMC41OwogICAgICAgICAgICBub2RlLmFjdGl2YXRpb24gKz0gKG5vZGUudGFyZ2V0QWN0aXZhdGlvbiAtIG5vZGUuYWN0aXZhdGlvbikgKiAwLjE7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBNYWtlIG5vZGVzIG1vdmUgc2xpZ2h0bHkKICAgICAgICAgICAgbm9kZS54ICs9IE1hdGguY29zKHRpbWUgKyBub2RlLmluZGV4KSAqIDAuNTsKICAgICAgICAgICAgbm9kZS55ICs9IE1hdGguc2luKHRpbWUgKyBub2RlLmxheWVyKSAqIDAuNTsKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICAvLyBBY3RpdmF0ZSBjb25uZWN0aW9ucyBiYXNlZCBvbiBwcm9ncmVzcwogICAgICAgIGNvbm5lY3Rpb25zLmZvckVhY2goY29ubiA9PiB7CiAgICAgICAgICAgIGNvbm4uYWN0aXZlID0gTWF0aC5yYW5kb20oKSA8IHByb2dyZXNzOwogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIC8vIERyYXcgY29ubmVjdGlvbnMgZmlyc3QKICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuMzsKICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzAwYWFmZic7CiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICAgICAgCiAgICAgICAgY29ubmVjdGlvbnMuZm9yRWFjaChjb25uID0+IHsKICAgICAgICAgICAgaWYgKGNvbm4uYWN0aXZlKSB7CiAgICAgICAgICAgICAgICBjb25zdCBmcm9tTm9kZSA9IG5vZGVzW2Nvbm4uZnJvbV07CiAgICAgICAgICAgICAgICBjb25zdCB0b05vZGUgPSBub2Rlc1tjb25uLnRvXTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gRHJhdyBkYXRhIGZsb3cgYWxvbmcgY29ubmVjdGlvbgogICAgICAgICAgICAgICAgY29uc3QgZmxvd1Byb2dyZXNzID0gKHRpbWUgKiAyICsgY29ubi5mcm9tICsgY29ubi50bykgJSAxOwogICAgICAgICAgICAgICAgY29uc3QgZmxvd1ggPSBmcm9tTm9kZS54ICsgKHRvTm9kZS54IC0gZnJvbU5vZGUueCkgKiBmbG93UHJvZ3Jlc3M7CiAgICAgICAgICAgICAgICBjb25zdCBmbG93WSA9IGZyb21Ob2RlLnkgKyAodG9Ob2RlLnkgLSBmcm9tTm9kZS55KSAqIGZsb3dQcm9ncmVzczsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gRHJhdyBjb25uZWN0aW9uIGxpbmUKICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oZnJvbU5vZGUueCwgZnJvbU5vZGUueSk7CiAgICAgICAgICAgICAgICBjdHgubGluZVRvKHRvTm9kZS54LCB0b05vZGUueSk7CiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIERyYXcgZGF0YSBwYWNrZXQgZmxvd2luZwogICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmNTUwMCc7CiAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjg7CiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICBjdHguYXJjKGZsb3dYLCBmbG93WSwgMywgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgIAogICAgICAgIC8vIERyYXcgaW1hZ2UgZnJhZ21lbnRzIGF0IG5vZGUgcG9zaXRpb25zCiAgICAgICAgY29uc3QgZnJhZ21lbnRTaXplID0gODA7CiAgICAgICAgbm9kZXMuZm9yRWFjaChub2RlID0+IHsKICAgICAgICAgICAgY29uc3QgZnJhZ21lbnRQcm9ncmVzcyA9IG5vZGUuYWN0aXZhdGlvbiAqIHByb2dyZXNzOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHNvdXJjZSBwb3NpdGlvbiBpbiBpbWFnZQogICAgICAgICAgICBjb25zdCBzcmNYID0gKG5vZGUueCAvIGNhbnZhcy53aWR0aCkgKiBjdXJyZW50SW1nLndpZHRoIC0gZnJhZ21lbnRTaXplLzI7CiAgICAgICAgICAgIGNvbnN0IHNyY1kgPSAobm9kZS55IC8gY2FudmFzLmhlaWdodCkgKiBjdXJyZW50SW1nLmhlaWdodCAtIGZyYWdtZW50U2l6ZS8yOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gRHJhdyBjdXJyZW50IGltYWdlIGZyYWdtZW50CiAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9ICgxIC0gcHJvZ3Jlc3MpICogbm9kZS5hY3RpdmF0aW9uOwogICAgICAgICAgICBjdHgudHJhbnNsYXRlKG5vZGUueCwgbm9kZS55KTsKICAgICAgICAgICAgY3R4LnJvdGF0ZShub2RlLnB1bHNlICogMC4yKTsKICAgICAgICAgICAgY3R4LnNjYWxlKDAuOCArIG5vZGUucHVsc2UgKiAwLjQsIDAuOCArIG5vZGUucHVsc2UgKiAwLjQpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQ3JlYXRlIG5vZGUgY2xpcHBpbmcgbWFzawogICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgIGN0eC5hcmMoMCwgMCwgbm9kZS5yYWRpdXMgKiAoMSArIG5vZGUucHVsc2UgKiAwLjUpLCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgICAgIGN0eC5jbGlwKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBjdHguZHJhd0ltYWdlKAogICAgICAgICAgICAgICAgY3VycmVudEltZywKICAgICAgICAgICAgICAgIE1hdGgubWF4KDAsIE1hdGgubWluKHNyY1gsIGN1cnJlbnRJbWcud2lkdGggLSBmcmFnbWVudFNpemUpKSwKICAgICAgICAgICAgICAgIE1hdGgubWF4KDAsIE1hdGgubWluKHNyY1ksIGN1cnJlbnRJbWcuaGVpZ2h0IC0gZnJhZ21lbnRTaXplKSksCiAgICAgICAgICAgICAgICBmcmFnbWVudFNpemUsIGZyYWdtZW50U2l6ZSwKICAgICAgICAgICAgICAgIC1mcmFnbWVudFNpemUvMiwgLWZyYWdtZW50U2l6ZS8yLCBmcmFnbWVudFNpemUsIGZyYWdtZW50U2l6ZQogICAgICAgICAgICApOwogICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gRHJhdyBuZXh0IGltYWdlIGZyYWdtZW50CiAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IHByb2dyZXNzICogbm9kZS5hY3RpdmF0aW9uOwogICAgICAgICAgICBjdHgudHJhbnNsYXRlKG5vZGUueCwgbm9kZS55KTsKICAgICAgICAgICAgY3R4LnJvdGF0ZSgtbm9kZS5wdWxzZSAqIDAuMik7CiAgICAgICAgICAgIGN0eC5zY2FsZSgwLjggKyBub2RlLnB1bHNlICogMC40LCAwLjggKyBub2RlLnB1bHNlICogMC40KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgY3R4LmFyYygwLCAwLCBub2RlLnJhZGl1cyAqICgxICsgbm9kZS5wdWxzZSAqIDAuNSksIDAsIE1hdGguUEkgKiAyKTsKICAgICAgICAgICAgY3R4LmNsaXAoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoCiAgICAgICAgICAgICAgICBuZXh0SW1nLAogICAgICAgICAgICAgICAgTWF0aC5tYXgoMCwgTWF0aC5taW4oc3JjWCwgbmV4dEltZy53aWR0aCAtIGZyYWdtZW50U2l6ZSkpLAogICAgICAgICAgICAgICAgTWF0aC5tYXgoMCwgTWF0aC5taW4oc3JjWSwgbmV4dEltZy5oZWlnaHQgLSBmcmFnbWVudFNpemUpKSwKICAgICAgICAgICAgICAgIGZyYWdtZW50U2l6ZSwgZnJhZ21lbnRTaXplLAogICAgICAgICAgICAgICAgLWZyYWdtZW50U2l6ZS8yLCAtZnJhZ21lbnRTaXplLzIsIGZyYWdtZW50U2l6ZSwgZnJhZ21lbnRTaXplCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBEcmF3IG5vZGUKICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgY29uc3Qgbm9kZUdyYWRpZW50ID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KAogICAgICAgICAgICAgICAgbm9kZS54LCBub2RlLnksIDAsCiAgICAgICAgICAgICAgICBub2RlLngsIG5vZGUueSwgbm9kZS5yYWRpdXMKICAgICAgICAgICAgKTsKICAgICAgICAgICAgbm9kZUdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCBgcmdiYSgwLCAyMDAsIDI1NSwgJHswLjggKiBub2RlLmFjdGl2YXRpb259KWApOwogICAgICAgICAgICBub2RlR3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIGByZ2JhKDAsIDEwMCwgMjAwLCAkezAuNCAqIG5vZGUuYWN0aXZhdGlvbn0pYCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gbm9kZUdyYWRpZW50OwogICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgIGN0eC5hcmMobm9kZS54LCBub2RlLnksIG5vZGUucmFkaXVzLCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBEcmF3IGFjdGl2YXRpb24gcmluZwogICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBgcmdiYSgyNTUsIDEwMCwgMCwgJHtub2RlLmFjdGl2YXRpb259KWA7CiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAyOwogICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgIGN0eC5hcmMobm9kZS54LCBub2RlLnksIG5vZGUucmFkaXVzICsgNSwgMCwgTWF0aC5QSSAqIDIgKiBub2RlLnB1bHNlKTsKICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIC8vIERyYXcgYWN0aXZhdGlvbiB3YXZlCiAgICAgICAgY29uc3Qgd2F2ZVggPSBjYW52YXMud2lkdGggKiBwcm9ncmVzczsKICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuMjsKICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMGFhZmYnOwogICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICBjdHgubW92ZVRvKHdhdmVYLCAwKTsKICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8PSBjYW52YXMuaGVpZ2h0OyB5ICs9IDEwKSB7CiAgICAgICAgICAgIGNvbnN0IHdhdmVPZmZzZXQgPSBNYXRoLnNpbih5ICogMC4wNSArIHRpbWUgKiAzKSAqIDIwOwogICAgICAgICAgICBjdHgubGluZVRvKHdhdmVYICsgd2F2ZU9mZnNldCwgeSk7CiAgICAgICAgfQogICAgICAgIGN0eC5saW5lVG8oY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICBjdHgubGluZVRvKGNhbnZhcy53aWR0aCwgMCk7CiAgICAgICAgY3R4LmNsb3NlUGF0aCgpOwogICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgY3R4LnJlc3RvcmUoKTsKCiAgICAgICAgc3RlcCsrOwogICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3RnJhbWUpOwogICAgfQogICAgZHJhd0ZyYW1lKCk7Cn0pOwogICAgICAgIC8vIC0tLSBJbmRpdmlkdWFsIEFuaW1hdGlvbiBJbXBsZW1lbnRhdGlvbnMgKDEwIHVuaXF1ZSBjb25jZXB0cykgLS0tCmFuaW1hdGlvblN0YWdlcy5wdXNoKGZ1bmN0aW9uIGFuaW1hdGlvbl9MaXF1aWRNZXJjdXJ5TW9ycGgoY3VycmVudEltZywgbmV4dEltZywgY2FudmFzLCBjdHgsIHJlc29sdmUpIHsKICAgIGNvbnN0IHRvdGFsU3RlcHMgPSA4NTsKICAgIGxldCBzdGVwID0gMDsKICAgIGNvbnN0IGJsb2JDb3VudCA9IDEyOwogICAgY29uc3QgYmxvYnMgPSBbXTsKICAgIAogICAgLy8gQ3JlYXRlIG1lcmN1cnktbGlrZSBibG9icwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibG9iQ291bnQ7IGkrKykgewogICAgICAgIGNvbnN0IGFuZ2xlID0gKGkgLyBibG9iQ291bnQpICogTWF0aC5QSSAqIDI7CiAgICAgICAgY29uc3QgcmFkaXVzID0gTWF0aC5taW4oY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KSAqIDAuMzsKICAgICAgICBibG9icy5wdXNoKHsKICAgICAgICAgICAgeDogY2FudmFzLndpZHRoLzIgKyBNYXRoLmNvcyhhbmdsZSkgKiByYWRpdXMgKiAoMC41ICsgTWF0aC5yYW5kb20oKSAqIDAuNSksCiAgICAgICAgICAgIHk6IGNhbnZhcy5oZWlnaHQvMiArIE1hdGguc2luKGFuZ2xlKSAqIHJhZGl1cyAqICgwLjUgKyBNYXRoLnJhbmRvbSgpICogMC41KSwKICAgICAgICAgICAgcmFkaXVzOiAzMCArIE1hdGgucmFuZG9tKCkgKiA1MCwKICAgICAgICAgICAgc3BlZWQ6IDAuNSArIE1hdGgucmFuZG9tKCkgKiAxLjUsCiAgICAgICAgICAgIHBoYXNlOiBNYXRoLnJhbmRvbSgpICogTWF0aC5QSSAqIDIsCiAgICAgICAgICAgIHRhcmdldFg6IGNhbnZhcy53aWR0aC8yLAogICAgICAgICAgICB0YXJnZXRZOiBjYW52YXMuaGVpZ2h0LzIsCiAgICAgICAgICAgIG1lcmdpbmc6IGZhbHNlCiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gZHJhd0ZyYW1lKCkgewogICAgICAgIGlmIChzdGVwID4gdG90YWxTdGVwcykgewogICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UobmV4dEltZywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBzdGVwIC8gdG90YWxTdGVwczsKICAgICAgICBjb25zdCB0aW1lID0gc3RlcCAqIDAuMDU7CiAgICAgICAgCiAgICAgICAgLy8gRHJhdyBtZXJjdXJ5IGJsb2JzCiAgICAgICAgYmxvYnMuZm9yRWFjaCgoYmxvYiwgaW5kZXgpID0+IHsKICAgICAgICAgICAgY29uc3QgYmxvYlByb2dyZXNzID0gcHJvZ3Jlc3MgKiAoMC43ICsgTWF0aC5zaW4odGltZSArIGluZGV4KSAqIDAuMyk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBBbmltYXRlIGJsb2IgbW92ZW1lbnQKICAgICAgICAgICAgaWYgKGJsb2JQcm9ncmVzcyA+IDAuNSAmJiAhYmxvYi5tZXJnaW5nKSB7CiAgICAgICAgICAgICAgICBibG9iLm1lcmdpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgYmxvYi50YXJnZXRYID0gY2FudmFzLndpZHRoLzI7CiAgICAgICAgICAgICAgICBibG9iLnRhcmdldFkgPSBjYW52YXMuaGVpZ2h0LzI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChibG9iLm1lcmdpbmcpIHsKICAgICAgICAgICAgICAgIGJsb2IueCArPSAoYmxvYi50YXJnZXRYIC0gYmxvYi54KSAqIDAuMDU7CiAgICAgICAgICAgICAgICBibG9iLnkgKz0gKGJsb2IudGFyZ2V0WSAtIGJsb2IueSkgKiAwLjA1OwogICAgICAgICAgICAgICAgYmxvYi5yYWRpdXMgKj0gMC45ODsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIE5hdHVyYWwgbW92ZW1lbnQKICAgICAgICAgICAgICAgIGJsb2IueCArPSBNYXRoLmNvcyh0aW1lICsgYmxvYi5waGFzZSkgKiBibG9iLnNwZWVkOwogICAgICAgICAgICAgICAgYmxvYi55ICs9IE1hdGguc2luKHRpbWUgKyBibG9iLnBoYXNlKSAqIGJsb2Iuc3BlZWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIERyYXcgbGlxdWlkIGJsb2Igd2l0aCBtZXRhbGxpYyBhcHBlYXJhbmNlCiAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgIGNvbnN0IGdyYWRpZW50ID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KAogICAgICAgICAgICAgICAgYmxvYi54LCBibG9iLnksIDAsCiAgICAgICAgICAgICAgICBibG9iLngsIGJsb2IueSwgYmxvYi5yYWRpdXMKICAgICAgICAgICAgKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIE1ldGFsbGljIGdyYWRpZW50CiAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCBgcmdiYSgyMDAsIDIyMCwgMjU1LCAkezAuOSAqICgxIC0gYmxvYlByb2dyZXNzKX0pYCk7CiAgICAgICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjcsIGByZ2JhKDE1MCwgMTgwLCAyMjAsICR7MC43ICogKDEgLSBibG9iUHJvZ3Jlc3MpfSlgKTsKICAgICAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIGByZ2JhKDEwMCwgMTMwLCAxODAsICR7MC40ICogKDEgLSBibG9iUHJvZ3Jlc3MpfSlgKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIENyZWF0ZSBibG9iIHNoYXBlIHdpdGggbGlxdWlkIGRpc3RvcnRpb24KICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICBjb25zdCBwb2ludHMgPSAxNjsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHM7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgYW5nbGUgPSAoaSAvIHBvaW50cykgKiBNYXRoLlBJICogMiArIHRpbWU7CiAgICAgICAgICAgICAgICBjb25zdCBkaXN0b3J0aW9uID0gTWF0aC5zaW4oYW5nbGUgKiAzICsgYmxvYi5waGFzZSkgKiA1OwogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFJhZGl1cyA9IGJsb2IucmFkaXVzICsgZGlzdG9ydGlvbjsKICAgICAgICAgICAgICAgIGNvbnN0IHB4ID0gYmxvYi54ICsgTWF0aC5jb3MoYW5nbGUpICogY3VycmVudFJhZGl1czsKICAgICAgICAgICAgICAgIGNvbnN0IHB5ID0gYmxvYi55ICsgTWF0aC5zaW4oYW5nbGUpICogY3VycmVudFJhZGl1czsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIGN0eC5tb3ZlVG8ocHgsIHB5KTsKICAgICAgICAgICAgICAgIGVsc2UgY3R4LmxpbmVUbyhweCwgcHkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTsKICAgICAgICAgICAgY3R4LmNsaXAoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIERyYXcgY3VycmVudCBpbWFnZSBpbnNpZGUgYmxvYgogICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxIC0gYmxvYlByb2dyZXNzOwogICAgICAgICAgICBjdHguZHJhd0ltYWdlKGN1cnJlbnRJbWcsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBEcmF3IGJsb2IgYm9yZGVyCiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAyOwogICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBgcmdiYSgyNTUsIDI1NSwgMjU1LCAkezAuOCAqICgxIC0gYmxvYlByb2dyZXNzKX0pYDsKICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gRHJhdyByZWZsZWN0aW9uIGhpZ2hsaWdodAogICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjYgKiAoMSAtIGJsb2JQcm9ncmVzcyk7CiAgICAgICAgICAgIGNvbnN0IGhpZ2hsaWdodEdyYWRpZW50ID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KAogICAgICAgICAgICAgICAgYmxvYi54IC0gYmxvYi5yYWRpdXMvMywgYmxvYi55IC0gYmxvYi5yYWRpdXMvMywgMCwKICAgICAgICAgICAgICAgIGJsb2IueCAtIGJsb2IucmFkaXVzLzMsIGJsb2IueSAtIGJsb2IucmFkaXVzLzMsIGJsb2IucmFkaXVzLzIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgaGlnaGxpZ2h0R3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOCknKTsKICAgICAgICAgICAgaGlnaGxpZ2h0R3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDApJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gaGlnaGxpZ2h0R3JhZGllbnQ7CiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgY3R4LmFyYyhibG9iLnggLSBibG9iLnJhZGl1cy8zLCBibG9iLnkgLSBibG9iLnJhZGl1cy8zLCBibG9iLnJhZGl1cy8yLCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgLy8gRHJhdyBuZXh0IGltYWdlIGVtZXJnaW5nIGZyb20gY2VudGVyCiAgICAgICAgY29uc3QgY2VudGVyUHJvZ3Jlc3MgPSBNYXRoLm1heCgwLCAocHJvZ3Jlc3MgLSAwLjMpIC8gMC43KTsKICAgICAgICBpZiAoY2VudGVyUHJvZ3Jlc3MgPiAwKSB7CiAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IGNlbnRlclByb2dyZXNzOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQ3JlYXRlIGV4cGFuZGluZyBjaXJjbGUgcmV2ZWFsCiAgICAgICAgICAgIGNvbnN0IG1heFJhZGl1cyA9IE1hdGguc3FydChjYW52YXMud2lkdGggKiBjYW52YXMud2lkdGggKyBjYW52YXMuaGVpZ2h0ICogY2FudmFzLmhlaWdodCkgLyAyOwogICAgICAgICAgICBjb25zdCBjdXJyZW50UmFkaXVzID0gbWF4UmFkaXVzICogY2VudGVyUHJvZ3Jlc3M7CiAgICAgICAgICAgIAogICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgIGN0eC5hcmMoY2FudmFzLndpZHRoLzIsIGNhbnZhcy5oZWlnaHQvMiwgY3VycmVudFJhZGl1cywgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgICAgICBjdHguY2xpcCgpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQWRkIGxpcXVpZCBkaXN0b3J0aW9uIHRvIG5leHQgaW1hZ2UKICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSgKICAgICAgICAgICAgICAgIE1hdGguc2luKHRpbWUpICogNSAqICgxIC0gY2VudGVyUHJvZ3Jlc3MpLAogICAgICAgICAgICAgICAgTWF0aC5jb3ModGltZSkgKiA1ICogKDEgLSBjZW50ZXJQcm9ncmVzcykKICAgICAgICAgICAgKTsKICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShuZXh0SW1nLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBEcmF3IGNvbm5lY3Rpbmcgc3RyZWFtcyBiZXR3ZWVuIGJsb2JzCiAgICAgICAgaWYgKHByb2dyZXNzIDwgMC44KSB7CiAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGByZ2JhKDE4MCwgMjAwLCAyNTUsICR7MC4zICogKDEgLSBwcm9ncmVzcyl9KWA7CiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAyOwogICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjQ7CiAgICAgICAgICAgIAogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsb2JzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBibG9icy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLnNxcnQoCiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgucG93KGJsb2JzW2ldLnggLSBibG9ic1tqXS54LCAyKSArIAogICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnBvdyhibG9ic1tpXS55IC0gYmxvYnNbal0ueSwgMikKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIChkaXN0IDwgMTUwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhibG9ic1tpXS54LCBibG9ic1tpXS55KTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBjdXJ2ZWQgY29ubmVjdGlvbgogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaWRYID0gKGJsb2JzW2ldLnggKyBibG9ic1tqXS54KSAvIDI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pZFkgPSAoYmxvYnNbaV0ueSArIGJsb2JzW2pdLnkpIC8gMjsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VydmVPZmZzZXQgPSBNYXRoLnNpbih0aW1lICsgaSArIGopICogMjA7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBjdHgucXVhZHJhdGljQ3VydmVUbygKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pZFggKyBjdXJ2ZU9mZnNldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pZFkgKyBjdXJ2ZU9mZnNldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2JzW2pdLngsIGJsb2JzW2pdLnkKICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgIH0KCiAgICAgICAgc3RlcCsrOwogICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3RnJhbWUpOwogICAgfQogICAgZHJhd0ZyYW1lKCk7Cn0pOwphbmltYXRpb25TdGFnZXMucHVzaChmdW5jdGlvbiBhbmltYXRpb25fSG9sb2dyYXBoaWNQcm9qZWN0aW9uKGN1cnJlbnRJbWcsIG5leHRJbWcsIGNhbnZhcywgY3R4LCByZXNvbHZlKSB7CiAgICBjb25zdCB0b3RhbFN0ZXBzID0gODA7CiAgICBsZXQgc3RlcCA9IDA7CiAgICBjb25zdCBzY2FubGluZUNvdW50ID0gMzA7CgogICAgZnVuY3Rpb24gZHJhd0ZyYW1lKCkgewogICAgICAgIGlmIChzdGVwID4gdG90YWxTdGVwcykgewogICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UobmV4dEltZywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBzdGVwIC8gdG90YWxTdGVwczsKICAgICAgICBjb25zdCB0aW1lID0gc3RlcCAqIDAuMTsKICAgICAgICAKICAgICAgICAvLyBEcmF3IGhvbG9ncmFwaGljIHNjYW5saW5lcwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2NhbmxpbmVDb3VudDsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IHkgPSAoaSAvIHNjYW5saW5lQ291bnQpICogY2FudmFzLmhlaWdodDsKICAgICAgICAgICAgY29uc3Qgc2NhblByb2dyZXNzID0gKE1hdGguc2luKHRpbWUgKyBpICogMC4zKSArIDEpICogMC41OwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQ3VycmVudCBpbWFnZSBzY2FubGluZXMgKGZhZGluZykKICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgY29uc3Qgc2xpY2VIZWlnaHQgPSBjYW52YXMuaGVpZ2h0IC8gc2NhbmxpbmVDb3VudDsKICAgICAgICAgICAgY29uc3QgY3VycmVudEFscGhhID0gKDEgLSBwcm9ncmVzcykgKiAoMC4zICsgc2NhblByb2dyZXNzICogMC43KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IGN1cnJlbnRBbHBoYTsKICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShjdXJyZW50SW1nLCAKICAgICAgICAgICAgICAgIDAsIHksIGNhbnZhcy53aWR0aCwgc2xpY2VIZWlnaHQsCiAgICAgICAgICAgICAgICAwLCB5ICsgTWF0aC5zaW4odGltZSArIGkpICogMTAsIGNhbnZhcy53aWR0aCwgc2xpY2VIZWlnaHQgKiAwLjgpOwogICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gTmV4dCBpbWFnZSBzY2FubGluZXMgKGFwcGVhcmluZykKICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgY29uc3QgbmV4dEFscGhhID0gcHJvZ3Jlc3MgKiAoMC4zICsgc2NhblByb2dyZXNzICogMC43KTsKICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gbmV4dEFscGhhOwogICAgICAgICAgICBjdHguZHJhd0ltYWdlKG5leHRJbWcsIAogICAgICAgICAgICAgICAgMCwgeSwgY2FudmFzLndpZHRoLCBzbGljZUhlaWdodCwKICAgICAgICAgICAgICAgIDAsIHkgLSBNYXRoLmNvcyh0aW1lICsgaSkgKiAxMCwgY2FudmFzLndpZHRoLCBzbGljZUhlaWdodCAqIDAuOCk7CiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIEFkZCBob2xvZ3JhcGhpYyBncmlkIG92ZXJsYXkKICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuMjsKICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzAwZmZmZic7CiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICAgICAgCiAgICAgICAgLy8gVmVydGljYWwgbGluZXMKICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGNhbnZhcy53aWR0aDsgeCArPSA0MCkgewogICAgICAgICAgICBjb25zdCB3YXZlT2Zmc2V0ID0gTWF0aC5zaW4odGltZSArIHggKiAwLjAxKSAqIDU7CiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgY3R4Lm1vdmVUbyh4ICsgd2F2ZU9mZnNldCwgMCk7CiAgICAgICAgICAgIGN0eC5saW5lVG8oeCArIHdhdmVPZmZzZXQsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIEhvcml6b250YWwgbGluZXMKICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGNhbnZhcy5oZWlnaHQ7IHkgKz0gNDApIHsKICAgICAgICAgICAgY29uc3Qgd2F2ZU9mZnNldCA9IE1hdGguY29zKHRpbWUgKyB5ICogMC4wMSkgKiA1OwogICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgIGN0eC5tb3ZlVG8oMCwgeSArIHdhdmVPZmZzZXQpOwogICAgICAgICAgICBjdHgubGluZVRvKGNhbnZhcy53aWR0aCwgeSArIHdhdmVPZmZzZXQpOwogICAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgfQogICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgCiAgICAgICAgLy8gQWRkIGZsaWNrZXJpbmcgZGF0YSBwb2ludHMKICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMykgewogICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjU7CiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwZmZhYSc7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCB4ID0gTWF0aC5yYW5kb20oKSAqIGNhbnZhcy53aWR0aDsKICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBNYXRoLnJhbmRvbSgpICogY2FudmFzLmhlaWdodDsKICAgICAgICAgICAgICAgIGNvbnN0IHNpemUgPSAyICsgTWF0aC5yYW5kb20oKSAqIDQ7CiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICBjdHguYXJjKHgsIHksIHNpemUsIDAsIE1hdGguUEkgKiAyKTsKICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICB9CgogICAgICAgIHN0ZXArKzsKICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhd0ZyYW1lKTsKICAgIH0KICAgIGRyYXdGcmFtZSgpOwp9KTsKYW5pbWF0aW9uU3RhZ2VzLnB1c2goZnVuY3Rpb24gYW5pbWF0aW9uX1F1YW50dW1UdW5uZWxXYXJwKGN1cnJlbnRJbWcsIG5leHRJbWcsIGNhbnZhcywgY3R4LCByZXNvbHZlKSB7CiAgICBjb25zdCB0b3RhbFN0ZXBzID0gNzA7CiAgICBsZXQgc3RlcCA9IDA7CiAgICBjb25zdCB3YXZlQ291bnQgPSA4OwogICAgY29uc3QgcGFydGljbGVzID0gW107CiAgICAKICAgIC8vIENyZWF0ZSB3YXJwaW5nIHBhcnRpY2xlcwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyMDA7IGkrKykgewogICAgICAgIHBhcnRpY2xlcy5wdXNoKHsKICAgICAgICAgICAgeDogTWF0aC5yYW5kb20oKSAqIGNhbnZhcy53aWR0aCwKICAgICAgICAgICAgeTogTWF0aC5yYW5kb20oKSAqIGNhbnZhcy5oZWlnaHQsCiAgICAgICAgICAgIHNpemU6IDIgKyBNYXRoLnJhbmRvbSgpICogNCwKICAgICAgICAgICAgc3BlZWQ6IDAuNSArIE1hdGgucmFuZG9tKCkgKiAyLAogICAgICAgICAgICBhbmdsZTogTWF0aC5yYW5kb20oKSAqIE1hdGguUEkgKiAyCiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gZHJhd0ZyYW1lKCkgewogICAgICAgIGlmIChzdGVwID4gdG90YWxTdGVwcykgewogICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UobmV4dEltZywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBzdGVwIC8gdG90YWxTdGVwczsKICAgICAgICAKICAgICAgICAvLyBEcmF3IHdhcnBpbmcgY3VycmVudCBpbWFnZSB3aXRoIHNpbmUgd2F2ZSBkaXN0b3J0aW9uCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3YXZlQ291bnQ7IGkrKykgewogICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICBjb25zdCB3YXZlUGhhc2UgPSAoc3RlcCAqIDAuMSkgKyAoaSAqIE1hdGguUEkgKiAyIC8gd2F2ZUNvdW50KTsKICAgICAgICAgICAgY29uc3Qgd2F2ZUFtcGxpdHVkZSA9IE1hdGguc2luKHByb2dyZXNzICogTWF0aC5QSSkgKiAxMDA7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBDcmVhdGUgd2F2ZSBkaXN0b3J0aW9uIG1hc2sKICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGNhbnZhcy53aWR0aDsgeCArPSAyKSB7CiAgICAgICAgICAgICAgICBjb25zdCB3YXZlWSA9IGNhbnZhcy5oZWlnaHQgLyB3YXZlQ291bnQgKiBpICsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnNpbih4ICogMC4wMiArIHdhdmVQaGFzZSkgKiB3YXZlQW1wbGl0dWRlOwogICAgICAgICAgICAgICAgY3R4LmxpbmVUbyh4LCB3YXZlWSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChsZXQgeCA9IGNhbnZhcy53aWR0aDsgeCA+PSAwOyB4IC09IDIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHdhdmVZID0gY2FudmFzLmhlaWdodCAvIHdhdmVDb3VudCAqIChpICsgMSkgKyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguc2luKHggKiAwLjAyICsgd2F2ZVBoYXNlKSAqIHdhdmVBbXBsaXR1ZGU7CiAgICAgICAgICAgICAgICBjdHgubGluZVRvKHgsIHdhdmVZKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7CiAgICAgICAgICAgIGN0eC5jbGlwKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBEcmF3IGRpc3RvcnRlZCBpbWFnZQogICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxIC0gcHJvZ3Jlc3M7CiAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gMSArIE1hdGguc2luKHByb2dyZXNzICogTWF0aC5QSSkgKiAwLjI7CiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoY2FudmFzLndpZHRoLzIsIGNhbnZhcy5oZWlnaHQvMik7CiAgICAgICAgICAgIGN0eC5zY2FsZShzY2FsZSwgc2NhbGUpOwogICAgICAgICAgICBjdHgucm90YXRlKGkgKiAwLjEgKiBwcm9ncmVzcyk7CiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoY3VycmVudEltZywgLWNhbnZhcy53aWR0aC8yLCAtY2FudmFzLmhlaWdodC8yLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBEcmF3IHF1YW50dW0gcGFydGljbGUgZWZmZWN0CiAgICAgICAgcGFydGljbGVzLmZvckVhY2gocCA9PiB7CiAgICAgICAgICAgIHAueCArPSBNYXRoLmNvcyhwLmFuZ2xlKSAqIHAuc3BlZWQ7CiAgICAgICAgICAgIHAueSArPSBNYXRoLnNpbihwLmFuZ2xlKSAqIHAuc3BlZWQ7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBXcmFwIGFyb3VuZCBlZGdlcwogICAgICAgICAgICBpZiAocC54IDwgMCkgcC54ID0gY2FudmFzLndpZHRoOwogICAgICAgICAgICBpZiAocC54ID4gY2FudmFzLndpZHRoKSBwLnggPSAwOwogICAgICAgICAgICBpZiAocC55IDwgMCkgcC55ID0gY2FudmFzLmhlaWdodDsKICAgICAgICAgICAgaWYgKHAueSA+IGNhbnZhcy5oZWlnaHQpIHAueSA9IDA7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBEcmF3IHBhcnRpY2xlIHRyYWlsCiAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IHByb2dyZXNzICogMC4zOwogICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYGhzbCgke3N0ZXAgKiAyfSwgMTAwJSwgNjAlKWA7CiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgY3R4LmFyYyhwLngsIHAueSwgcC5zaXplICogcHJvZ3Jlc3MsIDAsIE1hdGguUEkgKiAyKTsKICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICAvLyBEcmF3IG5leHQgaW1hZ2UgZW1lcmdpbmcgdGhyb3VnaCBkaXN0b3J0aW9uCiAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBwcm9ncmVzczsKICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NjcmVlbic7CiAgICAgICAgY3R4LmRyYXdJbWFnZShuZXh0SW1nLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgIGN0eC5yZXN0b3JlKCk7CgogICAgICAgIHN0ZXArKzsKICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhd0ZyYW1lKTsKICAgIH0KICAgIGRyYXdGcmFtZSgpOwp9KTsKCgphbmltYXRpb25TdGFnZXMucHVzaChmdW5jdGlvbiBhbmltYXRpb25fRnJhY3RhbFpvb21SZXBsYWNlKGN1cnJlbnRJbWcsIG5leHRJbWcsIGNhbnZhcywgY3R4LCByZXNvbHZlKSB7CiAgICBjb25zdCB0b3RhbFN0ZXBzID0gNjA7CiAgICBsZXQgc3RlcCA9IDA7CiAgICBjb25zdCBjZW50ZXJYID0gY2FudmFzLndpZHRoIC8gMjsKICAgIGNvbnN0IGNlbnRlclkgPSBjYW52YXMuaGVpZ2h0IC8gMjsKICAgIGNvbnN0IGZyYWN0YWxJdGVyYXRpb25zID0gMzsKCiAgICBmdW5jdGlvbiBkcmF3RnJhbWUoKSB7CiAgICAgICAgaWYgKHN0ZXAgPiB0b3RhbFN0ZXBzKSB7CiAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShuZXh0SW1nLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICBjb25zdCBwcm9ncmVzcyA9IHN0ZXAgLyB0b3RhbFN0ZXBzOwogICAgICAgIAogICAgICAgIC8vIEN1cnJlbnQgaW1hZ2UgZnJhY3RhbGx5IHpvb21zIG91dAogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZnJhY3RhbEl0ZXJhdGlvbnM7IGkrKykgewogICAgICAgICAgICBjb25zdCBzY2FsZSA9IDEgLSBwcm9ncmVzcyAqICgwLjcgKyBpICogMC4xKTsKICAgICAgICAgICAgY29uc3QgYWxwaGEgPSAxIC0gcHJvZ3Jlc3MgKiAoMC44IC0gaSAqIDAuMik7CiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGkgKiA1MCAqIHByb2dyZXNzOwogICAgICAgICAgICAKICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gYWxwaGE7CiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoY2VudGVyWCArIG9mZnNldCwgY2VudGVyWSArIG9mZnNldCk7CiAgICAgICAgICAgIGN0eC5zY2FsZShzY2FsZSwgc2NhbGUpOwogICAgICAgICAgICBjdHgucm90YXRlKGkgKiAwLjIgKiBwcm9ncmVzcyk7CiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoY3VycmVudEltZywgLWNlbnRlclgsIC1jZW50ZXJZLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBOZXh0IGltYWdlIGFwcGVhcnMgdGhyb3VnaCBleHBhbmRpbmcgZnJhY3RhbCByaW5ncwogICAgICAgIGNvbnN0IHJpbmdDb3VudCA9IDQ7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByaW5nQ291bnQ7IGkrKykgewogICAgICAgICAgICBjb25zdCByaW5nUHJvZ3Jlc3MgPSBNYXRoLm1heCgwLCBwcm9ncmVzcyAtIGkgKiAwLjIpOwogICAgICAgICAgICBpZiAocmluZ1Byb2dyZXNzID4gMCkgewogICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IHJpbmdQcm9ncmVzcyAqIDAuODsKICAgICAgICAgICAgICAgIGNvbnN0IGlubmVyUmFkaXVzID0gaSAqIDUwOwogICAgICAgICAgICAgICAgY29uc3Qgb3V0ZXJSYWRpdXMgPSBpbm5lclJhZGl1cyArIDEwMCAqIHJpbmdQcm9ncmVzczsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgY3R4LmFyYyhjZW50ZXJYLCBjZW50ZXJZLCBvdXRlclJhZGl1cywgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgICAgICAgICAgaWYgKGlubmVyUmFkaXVzID4gMCkgewogICAgICAgICAgICAgICAgICAgIGN0eC5hcmMoY2VudGVyWCwgY2VudGVyWSwgaW5uZXJSYWRpdXMsIDAsIE1hdGguUEkgKiAyLCB0cnVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGN0eC5jbGlwKCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gMC44ICsgcmluZ1Byb2dyZXNzICogMC4yOwogICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShjZW50ZXJYLCBjZW50ZXJZKTsKICAgICAgICAgICAgICAgIGN0eC5zY2FsZShzY2FsZSwgc2NhbGUpOwogICAgICAgICAgICAgICAgY3R4LnJvdGF0ZSgtaSAqIDAuMSAqIHByb2dyZXNzKTsKICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UobmV4dEltZywgLWNlbnRlclgsIC1jZW50ZXJZLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgc3RlcCsrOwogICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3RnJhbWUpOwogICAgfQogICAgZHJhd0ZyYW1lKCk7Cn0pOwoKCgogICAgICAgIC8vIEFuaW1hdGlvbiAxOiBSYWRpYWwgV2lwZSAmIFpvb20KICAgICAgICAvLyBDb25jZXB0OiBDdXJyZW50IGltYWdlIHNocmlua3MgYW5kIHJvdGF0ZXMgaW50byB0aGUgY2VudGVyIHdoaWxlIGEgcmFkaWFsIHdpcGUgcmV2ZWFscyB0aGUgbmV3IGltYWdlLAogICAgICAgIC8vIHdoaWNoIHRoZW4gem9vbXMgdG8gZmlsbCB0aGUgc2NyZWVuLgogICAgICAgIC8vIFRyYW5zZm9ybWF0aW9uczogU2NhbGUsIFJvdGF0aW9uLCBUcmFuc3BhcmVuY3kgKHJhZGlhbCB3aXBlIGVmZmVjdCkuCiAgICAgICAgYW5pbWF0aW9uU3RhZ2VzLnB1c2goZnVuY3Rpb24gYW5pbWF0aW9uMV9SYWRpYWxXaXBlWm9vbShjdXJyZW50SW1nLCBuZXh0SW1nLCBjYW52YXMsIGN0eCwgcmVzb2x2ZSkgewogICAgICAgICAgICBjb25zdCB0b3RhbFN0ZXBzID0gNTA7CiAgICAgICAgICAgIGxldCBzdGVwID0gMDsKICAgICAgICAgICAgY29uc3QgY2VudGVyWCA9IGNhbnZhcy53aWR0aCAvIDI7CiAgICAgICAgICAgIGNvbnN0IGNlbnRlclkgPSBjYW52YXMuaGVpZ2h0IC8gMjsKCiAgICAgICAgICAgIGZ1bmN0aW9uIGRyYXdGcmFtZSgpIHsKICAgICAgICAgICAgICAgIGlmIChzdGVwID4gdG90YWxTdGVwcykgewogICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKG5leHRJbWcsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IHN0ZXAgLyB0b3RhbFN0ZXBzOyAvLyAwIHRvIDEKCiAgICAgICAgICAgICAgICAvLyAxLiBEcmF3IG5leHQgaW1hZ2UsIHJldmVhbGVkIGJ5IHJhZGlhbCB3aXBlIGFuZCBzY2FsaW5nIHVwCiAgICAgICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgY29uc3QgbWF4UmFkaXVzID0gTWF0aC5zcXJ0KGNlbnRlclggKiBjZW50ZXJYICsgY2VudGVyWSAqIGNlbnRlclkpOwogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFJhZGl1cyA9IG1heFJhZGl1cyAqIHByb2dyZXNzOwogICAgICAgICAgICAgICAgY3R4LmFyYyhjZW50ZXJYLCBjZW50ZXJZLCBjdXJyZW50UmFkaXVzLCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgICAgICAgICBjdHguY2xpcCgpOyAvLyBDbGlwIGV2ZXJ5dGhpbmcgb3V0c2lkZSB0aGUgZ3Jvd2luZyBjaXJjbGUKCiAgICAgICAgICAgICAgICBjb25zdCBzY2FsZU5leHQgPSAwLjUgKyAwLjUgKiBwcm9ncmVzczsgLy8gRnJvbSAwLjUgdG8gMQogICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShjZW50ZXJYLCBjZW50ZXJZKTsKICAgICAgICAgICAgICAgIGN0eC5zY2FsZShzY2FsZU5leHQsIHNjYWxlTmV4dCk7CiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKG5leHRJbWcsIC1jZW50ZXJYLCAtY2VudGVyWSwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CgogICAgICAgICAgICAgICAgLy8gMi4gRHJhdyBjdXJyZW50IGltYWdlLCBzaHJpbmtpbmcsIHJvdGF0aW5nLCBhbmQgZmFkaW5nIG91dAogICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDEgLSBwcm9ncmVzczsgLy8gRmFkZSBvdXQKICAgICAgICAgICAgICAgIGNvbnN0IHNjYWxlQ3VycmVudCA9IDEgLSAwLjUgKiBwcm9ncmVzczsgLy8gRnJvbSAxIHRvIDAuNQogICAgICAgICAgICAgICAgY29uc3Qgcm90YXRpb25BbmdsZSA9IE1hdGguUEkgKiAyICogcHJvZ3Jlc3M7IC8vIFJvdGF0ZSAzNjAgZGVncmVlcwoKICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoY2VudGVyWCwgY2VudGVyWSk7CiAgICAgICAgICAgICAgICBjdHgucm90YXRlKHJvdGF0aW9uQW5nbGUpOwogICAgICAgICAgICAgICAgY3R4LnNjYWxlKHNjYWxlQ3VycmVudCwgc2NhbGVDdXJyZW50KTsKICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoY3VycmVudEltZywgLWNlbnRlclgsIC1jZW50ZXJZLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKCiAgICAgICAgICAgICAgICBzdGVwKys7CiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhd0ZyYW1lKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkcmF3RnJhbWUoKTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gQW5pbWF0aW9uIDI6IFBpeGVsYXRlZCBEaXNzb2x2ZSAmIFJlY29uc3RydWN0CiAgICAgICAgLy8gQ29uY2VwdDogQ3VycmVudCBpbWFnZSBwaXhlbGF0ZXMgYW5kICJzY2F0dGVycyIgb3V0d2FyZHMsIHRoZW4gcGl4ZWxzIG9mIHRoZSBuZXcgaW1hZ2UKICAgICAgICAvLyAiZmFsbCIgaW50byBwbGFjZSBmcm9tIHJhbmRvbSBwb3NpdGlvbnMuCiAgICAgICAgLy8gVHJhbnNmb3JtYXRpb25zOiBTY2FsZSAocGl4ZWwgc2l6ZSksIFRyYW5zbGF0aW9uIChwaXhlbCBtb3ZlbWVudCksIFRyYW5zcGFyZW5jeS4KICAgICAgICBhbmltYXRpb25TdGFnZXMucHVzaChmdW5jdGlvbiBhbmltYXRpb24yX1BpeGVsRGlzc29sdmUoY3VycmVudEltZywgbmV4dEltZywgY2FudmFzLCBjdHgsIHJlc29sdmUpIHsKICAgICAgICAgICAgY29uc3QgdG90YWxTdGVwcyA9IDUwOwogICAgICAgICAgICBsZXQgc3RlcCA9IDA7CgogICAgICAgICAgICBjb25zdCBwaXhlbFNpemVTdGFydCA9IDIwOyAvLyBJbml0aWFsIGJsb2NrIHNpemUgZm9yIHBpeGVsYXRpb24KICAgICAgICAgICAgY29uc3QgcGl4ZWxTaXplRW5kID0gMTsgICAvLyBGaW5hbCBibG9jayBzaXplIChmdWxseSByZXNvbHZlZCBpbWFnZSkKCiAgICAgICAgICAgIGZ1bmN0aW9uIGRyYXdGcmFtZSgpIHsKICAgICAgICAgICAgICAgIGlmIChzdGVwID4gdG90YWxTdGVwcykgewogICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKG5leHRJbWcsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IHN0ZXAgLyB0b3RhbFN0ZXBzOyAvLyAwIHRvIDEKCiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UGl4ZWxTaXplID0gcGl4ZWxTaXplU3RhcnQgKiAoMSAtIHByb2dyZXNzKSArIHBpeGVsU2l6ZUVuZCAqIHByb2dyZXNzOwogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFBpeGVsQWxwaGEgPSAxIC0gcHJvZ3Jlc3M7IC8vIEZhZGUgb3V0IHRoZSBvbGQKICAgICAgICAgICAgICAgIGNvbnN0IG5leHRQaXhlbEFscGhhID0gcHJvZ3Jlc3M7ICAgICAgLy8gRmFkZSBpbiB0aGUgbmV3CgogICAgICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBjYW52YXMuaGVpZ2h0OyB5ICs9IHBpeGVsU2l6ZVN0YXJ0KSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBjYW52YXMud2lkdGg7IHggKz0gcGl4ZWxTaXplU3RhcnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGl4ZWxhdGVkIGRpc3NvbHZlIChjdXJyZW50IGltYWdlKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBpeGVsQWxwaGEgPiAwLjAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gY3VycmVudFBpeGVsQWxwaGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXRYID0gTWF0aC5zaW4oeCAqIDAuMSArIHN0ZXAgKiAwLjEpICogMjAgKiAoMSAtIHByb2dyZXNzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldFkgPSBNYXRoLmNvcyh5ICogMC4xICsgc3RlcCAqIDAuMSkgKiAyMCAqICgxIC0gcHJvZ3Jlc3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShjdXJyZW50SW1nLCB4LCB5LCBwaXhlbFNpemVTdGFydCwgcGl4ZWxTaXplU3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ICsgb2Zmc2V0WCwgeSArIG9mZnNldFksIGN1cnJlbnRQaXhlbFNpemUsIGN1cnJlbnRQaXhlbFNpemUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGl4ZWxhdGVkIHJlY29uc3RydWN0IChuZXh0IGltYWdlKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dFBpeGVsQWxwaGEgPiAwLjAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gbmV4dFBpeGVsQWxwaGE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmNvbWluZ09mZnNldFggPSBNYXRoLnNpbih4ICogMC4xICsgKHRvdGFsU3RlcHMgLSBzdGVwKSAqIDAuMSkgKiAyMCAqIHByb2dyZXNzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5jb21pbmdPZmZzZXRZID0gTWF0aC5jb3MoeSAqIDAuMSArICh0b3RhbFN0ZXBzIC0gc3RlcCkgKiAwLjEpICogMjAgKiBwcm9ncmVzczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UobmV4dEltZywgeCwgeSwgcGl4ZWxTaXplU3RhcnQsIHBpeGVsU2l6ZVN0YXJ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCAtIGluY29taW5nT2Zmc2V0WCwgeSAtIGluY29taW5nT2Zmc2V0WSwgY3VycmVudFBpeGVsU2l6ZSwgY3VycmVudFBpeGVsU2l6ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc3RlcCsrOwogICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGRyYXdGcmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZHJhd0ZyYW1lKCk7CiAgICAgICAgfSk7CgogICAgICAgIC8vIEFuaW1hdGlvbiAzOiBTbGlkaW5nIFNoYXJkcwogICAgICAgIC8vIENvbmNlcHQ6IEN1cnJlbnQgaW1hZ2UgYnJlYWtzIGludG8gcmVjdGFuZ3VsYXIgc2hhcmRzIHRoYXQgc2xpZGUgb2ZmLXNjcmVlbiBpbiB2YXJpb3VzIGRpcmVjdGlvbnMsCiAgICAgICAgLy8gcmV2ZWFsaW5nIHRoZSBuZXcgaW1hZ2UgYmVuZWF0aCwgd2hpY2ggdGhlbiBhc3NlbWJsZXMgaXRzZWxmIGZyb20gc2ltaWxhciBzaGFyZHMgc2xpZGluZyBpbnRvIHBsYWNlLgogICAgICAgIC8vIFRyYW5zZm9ybWF0aW9uczogVHJhbnNsYXRpb24sIFRyYW5zcGFyZW5jeS4KICAgICAgICBhbmltYXRpb25TdGFnZXMucHVzaChmdW5jdGlvbiBhbmltYXRpb24zX1NsaWRpbmdTaGFyZHMoY3VycmVudEltZywgbmV4dEltZywgY2FudmFzLCBjdHgsIHJlc29sdmUpIHsKICAgICAgICAgICAgY29uc3QgdG90YWxTdGVwcyA9IDUwOwogICAgICAgICAgICBsZXQgc3RlcCA9IDA7CgogICAgICAgICAgICBjb25zdCBncmlkU2l6ZSA9IDEwOyAvLyBOdW1iZXIgb2Ygc2hhcmRzIGhvcml6b250YWxseS92ZXJ0aWNhbGx5CiAgICAgICAgICAgIGNvbnN0IHNoYXJkV2lkdGggPSBjYW52YXMud2lkdGggLyBncmlkU2l6ZTsKICAgICAgICAgICAgY29uc3Qgc2hhcmRIZWlnaHQgPSBjYW52YXMuaGVpZ2h0IC8gZ3JpZFNpemU7CgogICAgICAgICAgICBjb25zdCBzaGFyZERpcmVjdGlvbnMgPSBbXTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncmlkU2l6ZSAqIGdyaWRTaXplOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5yYW5kb20oKSAqIE1hdGguUEkgKiAyOwogICAgICAgICAgICAgICAgc2hhcmREaXJlY3Rpb25zLnB1c2goeyB4OiBNYXRoLmNvcyhhbmdsZSksIHk6IE1hdGguc2luKGFuZ2xlKSB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZHJhd0ZyYW1lKCkgewogICAgICAgICAgICAgICAgaWYgKHN0ZXAgPiB0b3RhbFN0ZXBzKSB7CiAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UobmV4dEltZywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0gc3RlcCAvIHRvdGFsU3RlcHM7IC8vIDAgdG8gMQogICAgICAgICAgICAgICAgY29uc3QgbWF4T2Zmc2V0ID0gTWF0aC5tYXgoY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KSAqIDAuNTsKCiAgICAgICAgICAgICAgICBsZXQgc2hhcmRJbmRleCA9IDA7CiAgICAgICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGdyaWRTaXplOyB5KyspIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGdyaWRTaXplOyB4KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ggPSB4ICogc2hhcmRXaWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3kgPSB5ICogc2hhcmRIZWlnaHQ7CgogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXIgPSBzaGFyZERpcmVjdGlvbnNbc2hhcmRJbmRleF07CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRPZmZzZXRYID0gZGlyLnggKiBtYXhPZmZzZXQgKiBwcm9ncmVzczsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudE9mZnNldFkgPSBkaXIueSAqIG1heE9mZnNldCAqIHByb2dyZXNzOwoKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dE9mZnNldFggPSBkaXIueCAqIG1heE9mZnNldCAqICgxIC0gcHJvZ3Jlc3MpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0T2Zmc2V0WSA9IGRpci55ICogbWF4T2Zmc2V0ICogKDEgLSBwcm9ncmVzcyk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IGN1cnJlbnQgaW1hZ2Ugc2hhcmQsIG1vdmluZyBvdXR3YXJkcyBhbmQgZmFkaW5nCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDEgLSBwcm9ncmVzczsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShjdXJyZW50SW1nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeCwgc3ksIHNoYXJkV2lkdGgsIHNoYXJkSGVpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeCArIGN1cnJlbnRPZmZzZXRYLCBzeSArIGN1cnJlbnRPZmZzZXRZLCBzaGFyZFdpZHRoLCBzaGFyZEhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IG5leHQgaW1hZ2Ugc2hhcmQsIG1vdmluZyBpbndhcmRzIGFuZCBmYWRpbmcgaW4KICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gcHJvZ3Jlc3M7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UobmV4dEltZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3gsIHN5LCBzaGFyZFdpZHRoLCBzaGFyZEhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ggLSBuZXh0T2Zmc2V0WCwgc3kgLSBuZXh0T2Zmc2V0WSwgc2hhcmRXaWR0aCwgc2hhcmRIZWlnaHQpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmRJbmRleCsrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBzdGVwKys7CiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhd0ZyYW1lKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkcmF3RnJhbWUoKTsKICAgICAgICB9KTsKCgogICAgICAgIC8vIEFuaW1hdGlvbiA1OiBUd2lzdGluZyBUdW5uZWwgTW9ycGgKICAgICAgICAvLyBDb25jZXB0OiBJbWFnZXMgYXBwZWFyIGFzIGlmIHNlZW4gdGhyb3VnaCBhIHR3aXN0aW5nIHR1bm5lbC4gVGhlIHR1bm5lbCB0d2lzdHMgYW5kIG1vcnBocyBmcm9tCiAgICAgICAgLy8gdGhlIGZpcnN0IGltYWdlIHRvIHRoZSBzZWNvbmQuCiAgICAgICAgLy8gVHJhbnNmb3JtYXRpb25zOiBSb3RhdGlvbiwgU2hlYXIvU2tldyAoc2ltdWxhdGVkIHdpdGggY29udGV4dC50cmFuc2Zvcm0pLCBTY2FsZSAocGVyc3BlY3RpdmUgem9vbSkuCiAgICAgICAgYW5pbWF0aW9uU3RhZ2VzLnB1c2goZnVuY3Rpb24gYW5pbWF0aW9uNV9Ud2lzdGluZ1R1bm5lbE1vcnBoKGN1cnJlbnRJbWcsIG5leHRJbWcsIGNhbnZhcywgY3R4LCByZXNvbHZlKSB7CiAgICAgICAgICAgIGNvbnN0IHRvdGFsU3RlcHMgPSA1MDsKICAgICAgICAgICAgbGV0IHN0ZXAgPSAwOwogICAgICAgICAgICBjb25zdCBjZW50ZXJYID0gY2FudmFzLndpZHRoIC8gMjsKICAgICAgICAgICAgY29uc3QgY2VudGVyWSA9IGNhbnZhcy5oZWlnaHQgLyAyOwoKICAgICAgICAgICAgZnVuY3Rpb24gZHJhd0ZyYW1lKCkgewogICAgICAgICAgICAgICAgaWYgKHN0ZXAgPiB0b3RhbFN0ZXBzKSB7CiAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UobmV4dEltZywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0gc3RlcCAvIHRvdGFsU3RlcHM7IC8vIDAgdG8gMQoKICAgICAgICAgICAgICAgIC8vIC0tLSBEcmF3IGN1cnJlbnQgaW1hZ2UgKHR3aXN0aW5nIGF3YXkpIC0tLQogICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDEgLSBwcm9ncmVzczsgLy8gRmFkZSBvdXQKICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoY2VudGVyWCwgY2VudGVyWSk7CgogICAgICAgICAgICAgICAgY29uc3Qgcm90YXRlQ3VycmVudCA9IHByb2dyZXNzICogTWF0aC5QSSAqIDEuNTsgLy8gMjcwIGRlZ3JlZXMKICAgICAgICAgICAgICAgIGNvbnN0IHNrZXdDdXJyZW50WCA9IE1hdGguc2luKHByb2dyZXNzICogTWF0aC5QSSkgKiAwLjU7IC8vIE1heCBza2V3IGluIG1pZGRsZQogICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVDdXJyZW50ID0gMSAtIDAuNSAqIHByb2dyZXNzOyAvLyBTaHJpbmsKCiAgICAgICAgICAgICAgICBjdHgucm90YXRlKHJvdGF0ZUN1cnJlbnQpOwogICAgICAgICAgICAgICAgY3R4LnRyYW5zZm9ybSgxLCAwLCBza2V3Q3VycmVudFgsIDEsIDAsIDApOyAvLyBBcHBseSBza2V3IFgKICAgICAgICAgICAgICAgIGN0eC5zY2FsZShzY2FsZUN1cnJlbnQsIHNjYWxlQ3VycmVudCk7CgogICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShjdXJyZW50SW1nLCAtY2VudGVyWCwgLWNlbnRlclksIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwoKICAgICAgICAgICAgICAgIC8vIC0tLSBEcmF3IG5leHQgaW1hZ2UgKHR3aXN0aW5nIGluKSAtLS0KICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBwcm9ncmVzczsgLy8gRmFkZSBpbgogICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShjZW50ZXJYLCBjZW50ZXJZKTsKCiAgICAgICAgICAgICAgICBjb25zdCByb3RhdGVOZXh0ID0gKDEgLSBwcm9ncmVzcykgKiAtTWF0aC5QSSAqIDEuNTsgLy8gSW52ZXJzZSByb3RhdGlvbgogICAgICAgICAgICAgICAgY29uc3Qgc2tld05leHRYID0gTWF0aC5zaW4oKDEgLSBwcm9ncmVzcykgKiBNYXRoLlBJKSAqIDAuNTsgLy8gSW52ZXJzZSBza2V3IChtYXggc2tldyBhdCBzdGFydCBvZiBmYWRlLWluKQogICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVOZXh0ID0gMC41ICsgMC41ICogcHJvZ3Jlc3M7IC8vIEdyb3cKCiAgICAgICAgICAgICAgICBjdHgucm90YXRlKHJvdGF0ZU5leHQpOwogICAgICAgICAgICAgICAgY3R4LnRyYW5zZm9ybSgxLCAwLCAtc2tld05leHRYLCAxLCAwLCAwKTsgLy8gQXBwbHkgaW52ZXJzZSBza2V3IFgKICAgICAgICAgICAgICAgIGN0eC5zY2FsZShzY2FsZU5leHQsIHNjYWxlTmV4dCk7CgogICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShuZXh0SW1nLCAtY2VudGVyWCwgLWNlbnRlclksIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwoKICAgICAgICAgICAgICAgIHN0ZXArKzsKICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3RnJhbWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGRyYXdGcmFtZSgpOwogICAgICAgIH0pOwoKICAgICAgICAvLyBBbmltYXRpb24gNjogQWJzdHJhY3QgR3JpZCBSZXZlYWwKICAgICAgICAvLyBDb25jZXB0OiBDdXJyZW50IGltYWdlIGlzIGNvdmVyZWQgYnkgYW4gZXhwYW5kaW5nL2NvbnRyYWN0aW5nIGdyaWQgb2YgYWJzdHJhY3Qgc2hhcGVzLiBUaGUgc2hhcGVzCiAgICAgICAgLy8gbW9ycGggaW50byBzaW1pbGFyIHNoYXBlcyBiZWxvbmdpbmcgdG8gdGhlIG5leHQgaW1hZ2UsIHdoaWNoIHRoZW4gZmlsbHMgdGhlIGdyaWQuCiAgICAgICAgLy8gVHJhbnNmb3JtYXRpb25zOiBTY2FsZSwgVHJhbnNsYXRpb24sIFNoZWFyL1NrZXcgKG9mIGdyaWQgY2VsbHMpLCBUcmFuc3BhcmVuY3kuCiAgICAgICAgYW5pbWF0aW9uU3RhZ2VzLnB1c2goZnVuY3Rpb24gYW5pbWF0aW9uNl9BYnN0cmFjdEdyaWRSZXZlYWwoY3VycmVudEltZywgbmV4dEltZywgY2FudmFzLCBjdHgsIHJlc29sdmUpIHsKICAgICAgICAgICAgY29uc3QgdG90YWxTdGVwcyA9IDUwOwogICAgICAgICAgICBsZXQgc3RlcCA9IDA7CgogICAgICAgICAgICBjb25zdCBncmlkU2l6ZVN0YXJ0ID0gNTsgLy8gU21hbGxlciBncmlkLCBsYXJnZXIgY2VsbHMKICAgICAgICAgICAgY29uc3QgZ3JpZFNpemVFbmQgPSAxNTsgIC8vIExhcmdlciBncmlkLCBzbWFsbGVyIGNlbGxzCgogICAgICAgICAgICBmdW5jdGlvbiBkcmF3RnJhbWUoKSB7CiAgICAgICAgICAgICAgICBpZiAoc3RlcCA+IHRvdGFsU3RlcHMpIHsKICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShuZXh0SW1nLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBzdGVwIC8gdG90YWxTdGVwczsgLy8gMCB0byAxCgogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEdyaWRTaXplID0gTWF0aC5yb3VuZChncmlkU2l6ZVN0YXJ0ICogKDEgLSBwcm9ncmVzcykgKyBncmlkU2l6ZUVuZCAqIHByb2dyZXNzKTsKICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxXaWR0aCA9IGNhbnZhcy53aWR0aCAvIGN1cnJlbnRHcmlkU2l6ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxIZWlnaHQgPSBjYW52YXMuaGVpZ2h0IC8gY3VycmVudEdyaWRTaXplOwoKICAgICAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgY3VycmVudEdyaWRTaXplOyB5KyspIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGN1cnJlbnRHcmlkU2l6ZTsgeCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN4ID0geCAqIGNlbGxXaWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3kgPSB5ICogY2VsbEhlaWdodDsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN4ID0gc3ggKyBjZWxsV2lkdGggLyAyOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjeSA9IHN5ICsgY2VsbEhlaWdodCAvIDI7CgogICAgICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKGN4LCBjeSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqaXR0ZXJYID0gTWF0aC5zaW4oeCAqIDAuNSArIHkgKiAwLjMgKyBzdGVwICogMC4xKSAqIDEwICogKDEgLSBwcm9ncmVzcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGppdHRlclkgPSBNYXRoLmNvcyh4ICogMC41ICsgeSAqIDAuMyArIHN0ZXAgKiAwLjEpICogMTAgKiAoMSAtIHByb2dyZXNzKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShqaXR0ZXJYLCBqaXR0ZXJZKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxTY2FsZSA9IDEgLSBNYXRoLmFicygwLjUgLSBwcm9ncmVzcykgKiAxLjU7IC8vIFNocmluayB0aGVuIGdyb3cKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbFJvdGF0aW9uID0gTWF0aC5QSSAqIDAuNSAqIHByb2dyZXNzOyAvLyBSb3RhdGUgOTAgZGVnCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zY2FsZShjZWxsU2NhbGUsIGNlbGxTY2FsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoY2VsbFJvdGF0aW9uKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNoZWFyQW1vdW50ID0gTWF0aC5zaW4ocHJvZ3Jlc3MgKiBNYXRoLlBJKSAqIDAuMzsgLy8gUGVha3MgYXQgMC41CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50cmFuc2Zvcm0oMSwgMCwgc2hlYXJBbW91bnQsIDEsIDAsIDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBjdXJyZW50IGltYWdlIHNlZ21lbnQsIGZhZGluZyBvdXQKICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMSAtIHByb2dyZXNzOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGN1cnJlbnRJbWcsIHN4LCBzeSwgY2VsbFdpZHRoLCBjZWxsSGVpZ2h0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtY2VsbFdpZHRoIC8gMiwgLWNlbGxIZWlnaHQgLyAyLCBjZWxsV2lkdGgsIGNlbGxIZWlnaHQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBuZXh0IGltYWdlIHNlZ21lbnQsIGZhZGluZyBpbgogICAgICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBwcm9ncmVzczsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShuZXh0SW1nLCBzeCwgc3ksIGNlbGxXaWR0aCwgY2VsbEhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLWNlbGxXaWR0aCAvIDIsIC1jZWxsSGVpZ2h0IC8gMiwgY2VsbFdpZHRoLCBjZWxsSGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc3RlcCsrOwogICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGRyYXdGcmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZHJhd0ZyYW1lKCk7CiAgICAgICAgfSk7CgogICAgICAgIC8vIEFuaW1hdGlvbiA3OiBGbGlwcGluZyBUaWxlcwogICAgICAgIC8vIENvbmNlcHQ6IFRoZSBpbWFnZSBpcyBkaXZpZGVkIGludG8gYSBncmlkIG9mIHRpbGVzLiBFYWNoIHRpbGUgZmxpcHMgb3ZlciAoc2ltdWxhdGVkIDNEIHJvdGF0aW9uKQogICAgICAgIC8vIHRvIHJldmVhbCB0aGUgY29ycmVzcG9uZGluZyBwYXJ0IG9mIHRoZSBuZXcgaW1hZ2UuCiAgICAgICAgLy8gVHJhbnNmb3JtYXRpb25zOiBSb3RhdGlvbiAoc2ltdWxhdGVkIDNEKSwgVHJhbnNwYXJlbmN5LCBTY2FsZS4KICAgICAgICBhbmltYXRpb25TdGFnZXMucHVzaChmdW5jdGlvbiBhbmltYXRpb243X0ZsaXBwaW5nVGlsZXMoY3VycmVudEltZywgbmV4dEltZywgY2FudmFzLCBjdHgsIHJlc29sdmUpIHsKICAgICAgICAgICAgY29uc3QgdG90YWxTdGVwcyA9IDUwOwogICAgICAgICAgICBsZXQgc3RlcCA9IDA7CgogICAgICAgICAgICBjb25zdCBncmlkU2l6ZSA9IDEwOyAvLyBOdW1iZXIgb2YgdGlsZXMKICAgICAgICAgICAgY29uc3QgdGlsZVdpZHRoID0gY2FudmFzLndpZHRoIC8gZ3JpZFNpemU7CiAgICAgICAgICAgIGNvbnN0IHRpbGVIZWlnaHQgPSBjYW52YXMuaGVpZ2h0IC8gZ3JpZFNpemU7CgogICAgICAgICAgICBjb25zdCB0aWxlRGVsYXlzID0gW107IC8vIFJhbmRvbSBkZWxheXMgZm9yIGVhY2ggdGlsZSB0byBtYWtlIHRoZSBmbGlwIG9yZ2FuaWMKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncmlkU2l6ZSAqIGdyaWRTaXplOyBpKyspIHsKICAgICAgICAgICAgICAgIHRpbGVEZWxheXMucHVzaChNYXRoLnJhbmRvbSgpICogMC41KTsgLy8gRGVsYXkgdXAgdG8gNTAlIG9mIGFuaW1hdGlvbgogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBkcmF3RnJhbWUoKSB7CiAgICAgICAgICAgICAgICBpZiAoc3RlcCA+IHRvdGFsU3RlcHMpIHsKICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShuZXh0SW1nLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICAgICAgY29uc3QgYmFzZVByb2dyZXNzID0gc3RlcCAvIHRvdGFsU3RlcHM7IC8vIDAgdG8gMQoKICAgICAgICAgICAgICAgIGxldCB0aWxlSW5kZXggPSAwOwogICAgICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBncmlkU2l6ZTsgeSsrKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBncmlkU2l6ZTsgeCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN4ID0geCAqIHRpbGVXaWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3kgPSB5ICogdGlsZUhlaWdodDsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUaWxlRGVsYXkgPSB0aWxlRGVsYXlzW3RpbGVJbmRleF07CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbGVQcm9ncmVzcyA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIChiYXNlUHJvZ3Jlc3MgLSBjdXJyZW50VGlsZURlbGF5KSAvICgxIC0gY3VycmVudFRpbGVEZWxheSkpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoc3ggKyB0aWxlV2lkdGggLyAyLCBzeSArIHRpbGVIZWlnaHQgLyAyKTsgLy8gVHJhbnNsYXRlIHRvIGNlbnRlciBvZiB0aWxlCgogICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW11bGF0ZSAzRCBmbGlwIGJ5IHNjYWxpbmcgaG9yaXpvbnRhbGx5IGZyb20gMSB0byAwIGFuZCBiYWNrIHRvIDEKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVYID0gTWF0aC5hYnMoTWF0aC5jb3ModGlsZVByb2dyZXNzICogTWF0aC5QSSkpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc2NhbGUoc2NhbGVYLCAxKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgdGhlIGN1cnJlbnQgaW1hZ2UgdGlsZSAoZmlyc3QgaGFsZiBvZiBmbGlwKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGlsZVByb2dyZXNzIDwgMC41KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxIC0gKHRpbGVQcm9ncmVzcyAqIDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShjdXJyZW50SW1nLCBzeCwgc3ksIHRpbGVXaWR0aCwgdGlsZUhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC10aWxlV2lkdGggLyAyLCAtdGlsZUhlaWdodCAvIDIsIHRpbGVXaWR0aCwgdGlsZUhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyB0aGUgbmV4dCBpbWFnZSB0aWxlIChzZWNvbmQgaGFsZiBvZiBmbGlwKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9ICh0aWxlUHJvZ3Jlc3MgLSAwLjUpICogMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UobmV4dEltZywgc3gsIHN5LCB0aWxlV2lkdGgsIHRpbGVIZWlnaHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtdGlsZVdpZHRoIC8gMiwgLXRpbGVIZWlnaHQgLyAyLCB0aWxlV2lkdGgsIHRpbGVIZWlnaHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVJbmRleCsrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHN0ZXArKzsKICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3RnJhbWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGRyYXdGcmFtZSgpOwogICAgICAgIH0pOwoKICAgICAgICAvLyBBbmltYXRpb24gODogSW5rIEJsb3QgRGlzcGVyc2FsCiAgICAgICAgLy8gQ29uY2VwdDogQ3VycmVudCBpbWFnZSBkaXNzb2x2ZXMgYXMgaWYgaW5rIGlzIGRpc3BlcnNpbmcgaW4gd2F0ZXIsIGNyZWF0aW5nIG9yZ2FuaWMsIGZsb3dpbmcgc2hhcGVzLAogICAgICAgIC8vIHdoaWNoIHRoZW4gY29hbGVzY2UgaW50byB0aGUgbmV3IGltYWdlLgogICAgICAgIC8vIFRyYW5zZm9ybWF0aW9uczogVHJhbnNsYXRpb24gKHBpeGVsIGRpc3BsYWNlbWVudCBiYXNlZCBvbiBmbG93KSwgVHJhbnNwYXJlbmN5LCBTY2FsZS4KICAgICAgICBhbmltYXRpb25TdGFnZXMucHVzaChmdW5jdGlvbiBhbmltYXRpb244X0lua0Jsb3REaXNwZXJzYWwoY3VycmVudEltZywgbmV4dEltZywgY2FudmFzLCBjdHgsIHJlc29sdmUpIHsKICAgICAgICAgICAgY29uc3QgdG90YWxTdGVwcyA9IDUwOwogICAgICAgICAgICBsZXQgc3RlcCA9IDA7CgogICAgICAgICAgICBjb25zdCBibG9ja1NpemUgPSAxMDsgLy8gU2l6ZSBvZiAiaW5rIGJsb3QiIGJsb2NrcwoKICAgICAgICAgICAgZnVuY3Rpb24gZHJhd0ZyYW1lKCkgewogICAgICAgICAgICAgICAgaWYgKHN0ZXAgPiB0b3RhbFN0ZXBzKSB7CiAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UobmV4dEltZywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0gc3RlcCAvIHRvdGFsU3RlcHM7IC8vIDAgdG8gMQoKICAgICAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgY2FudmFzLmhlaWdodDsgeSArPSBibG9ja1NpemUpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGNhbnZhcy53aWR0aDsgeCArPSBibG9ja1NpemUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc291cmNlWCA9IHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZVkgPSB5OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VXID0gYmxvY2tTaXplOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VIID0gYmxvY2tTaXplOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGR5bmFtaWMgb2Zmc2V0IGJhc2VkIG9uIG5vaXNlIGFuZCBwcm9ncmVzcwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXRYID0gTWF0aC5zaW4oeCAqIDAuMDUgKyB5ICogMC4wMyArIHN0ZXAgKiAwLjEpICogMzAgKiBwcm9ncmVzcyAqICgxIC0gcHJvZ3Jlc3MpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXRZID0gTWF0aC5jb3MoeCAqIDAuMDUgKyB5ICogMC4wMyArIHN0ZXAgKiAwLjEpICogMzAgKiBwcm9ncmVzcyAqICgxIC0gcHJvZ3Jlc3MpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHNjYWxlIGZvciBkaXNwZXJzaW9uIChibG9icyBncm93IHRoZW4gc2hyaW5rKQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2FsZUZhY3RvciA9IDEgKyBNYXRoLnNpbihwcm9ncmVzcyAqIE1hdGguUEkpICogMC41OyAvLyBHcm93cyB0byAxLjV4IHRoZW4gc2hyaW5rcwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBjdXJyZW50IGltYWdlIHNlZ21lbnRzLCBkaXN0b3J0aW5nIGFuZCBmYWRpbmcgb3V0CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDEgLSBwcm9ncmVzczsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShzb3VyY2VYICsgYmxvY2tTaXplIC8gMiwgc291cmNlWSArIGJsb2NrU2l6ZSAvIDIpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc2NhbGUoc2NhbGVGYWN0b3IsIHNjYWxlRmFjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShjdXJyZW50SW1nLCBzb3VyY2VYLCBzb3VyY2VZLCBzb3VyY2VXLCBzb3VyY2VILAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtc291cmNlVyAvIDIgKyBvZmZzZXRYLCAtc291cmNlSCAvIDIgKyBvZmZzZXRZLCBzb3VyY2VXLCBzb3VyY2VIKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgbmV4dCBpbWFnZSBzZWdtZW50cywgYXBwZWFyaW5nIGRpc3RvcnRlZCBhbmQgZmFkaW5nIGluCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IHByb2dyZXNzOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKHNvdXJjZVggKyBibG9ja1NpemUgLyAyLCBzb3VyY2VZICsgYmxvY2tTaXplIC8gMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zY2FsZShzY2FsZUZhY3Rvciwgc2NhbGVGYWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKG5leHRJbWcsIHNvdXJjZVgsIHNvdXJjZVksIHNvdXJjZVcsIHNvdXJjZUgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1zb3VyY2VXIC8gMiAtIG9mZnNldFgsIC1zb3VyY2VIIC8gMiAtIG9mZnNldFksIHNvdXJjZVcsIHNvdXJjZUgpOyAvLyBJbnZlcnNlIGRpc3RvcnRpb24KICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzdGVwKys7CiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhd0ZyYW1lKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkcmF3RnJhbWUoKTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gQW5pbWF0aW9uIDk6IFJlZmxlY3RpbmcgS2FsZWlkb3Njb3BlCiAgICAgICAgLy8gQ29uY2VwdDogVGhlIGN1cnJlbnQgaW1hZ2UgaXMgcmVmbGVjdGVkIGFuZCByZXBlYXRlZCBsaWtlIGEga2FsZWlkb3Njb3BlLCB0aGVuIHRoZSBrYWxlaWRvc2NvcGUKICAgICAgICAvLyBwYXR0ZXJuIHNoaWZ0cyBhbmQgZXZvbHZlcyBpbnRvIHRoZSBuZXh0IGltYWdlJ3MgcGF0dGVybi4KICAgICAgICAvLyBUcmFuc2Zvcm1hdGlvbnM6IFJvdGF0aW9uLCBTY2FsZSwgU2hlYXIgKG1pcnJvcmluZyBhbmQgcmVwZWF0aW5nIHBhcnRzIG9mIGltYWdlKS4KICAgICAgICBhbmltYXRpb25TdGFnZXMucHVzaChmdW5jdGlvbiBhbmltYXRpb245X1JlZmxlY3RpbmdLYWxlaWRvc2NvcGUoY3VycmVudEltZywgbmV4dEltZywgY2FudmFzLCBjdHgsIHJlc29sdmUpIHsKICAgICAgICAgICAgY29uc3QgdG90YWxTdGVwcyA9IDUwOwogICAgICAgICAgICBsZXQgc3RlcCA9IDA7CgogICAgICAgICAgICBjb25zdCBudW1TZWdtZW50cyA9IDY7IC8vIE51bWJlciBvZiBrYWxlaWRvc2NvcGUgc2VnbWVudHMgKGUuZy4sIDYgZm9yIGEgaGV4YWdvbmFsIGxvb2spCiAgICAgICAgICAgIGNvbnN0IHNlZ21lbnRBbmdsZSA9IChNYXRoLlBJICogMikgLyBudW1TZWdtZW50czsKICAgICAgICAgICAgY29uc3QgY2VudGVyWCA9IGNhbnZhcy53aWR0aCAvIDI7CiAgICAgICAgICAgIGNvbnN0IGNlbnRlclkgPSBjYW52YXMuaGVpZ2h0IC8gMjsKCiAgICAgICAgICAgIGZ1bmN0aW9uIGRyYXdGcmFtZSgpIHsKICAgICAgICAgICAgICAgIGlmIChzdGVwID4gdG90YWxTdGVwcykgewogICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKG5leHRJbWcsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IHN0ZXAgLyB0b3RhbFN0ZXBzOyAvLyAwIHRvIDEKCiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50RmFkZSA9IDEgLSBwcm9ncmVzczsKICAgICAgICAgICAgICAgIGNvbnN0IG5leHRGYWRlID0gcHJvZ3Jlc3M7CgogICAgICAgICAgICAgICAgY29uc3Qgb3ZlcmFsbFJvdGF0aW9uID0gcHJvZ3Jlc3MgKiBNYXRoLlBJOyAvLyBSb3RhdGUgMTgwIGRlZ3JlZXMgb3ZlciB0cmFuc2l0aW9uCgogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1TZWdtZW50czsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKGNlbnRlclgsIGNlbnRlclkpOwogICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoaSAqIHNlZ21lbnRBbmdsZSArIG92ZXJhbGxSb3RhdGlvbik7CgogICAgICAgICAgICAgICAgICAgIGlmIChpICUgMiA9PT0gMSkgeyAvLyBSZWZsZWN0IGV2ZXJ5IG90aGVyIHNlZ21lbnQKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNjYWxlKDEsIC0xKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIERyYXcgY3VycmVudCBpbWFnZSAoZmFkaW5nIG91dCkKICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBjdXJyZW50RmFkZTsKICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGN1cnJlbnRJbWcsIC1jZW50ZXJYLCAtY2VudGVyWSwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKCiAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBuZXh0IGltYWdlIChmYWRpbmcgaW4pCiAgICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gbmV4dEZhZGU7CiAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShuZXh0SW1nLCAtY2VudGVyWCwgLWNlbnRlclksIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CgogICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgc3RlcCsrOwogICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGRyYXdGcmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZHJhd0ZyYW1lKCk7CiAgICAgICAgfSk7CgogICAgICAgIC8vIEFuaW1hdGlvbiAxMDogR2xpdGNoIERpc3RvcnRpb24gJiBSZWFzc2VtYmx5CiAgICAgICAgLy8gQ29uY2VwdDogQ3VycmVudCBpbWFnZSB1bmRlcmdvZXMgYSBzZXJpZXMgb2YgdmlzdWFsIGdsaXRjaGVzIChob3Jpem9udGFsL3ZlcnRpY2FsIGxpbmVzIHNoaWZ0aW5nLAogICAgICAgIC8vIGJsb2NrcyBkaXNwbGFjaW5nLCBjb2xvciBhYmVycmF0aW9ucykgYmVmb3JlIHJlc29sdmluZyBpbnRvIHRoZSBuZXcgaW1hZ2UsIHdoaWNoIHRoZW4gc21vb3RocyBvdXQuCiAgICAgICAgLy8gVHJhbnNmb3JtYXRpb25zOiBUcmFuc2xhdGlvbiAoYmxvY2sgc2hpZnRzKSwgQ29sb3IgY2hhbmdlIChwaXhlbCBjb2xvciBub2lzZSksIFRyYW5zcGFyZW5jeS4KICAgICAgICBhbmltYXRpb25TdGFnZXMucHVzaChmdW5jdGlvbiBhbmltYXRpb24xMF9HbGl0Y2hEaXN0b3J0aW9uKGN1cnJlbnRJbWcsIG5leHRJbWcsIGNhbnZhcywgY3R4LCByZXNvbHZlKSB7CiAgICAgICAgICAgIGNvbnN0IHRvdGFsU3RlcHMgPSA1MDsKICAgICAgICAgICAgbGV0IHN0ZXAgPSAwOwoKICAgICAgICAgICAgY29uc3Qgc2xpY2VIZWlnaHQgPSA1MDsgLy8gSGVpZ2h0IG9mIGhvcml6b250YWwgc2xpY2VzCiAgICAgICAgICAgIGNvbnN0IG1heE9mZnNldCA9IDUwOyAgIC8vIE1heCBwaXhlbCBvZmZzZXQgZm9yIGdsaXRjaGVzCiAgICAgICAgICAgIGNvbnN0IGNvbG9yTm9pc2VBbW91bnQgPSAwLjU7IC8vIE1heCBhbHBoYSBmb3IgY29sb3Igbm9pc2UKCiAgICAgICAgICAgIGZ1bmN0aW9uIGRyYXdGcmFtZSgpIHsKICAgICAgICAgICAgICAgIGlmIChzdGVwID4gdG90YWxTdGVwcykgewogICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKG5leHRJbWcsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IHN0ZXAgLyB0b3RhbFN0ZXBzOyAvLyAwIHRvIDEKCiAgICAgICAgICAgICAgICBjb25zdCBnbGl0Y2hJbnRlbnNpdHkgPSBNYXRoLnNpbihwcm9ncmVzcyAqIE1hdGguUEkpOyAvLyBQZWFrcyBhdCAwLjUKCiAgICAgICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGNhbnZhcy5oZWlnaHQ7IHkgKz0gc2xpY2VIZWlnaHQpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50WU9mZnNldCA9IE1hdGguc2luKHkgKiAwLjEgKyBzdGVwICogMC4wNSkgKiBtYXhPZmZzZXQgKiBnbGl0Y2hJbnRlbnNpdHk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFlPZmZzZXQgPSBNYXRoLmNvcyh5ICogMC4xICsgc3RlcCAqIDAuMDUpICogbWF4T2Zmc2V0ICogZ2xpdGNoSW50ZW5zaXR5OwoKICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IGN1cnJlbnQgaW1hZ2Ugc2xpY2UsIHNoaWZ0aW5nIGFuZCBmYWRpbmcgb3V0CiAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxIC0gcHJvZ3Jlc3M7CiAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShjdXJyZW50SW1nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsIHksIGNhbnZhcy53aWR0aCwgc2xpY2VIZWlnaHQsIC8vIFNvdXJjZSByZWN0YW5nbGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50WU9mZnNldCwgeSwgY2FudmFzLndpZHRoLCBzbGljZUhlaWdodCk7IC8vIERlc3RpbmF0aW9uIHdpdGggb2Zmc2V0CiAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBuZXh0IGltYWdlIHNsaWNlLCBzaGlmdGluZyBhbmQgZmFkaW5nIGluCiAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSBwcm9ncmVzczsKICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKG5leHRJbWcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCwgeSwgY2FudmFzLndpZHRoLCBzbGljZUhlaWdodCwgLy8gU291cmNlIHJlY3RhbmdsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1uZXh0WU9mZnNldCwgeSwgY2FudmFzLndpZHRoLCBzbGljZUhlaWdodCk7IC8vIERlc3RpbmF0aW9uIHdpdGggaW52ZXJzZSBvZmZzZXQKICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIEFkZCBjb2xvciBub2lzZS9hYmVycmF0aW9uIGxheWVyCiAgICAgICAgICAgICAgICBpZiAoZ2xpdGNoSW50ZW5zaXR5ID4gMC4wMSkgewogICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gY29sb3JOb2lzZUFtb3VudCAqIGdsaXRjaEludGVuc2l0eTsKICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2RpZmZlcmVuY2UnOyAvLyBDYW4gdHJ5ICdzY3JlZW4nLCAnb3ZlcmxheScsICd4b3InIGZvciBkaWZmZXJlbnQgZWZmZWN0cwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBgcmdiKCR7TWF0aC5yYW5kb20oKSAqIDI1NX0sICR7TWF0aC5yYW5kb20oKSAqIDI1NX0sICR7TWF0aC5yYW5kb20oKSAqIDI1NX0pYDsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHN0ZXArKzsKICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3RnJhbWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGRyYXdGcmFtZSgpOwogICAgICAgIH0pOwoKICAgICAgICAvLyAtLS0gU3RhcnQgdGhlIGFuaW1hdGlvbiBsb29wIHdoZW4gdGhlIERPTSBpcyBmdWxseSBsb2FkZWQgLS0tCiAgICAgICAgd2luZG93Lm9ubG9hZCA9IHN0YXJ0QW5pbWF0aW9uTG9vcDsKLyoKICAgICAgICAvLyBPcHRpb25hbDogSGFuZGxlIHdpbmRvdyByZXNpemluZyB0byBrZWVwIHRoZSBjYW52YXMgZnVsbC1zY3JlZW4gYW5kIHVwZGF0ZSBpbnRlcm5hbCBkaW1lbnNpb25zCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHsKICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5BbmltYXRpb25DYW52YXMnKTsKICAgICAgICAgICAgaWYgKGNhbnZhcykgewogICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0OwogICAgICAgICAgICAgICAgLy8gUmVkcmF3IGN1cnJlbnQgaW1hZ2UgaW1tZWRpYXRlbHkgYWZ0ZXIgcmVzaXplIHRvIGF2b2lkIGJsYW5rIHNjcmVlbgogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJbWFnZSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGN1cnJlbnRJbWFnZSwgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOyAqLwoKCgogICAgdmFyIGVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvZHljYScpOyAKCWVsZW1lbnRzLnN0eWxlLnBvc2l0aW9uPSJmaXhlZDsiCgllbGVtZW50cy5zdHlsZS5sZWZ0PSItNSUiOwoJZWxlbWVudHMuc3R5bGUudG9wPSItNSUiOwoJCWVsZW1lbnRzLnN0eWxlLndpZHRoPSIxMTB2dyI7CgllbGVtZW50cy5zdHlsZS5oZWlnaHQ9IjExMHZoIjsKCQl2YXIgZGRpcj0xOwoKCXZhciBsbD1lbGVtZW50cy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKCnZhciB3d3d3PWxsLndpZHRoOwp2YXIgeHh4eHg9bGwuaGVpZ2h0Owp2YXIgbWF4WD0xOwp2YXIgbWF4WT0xOwp2YXIgZGRkZHI7CnZhciB0ZWx0b3NlPTA7CnZhciBtZWVzdGU9MDsKdmFyIHJpY2h0aW5nPTE7CiAgICB2YXIgbWF4TW92ZVBlcmNlbnQgPSAxOyAvLyA3JQpmdW5jdGlvbiBzdGFydFNtb290aFpvb21Nb3ZlKCkgewoKCgogICAgICAgICAvLyAgZWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY292ZXJzY3oyY2InKTsKCgkvL2xsPWVsZW1lbnRzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKICAgICAgICAgICAgLyoKCQkJaWYobWF4WD49KDEuMio1MTIpKXsKCgkJCWRkZGRyPTEtMC4wMDU7CgkJCQkKCQkJfQoJCQkJCQlpZihtYXhYPD0oMS4xKjUxMikpewoKCQkJZGRkZHI9MSswLjAwNTsKCQoJCQl9ICovCgkJCW1lZXN0ZT1tZWVzdGUrKDEuNSpyaWNodGluZyk7CgkJCWlmKG1lZXN0ZT4xMDApewoJCQltZWVzdGU9MTAwOwoJCQlyaWNodGluZz0tMTsKCQkJfQoJCQkKCQkJCgkJCQkJCWlmKG1lZXN0ZTwtMTAwKXsKCQkJbWVlc3RlPS0xMDA7CgkJCXJpY2h0aW5nPTE7CgkJCX0KCQkJCgkJCQoJCQlkZGRkcj0oMS81MCkqbWVlc3RlOwoJCQkvL3RlbHRvc2UrPTE7CgkJCQogICAgICAgICAgICAgbWF4WCA9ICg1MTIrKGRkZGRyKjUwKSk7CiAgICAgICAgICAgICBtYXhZID0gKDUxMisoZGRkZHIqNTApKTsKCQkJCgkKCQkJCgkJCQoKCQkJCgkJCWRvY3VtZW50LnRpdGxlPW1heFg7CgkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluQW5pbWF0aW9uQ2FudmFzJykuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5BbmltYXRpb25DYW52YXMnKS5zdHlsZS53aWR0aD0iMTAwJSI7CgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5BbmltYXRpb25DYW52YXMnKS5zdHlsZS5oZWlnaHQ9IjEwMCUiOyAKCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib2R5Y2EnKS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiOwoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib2R5Y2EnKS5zdHlsZS53aWR0aD0gKDExMCsoKGRkZGRyKjUwKSkvMTApKyJ2dyI7CgkJCQkKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9keWNhJykuc3R5bGUuaGVpZ2h0PSAgKDExMCsoKGRkZGRyKjUwKSkvMTApKyJ2aCI7CgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9keWNhJykuc3R5bGUubGVmdD0gICgoLTUtKChkZGRkcioyNSkpLzEwKSkrInZ3IjsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9keWNhJykuc3R5bGUudG9wPSAgKCgtNS0oKGRkZGRyKjI1KSkvMTApKSsidmgiOwoKICAgICAgICAgICAgCiAgICAgICAgIC8vICBlbGVtZW50cy5zdHlsZS5sZWZ0PS1NYXRoLmFicygoLW1heFgpLzIpKyIlIjsKCQkgICAKICAgICAgICAgLy8gIGVsZW1lbnRzLnN0eWxlLnRvcD0tTWF0aC5hYnMoKG1heFkpLzIpKyIlIjsKCiAgICAgICAgCiAgICAgICAgc2V0VGltZW91dCgic3RhcnRTbW9vdGhab29tTW92ZSgpIiwgMTIwKTsKCiAgICAKCn0KCi8vIFN0YXJ0IHRoZSBlZmZlY3QKc3RhcnRTbW9vdGhab29tTW92ZSgpOwogICAgPC9zY3JpcHQ+CgkKCjwvYm9keT4KPC9odG1sPgo=";
var arrayNight=new Array();

arrayNight[0]="PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDx0aXRsZT5SZWFsaXN0aWMgUnVyYWwgTmlnaHQgRmxpZ2h0PC90aXRsZT4KICAgIDxzdHlsZT4KICAgICAgICBib2R5IHsgbWFyZ2luOiAwOyBvdmVyZmxvdzogaGlkZGVuOyBiYWNrZ3JvdW5kOiAjMDAwMjA1OyB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5Pgo8c2NyaXB0IHR5cGU9Im1vZHVsZSI+CmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ2h0dHBzOi8vY2RuLnNreXBhY2suZGV2L3RocmVlQDAuMTMyLjInOwoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gU0NFTkUgKyBDQU1FUkEgKyBSRU5ERVJFUgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjb25zdCBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpOwoKLy8gU2xpZ2h0bHkgYnJpZ2h0ZXIgaG9yaXpvbiBjb2xvcgpjb25zdCB0b3BDb2xvciA9IG5ldyBUSFJFRS5Db2xvcigweDAyMDQwYSk7CmNvbnN0IGhvcml6b25Db2xvciA9IG5ldyBUSFJFRS5Db2xvcigweDBhMTYyMCk7CgovLyBGb2cgc2xpZ2h0bHkgcmVkdWNlZCBzbyBob3Jpem9uIHNob3dzIG1vcmUKc2NlbmUuZm9nID0gbmV3IFRIUkVFLkZvZ0V4cDIoMHgwMjA0MGEsIDAuMDAwMTIpOwoKY29uc3QgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDU1LCB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgNSwgNjAwMDApOwpjYW1lcmEucG9zaXRpb24uc2V0KDAsIDE0MDAsIDEyMDAwKTsKCmNvbnN0IHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoeyBhbnRpYWxpYXM6IHRydWUgfSk7CnJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pOwpyZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpOwpkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpOwoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gU0lNUExFIEhPUklaT04gR1JBRElFTlQgKG5vIHNoYWRlcnMpCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnN0IGdyYWRpZW50Q2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CmdyYWRpZW50Q2FudmFzLndpZHRoID0gMjsKZ3JhZGllbnRDYW52YXMuaGVpZ2h0ID0gMjsKCmNvbnN0IGN0eCA9IGdyYWRpZW50Q2FudmFzLmdldENvbnRleHQoIjJkIik7CgovLyB2ZXJ0aWNhbCBncmFkaWVudDogZGFyayB0b3Ag4oaSIGJyaWdodGVyIGhvcml6b24KY29uc3QgZ3JhZCA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCAwLCAwLCAyKTsKZ3JhZC5hZGRDb2xvclN0b3AoMCwgIiMwMjA0MGEiKTsKZ3JhZC5hZGRDb2xvclN0b3AoMSwgIiMwYTE2MjAiKTsKCmN0eC5maWxsU3R5bGUgPSBncmFkOwpjdHguZmlsbFJlY3QoMCwgMCwgMiwgMik7Cgpjb25zdCBncmFkaWVudFRleCA9IG5ldyBUSFJFRS5DYW52YXNUZXh0dXJlKGdyYWRpZW50Q2FudmFzKTsKc2NlbmUuYmFja2dyb3VuZCA9IGdyYWRpZW50VGV4OwoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gTU9PTiArIExJR0hUSU5HCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnN0IG1vb25saWdodCA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KDB4ODg5OWNjLCAwLjU1KTsKbW9vbmxpZ2h0LnBvc2l0aW9uLnNldCg4MDAwLCA5MDAwLCAzMDAwKTsKc2NlbmUuYWRkKG1vb25saWdodCk7CgpzY2VuZS5hZGQobmV3IFRIUkVFLkFtYmllbnRMaWdodCgweDExMTMxYSwgMC4xOCkpOwoKY29uc3QgbW9vbkdlbyA9IG5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeSg5MDAsIDMyLCAzMik7CmNvbnN0IG1vb25NYXQgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoeyBjb2xvcjogMHhkZGU2ZmYgfSk7CmNvbnN0IG1vb24gPSBuZXcgVEhSRUUuTWVzaChtb29uR2VvLCBtb29uTWF0KTsKbW9vbi5wb3NpdGlvbi5zZXQoLTYwMDAsIDkwMDAsIC0xNTAwMCk7CnNjZW5lLmFkZChtb29uKTsKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIFRFUlJBSU4gKEZyYWN0YWwgTm9pc2UpCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIG5vaXNlKHgsIHkpIHsKICAgIHJldHVybiAoTWF0aC5zaW4oeCAqIDAuMDAwMTIpICsgTWF0aC5zaW4oeSAqIDAuMDAwMTUpICsgTWF0aC5zaW4oKHgreSkgKiAwLjAwMDA4KSkgKiAxMjA7Cn0KCmNvbnN0IGdyb3VuZEdlbyA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KDYwMDAwLCA2MDAwMCwgMjAwLCAyMDApOwpncm91bmRHZW8ucm90YXRlWCgtTWF0aC5QSSAvIDIpOwoKY29uc3QgdmVydHMgPSBncm91bmRHZW8uYXR0cmlidXRlcy5wb3NpdGlvbjsKZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0cy5jb3VudDsgaSsrKSB7CiAgICBjb25zdCB4ID0gdmVydHMuZ2V0WChpKTsKICAgIGNvbnN0IHogPSB2ZXJ0cy5nZXRaKGkpOwogICAgdmVydHMuc2V0WShpLCBub2lzZSh4LCB6KSk7Cn0KdmVydHMubmVlZHNVcGRhdGUgPSB0cnVlOwoKY29uc3QgZ3JvdW5kTWF0ID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsKICAgIGNvbG9yOiAweDA1MDcwYSwKICAgIHJvdWdobmVzczogMC45NSwKICAgIG1ldGFsbmVzczogMC4wNQp9KTsKc2NlbmUuYWRkKG5ldyBUSFJFRS5NZXNoKGdyb3VuZEdlbywgZ3JvdW5kTWF0KSk7CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBMSUdIVFMgKFZpbGxhZ2VzICsgUm9hZHMpCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnN0IGxpZ2h0Q291bnQgPSA1MDAwOwpjb25zdCBwb3MgPSBuZXcgRmxvYXQzMkFycmF5KGxpZ2h0Q291bnQgKiAzKTsKY29uc3QgY29sID0gbmV3IEZsb2F0MzJBcnJheShsaWdodENvdW50ICogMyk7CmNvbnN0IGNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCk7Cgpjb25zdCBzZWVkcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDIwIH0sICgpID0+ICh7CiAgICB4OiAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAzMDAwMCwKICAgIHo6IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDMwMDAwLAogICAgc2l6ZTogTWF0aC5yYW5kb20oKSAqIDYwMCArIDIwMAp9KSk7Cgpmb3IgKGxldCBpID0gMDsgaSA8IGxpZ2h0Q291bnQ7IGkrKykgewogICAgY29uc3Qgc2VlZCA9IHNlZWRzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNlZWRzLmxlbmd0aCldOwoKICAgIGxldCB4LCB6OwogICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjcpIHsKICAgICAgICBjb25zdCBhbmdsZSA9IE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJICogMjsKICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5wb3coTWF0aC5yYW5kb20oKSwgMC43KSAqIHNlZWQuc2l6ZTsKICAgICAgICB4ID0gc2VlZC54ICsgTWF0aC5jb3MoYW5nbGUpICogZGlzdDsKICAgICAgICB6ID0gc2VlZC56ICsgTWF0aC5zaW4oYW5nbGUpICogZGlzdDsKICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3Qgcm9hZEFuZ2xlID0gc2VlZC5zaXplICogMC4wMDA1OwogICAgICAgIGNvbnN0IHQgPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBzZWVkLnNpemUgKiA0OwogICAgICAgIHggPSBzZWVkLnggKyB0OwogICAgICAgIHogPSBzZWVkLnogKyBNYXRoLnNpbih0ICogMC4wMDIgKyByb2FkQW5nbGUpICogMzAwOwogICAgfQoKICAgIHBvc1tpKjNdID0geDsKICAgIHBvc1tpKjMrMV0gPSA4OwogICAgcG9zW2kqMysyXSA9IHo7CgogICAgY29uc3QgciA9IE1hdGgucmFuZG9tKCk7CiAgICBpZiAociA8IDAuNzApIHsKICAgICAgICBjb2xvci5zZXRIU0woMC4wOCArIE1hdGgucmFuZG9tKCkqMC4wMiwgMS4wLCAwLjY1ICsgTWF0aC5yYW5kb20oKSowLjIpOwogICAgfSBlbHNlIGlmIChyIDwgMC44MikgewogICAgICAgIGNvbG9yLnNldEhTTCgwLjEyICsgTWF0aC5yYW5kb20oKSowLjA1LCAwLjEsIDAuOCArIE1hdGgucmFuZG9tKCkqMC4xKTsKICAgIH0gZWxzZSBpZiAociA8IDAuOTApIHsKICAgICAgICBjb2xvci5zZXRIU0woMC41OCArIE1hdGgucmFuZG9tKCkqMC4wMywgMC45LCAwLjYgKyBNYXRoLnJhbmRvbSgpKjAuMik7CiAgICB9IGVsc2UgaWYgKHIgPCAwLjk2KSB7CiAgICAgICAgY29sb3Iuc2V0SFNMKDAuMzMgKyBNYXRoLnJhbmRvbSgpKjAuMDMsIDAuOSwgMC41NSArIE1hdGgucmFuZG9tKCkqMC4yKTsKICAgIH0gZWxzZSB7CiAgICAgICAgY29sb3Iuc2V0SFNMKDAuMCArIE1hdGgucmFuZG9tKCkqMC4wMiwgMC45NSwgMC41NSArIE1hdGgucmFuZG9tKCkqMC4yKTsKICAgIH0KCiAgICBjb2xbaSozXSAgID0gY29sb3IucjsKICAgIGNvbFtpKjMrMV0gPSBjb2xvci5nOwogICAgY29sW2kqMysyXSA9IGNvbG9yLmI7Cn0KCmNvbnN0IGxpZ2h0R2VvID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7CmxpZ2h0R2VvLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKHBvcywgMykpOwpsaWdodEdlby5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShjb2wsIDMpKTsKCmNvbnN0IGxpZ2h0TWF0ID0gbmV3IFRIUkVFLlBvaW50c01hdGVyaWFsKHsKICAgIHNpemU6IDEyLAogICAgdmVydGV4Q29sb3JzOiB0cnVlLAogICAgYmxlbmRpbmc6IFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcsCiAgICB0cmFuc3BhcmVudDogdHJ1ZSwKICAgIG9wYWNpdHk6IDAuOAp9KTsKCnNjZW5lLmFkZChuZXcgVEhSRUUuUG9pbnRzKGxpZ2h0R2VvLCBsaWdodE1hdCkpOwoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gQU5JTUFUSU9OIChGbGlnaHQgRHluYW1pY3MpCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmxldCB0ID0gMDsKCmZ1bmN0aW9uIGFuaW1hdGUoKSB7CiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7CiAgICB0ICs9IDAuMDAxODsKCiAgICBjYW1lcmEucG9zaXRpb24ueiAtPSAxNDsKICAgIGlmIChjYW1lcmEucG9zaXRpb24ueiA8IC0xNTAwMCkgY2FtZXJhLnBvc2l0aW9uLnogPSAxNTAwMDsKCiAgICBjYW1lcmEucG9zaXRpb24ueCA9IE1hdGguc2luKHQgKiAwLjcpICogMzUwMDsKICAgIGNhbWVyYS5yb3RhdGlvbi56ID0gTWF0aC5zaW4odCAqIDAuNykgKiAwLjAzNTsKCiAgICBjYW1lcmEucm90YXRpb24ueCA9IC0wLjA4ICsgTWF0aC5zaW4odCAqIDAuMykgKiAwLjAxOwoKICAgIGNhbWVyYS5wb3NpdGlvbi54ICs9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDI7CiAgICBjYW1lcmEucG9zaXRpb24ueSArPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAxLjI7CgogICAgY2FtZXJhLmxvb2tBdChjYW1lcmEucG9zaXRpb24ueCAqIDAuNywgMCwgY2FtZXJhLnBvc2l0aW9uLnogLSA2MDAwKTsKCiAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7Cn0KYW5pbWF0ZSgpOwoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gUkVTSVpFCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7CiAgICBjYW1lcmEuYXNwZWN0ID0gd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpOwogICAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTsKfSk7Cjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4K";



arrayNight[1]="PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDx0aXRsZT4zRCBDaW5lbWF0aWMgU3Rvcm0gRmxpZ2h0PC90aXRsZT4KICAgIDxzdHlsZT4KICAgICAgICBib2R5IHsgbWFyZ2luOiAwOyBvdmVyZmxvdzogaGlkZGVuOyBiYWNrZ3JvdW5kOiAjMDAwOyB9CiAgICAgICAgI2h1ZCB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAyMHB4OyBsZWZ0OiAyMHB4OyBjb2xvcjogIzAwZmYwMDsgCiAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBtb25vc3BhY2U7IHRleHQtc2hhZG93OiAwIDAgNXB4ICMwMGZmMDA7IGxpbmUtaGVpZ2h0OiAxLjU7IH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8ZGl2IGlkPSJodWQiIHN0eWxlPSdkaXNwbGF5Om5vbmUnPkFVVE8tWk9PTTogRU5BQkxFRDxicj5TVE9STTogQ0FURUdPUlkgNDxicj5PQkpFQ1RJVkU6IE1PVU5UQUlOIFJFQ09OPC9kaXY+CiAgICA8c2NyaXB0IHR5cGU9Im1vZHVsZSI+CiAgICAgICAgaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAnaHR0cHM6Ly9jZG4uc2t5cGFjay5kZXYvdGhyZWVAMC4xMzIuMic7CgogICAgICAgIGNvbnN0IHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7CiAgICAgICAgY29uc3Qgc2t5QmFzZSA9IG5ldyBUSFJFRS5Db2xvcigweDA1MDUxMCk7CiAgICAgICAgc2NlbmUuYmFja2dyb3VuZCA9IHNreUJhc2U7CiAgICAgICAgc2NlbmUuZm9nID0gbmV3IFRIUkVFLkZvZ0V4cDIoMHgwNTA1MTAsIDAuMDAwMyk7CgogICAgICAgIGNvbnN0IGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg2NSwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDEsIDEyMDAwKTsKICAgICAgICBjb25zdCByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHsgYW50aWFsaWFzOiB0cnVlIH0pOwogICAgICAgIHJlbmRlcmVyLnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTsKCiAgICAgICAgLy8gLS0tIExpZ2h0cyAtLS0KICAgICAgICBjb25zdCBhbWJpZW50ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCgweDQ0NDQ3NywgMC4xKTsKICAgICAgICBzY2VuZS5hZGQoYW1iaWVudCk7CgogICAgICAgIC8vIC0tLSBJbmZpbml0ZSBUZXJyYWluIHdpdGggIlBlYWtzIiAtLS0KICAgICAgICBjb25zdCB3b3JsZFJlcyA9IDEyMDsKICAgICAgICBjb25zdCBnZW8gPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgxNTAwMCwgMTUwMDAsIHdvcmxkUmVzLCB3b3JsZFJlcyk7CiAgICAgICAgZ2VvLnJvdGF0ZVgoLU1hdGguUEkgLyAyKTsKICAgICAgICAKICAgICAgICBjb25zdCBwb3MgPSBnZW8uYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvcy5sZW5ndGg7IGkgKz0gMykgewogICAgICAgICAgICBsZXQgeCA9IHBvc1tpXSwgeiA9IHBvc1tpKzJdOwogICAgICAgICAgICAvLyBIZWlnaHQgbG9naWM6IExhcmdlIG1vdW50YWlucyArIHNtYWxsIGphZ2dlZCBub2lzZQogICAgICAgICAgICBsZXQgaCA9IE1hdGguc2luKHgqMC4wMDA1KSAqIE1hdGguY29zKHoqMC4wMDA1KSAqIDgwMDsgCiAgICAgICAgICAgIGggKz0gTWF0aC5zaW4oeCowLjAwMikgKiAxMDA7CiAgICAgICAgICAgIHBvc1tpKzFdID0gaDsKICAgICAgICB9CiAgICAgICAgZ2VvLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7CiAgICAgICAgY29uc3QgdGVycmFpbk1hdCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7IGNvbG9yOiAweDExMTExMSwgcm91Z2huZXNzOiAwLjkgfSk7CiAgICAgICAgY29uc3QgdGVycmFpbiA9IG5ldyBUSFJFRS5NZXNoKGdlbywgdGVycmFpbk1hdCk7CiAgICAgICAgc2NlbmUuYWRkKHRlcnJhaW4pOwoKICAgICAgICAvLyAtLS0gUmFpbiBTdHJlYWtzIC0tLQogICAgICAgIGNvbnN0IHJhaW5HZW8gPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTsKICAgICAgICBjb25zdCByYWluQ291bnQgPSAyMDAwOwogICAgICAgIGNvbnN0IHJhaW5Qb3MgPSBuZXcgRmxvYXQzMkFycmF5KHJhaW5Db3VudCAqIDMpOwogICAgICAgIGZvcihsZXQgaT0wOyBpPHJhaW5Db3VudCozOyBpKz0zKSB7CiAgICAgICAgICAgIHJhaW5Qb3NbaV0gPSBNYXRoLnJhbmRvbSgpKjIwMDAtMTAwMDsKICAgICAgICAgICAgcmFpblBvc1tpKzFdID0gTWF0aC5yYW5kb20oKSo4MDArNjAwOwogICAgICAgICAgICByYWluUG9zW2krMl0gPSBNYXRoLnJhbmRvbSgpKjQwMDAtMjAwMDsKICAgICAgICB9CiAgICAgICAgcmFpbkdlby5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShyYWluUG9zLCAzKSk7CiAgICAgICAgY29uc3QgcmFpbiA9IG5ldyBUSFJFRS5Qb2ludHMocmFpbkdlbywgbmV3IFRIUkVFLlBvaW50c01hdGVyaWFsKHtjb2xvcjogMHg4ODg4YWEsIHNpemU6IDAuNX0pKTsKICAgICAgICBzY2VuZS5hZGQocmFpbik7CgogICAgICAgIC8vIC0tLSBWb2x1bWV0cmljIENsb3VkcyAtLS0KICAgICAgICBjb25zdCBjbG91ZEdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7CiAgICAgICAgY29uc3QgY2xvdWRNYXQgPSBuZXcgVEhSRUUuTWVzaExhbWJlcnRNYXRlcmlhbCh7IGNvbG9yOiAweDFhMWEyNSwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IDAuNiB9KTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUwOyBpKyspIHsKICAgICAgICAgICAgY29uc3QgY2xvdWQgPSBuZXcgVEhSRUUuTWVzaChuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoMSwgOCwgOCksIGNsb3VkTWF0KTsKICAgICAgICAgICAgY2xvdWQucG9zaXRpb24uc2V0KE1hdGgucmFuZG9tKCkqMTAwMDAtNTAwMCwgMTIwMCwgTWF0aC5yYW5kb20oKSoxMDAwMC01MDAwKTsKICAgICAgICAgICAgY2xvdWQuc2NhbGUuc2V0KE1hdGgucmFuZG9tKCkqOTAwKzQwMCwgMTAwLCBNYXRoLnJhbmRvbSgpKjYwMCszMDApOwogICAgICAgICAgICBjbG91ZEdyb3VwLmFkZChjbG91ZCk7CiAgICAgICAgfQogICAgICAgIHNjZW5lLmFkZChjbG91ZEdyb3VwKTsKCiAgICAgICAgLy8gLS0tIENhbWVyYSAmIFpvb20gRHluYW1pY3MgLS0tCiAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldCgwLCAxMDAwLCA0MDAwKTsKICAgICAgICBsZXQgdGFyZ2V0Rk9WID0gNjU7CgogICAgICAgIGZ1bmN0aW9uIGFuaW1hdGUoKSB7CiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTsKICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGUubm93KCkgKiAwLjAwMTsKCiAgICAgICAgICAgIGNhbWVyYS5wb3NpdGlvbi56IC09IDIwOyAKICAgICAgICAgICAgaWYgKGNhbWVyYS5wb3NpdGlvbi56IDwgLTQwMDApIGNhbWVyYS5wb3NpdGlvbi56ID0gNDAwMDsKCiAgICAgICAgICAgIC8vIExvZ2ljOiBDaGVjayB0ZXJyYWluIGhlaWdodCBiZW5lYXRoIGNhbWVyYSAoc2ltdWxhdGVkKQogICAgICAgICAgICBsZXQgaGVpZ2h0QmVuZWF0aCA9IE1hdGguc2luKGNhbWVyYS5wb3NpdGlvbi54KjAuMDAwNSkgKiBNYXRoLmNvcyhjYW1lcmEucG9zaXRpb24ueiowLjAwMDUpICogODAwOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQXV0by1ab29tOiBJZiBhcHByb2FjaGluZyBhIGhpZ2ggbW91bnRhaW4gKD40MDBtKSwgem9vbSBpbiAobG93ZXIgRk9WKQogICAgICAgICAgICBpZiAoaGVpZ2h0QmVuZWF0aCA+IDQwMCkgewogICAgICAgICAgICAgICAgdGFyZ2V0Rk9WID0gMzU7IC8vIFpvb20gaW4KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRhcmdldEZPViA9IDY1OyAvLyBOb3JtYWwgd2lkZSB2aWV3CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gU21vb3RobHkgaW50ZXJwb2xhdGUgRk9WCiAgICAgICAgICAgIGNhbWVyYS5mb3YgKz0gKHRhcmdldEZPViAtIGNhbWVyYS5mb3YpICogMC4wNTsKICAgICAgICAgICAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTsKCiAgICAgICAgICAgIC8vIFJhaW4gJiBMaWdodG5pbmcKICAgICAgICAgICAgY29uc3QgclBvcyA9IHJhaW4uZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTsKICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8cmFpbkNvdW50KjM7IGkrPTMpIHsKICAgICAgICAgICAgICAgIHJQb3NbaSsyXSArPSA1MDsKICAgICAgICAgICAgICAgIGlmKHJQb3NbaSsyXSA+IDIwMDApIHJQb3NbaSsyXSA9IC0yMDAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJhaW4uZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5uZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgICAgICAgIHJhaW4ucG9zaXRpb24uc2V0KGNhbWVyYS5wb3NpdGlvbi54LCAwLCBjYW1lcmEucG9zaXRpb24ueik7CgogICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuOTk0KSB7CiAgICAgICAgICAgICAgICBzY2VuZS5iYWNrZ3JvdW5kID0gbmV3IFRIUkVFLkNvbG9yKDB4MzMzMzY2KTsKICAgICAgICAgICAgICAgIGNsb3VkTWF0LmVtaXNzaXZlLnNldEhleCgweDIyMjI0NCk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgCiAgICAgICAgICAgICAgICAgICAgc2NlbmUuYmFja2dyb3VuZCA9IHNreUJhc2U7IAogICAgICAgICAgICAgICAgICAgIGNsb3VkTWF0LmVtaXNzaXZlLnNldEhleCgweDAwMDAwMCk7CiAgICAgICAgICAgICAgICB9LCA2MCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhbWVyYS5sb29rQXQoY2FtZXJhLnBvc2l0aW9uLngsIGhlaWdodEJlbmVhdGggKyAyMDAsIGNhbWVyYS5wb3NpdGlvbi56IC0gMjAwMCk7CiAgICAgICAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTsKICAgICAgICB9CiAgICAgICAgYW5pbWF0ZSgpOwogICAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo=";

arrayNight[2]="PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDx0aXRsZT4zRCBNZWdhbG9wb2xpcyBGbGlnaHQ8L3RpdGxlPgogICAgPHN0eWxlPgogICAgICAgIGJvZHkgeyBtYXJnaW46IDA7IG92ZXJmbG93OiBoaWRkZW47IGJhY2tncm91bmQ6ICMwMDA7IH0KICAgICAgICAjaHVkIHsgCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAyMHB4OyBsZWZ0OiAyMHB4OyBjb2xvcjogIzMzY2NmZjsgCiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBtb25vc3BhY2U7IHRleHQtc2hhZG93OiAwIDAgOHB4ICMwMDY2ZmY7CiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOyBsZXR0ZXItc3BhY2luZzogMXB4OyBmb250LXNpemU6IDEycHg7CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxkaXYgaWQ9Imh1ZCIgc3R5bGU9J2Rpc3BsYXk6bm9uZSc+U0VDVE9SXzc6IEFDVElWRSAvLyBBVklBVElPTl9MSUdIVFM6IE9OIC8vIFRSQUZGSUM6IEZMT1dJTkc8L2Rpdj4KICAgIDxzY3JpcHQgdHlwZT0ibW9kdWxlIj4KICAgICAgICBpbXBvcnQgKiBhcyBUSFJFRSBmcm9tICdodHRwczovL2Nkbi5za3lwYWNrLmRldi90aHJlZUAwLjEzMi4yJzsKCiAgICAgICAgY29uc3Qgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTsKICAgICAgICBzY2VuZS5iYWNrZ3JvdW5kID0gbmV3IFRIUkVFLkNvbG9yKDB4MDAwMDAyKTsKICAgICAgICBzY2VuZS5mb2cgPSBuZXcgVEhSRUUuRm9nRXhwMigweDAwMDAwMiwgMC4wMDA3KTsKCiAgICAgICAgY29uc3QgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDY1LCB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgMSwgMTUwMDApOwogICAgICAgIGNvbnN0IHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoeyBhbnRpYWxpYXM6IHRydWUgfSk7CiAgICAgICAgcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7CiAgICAgICAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpOwoKICAgICAgICAvLyAtLS0gUHJvY2VkdXJhbCBCdWlsZGluZyBUZXh0dXJlIC0tLQogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUJ1aWxkaW5nVGV4dHVyZSgpIHsKICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IDEyODsgY2FudmFzLmhlaWdodCA9IDI1NjsKICAgICAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzA1MDUwNSc7CiAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLDAsMTI4LDI1Nik7CiAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDEwOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvcihsZXQgaj0wOyBqPDMwOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBpZihNYXRoLnJhbmRvbSgpID4gMC40KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJyaWdodG5lc3MgPSBNYXRoLnJhbmRvbSgpICogMTUwICsgMTAwOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYHJnYigke2JyaWdodG5lc3N9LCAke2JyaWdodG5lc3MgKiAwLjl9LCAke2JyaWdodG5lc3MgKiAwLjZ9KWA7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdChpKjEyKzQsIGoqOCsyLCA2LCAzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG5ldyBUSFJFRS5DYW52YXNUZXh0dXJlKGNhbnZhcyk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGJUZXggPSBjcmVhdGVCdWlsZGluZ1RleHR1cmUoKTsKICAgICAgICBiVGV4LndyYXBTID0gYlRleC53cmFwVCA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nOwoKICAgICAgICAvLyAtLS0gQnVpbGRpbmcgU2V0dXAgLS0tCiAgICAgICAgY29uc3QgY2l0eVNpemUgPSAxMjAwMDsKICAgICAgICBjb25zdCBjb3VudCA9IDI1MDA7CiAgICAgICAgY29uc3QgZ2VvID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDEsIDEsIDEpOwogICAgICAgIGNvbnN0IGJlYWNvbkdlbyA9IG5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeSgyLjUsIDEwLCAxMCk7CiAgICAgICAgY29uc3QgYmVhY29uTWF0ID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHsgY29sb3I6IDB4ZmYwMDAwIH0pOwogICAgICAgIGNvbnN0IGJlYWNvbnMgPSBbXTsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IHggPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBjaXR5U2l6ZTsKICAgICAgICAgICAgY29uc3QgeiA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIGNpdHlTaXplOwoKICAgICAgICAgICAgLy8gbWluZGVyIGV4dHJlbWUgaG9vZ3RlLCBtYWFyIG5vZyBzdGVlZHMgY2x1c3RlcnMKICAgICAgICAgICAgY29uc3QgY2x1c3RlciA9IE1hdGguYWJzKE1hdGguY29zKHggKiAwLjAwMTUpICogTWF0aC5zaW4oeiAqIDAuMDAxNSkpOwogICAgICAgICAgICBjb25zdCBoID0gODAgKyBjbHVzdGVyICogNDUwICsgTWF0aC5yYW5kb20oKSAqIDEyMDsgLy8gbWF4IH42NTAKCiAgICAgICAgICAgIC8vIG1lZXIgdmFyaWF0aWUgaW4gZm9vdHByaW50CiAgICAgICAgICAgIGNvbnN0IHcgPSAyMCArIE1hdGgucmFuZG9tKCkgKiA5MDsgICAvLyBicmVlZHRlCiAgICAgICAgICAgIGNvbnN0IGQgPSAyMCArIE1hdGgucmFuZG9tKCkgKiA5MDsgICAvLyBsZW5ndGUKCiAgICAgICAgICAgIC8vIHN0ZXJrZSBncmlqc3ZhcmlhdGllICsgc3VidGllbGUgdGludAogICAgICAgICAgICBjb25zdCBiYXNlID0gTWF0aC5yYW5kb20oKTsKICAgICAgICAgICAgY29uc3QgZ3JheSA9IDAuMTUgKyBiYXNlICogMC41NTsKICAgICAgICAgICAgY29uc3QgdGludCA9IDAuMDE1ICogKE1hdGgucmFuZG9tKCkgLSAwLjUpOwoKICAgICAgICAgICAgY29uc3QgbWF0ID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsKICAgICAgICAgICAgICAgIGNvbG9yOiBuZXcgVEhSRUUuQ29sb3IoZ3JheSArIHRpbnQsIGdyYXksIGdyYXkgKyB0aW50ICogMC41KSwKICAgICAgICAgICAgICAgIG1hcDogYlRleCwKICAgICAgICAgICAgICAgIGVtaXNzaXZlOiBuZXcgVEhSRUUuQ29sb3IoMHhmZmZmZmYpLAogICAgICAgICAgICAgICAgZW1pc3NpdmVNYXA6IGJUZXgsCiAgICAgICAgICAgICAgICBlbWlzc2l2ZUludGVuc2l0eTogMC4yICsgTWF0aC5yYW5kb20oKSAqIDAuMjUsCiAgICAgICAgICAgICAgICByb3VnaG5lc3M6IDAuOCwKICAgICAgICAgICAgICAgIG1ldGFsbmVzczogMC4xCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY29uc3QgYnVpbGRpbmcgPSBuZXcgVEhSRUUuTWVzaChnZW8sIG1hdCk7CiAgICAgICAgICAgIGJ1aWxkaW5nLnBvc2l0aW9uLnNldCh4LCBoIC8gMiwgeik7CiAgICAgICAgICAgIGJ1aWxkaW5nLnNjYWxlLnNldCh3LCBoLCBkKTsKICAgICAgICAgICAgc2NlbmUuYWRkKGJ1aWxkaW5nKTsKCiAgICAgICAgICAgIC8vIH4xOCUgdmFuIGRlIGdlYm91d2VuIGtyaWpnZW4gZWVuIGJlYWNvbgogICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMTgpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGJlYWNvbiA9IG5ldyBUSFJFRS5NZXNoKGJlYWNvbkdlbywgYmVhY29uTWF0LmNsb25lKCkpOwogICAgICAgICAgICAgICAgYmVhY29uLnBvc2l0aW9uLnNldCh4LCBoICsgNSwgeik7CiAgICAgICAgICAgICAgICBiZWFjb24ubWF0ZXJpYWwudHJhbnNwYXJlbnQgPSB0cnVlOwogICAgICAgICAgICAgICAgc2NlbmUuYWRkKGJlYWNvbik7CiAgICAgICAgICAgICAgICBiZWFjb25zLnB1c2goYmVhY29uKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gLS0tIFN0cmVldCAmIENhciBMaWdodHMgaW4gTGlqbmVuIC0tLQogICAgICAgIGNvbnN0IGxpZ2h0Q291bnQgPSA3MDAwOwogICAgICAgIGNvbnN0IGxpZ2h0R2VvID0gbmV3IFRIUkVFLkJ1ZmZlckdlb21ldHJ5KCk7CiAgICAgICAgY29uc3QgbFBvcyA9IG5ldyBGbG9hdDMyQXJyYXkobGlnaHRDb3VudCAqIDMpOwogICAgICAgIGNvbnN0IGxDb2wgPSBuZXcgRmxvYXQzMkFycmF5KGxpZ2h0Q291bnQgKiAzKTsKICAgICAgICBjb25zdCBsU2l6ID0gbmV3IEZsb2F0MzJBcnJheShsaWdodENvdW50KTsKCiAgICAgICAgY29uc3Qgcm9hZFNwYWNpbmcgPSAzMDA7IC8vIGdyaWQgc3BhY2luZyB2b29yIHdlZ2VuCgogICAgICAgIGZvcihsZXQgaT0wOyBpPGxpZ2h0Q291bnQ7IGkrKykgewogICAgICAgICAgICBjb25zdCBpc1JvYWQgPSBNYXRoLnJhbmRvbSgpID4gMC4zNTsKCiAgICAgICAgICAgIC8vIGxpam5wYXRyb29uOiBraWVzIG9mIHggb2YgeiBvcCBlZW4gIndlZy1ncmlkIiBsaWd0CiAgICAgICAgICAgIGlmIChpc1JvYWQpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGFsb25nWCA9IE1hdGgucmFuZG9tKCkgPiAwLjU7CiAgICAgICAgICAgICAgICBpZiAoYWxvbmdYKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm9hZFogPSBNYXRoLnJvdW5kKCgoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBjaXR5U2l6ZSkgLyByb2FkU3BhY2luZykgKiByb2FkU3BhY2luZzsKICAgICAgICAgICAgICAgICAgICBsUG9zW2kqM10gICA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIGNpdHlTaXplOwogICAgICAgICAgICAgICAgICAgIGxQb3NbaSozKzFdID0gMzsKICAgICAgICAgICAgICAgICAgICBsUG9zW2kqMysyXSA9IHJvYWRaICsgKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMTA7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvYWRYID0gTWF0aC5yb3VuZCgoKE1hdGgucmFuZG9tKCkgLSAwLjUpICogY2l0eVNpemUpIC8gcm9hZFNwYWNpbmcpICogcm9hZFNwYWNpbmc7CiAgICAgICAgICAgICAgICAgICAgbFBvc1tpKjNdICAgPSByb2FkWCArIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDEwOwogICAgICAgICAgICAgICAgICAgIGxQb3NbaSozKzFdID0gMzsKICAgICAgICAgICAgICAgICAgICBsUG9zW2kqMysyXSA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIGNpdHlTaXplOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gbG9zc2UgbGljaHRwdW50ZW4KICAgICAgICAgICAgICAgIGxQb3NbaSozXSAgID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogY2l0eVNpemU7CiAgICAgICAgICAgICAgICBsUG9zW2kqMysxXSA9IDM7CiAgICAgICAgICAgICAgICBsUG9zW2kqMysyXSA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIGNpdHlTaXplOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBrbGV1cmVuOiBmZWwgZ2VlbC9vcmFuamUsIHNvbXMgZ3JvZW4sIHNvbXMgYXV0byByb29kL3dpdAogICAgICAgICAgICBjb25zdCByID0gTWF0aC5yYW5kb20oKTsKICAgICAgICAgICAgaWYgKHIgPCAwLjYpIHsKICAgICAgICAgICAgICAgIC8vIHN0cmFhdGxhbXA6IGZlbCBnZWVsL29yYW5qZQogICAgICAgICAgICAgICAgbENvbFtpKjNdICAgPSAxLjA7CiAgICAgICAgICAgICAgICBsQ29sW2kqMysxXSA9IDAuNyArIE1hdGgucmFuZG9tKCkqMC4zOwogICAgICAgICAgICAgICAgbENvbFtpKjMrMl0gPSAwLjEgKyBNYXRoLnJhbmRvbSgpKjAuMTsKICAgICAgICAgICAgICAgIGxTaXpbaV0gPSAzMCArIE1hdGgucmFuZG9tKCkgKiA1MDsgLy8gdmVlbCBoZWxkZXJkZXIsIHZhcmlhYmVsZSBzdHJhYWwKICAgICAgICAgICAgfSBlbHNlIGlmIChyIDwgMC43NSkgewogICAgICAgICAgICAgICAgLy8gZ3JvZW4gc3RvcGxpY2h0CiAgICAgICAgICAgICAgICBsQ29sW2kqM10gICA9IDAuMTsKICAgICAgICAgICAgICAgIGxDb2xbaSozKzFdID0gMC45ICsgTWF0aC5yYW5kb20oKSowLjE7CiAgICAgICAgICAgICAgICBsQ29sW2kqMysyXSA9IDAuMiArIE1hdGgucmFuZG9tKCkqMC4yOwogICAgICAgICAgICAgICAgbFNpeltpXSA9IDE4ICsgTWF0aC5yYW5kb20oKSAqIDI1OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gYXV0b2xpY2h0ZW4gKHdpdC9yb29kKQogICAgICAgICAgICAgICAgY29uc3QgaGVhZGluZyA9IE1hdGgucmFuZG9tKCkgPiAwLjU7CiAgICAgICAgICAgICAgICBpZiAoaGVhZGluZykgewogICAgICAgICAgICAgICAgICAgIC8vIHdpdAogICAgICAgICAgICAgICAgICAgIGxDb2xbaSozXSAgID0gMS4wOwogICAgICAgICAgICAgICAgICAgIGxDb2xbaSozKzFdID0gMS4wOwogICAgICAgICAgICAgICAgICAgIGxDb2xbaSozKzJdID0gMC45OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyByb29kCiAgICAgICAgICAgICAgICAgICAgbENvbFtpKjNdICAgPSAxLjA7CiAgICAgICAgICAgICAgICAgICAgbENvbFtpKjMrMV0gPSAwLjE7CiAgICAgICAgICAgICAgICAgICAgbENvbFtpKjMrMl0gPSAwLjE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsU2l6W2ldID0gMTUgKyBNYXRoLnJhbmRvbSgpICogMzA7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGxpZ2h0R2VvLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKGxQb3MsIDMpKTsKICAgICAgICBsaWdodEdlby5zZXRBdHRyaWJ1dGUoJ2NvbG9yJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShsQ29sLCAzKSk7CiAgICAgICAgbGlnaHRHZW8uc2V0QXR0cmlidXRlKCdzaXplJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShsU2l6LCAxKSk7CgogICAgICAgIGNvbnN0IHN0cmVldExpZ2h0c01hdCA9IG5ldyBUSFJFRS5Qb2ludHNNYXRlcmlhbCh7CiAgICAgICAgICAgIHNpemU6IDEyLAogICAgICAgICAgICB2ZXJ0ZXhDb2xvcnM6IHRydWUsCiAgICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLAogICAgICAgICAgICBvcGFjaXR5OiAxLjAsCiAgICAgICAgICAgIGJsZW5kaW5nOiBUSFJFRS5BZGRpdGl2ZUJsZW5kaW5nLAogICAgICAgICAgICBkZXB0aFdyaXRlOiBmYWxzZQogICAgICAgIH0pOwoKICAgICAgICBjb25zdCBzdHJlZXRMaWdodHMgPSBuZXcgVEhSRUUuUG9pbnRzKGxpZ2h0R2VvLCBzdHJlZXRMaWdodHNNYXQpOwogICAgICAgIHNjZW5lLmFkZChzdHJlZXRMaWdodHMpOwoKICAgICAgICAvLyAtLS0gQmFzaWMgQW1iaWVudCAmIERpcmVjdGlvbmFsIExpZ2h0IC0tLQogICAgICAgIGNvbnN0IGFtYmllbnQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4NDA0MDYwLCAxLjIpOwogICAgICAgIHNjZW5lLmFkZChhbWJpZW50KTsKICAgICAgICBjb25zdCBkaXJMaWdodCA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KDB4ZmZmZmZmLCAwLjYpOwogICAgICAgIGRpckxpZ2h0LnBvc2l0aW9uLnNldCg1MDAsIDIwMDAsIDEwMDApOwogICAgICAgIHNjZW5lLmFkZChkaXJMaWdodCk7CgogICAgICAgIC8vIC0tLSBBbmltYXRpb24gLyBDYW1lcmEgLS0tCiAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldCgwLCAxNTAwLCA0MDAwKTsKCiAgICAgICAgZnVuY3Rpb24gYW5pbWF0ZSgpIHsKICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpOwogICAgICAgICAgICBjb25zdCB0aW1lID0gRGF0ZS5ub3coKSAqIDAuMDAxOwoKICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnogLT0gMTg7CiAgICAgICAgICAgIGlmIChjYW1lcmEucG9zaXRpb24ueiA8IC00MDAwKSBjYW1lcmEucG9zaXRpb24ueiA9IDQwMDA7CgogICAgICAgICAgICAvLyBsaWNodGUgaG9vZ3RlLW9zY2lsbGF0aWUKICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnkgPSAxNTAwICsgTWF0aC5zaW4odGltZSAqIDAuMTUpICogMjAwOwoKICAgICAgICAgICAgLy8gYmVhY29uczoga29ydGUgZmVsbGUgZmxhc2gsIGxhbmdlIHBhdXplCiAgICAgICAgICAgIGJlYWNvbnMuZm9yRWFjaCgoYiwgaSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdCA9ICh0aW1lICogMS41ICsgaSAqIDAuMykgJSAyLjI7CiAgICAgICAgICAgICAgICBiLm1hdGVyaWFsLm9wYWNpdHkgPSB0IDwgMC4yNSA/IDEgOiAwOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIHN3YXkKICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnggPSBNYXRoLnNpbih0aW1lICogMC4yKSAqIDEwMDA7CiAgICAgICAgICAgIGNhbWVyYS5yb3RhdGlvbi56ID0gTWF0aC5zaW4odGltZSAqIDAuMikgKiAwLjE7CgogICAgICAgICAgICAvLyBpZXRzIG1lZXIgbmFhciBiZW5lZGVuIGtpamtlbgogICAgICAgICAgICBjYW1lcmEubG9va0F0KAogICAgICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLngsCiAgICAgICAgICAgICAgICA2MDAsIC8vIGxhZ2VyIGRhbiA5MDAg4oaSIG1lZXIgbmFhciBiZW5lZGVuCiAgICAgICAgICAgICAgICBjYW1lcmEucG9zaXRpb24ueiAtIDI1MDAKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTsKICAgICAgICB9CiAgICAgICAgYW5pbWF0ZSgpOwoKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4gewogICAgICAgICAgICBjYW1lcmEuYXNwZWN0ID0gd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICAgICAgICAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7CiAgICAgICAgICAgIHJlbmRlcmVyLnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7CiAgICAgICAgfSk7CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+Cg==";

    </script>

	</div>
	

<div id='scrl' style='width:100%;height:100%;position:fixed;left:0;top:0'>
    <div class="overlay"></div>
    <div id="ticker-top-row" class="ticker-container top">
        <div id="top-content" class="ticker-content"></div>
    </div>
    <div id="ticker-bottom-row" class="ticker-container top">
        <div id="bottom-content" class="ticker-content"></div>
    </div>
</div>

<iframe id='bgiframes'  class="bg-iframe" style="position: fixed;     top: 0;    left: 0;    width: 100vw;    height: 100vh;     border: none;    z-index: 1;     pointer-events: none;     object-fit:cover;"  allow="autoplay" ></iframe>
<img  id='acht' style='z-index:1;position:fixed;left:0;top:0;width:100%;height:100%' src='data:image/jpeg;base64,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' >


	<table style='border:0;left:0;width:100%;ddbackground-color:#444'><tr><td style='text-align:center;vertical-align:center;display: flex; justify-content: center; align-items: center'>

<div id="weerre" style="border:none;bbackground-blend-modes: multiply;overflow:hidden;position:relative;background-color:transparent;bbackground-image:url(data:image/jpeg;base64,);background-size:90% 90%; z-index:1;opacity:.0.73">
    <canvas id="eld" style='display:none;filter:grayscale(100%)'></canvas>
	
	
	<table style='width:100%;height:100%' ><tr><td style='width:100%;text-align: left; vertical-align: top;' >
	
    <div  style="overflow:hidden;">

      <div style='font-size:333%;color:transparent'>Ora Znffbhq Evqbhna</div>
      <div  style='font-size:300%'> <h2 style="  font-family: sans-serif;  margin: 0;  background-image: linear-gradient(to right, #1d573b, #38a1ff);  -webkit-background-clip: text;
  background-clip: text;
  
  /* Makes the original text color transparent so the gradient shows */

  color: transparent;
  font-size: 3rem;
  font-weight: bold;
  filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));">
  ♪ عبد السلام 
  &nbsp;&nbsp;<span style='font-size:35%; vertical-align: middle;'>ⴰⴱⴷⵍⵙⴰⵍⴰⵎ</span>
</h2>

   </div>
	 

    </div>
	</td>
	<td style='width:5%;text-align:right;vertical-align:top'>
	




	<div class="containerg" id="containerg">
        <div style='width:100%;text-align:right'><h3>Music News (HTMID) 12.6</h3></div>

        <div class="controlsg">
        <input type="text" id="workerName" placeholder="Beschrijf uw nummer hier..."    style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border); background: rgba(0,0,0,0.5); color: white;">
		

		

		
			
			
			
			<button class="icon-btn" id="sf2-button" title="Selecteer SF2">
    <label for="sf2upload">
        SF
    </label>
    <input type="file" id="sf2upload" accept=".sf2" style="display: none;">
</button>

<button class="icon-btn" id="selectAllBtn" title="Selecteer Alles">✓</button>
<button class="icon-btn" id="deselectAllBtn" title="Deselecteer Alles">✗</button>
<button class="icon-btn " id="resetBtn" title="Reset naar Origineel"  onclick='preview()'>↺</button>
        </div>

        <div class="select-wrapper" id="selectWrapper">
            <button class="dropdown-toggle" id="dropdownToggle" aria-expanded="false" style='background-color:#298459'>
                <span class="toggle-text" id="toggleText">-- Select  Institution  Category.. --</span>
                <span class="arrow">▼</span>
            </button>
            
            <div class="genre-options" id="genreOptions">


            <label class="genre-option-item"><input type="checkbox" value="Mental Health"> Mental Health Instructions</label>
            <label class="genre-option-item"><input type="checkbox" value="Legal Court"> Legal / Court Administration</label>
            <label class="genre-option-item"><input type="checkbox" value="Financial"> Financial/Trust Management</label>
            <label class="genre-option-item"><input type="checkbox" value="Housing"> Housing Exploitation (No Roof)</label>
                </div>
        </div>

        <div class="counter"  id="exploitationCounter" style='background-color:transparent;color:white'>Active Signals: 
		
             <span id="selectedCount">0</span> Variaties Van  Alle <span id="totalCount">0</span> Genres
        </div>
		
		
    </div>
	

































</td>
</tr>
</table>
      <fieldset data-affect="love" style="background-color:transparent;border:none;z-index:88888888">
        <legend id='enil' style='text-align:right'><a id="aa" style='color:white'><span style='color:white;font-size:50%' id='enil2'> </span></a></legend>
 <br>
		<textarea id='log' style='color:white;width:66%;height:60px;background-color:transparent;border:none;'></textarea>
      </fieldset>




<div style="text-align:right;width:100%">


    <fieldset data-affect="energy" style="text-align:right;border:none;background-color:transparent;width:100%;">
<legend style="text-align:right; width:100%;"> <div style="transform:rotate(90deg);font-size:90%; margin-right:-21px; display:inline-block;color:rgba(211,1,1,.89);">Licensed &copy; </div> </legend>

        <div class="control-row" style="text-align:right;border:none;background-color:transparent;">
          <button id="initAudioBtn" style="display:none">Start / Resume Audio Engine</button>
          <span id="audioState" class="status-bar" style="font-size: 250%; border: medium; background-color: transparent; color: rgb(255, 255, 255);"> </span>
        </div>
      </fieldset>
</div>



      <fieldset data-affect="flow" style='border:none;width:98%;left:0vw;background-color:transparent;position: relative;'>
        <legend></legend>
     <div style='text-align:center'>
	 
 <button id="noN" onclick='fixevery()'  style='background-color:transparent;border:none;'><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <g transform="scale(-1, 1) translate(-24, 0)">
    <path d="M5.65376 12.3818L10.3182 14.2817L12.2181 18.9461C12.5355 19.7231 13.6364 19.7231 13.9537 18.9461L19.4573 5.47413C19.7435 4.77389 19.0142 4.0446 18.314 4.33076L4.84201 9.83442C4.06501 10.1517 4.06501 11.2526 4.84201 11.57L5.65376 12.3818Z" 
          fill="tansparent" 
          stroke="white" 
          stroke-width="1.5" 
          stroke-linejoin="round"/>
  </g>
</svg></button>	
<script>
function fixevery(){
lodsff();
document.getElementById('acht').style.display='none'; 
 
}
//document.getElementById('weerre').style.backgroundColor='rgba(255,255,255,0.08)';
</script>
          <button id="playBtn"  style='background-color:transparent;border:none;'>▷</button>
          <button id="stopBtn"  style='background-color:transparent;border:none;' class="stop">▷▷</button>
          <button id="pauseBtn"  style='background-color:transparent;border:none;'>II</button>
          <div id="playbackStats" class="status-bar" style='display:none'>Waiting...</div>
          <div id="tempoDisplay" class="tempo-display" style='display:none'>Tempo: -- BPM</div>
   
		
        <div class="progress-container">
          <div id="progressBar" class="progress-bar"></div>
        </div>
		  	</div>
		
	
      </fieldset>
    </div>
	</td>
	</tr>
  </table>


<canvas id="bgCanvas" style="display: none;filter:grayscale(100%)';"></canvas>


<script>




var loadedSF=false;


const logElement = document.getElementById('log');
const workerInput = document.getElementById('workerName');

document.getElementById('sf2upload').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(event) {
        // Haal de resultaat-string op (dit is een DataURL: data:application/octet-stream;base64,xxxx)
        const fullDataUrl = event.target.result;
        
        // We hebben alleen de pure Base64-code nodig, dus we halen de prefix eraf
        SF2_BASE64_DATA = fullDataUrl.split(',')[1];
        
        console.log("Nieuwe SoundFont ingeladen!");
        //alert("SoundFont succesvol geüpload. Je kunt nu op Play drukken.");
		loadedSF=true;
		   document.getElementById('acht').style.display="none" ;
        document.getElementById('bgiframes').src=srccc;
		
		     document.getElementById('weerre').style.boxShadow=" 0 0 40px rgba(64,128,255,0.25), inset 0 0 30px rgba(50,50,50,0.1)";
    document.getElementById('weerre').style.backdropFilter= "blur(16px) grayscale(100%)";
	
        
        // Optioneel: herinitialiseer je audio-engine hier als dat nodig is
        // initAudio(); 
    };
    
    reader.readAsDataURL(file);
});


// Wait for DOM to be ready

/*
document.addEventListener('DOMContentLoaded', function() {
  const weerreDiv = document.getElementById('weerre');
  const bgCanvas = document.getElementById('bgCanvas');
  const ctx = bgCanvas.getContext('2d');
  
  // Function to create the circle gradient background
  function createBackground() {
    // Get the dimensions of the #weerre div
    const width = weerreDiv.clientWidth;
    const height = weerreDiv.clientHeight;
    
    // Set canvas dimensions to match the div
    bgCanvas.width = width;
    bgCanvas.height = height;
    
    // Clear canvas
    ctx.clearRect(0, 0, width, height);
    
    // Fill with semi-transparent black background
    ctx.fillStyle = 'transparent'; // 'rgba(0, 0, 0, 0.5)';
    ctx.fillRect(0, 0, width, height);
    
    // Calculate the maximum circle that fits
    const centerX = width / 2;
    const centerY = height / 2;
    const radius = Math.min(width, height) / 3;
    
    // Create a clipping path for the transparent circle
    ctx.save();
    
    // Create circle path
    ctx.beginPath();
    ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
    
    // Use destination-out to make the circle transparent
    ctx.globalCompositeOperation = 'destination-out';
    ctx.fill();
    
    // Restore normal composite operation
    ctx.restore();

    // Convert canvas to data URL and set as background
	
	
	/*
	ctx.globalAlpha = 1;
	   ctx.font="40px sans-serif";ctx.fillStyle="rgba(250,250,250,.02)";ctx.textAlign="center";ctx.textBaseline="middle";ctx.fillText("ⵎⴰⴳⴰ ⵏⵉⵙⵏⵉⵏ ⵏⵙⴸⵉⴾ ", width/2, ((height/2)-100 +25));
	   
	   ctx.fillText(" ⵢⵉⵏ ⵓⵣⴰⵎⴰⴸⵉⵏ ⵜⴰⵎⵓⵓⵜⵂ ", width/2, ((height/2)-50+25) );
	 ctx.fillText("  ⵙⵒⵉⵜⴰ ⵏ ⵉⵔⴼⴰⵏ ", width/2, ((height/2)+25));
	 ctx.fillText(" ⵔⵉⴳⵔⴰ ⵡⴰⴳⴾⵉⵔ", width/2, ((height/2)+50+25));
    const dataURL = bgCanvas.toDataURL('image/png');
    weerreDiv.style.backgroundImage = `url(${dataURL})`;
    weerreDiv.style.backgroundSize = 'cover';
    weerreDiv.style.backgroundPosition = 'center';
    weerreDiv.style.backgroundRepeat = 'no-repeat';

	
  }
  
  
  
  */
  /*
  // Create initial background
  createBackground();
  
  // Debounce function to prevent too many resize events
  let resizeTimeout;
  function debounceResize() {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(createBackground, 250);
  }
  
  // Add resize listener
  window.addEventListener('resize', debounceResize);
  
  // Also trigger when the div becomes visible if you toggle display
  const observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
      if (mutation.attributeName === 'style') {
        const display = window.getComputedStyle(weerreDiv).display;
        if (display !== 'none') {
          // Give a small delay to ensure dimensions are calculated
          setTimeout(createBackground, 100);
        }
      }
    });
  });
  
  // Observe the #weerre div for style changes
  observer.observe(weerreDiv, { attributes: true });
});
*/
var ifraMe7='';
var ifraMe='';
document.getElementById('xyz').src=ifraMe;
document.getElementById('xyz7').src=ifraMe7;
function formatTime(totalSeconds) {
  const minutes = Math.floor(totalSeconds / 60);
  const seconds = totalSeconds % 60;
  return `${minutes}:${seconds.toString().padStart(2, '0')}`;
}
/* ==========================================================================
   UTILITIES
   ========================================================================== */
const logEl = document.getElementById('log');
function log(msg) {
  logEl.value = logEl.value+`[${new Date().toLocaleTimeString()}] ${msg}\n` + logEl.textContent;
}

// Robust Base64 encoder for Worklet code
function toBase64(str) {
  const bytes = new TextEncoder().encode(str);
  let binary = '';
  for(let i=0; i<bytes.length; i++) binary += String.fromCharCode(bytes[i]);
  return btoa(binary);
}

/* ==========================================================================
   SF2 PARSER
   ========================================================================== */
class SF2Parser {
  constructor(buffer) {
    this.view = new DataView(buffer);
    this.pos = 0;
  }

  readStr(len) {
    let s = '';
    for(let i=0; i<len; i++) {
      const c = this.view.getUint8(this.pos + i);
      if(c !== 0) s += String.fromCharCode(c);
    }
    return s;
  }
  
  // Add this to your SF2Parser class
parseSamples() {
    // Navigate to the 'shdr' (Sample Header) chunk
    // Each header is 46 bytes. The sample rate is at offset 24 (4-byte Uint32)
    const sampleHeaders = [];
    for (let i = 0; i < numSamples; i++) {
        const offset = shdrOffset + (i * 46);
        sampleHeaders.push({
            name: this.readStr(20),
            start: this.view.getUint32(offset + 20, true),
            end: this.view.getUint32(offset + 24, true),
            sampleRate: this.view.getUint32(offset + 32, true), // Extract actual rate
            originalPitch: this.view.getUint8(offset + 40),
            pitchCorrection: this.view.getInt8(offset + 41)
        });
    }
    return sampleHeaders;
}

  parse() {
    // Basic RIFF check
    if (this.readStr(4) !== 'RIFF') throw new Error("Not a RIFF file");
    this.pos += 4; // size
    this.pos += 4; // skip
    if (this.readStr(4) !== 'sfbk') throw new Error("Not a SoundFont file");
    this.pos += 4;

    // Find chunks
    let pdtaInfo = null, sdtaInfo = null;
    let p = 12;
    while(p < this.view.byteLength - 8) {
      const id = String.fromCharCode(
        this.view.getUint8(p), this.view.getUint8(p+1),
        this.view.getUint8(p+2), this.view.getUint8(p+3)
      );
      const size = this.view.getUint32(p+4, true);

      if(id === 'LIST') {
        const type = String.fromCharCode(
          this.view.getUint8(p+8), this.view.getUint8(p+9),
          this.view.getUint8(p+10), this.view.getUint8(p+11)
        );
        if(type === 'pdta') pdtaInfo = { offset: p+12, size: size-4 };
        if(type === 'sdta') sdtaInfo = { offset: p+12, size: size-4 };
      }
      p += 8 + size + (size % 2);
    }

    if(!pdtaInfo || !sdtaInfo) throw new Error("Corrupt SF2: missing pdta/sdta");

    // Load Samples (SDTA)
    const pcm = new Int16Array(this.view.buffer, sdtaInfo.offset + 8, (sdtaInfo.size-8)/2);

    // Load Headers (PDTA)
    const pdta = this.parsePdta(pdtaInfo.offset, pdtaInfo.size);

    return { pcm, pdta };
  }

  parsePdta(offset, size) {
    let p = offset, end = offset + size;
    const data = { phdr:[], pbag:[], pgen:[], inst:[], ibag:[], igen:[], shdr:[] };

    while(p < end) {
      const id = String.fromCharCode(
        this.view.getUint8(p), this.view.getUint8(p+1),
        this.view.getUint8(p+2), this.view.getUint8(p+3)
      );
      const chSize = this.view.getUint32(p+4, true);
      const base = p + 8;

      if(id === 'phdr') {
        for(let i=0; i<chSize; i+=38) {
          data.phdr.push({
            preset: this.view.getUint16(base+i+20, true),
            bank: this.view.getUint16(base+i+22, true),
            pbagIdx: this.view.getUint16(base+i+24, true)
          });
        }
      } else if(id === 'pbag') {
        for(let i=0; i<chSize; i+=4) data.pbag.push({ genIdx: this.view.getUint16(base+i, true) });
      } else if(id === 'pgen') {
        for(let i=0; i<chSize; i+=4) data.pgen.push({ op: this.view.getUint16(base+i, true), val: this.view.getInt16(base+i+2, true) });
      } else if(id === 'inst') {
        for(let i=0; i<chSize; i+=22) data.inst.push({ ibagIdx: this.view.getUint16(base+i+20, true) });
      } else if(id === 'ibag') {
        for(let i=0; i<chSize; i+=4) data.ibag.push({ genIdx: this.view.getUint16(base+i, true) });
      } else if(id === 'igen') {
        for(let i=0; i<chSize; i+=4) data.igen.push({ op: this.view.getUint16(base+i, true), val: this.view.getInt16(base+i+2, true) });
      } else if(id === 'shdr') {
        for(let i=0; i<chSize; i+=46) {
          data.shdr.push({
            start: this.view.getUint32(base+i+20, true),
            end: this.view.getUint32(base+i+24, true),
            startLoop: this.view.getUint32(base+i+28, true),
            endLoop: this.view.getUint32(base+i+32, true),
            rate: this.view.getUint32(base+i+36, true),
            pitch: this.view.getUint8(base+i+40),
            corr: this.view.getInt8(base+i+41),
            type: this.view.getUint16(base+i+44, true)
          });
        }
      }
      p += 8 + chSize + (chSize%2);
    }
    return data;
  }
}

function buildRegions(sf2) {
  const regions = [];
  const d = sf2.pdta;

  // Generators
  const G = { keyRange:43, velRange:44, inst:41, sample:53, root:58, coarse:51, fine:52, mode:54, att:34, dec:36, sus:37, rel:38 };
  const def = { att:-12000, dec:-12000, sus:0, rel:-12000 };

  // Helper to get gens from bag
  const getGens = (bag, genList, idx, nextIdx) => {
    const res = {};
    const start = bag[idx].genIdx;
    const end = (nextIdx !== undefined) ? bag[nextIdx].genIdx : genList.length;
    for(let i=start; i<end; i++) res[genList[i].op] = genList[i].val;
    return res;
  }

  // Iterate Presets
  for(let i=0; i<d.phdr.length-1; i++) { // Last is EOP
    const p = d.phdr[i];
    const pbagEnd = d.phdr[i+1].pbagIdx;

    // Global Preset Zone?
    let pGlobal = {};
    let pbIdx = p.pbagIdx;

    if(pbIdx < pbagEnd) {
      const g = getGens(d.pbag, d.pgen, pbIdx, pbIdx+1);
      if(g[G.inst] === undefined) { pGlobal = g; pbIdx++; }
    }

    for(; pbIdx < pbagEnd; pbIdx++) {
      const pLoc = getGens(d.pbag, d.pgen, pbIdx, pbIdx+1);
      const pComb = { ...pGlobal, ...pLoc };

      if(pComb[G.inst] === undefined) continue;
      const instIdx = pComb[G.inst];
      const inst = d.inst[instIdx];
      const ibagEnd = (d.inst[instIdx+1]) ? d.inst[instIdx+1].ibagIdx : d.ibag.length;

      // Global Inst Zone?
      let iGlobal = {};
      let ibIdx = inst.ibagIdx;
      if(ibIdx < ibagEnd) {
        const g = getGens(d.ibag, d.igen, ibIdx, ibIdx+1);
        if(g[G.sample] === undefined) { iGlobal = g; ibIdx++; }
      }

      for(; ibIdx < ibagEnd; ibIdx++) {
        const iLoc = getGens(d.ibag, d.igen, ibIdx, ibIdx+1);
        const all = { ...iGlobal, ...iLoc };

        if(all[G.sample] === undefined) continue;
        const sh = d.shdr[all[G.sample]];

        // Merge logic
        const getV = (k, df) => (all[k] !== undefined ? all[k] : (pComb[k] !== undefined ? pComb[k] : df));
        const range = (v) => v===undefined ? [0,127] : [v&0xFF, (v>>8)&0xFF];

        const pk = range(pComb[G.keyRange]), ik = range(all[G.keyRange]);
        const kMin = Math.max(pk[0], ik[0]), kMax = Math.min(pk[1], ik[1]);
        if(kMin > kMax) continue;

        const pv = range(pComb[G.velRange]), iv = range(all[G.velRange]);
        const vMin = Math.max(pv[0], iv[0]), vMax = Math.min(pv[1], iv[1]);
        if(vMin > vMax) continue;

        // Tune
        const root = (all[G.root] !== undefined) ? all[G.root] : sh.pitch;
        const tune = (all[G.coarse]||0) + (pComb[G.coarse]||0) + (all[G.fine]||0)/100 + (pComb[G.fine]||0)/100 + sh.corr/100;

        // Env
        const time = (c) => Math.pow(2, c/1200);
        const att = time(getV(G.att, def.att));
        const dec = time(getV(G.dec, def.dec));
        const rel = time(getV(G.rel, def.rel));
        const sus = Math.pow(10, -getV(G.sus, def.sus)/200);

        const loop = (getV(G.mode, sh.type&1) & 1) !== 0;

        regions.push({
          bank: p.bank, preset: p.preset,
          kMin, kMax, vMin, vMax,
          start: sh.start, end: sh.end,
          loopStart: sh.startLoop, loopEnd: sh.endLoop,
          loop, rate: sh.rate, root, tune,
          env: { a: att, d: dec, s: sus, r: rel }
        });
      }
    }
  }
  return regions;
}

/* ==========================================================================
   MIDI PARSER WITH CORRECT TIMING
   ========================================================================== */
class MidiParser {
  constructor(buffer) { 
    this.view = new DataView(buffer); 
    this.pos = 0; 
  }
  
  readInt(n) { 
    let x=0; 
    for(let i=0; i<n; i++) x=(x<<8)|this.view.getUint8(this.pos++); 
    return x; 
  }
  
  readVar() { 
    let x=0; 
    while(true) { 
      const b=this.view.getUint8(this.pos++); 
      x=(x<<7)|(b&0x7F); 
      if(!(b&0x80)) return x; 
    } 
  }

  parse() {
    if(this.readInt(4) !== 0x4D546864) throw new Error("Not MIDI");
    this.readInt(4); // len
    const fmt = this.readInt(2);
    const nTrk = this.readInt(2);
    const div = this.readInt(2);

    let allEvents = [];
    let tempo = 500000; // Default tempo (120 BPM)

    for(let i=0; i<nTrk; i++) {
      if(this.readInt(4) !== 0x4D54726B) continue; // Skip non-track
      const len = this.readInt(4);
      const end = this.pos + len;
      let ticks = 0;
      let status = 0;

      while(this.pos < end) {
        const delta = this.readVar();
        ticks += delta;
        let b = this.view.getUint8(this.pos);
        if(b & 0x80) { status = b; this.pos++; }

        const type = status >> 4;
        const ch = status & 0x0F;

        if(status === 0xFF) { // Meta
          const mType = this.view.getUint8(this.pos++);
          const mLen = this.readVar();
          if(mType === 0x51 && mLen === 3) {
            tempo = (this.view.getUint8(this.pos)<<16) | (this.view.getUint8(this.pos+1)<<8) | this.view.getUint8(this.pos+2);
            allEvents.push({ ticks, type:'tempo', val: tempo });
          }
          this.pos += mLen;
        } else if (status === 0xF0 || status === 0xF7) {
          const l = this.readVar(); this.pos += l;
        } else {
          const d1 = this.view.getUint8(this.pos++);
          if(type === 0x9 && d1 > 0) { // Note On
             const d2 = this.view.getUint8(this.pos++);
             if(d2 > 0) allEvents.push({ ticks, type:'on', ch, n:d1, v:d2 });
             else allEvents.push({ ticks, type:'off', ch, n:d1 });
          } else if(type === 0x8) { // Note Off
             const d2 = this.view.getUint8(this.pos++);
             allEvents.push({ ticks, type:'off', ch, n:d1 });
          } else if(type === 0xB) { // CC
             const d2 = this.view.getUint8(this.pos++);
             allEvents.push({ ticks, type:'cc', ch, cc:d1, val:d2 });
          } else if(type === 0xC) { // Prog
             allEvents.push({ ticks, type:'prg', ch, p:d1 });
          } else if(type === 0xE || type === 0xA || type === 0xD) {
             this.view.getUint8(this.pos++); // Skip d2
          }
        }
      }
    }

    // Sort events by tick
    allEvents.sort((a,b) => a.ticks - b.ticks);
    
    // Convert ticks to seconds with proper timing
    const finalEvents = [];
    let currentTempo = 500000; // Default tempo
    let currentTime = 0;
    let lastTick = 0;
    
    for(const event of allEvents) {
      // Calculate time for this event
      const deltaTicks = event.ticks - lastTick;
      
      // Convert ticks to seconds based on current tempo and division
      const secondsPerTick = currentTempo / (1000000.0 * div);
      const deltaTime = deltaTicks * secondsPerTick;
      
      currentTime += deltaTime;
      lastTick = event.ticks;
      
      // Update tempo if this is a tempo event
      if(event.type === 'tempo') {
        currentTempo = event.val;
      } else {
        finalEvents.push({
          ...event,
          time: currentTime
        });
      }
    }
    
    return {
      events: finalEvents,
      duration: currentTime,
      division: div,
      initialTempo: 500000
    };
  }
}



var entryo="Violation Entry ID-99";

/* ==========================================================================
   AUDIO WORKLET WITH CORRECT TIMING
   ========================================================================== */
const workletCode = `
class MidiWorklet extends AudioWorkletProcessor {
  constructor() {
    super();
    this.pcm = null;
    this.regions = [];
    this.presetMap = new Map();
    this.firstPresetKey = null;

    this.voices = [];
    this.channels = new Array(16).fill(0).map(() => ({ bank:0, prog:0 }));

    this.events = [];
    this.evtIdx = 0;
    this.currentTime = 0;
    this.playing = false;
    this.startTime = 0;
    this.pausedTime = 0;
    this.isPaused = false;
    this.progressFrameCount = 0;
    this.updateIntervalFrames = 128 * 15; 
    this.port.onmessage = (e) => {
      const d = e.data;
      if(d.type === 'SF2') {
        this.pcm = d.pcm;
        this.regions = d.regions;
        this.presetMap.clear();
        d.regions.forEach((r, i) => {
          const k = (r.bank<<7) | r.preset;
          if(!this.presetMap.has(k)) this.presetMap.set(k, []);
          this.presetMap.get(k).push(i);
          if(this.firstPresetKey === null) this.firstPresetKey = k;
        });
        this.port.postMessage({t:'log', msg:'Worklet: SF2 Loaded. Regions: ' + d.regions.length});
      }
      else if(d.type === 'MIDI') {
        this.events = d.events;
        this.evtIdx = 0;
        this.currentTime = 0;
        this.startTime = currentTime;
        this.pausedTime = 0;
        this.playing = true;
        this.isPaused = false;
        this.voices = [];
        this.port.postMessage({t:'log', msg:'Worklet: MIDI Playing...'});
        this.port.postMessage({t:'duration', duration: d.duration});
      }
      else if(d.type === 'STOP') {
        this.playing = false;
        this.isPaused = false;
        this.voices = [];
        this.port.postMessage({t:'progress', progress: 0});
      }
      else if(d.type === 'PAUSE') {
        this.isPaused = true;
        this.pausedTime = this.currentTime;
      }
      else if(d.type === 'RESUME') {
        this.isPaused = false;
        this.startTime = currentTime - this.pausedTime;
      }
    };
  }

  getRegions(ch, bank, prog) {
    // For percussion channel (9), use bank 128
    if(ch === 9) {
      // Try exact match first
      let key = (128 << 7) | prog;
      if(this.presetMap.has(key)) return this.presetMap.get(key);
      
      // Fallback to any percussion preset
      for(let [k, v] of this.presetMap) {
        if((k >> 7) === 128) return v;
      }
    } else {
      // 1. Exact Match
      let key = (bank << 7) | prog;
      if(this.presetMap.has(key)) return this.presetMap.get(key);

      // 2. Ignore Bank
      key = prog; // implied bank 0
      if(this.presetMap.has(key)) return this.presetMap.get(key);
    }

    // 3. Fallback to anything
    if(this.firstPresetKey !== null) return this.presetMap.get(this.firstPresetKey);

    return null;
  }

  process(inputs, outputs) {
    if(!this.pcm || !this.playing || this.isPaused) return true;
    
    const outL = outputs[0][0];
    const outR = outputs[0][1];
    const dt = 128 / sampleRate;

    // Update current time based on audio clock for accurate timing
    this.currentTime = currentTime - this.startTime;

    // --- Event Sequencing ---
    while(this.evtIdx < this.events.length) {
      const e = this.events[this.evtIdx];
      if(e.time > this.currentTime + dt) break;

      if(e.type === 'on') {
        const st = this.channels[e.ch];
        const bank = (e.ch === 9) ? 128 : st.bank;
        const indices = this.getRegions(e.ch, bank, st.prog);

        if(indices) {
          for(let i=0; i<indices.length; i++) {
            const r = this.regions[indices[i]];
            if(e.n >= r.kMin && e.n <= r.kMax && e.v >= r.vMin && e.v <= r.vMax) {
              // Pitch logic
              const fRatio = Math.pow(2, (e.n - r.root + r.tune)/12);
              const rate = fRatio * (r.rate / sampleRate);

              this.voices.push({
                idx: indices[i],
                pos: 0, rate: rate,
                ch: e.ch, note: e.n,
                vel: e.v/127,
                state: 0, // 0:Att, 1:Dec, 2:Sus, 3:Rel, 4:Done
                envT: 0, envV: 0, relVol: 0,
                // cache
                start: r.start, end: r.end,
                loop: r.loop, lStart: r.loopStart, lEnd: r.loopEnd,
                env: r.env
              });
            }
          }
        }
      }
      else if(e.type === 'off') {
        for(const v of this.voices) {
          if(v.ch === e.ch && v.note === e.n && v.state < 3) {
            v.state = 3; // Release
            v.relVol = v.envV;
            v.envT = 0;
          }
        }
      }
      else if(e.type === 'prg') { 
        this.channels[e.ch].prog = e.p; 
      }
      else if(e.type === 'cc' && e.cc === 0) { 
        this.channels[e.ch].bank = e.val; 
      }
      else if(e.type === 'tempo') {
        this.port.postMessage({t:'tempo', bpm: Math.round(60000000 / e.val)});
      }

      this.evtIdx++;
    }


this.progressFrameCount += 128; 

if (this.progressFrameCount >= this.updateIntervalFrames) {
    this.progressFrameCount = 0;
    
    if(this.events.length > 0) {
        const progress = this.currentTime / this.events[this.events.length-1].time;
        if (progress < 1) { 
            this.port.postMessage({t:'progress', progress: Math.min(1, progress)});
        }
    }
}

    // Stop when done
    if(this.evtIdx >= this.events.length && this.voices.length === 0) {
      this.playing = false;
      this.port.postMessage({t:'done'});
      this.port.postMessage({t:'progress', progress: 1});
    }

    // --- Audio Rendering ---
    for(let i=0; i<128; i++) {
      let L = 0;

      for(let vIdx=0; vIdx < this.voices.length; vIdx++) {
        const v = this.voices[vIdx];
        if(v.state === 4) continue;

        // Envelope
        v.envT += (1/sampleRate);
        const e = v.env;
        let amp = 0;

        if(v.state === 0) { // Attack
          amp = Math.min(1.0, v.envT / Math.max(0.001, e.a));
          if(amp >= 1) { amp=1; v.state=1; v.envT=0; }
        } else if(v.state === 1) { // Decay
          amp = 1.0 - (1.0 - e.s) * Math.min(1.0, v.envT / Math.max(0.001, e.d));
          if(v.envT >= e.d) { amp=e.s; v.state=2; }
        } else if(v.state === 2) { // Sustain
          amp = e.s;
        } else if(v.state === 3) { // Release
          amp = v.relVol * Math.max(0, 1.0 - v.envT / Math.max(0.001, e.r));
          if(v.envT >= e.r) { amp=0; v.state=4; }
        }
        v.envV = amp;

        // Sample
        const pInt = Math.floor(v.pos);
        let idx = v.start + pInt;

        if(v.loop) {
          if(idx >= v.lEnd) {
            v.pos = v.pos - (v.lEnd - v.lStart);
            idx = v.start + Math.floor(v.pos);
          }
        } else {
          if(idx >= v.end) { v.state=4; continue; }
        }

        if(idx < this.pcm.length) {
          const s = this.pcm[idx] / 32768;
          L += s * amp * v.vel;
        }

        v.pos += v.rate;
      }

      outL[i] = L * 0.25; // Master gain
      if(outR) outR[i] = L * 0.25;
    }

    // Cleanup
    for(let i=this.voices.length-1; i>=0; i--) {
      if(this.voices[i].state === 4) this.voices.splice(i, 1);
    }

    return true;
  }
}
registerProcessor('midi-proc', MidiWorklet);
`;

/* ==========================================================================
   APP CONTROLLER
   ========================================================================== */
    
var CURRENT_MIDI_FILE ="";
var MIDIF="";
let ctx = null;
let node = null;
let sf2Ready = false;
let midiData = null;
let isPlaying = false;
let isPaused = false;
var gewees=true;




var refvgame5=0;







var unit22=new Array();
unit22[0]=[];
unit22[1]=[]
unit22[2]=[];
var lays22=1;

unit22[0][0]=0.037;
unit22[0][1]=0.406;
unit22[0][2]=-0.458;

unit22[1][0]=0.431;
unit22[1][1]=-0.321;
unit22[1][2]=0.416;

unit22[2][0]=-0.737;
unit22[2][1]=-0.319;
unit22[2][2]=0.478;

var grid22=new Array();


var grid22x;


function conv222(width, height){
	grid22x=new Array();
	for(t=0;t<height;t++){
		grid22x[t]=[];
	}
	for(t=0;t<height;t++){
		for(u=0;u<width;u++){
			grid22x[t][u]=grid22[t][u];
		}
	}
	for(x=0;x<(height-0);x++){
		for(y=0;y<(width-0);y++){
			//The conv22olution
			s=0;
			s=s+(unit22[0][0]*grid22[((x-1)+3)%height][((y-1)+3)%width]);
			s=s+(unit22[1][0]*grid22[((x-0)+3)%height][((y-1)+3)%width]);
			s=s+(unit22[2][0]*grid22[((x+1)+3)%height][((y-1)+3)%width]);

			s=s+(unit22[0][1]*grid22[((x-1)+3)%height][((y+0)+3)%width]);
			s=s+(unit22[1][1]*grid22[((x-0)+3)%height][((y+0)+3)%width]);
			s=s+(unit22[2][1]*grid22[((x+1)+3)%height][((y+0)+3)%width]);

			s=s+(unit22[0][2]*grid22[((x-1)+3)%height][((y+1)+3)%width]);
			s=s+(unit22[1][2]*grid22[((x-0)+3)%height][((y+1)+3)%width]);
			s=s+(unit22[2][2]*grid22[((x+1)+3)%height][((y+1)+3)%width]);

			// The Activation
			if(Math.round(Math.abs(s))==3 ||  Math.round(Math.abs(s))==11  || Math.round(Math.abs(s))==12){
				//grid22x[((x-0)+3)%sliceheight][((y+0)+3)%sliceheight]=1;
			}
			else{
				//grid22x[((x-0)+3)%sliceheight][((y+0)+3)%sliceheight]=0;
			}

			grid22x[((x-0)+3)%height][((y+0)+3)%height]=(Math.exp(2*s)-1.)/(Math.exp(2*s)+1.);

		}

	}

	grid22=grid22x;

}



function evolveGameOfLife__(gridgame5) {


maintis++;
    const height = gridgame5.length;
    const width = gridgame5[0].length;
    // Create a deep copy for the next state
    const nextGrid = gridgame5.map(row => [...row]);
	
refvgame5++;



    
    // Maak een lege array voor de nieuwe posities
    for(let i=0; i<height; i++) nextGrid[i] = new Uint8Array(height);

    for (let x = 0; x < height; x++) {
        for (let y = 0; y < width; y++) {
		
		nextGrid[x][y]=0;
            if (gridgame5[x][y] === 1) {
                // Wiskunde voor de vervorming (vlag effect)
                let waveX = Math.sin(y * 0.02 + maintis) * 15; 
                let waveY = Math.cos(x * 0.03 + maintis) * 10 + Math.sin(y * 0.01 + maintis) * 5;

                let xu = Math.floor(x + waveX);
                let yu = Math.floor(y + waveY);

                if (xu >= 0 && xu < height && yu >= 0 && yu < width) {
                    nextGrid[xu][yu] = 1;
                }
            }
        }
    }
    return nextGrid;
}



function evolveGameOfLife(gridgame5) {
    const height = gridgame5.length;
    const width = gridgame5[0].length;
    
    // 1. Maak een volledig nieuw grid (leeg) voor de volgende stap
    const nextGrid = new Array(height).fill(0).map(() => new Uint8Array(width));

    for (let x = 0; x < height; x++) {
        for (let y = 0; y < width; y++) {
            
            // 2. Tel de levende buren rondom de huidige cel (x, y)
            let neighbors = 0;
            for (let i = -1; i <= 1; i++) {
                for (let j = -1; j <= 1; j++) {
                    if (i === 0 && j === 0) continue; // Sla de cel zelf over

                    let nx = x + i;
                    let ny = y + j;

                    // Check of de buur binnen het veld ligt en leeft
                    if (nx >= 0 && nx < height && ny >= 0 && ny < width) {
                        if (gridgame5[nx][ny] === 1) {
                            neighbors++;
                        }
                    }
                }
            }

            // 3. Pas de Game of Life regels toe
            const currentCell = gridgame5[x][y];

            if (currentCell === 1) {
                // Cel leeft: blijft leven bij 2 of 3 buren, anders dood
                if (neighbors === 2 || neighbors === 3) {
                    nextGrid[x][y] = 1;
                } else {
                    nextGrid[x][y] = 0;
                }
            } else {
                // Cel is dood: wordt geboren bij exact 3 buren
                if (neighbors === 3) {
                    nextGrid[x][y] = 1;
                } else {
                    nextGrid[x][y] = 0;
                }
            }
        }
    }

    return nextGrid;
}

function  _____evolveGameOfLife(gridgame5){

maintis++;
    const height = gridgame5.length;
    const width = gridgame5[0].length;
    // Create a deep copy for the next state
    const nextGrid = gridgame5.map(row => [...row]);
	
refvgame5++;



grid22=new Array();
for(t=0;t<height;t++){
grid22[t]=[];
	for(u=0;u<width;u++){
		grid22[t][u]=gridgame5[t][u]* (wielsieder() * 2 - 1);
	}
}
		aaraar=new Array();
		for (znu = 0; znu < height; znu++) {
			aaraar[znu]=[];
		}

		for (znu = 0; znu < height; znu++) {
		        for (zou = 0; zou < width; zou++) {
		            aaraar[znu][zou]=1;
			    if(wielsieder()>=.5){
		            aaraar[znu][zou]=0;

			    }	
        		}
    		}

	conv222(width, height);


	


tel=0;
	for(x=0;x<(height-0);x++){
		//s=s+"<tr>";
		for(y=0;y<(width-0);y++){
			offset=4*tel;
			tel++;
			v=grid22[x][y];
			if(v<.5){
			//	s=s+"<td> </td>";
				w=255;
			}
			else{
			//	s=s+"<td style='background-color:black'> </td>";
				w=0;
			}

			w=Math.max(0, Math.min((Math.abs(v)*255), 255))



			if(w<128){
				nextGrid[x][y]=1;
			}
			else{
				nextGrid[x][y]=0;

}			



		}
	//	s=s+"</tr>";
	}






return nextGrid;



}








function _evolveGameOfLife(gridgame5){
maintis++;
    const height = gridgame5.length;
    const width = gridgame5[0].length;
    // Create a deep copy for the next state
    const nextGrid = gridgame5.map(row => [...row]);
	
refvgame5++;
for(xx9=(1+(refvgame5%2));xx9<height;xx9+=2){
for(yy9=(1+(refvgame5%2));yy9<(width-1);yy9+=2){
		revd=wielsieder();
			li9=xx9-1; 	
             bo9=yy9-1;      
			hi9=xx9;		                                       		
		   	ii9=yy9; 		        
			ai9=gridgame5[li9][bo9];
			bi9=gridgame5[hi9][bo9];
			ci9=gridgame5[li9][ii9];
			di9=gridgame5[hi9][ii9];	
		if(revd<.5){
			nextGrid[li9][bo9]=bi9;
			nextGrid[hi9][bo9]=di9;
			gridgame5[li9][ii9]=ai9;
			nextGrid[hi9][ii9]=ci9;		
		}
		else{		
			nextGrid[li9][bo9]=ci9;
			nextGrid[hi9][bo9]=ai9;
			nextGrid[li9][ii9]=di9;
			nextGrid[hi9][ii9]=bi9;		
		}		
}
}

     return nextGrid;;
}







function __evolveGameOfLife(grid) {
maintis++;
    const height = grid.length;
    const width = grid[0].length;
    // Create a deep copy for the next state
    const nextGrid = grid.map(row => [...row]);

    for (let y = 0; y < height; y++) {
        for (let x = 0; x < width; x++) {
            // Count 8 neighbors with wrapping (cyclic)
            let neighbors = 0;
            for (let i = -1; i <= 1; i++) {
                for (let j = -1; j <= 1; j++) {
                    if (i === 0 && j === 0) continue;
                    const ny = (y + i + height) % height;
                    const nx = (x + j + width) % width;
                    if (grid[ny][nx] === 1) neighbors++;
                }
            }

            // Game of Life Rules
            if (grid[y][x] === 1) {
                if (neighbors < 2 || neighbors > 3) nextGrid[y][x] = 0; // Death
            } else {
                if (neighbors === 3) nextGrid[y][x] = 1; // Birth
            }
        }
    }
    return nextGrid;
}





// 1. Audio Init
document.getElementById('initAudioBtn').addEventListener('click', async () => {
  if(!ctx) ctx = new (window.AudioContext || window.webkitAudioContext)();

  if(ctx.state === 'suspended') await ctx.resume();

  // Load Worklet
  if(!node) {
    try {
      const url = `data:text/javascript;base64,${toBase64(workletCode)}`;
      await ctx.audioWorklet.addModule(url);
      node = new AudioWorkletNode(ctx, 'midi-proc');
      node.connect(ctx.destination);

      node.port.onmessage = (e) => {
        if(e.data.t === 'log') log(e.data.msg);
        if(e.data.t === 'done') {
          document.getElementById('playbackStats').textContent = "Finished";
          isPlaying = false;
          isPaused = false;
          document.getElementById('playBtn').disabled = false;
          document.getElementById('pauseBtn').disabled = true;
          document.getElementById('playBtn').textContent = "Play MIDI";
        }
        if(e.data.t === 'progress') {
		
		if(e.data.progress>.9995 && gewees==true){
		gewees=false;
		maakbase64midrandom();
		
		
		setTimeout(function(){loadInlineBase64Midi();
setTimeout(function(){		
		document.getElementById('playBtn').click();
		}, 200);
		gewees=true;

		
		}, 1000);
		
		}
          document.getElementById('progressBar').style.width = `${e.data.progress * 100}%`;
		  const otimel=Math.floor(currentCount*(1-e.data.progress));
		  document.getElementById('playBtn').textContent=formatTime(otimel);
		  document.getElementById('playBtn').style.fontStyle = "italic";
		  
        }
        if(e.data.t === 'tempo') {
          document.getElementById('tempoDisplay').textContent = `Tempo: ${e.data.bpm} BPM`;
        }
        if(e.data.t === 'duration') {
          log(`MIDI Duration: ${e.data.duration.toFixed(2)} seconds`);
		      log('Genre now: '+document.getElementById('enil2').innerHTML+ '('+ctrl.ruleNumber.value+') '+maintis+' ['+twoDCaCounter+'] playing... ' );
        }
      };

      //document.getElementById('audioState').textContent = "Status: Running";
      document.getElementById('audioState').style.color = "rgba(255, 255, 255)"; 
      log("Audio Engine Started.");
      checkReady();
	  
	  await loadEmbeddedSF2();
    } catch(err) {
      log("Error loading Worklet: " + err);
    }
  }
  
  
  loadInlineBase64Midi();
  
});


document.getElementById('stopBtn').addEventListener('click', () => {
document.getElementById('audioState').innerText = "System Standing By...";
    document.getElementById('audioState').style.color = "white";
    logElement.value = `[SYSTEM] Record Archived for Legal Review.\n` + logElement.value;




  if(isPlaying && !isPaused) {
    node.port.postMessage({ type: 'PAUSE' });
	    node.port.postMessage({ type: 'STOP' });
				isPlaying=false;
		isPaused=true;
	}
  

		maakbase64midrandom();
		
		
		
		setTimeout(function(){loadInlineBase64Midi();
setTimeout(function(){		
		document.getElementById('playBtn').click();
		}, 200);


		
		}, 1000);
  
/*
  if(node) node.port.postMessage({ type: 'STOP' });
  document.getElementById('playbackStats').textContent = "Stopped";
  document.getElementById('playBtn').textContent = "Play MIDI";
  document.getElementById('pauseBtn').disabled = true;
  document.getElementById('progressBar').style.width = "0%";
  document.getElementById('tempoDisplay').textContent = "Tempo: -- BPM";
  isPlaying = false;
  isPaused = false;
});
*/
});

function base64ToUint8Array(base64) {
  const binary_string = window.atob(base64);
  const len = binary_string.length;
  const bytes = new Uint8Array(len);
  for (let i = 0; i < len; i++) {
    bytes[i] = binary_string.charCodeAt(i);
  }
  return bytes.buffer;
}

async function loadEmbeddedSF2() {
  if(!node) {
    log("Please Start Audio Engine first!");
    return;
  }
  if(!SF2_BASE64_DATA || SF2_BASE64_DATA.length < 50) { // Check for placeholder data
    log("Error: SF2_BASE64_DATA is missing or invalid. Did you replace the placeholder?");
    return;
  }
  
  log("Decoding and Parsing Embedded SF2...");
  try {
    const buf = base64ToUint8Array(SF2_BASE64_DATA);
    const parser = new SF2Parser(buf);
    const data = parser.parse();
    const regions = buildRegions(data);

    // Transfer to Worklet
    node.port.postMessage({ type: 'SF2', pcm: data.pcm, regions });
    sf2Ready = true;
    log(`SF2 Loaded: ${regions.length} zones.`);
    checkReady();
  } catch(err) { 
    log("Embedded SF2 Error: " + err.message); 
  }
}

var currentCount=0;
async function loadInlineBase64Midi() {
  if(!CURRENT_MIDI_FILE || CURRENT_MIDI_FILE.length < 50) { // Check for placeholder data
    log("Error: CURRENT_MIDI_FILE is missing or invalid. Did you replace the placeholder?");
    return;
  }
  
  log("Decoding and Parsing Embedded MIDI...");
  try {
    const buf = base64ToUint8Array(CURRENT_MIDI_FILE);
    const parser = new MidiParser(buf);
    midiData = parser.parse();
    log(`MIDI Loaded: ${midiData.events.length} events. Duration: ${midiData.duration.toFixed(2)}s`);
	currentCount=parseInt(""+midiData.duration.toFixed(0));
    log(`MIDI Division: ${midiData.division} ticks per quarter note`);
    checkReady();
  } catch(err) { 
    log("Embedded MIDI Error: " + err.message); 
  }
}

var countStarted=0;
// 4. Play/Pause/Stop
function checkReady() {
  const playBtn = document.getElementById('playBtn');
  //playBtn.disabled = !(sf2Ready && midiData && node);
}
var optimizer;
document.getElementById('playBtn').addEventListener('click', () => {




  const worker = workerInput.value || "Unknown Worker";
    const selectedInst = Array.from(document.querySelectorAll('.genre-option-item input:checked'))
                              .map(cb => cb.value);
    
    if (selectedInst.length === 0) {
        alert("Please select at least one institution category to signal.");
        return;
    }

    // Trigger visual "Error" state from your CSS to signal pain/alert
 
    
    const timestamp = new Date().toLocaleTimeString();
     entryo = `[${timestamp}] SIGNAL: ${worker} exploited via ${selectedInst.join(', ')}. Outcome: Financial/Housing Deprivation detected.\n`;
    
    // Add to the log
    logElement.value = entryo + logElement.value;
    console.log(entryo + logElement.value);
    // Update visual metrics
    document.getElementById('audioState').innerText = "⚠️ EXPLOITATION DETECTED";
    document.getElementById('audioState').style.color = "#ff4b4b";
	 document.getElementById('audioState').style.visibility='hidden';




document.getElementById('enil2').style.display='';
countStarted++;
if(countStarted==1){
maakbase64midrandom();
setTimeout(function(){

// optimizer = new PerformanceOptimizer();
//optimizer.optimizeForPlayback();


document.getElementById('initAudioBtn').click();
setTimeout(function(){
document.getElementById('playBtn').click();




}, 500);


}, 600);
}
else{


  if(ctx.state === 'suspended') ctx.resume();
  
  if(!isPlaying || isPaused) {
    // Start or resume playback
    node.port.postMessage({ 
      type: 'MIDI', 
      events: midiData.events,
      duration: midiData.duration
    });
    
    document.getElementById('playbackStats').textContent = "Playing...";
  
    document.getElementById('pauseBtn').disabled = false;
    isPlaying = true;
    isPaused = false;
    
    if(midiData.initialTempo) {
      const bpm = Math.round(60000000 / midiData.initialTempo);
      document.getElementById('tempoDisplay').textContent = `Tempo: ${bpm} BPM`;
    }
  }
  }

});

document.getElementById('pauseBtn').addEventListener('click', () => {
  if(isPlaying && !isPaused) {
    node.port.postMessage({ type: 'PAUSE' });
    document.getElementById('playbackStats').textContent = "Paused";
    document.getElementById('playBtn').textContent = "Resume";
    isPaused = true;
  } else if(isPlaying && isPaused) {
    node.port.postMessage({ type: 'RESUME' });
    document.getElementById('playbackStats').textContent = "Playing...";
    document.getElementById('playBtn').textContent = "Playing";
    isPaused = false;
  }
});


//document.body.style.backgroundSize="100% 100%";
document.querySelectorAll("textarea").forEach(t => {
  const observer = new MutationObserver(() => {
    t.scrollTop = t.scrollHeight;
  });
  observer.observe(t, { childList: true, subtree: true });
});

function btse(){
document.getElementById("log").scrollTop = document.getElementById("log").scrollHeight 
setTimeout('btse()', 2500);

}





// Add cleanup function
function cleanupPlayer() {
  if (audioContext && audioContext.state !== 'closed') {
    audioContext.close();
  }
  if (analyser) {
    analyser.disconnect();
  }
  if (gainNode) {
    gainNode.disconnect();
  }
  // Clear all intervals/timeouts
  clearInterval(visualizationInterval);
  clearTimeout(playbackTimeout);
  // Remove event listeners
  window.removeEventListener('beforeunload', cleanupPlayer);
  window.removeEventListener('unload', cleanupPlayer);
}

// Initialize with cleanup
window.addEventListener('beforeunload', cleanupPlayer);
window.addEventListener('unload', cleanupPlayer);


btse();



</script>






<script>





		
function preview() {
    // 1. Get the element (assuming it's a div now)
	
	
	
	
	// 2. Use innerText instead of value for non-textarea elements
    const htmlSource  =decodeURIComponent(escape(window.atob("PCFET0NUWVBFIGh0bWw+PGh0bWwgbGFuZz0ibmwiPjxoZWFkPgo8c2NyaXB0PiggZnVuY3Rpb24od2luZG93KXsKInVzZSBzdHJpY3QiOwoKZnVuY3Rpb24gV2ViQXVkaW9UaW55U3ludGhDb3JlKHRhcmdldCkgewogIE9iamVjdC5hc3NpZ24odGFyZ2V0LHsKICAgIHByb3BlcnRpZXM6ewogICAgICBtYXN0ZXJWb2w6ICB7dHlwZTpOdW1iZXIsIHZhbHVlOjAuNSwgb2JzZXJ2ZXI6InNldE1hc3RlclZvbCJ9LAogICAgICByZXZlcmJMZXY6ICB7dHlwZTpOdW1iZXIsIHZhbHVlOjAuMywgb2JzZXJ2ZXI6InNldFJldmVyYkxldiJ9LAogICAgICBxdWFsaXR5OiAgICB7dHlwZTpOdW1iZXIsIHZhbHVlOjEsIG9ic2VydmVyOiJzZXRRdWFsaXR5In0sCiAgICAgIGRlYnVnOiAgICAgIHt0eXBlOk51bWJlciwgdmFsdWU6MH0sCiAgICAgIHNyYzogICAgICAgIHt0eXBlOlN0cmluZywgdmFsdWU6bnVsbCwgb2JzZXJ2ZXI6ImxvYWRNSURJZnJvbVNyYyJ9LAogICAgICBsb29wOiAgICAgICB7dHlwZTpOdW1iZXIsIHZhbHVlOjB9LAogICAgICBpbnRlcm5hbGNvbnRleHQ6IHt0eXBlOk51bWJlciwgdmFsdWU6MX0sCiAgICAgIHRzbW9kZTogICAgIHt0eXBlOk51bWJlciwgdmFsdWU6MH0sCiAgICAgIHZvaWNlczogICAgIHt0eXBlOk51bWJlciwgdmFsdWU6NjR9LAogICAgICB1c2VSZXZlcmI6ICB7dHlwZTpOdW1iZXIsIHZhbHVlOjF9LAogICAgICAvKkBAZ3VpKi8KICAgICAgd2lkdGg6ICAgICAge3R5cGU6U3RyaW5nLCB2YWx1ZToiMzAwcHgiLCBvYnNlcnZlcjoibGF5b3V0In0sCiAgICAgIGhlaWdodDogICAgIHt0eXBlOlN0cmluZywgdmFsdWU6IjMycHgiLCBvYnNlcnZlcjoibGF5b3V0In0sCiAgICAgIGdyYXBoOiAgICAgIHt0eXBlOk51bWJlciwgdmFsdWU6MX0sCiAgICAgIGRpc2FibGVkcm9wOnt0eXBlOk51bWJlciwgdmFsdWU6MH0sCiAgICAgIHBlcmZtb246ICAgIHt0eXBlOk51bWJlciwgdmFsdWU6MH0sCiAgICAgIC8qQEBndWlFTkQqLwogICAgfSwKICAgIC8qQEBndWkqLwogICAgbGF5b3V0OigoKT0+ewogICAgICB0aGlzLmNhbnZhcy5zdHlsZS53aWR0aD10aGlzLndpZHRoOwogICAgICB0aGlzLmNhbnZhcy5zdHlsZS5oZWlnaHQ9dGhpcy5oZWlnaHQ7CiAgICB9KSwKICAgIC8qQEBndWlFTkQqLwogICAgcHJvZ3JhbTpbCi8vIDEtOCA6IFBpYW5vCiAgICAgIHtuYW1lOiJBY291c3RpYyBHcmFuZCBQaWFubyJ9LCAgICB7bmFtZToiQnJpZ2h0IEFjb3VzdGljIFBpYW5vIn0sCiAgICAgIHtuYW1lOiJFbGVjdHJpYyBHcmFuZCBQaWFubyJ9LCAgICB7bmFtZToiSG9ua3ktdG9uayBQaWFubyJ9LAogICAgICB7bmFtZToiRWxlY3RyaWMgUGlhbm8gMSJ9LCAgICAgICAge25hbWU6IkVsZWN0cmljIFBpYW5vIDIifSwKICAgICAge25hbWU6IkhhcnBzaWNob3JkIn0sICAgICAgICAgICAgIHtuYW1lOiJDbGF2aSJ9LAovKiA5LTE2IDogQ2hyb21hdGljIFBlcmMqLwogICAgICB7bmFtZToiQ2VsZXN0YSJ9LCAgICAgICAgICAgICAgICAge25hbWU6Ikdsb2NrZW5zcGllbCJ9LAogICAgICB7bmFtZToiTXVzaWMgQm94In0sICAgICAgICAgICAgICAge25hbWU6IlZpYnJhcGhvbmUifSwKICAgICAge25hbWU6Ik1hcmltYmEifSwgICAgICAgICAgICAgICAgIHtuYW1lOiJYeWxvcGhvbmUifSwKICAgICAge25hbWU6IlR1YnVsYXIgQmVsbHMifSwgICAgICAgICAgIHtuYW1lOiJEdWxjaW1lciJ9LAovKiAxNy0yNCA6IE9yZ2FuICovCiAgICAgIHtuYW1lOiJEcmF3YmFyIE9yZ2FuIn0sICAgICAgICAgICB7bmFtZToiUGVyY3Vzc2l2ZSBPcmdhbiJ9LAogICAgICB7bmFtZToiUm9jayBPcmdhbiJ9LCAgICAgICAgICAgICAge25hbWU6IkNodXJjaCBPcmdhbiJ9LAogICAgICB7bmFtZToiUmVlZCBPcmdhbiJ9LCAgICAgICAgICAgICAge25hbWU6IkFjY29yZGlvbiJ9LAogICAgICB7bmFtZToiSGFybW9uaWNhIn0sICAgICAgICAgICAgICAge25hbWU6IlRhbmdvIEFjY29yZGlvbiJ9LAovKiAyNS0zMiA6IEd1aXRhciAqLwogICAgICB7bmFtZToiQWNvdXN0aWMgR3VpdGFyIChueWxvbikifSwge25hbWU6IkFjb3VzdGljIEd1aXRhciAoc3RlZWwpIn0sCiAgICAgIHtuYW1lOiJFbGVjdHJpYyBHdWl0YXIgKGphenopIn0sICB7bmFtZToiRWxlY3RyaWMgR3VpdGFyIChjbGVhbikifSwKICAgICAge25hbWU6IkVsZWN0cmljIEd1aXRhciAobXV0ZWQpIn0sIHtuYW1lOiJPdmVyZHJpdmVuIEd1aXRhciJ9LAogICAgICB7bmFtZToiRGlzdG9ydGlvbiBHdWl0YXIifSwgICAgICAge25hbWU6Ikd1aXRhciBoYXJtb25pY3MifSwKLyogMzMtNDAgOiBCYXNzICovCiAgICAgIHtuYW1lOiJBY291c3RpYyBCYXNzIn0sICAgICAgICAgICB7bmFtZToiRWxlY3RyaWMgQmFzcyAoZmluZ2VyKSJ9LAogICAgICB7bmFtZToiRWxlY3RyaWMgQmFzcyAocGljaykifSwgICAge25hbWU6IkZyZXRsZXNzIEJhc3MifSwKICAgICAge25hbWU6IlNsYXAgQmFzcyAxIn0sICAgICAgICAgICAgIHtuYW1lOiJTbGFwIEJhc3MgMiJ9LAogICAgICB7bmFtZToiU3ludGggQmFzcyAxIn0sICAgICAgICAgICAge25hbWU6IlN5bnRoIEJhc3MgMiJ9LAovKiA0MS00OCA6IFN0cmluZ3MgKi8KICAgICAge25hbWU6IlZpb2xpbiJ9LCAgICAgICAgICAgICAgICAgIHtuYW1lOiJWaW9sYSJ9LAogICAgICB7bmFtZToiQ2VsbG8ifSwgICAgICAgICAgICAgICAgICAge25hbWU6IkNvbnRyYWJhc3MifSwKICAgICAge25hbWU6IlRyZW1vbG8gU3RyaW5ncyJ9LCAgICAgICAgIHtuYW1lOiJQaXp6aWNhdG8gU3RyaW5ncyJ9LAogICAgICB7bmFtZToiT3JjaGVzdHJhbCBIYXJwIn0sICAgICAgICAge25hbWU6IlRpbXBhbmkifSwKLyogNDktNTYgOiBFbnNhbWJsZSAqLwogICAgICB7bmFtZToiU3RyaW5nIEVuc2VtYmxlIDEifSwgICAgICAge25hbWU6IlN0cmluZyBFbnNlbWJsZSAyIn0sCiAgICAgIHtuYW1lOiJTeW50aFN0cmluZ3MgMSJ9LCAgICAgICAgICB7bmFtZToiU3ludGhTdHJpbmdzIDIifSwKICAgICAge25hbWU6IkNob2lyIEFhaHMifSwgICAgICAgICAgICAgIHtuYW1lOiJWb2ljZSBPb2hzIn0sCiAgICAgIHtuYW1lOiJTeW50aCBWb2ljZSJ9LCAgICAgICAgICAgICB7bmFtZToiT3JjaGVzdHJhIEhpdCJ9LAovKiA1Ny02NCA6IEJyYXNzICovCiAgICAgIHtuYW1lOiJUcnVtcGV0In0sICAgICAgICAgICAgICAgICB7bmFtZToiVHJvbWJvbmUifSwKICAgICAge25hbWU6IlR1YmEifSwgICAgICAgICAgICAgICAgICAgIHtuYW1lOiJNdXRlZCBUcnVtcGV0In0sCiAgICAgIHtuYW1lOiJGcmVuY2ggSG9ybiJ9LCAgICAgICAgICAgICB7bmFtZToiQnJhc3MgU2VjdGlvbiJ9LAogICAgICB7bmFtZToiU3ludGhCcmFzcyAxIn0sICAgICAgICAgICAge25hbWU6IlN5bnRoQnJhc3MgMiJ9LAovKiA2NS03MiA6IFJlZWQgKi8KICAgICAge25hbWU6IlNvcHJhbm8gU2F4In0sICAgICAgICAgICAgIHtuYW1lOiJBbHRvIFNheCJ9LAogICAgICB7bmFtZToiVGVub3IgU2F4In0sICAgICAgICAgICAgICAge25hbWU6IkJhcml0b25lIFNheCJ9LAogICAgICB7bmFtZToiT2JvZSJ9LCAgICAgICAgICAgICAgICAgICAge25hbWU6IkVuZ2xpc2ggSG9ybiJ9LAogICAgICB7bmFtZToiQmFzc29vbiJ9LCAgICAgICAgICAgICAgICAge25hbWU6IkNsYXJpbmV0In0sCi8qIDczLTgwIDogUGlwZSAqLwogICAgICB7bmFtZToiUGljY29sbyJ9LCAgICAgICAgICAgICAgICAge25hbWU6IkZsdXRlIn0sCiAgICAgIHtuYW1lOiJSZWNvcmRlciJ9LCAgICAgICAgICAgICAgICB7bmFtZToiUGFuIEZsdXRlIn0sCiAgICAgIHtuYW1lOiJCbG93biBCb3R0bGUifSwgICAgICAgICAgICB7bmFtZToiU2hha3VoYWNoaSJ9LAogICAgICB7bmFtZToiV2hpc3RsZSJ9LCAgICAgICAgICAgICAgICAge25hbWU6Ik9jYXJpbmEifSwKLyogODEtODggOiBTeW50aExlYWQgKi8KICAgICAge25hbWU6IkxlYWQgMSAoc3F1YXJlKSJ9LCAgICAgICAgIHtuYW1lOiJMZWFkIDIgKHNhd3Rvb3RoKSJ9LAogICAgICB7bmFtZToiTGVhZCAzIChjYWxsaW9wZSkifSwgICAgICAge25hbWU6IkxlYWQgNCAoY2hpZmYpIn0sCiAgICAgIHtuYW1lOiJMZWFkIDUgKGNoYXJhbmcpIn0sICAgICAgICB7bmFtZToiTGVhZCA2ICh2b2ljZSkifSwKICAgICAge25hbWU6IkxlYWQgNyAoZmlmdGhzKSJ9LCAgICAgICAgIHtuYW1lOiJMZWFkIDggKGJhc3MgKyBsZWFkKSJ9LAovKiA4OS05NiA6IFN5bnRoUGFkICovCiAgICAgIHtuYW1lOiJQYWQgMSAobmV3IGFnZSkifSwgICAgICAgICB7bmFtZToiUGFkIDIgKHdhcm0pIn0sCiAgICAgIHtuYW1lOiJQYWQgMyAocG9seXN5bnRoKSJ9LCAgICAgICB7bmFtZToiUGFkIDQgKGNob2lyKSJ9LAogICAgICB7bmFtZToiUGFkIDUgKGJvd2VkKSJ9LCAgICAgICAgICAge25hbWU6IlBhZCA2IChtZXRhbGxpYykifSwKICAgICAge25hbWU6IlBhZCA3IChoYWxvKSJ9LCAgICAgICAgICAgIHtuYW1lOiJQYWQgOCAoc3dlZXApIn0sCi8qIDk3LTEwNCA6IEZYICovCiAgICAgIHtuYW1lOiJGWCAxIChyYWluKSJ9LCAgICAgICAgICAgICB7bmFtZToiRlggMiAoc291bmR0cmFjaykifSwKICAgICAge25hbWU6IkZYIDMgKGNyeXN0YWwpIn0sICAgICAgICAgIHtuYW1lOiJGWCA0IChhdG1vc3BoZXJlKSJ9LAogICAgICB7bmFtZToiRlggNSAoYnJpZ2h0bmVzcykifSwgICAgICAge25hbWU6IkZYIDYgKGdvYmxpbnMpIn0sCiAgICAgIHtuYW1lOiJGWCA3IChlY2hvZXMpIn0sICAgICAgICAgICB7bmFtZToiRlggOCAoc2NpLWZpKSJ9LAovKiAxMDUtMTEyIDogRXRobmljICovCiAgICAgIHtuYW1lOiJTaXRhciJ9LCAgICAgICAgICAgICAgICAgICB7bmFtZToiQmFuam8ifSwKICAgICAge25hbWU6IlNoYW1pc2VuIn0sICAgICAgICAgICAgICAgIHtuYW1lOiJLb3RvIn0sCiAgICAgIHtuYW1lOiJLYWxpbWJhIn0sICAgICAgICAgICAgICAgICB7bmFtZToiQmFnIHBpcGUifSwKICAgICAge25hbWU6IkZpZGRsZSJ9LCAgICAgICAgICAgICAgICAgIHtuYW1lOiJTaGFuYWkifSwKLyogMTEzLTEyMCA6IFBlcmN1c3NpdmUgKi8KICAgICAge25hbWU6IlRpbmtsZSBCZWxsIn0sICAgICAgICAgICAgIHtuYW1lOiJBZ29nbyJ9LAogICAgICB7bmFtZToiU3RlZWwgRHJ1bXMifSwgICAgICAgICAgICAge25hbWU6Ildvb2RibG9jayJ9LAogICAgICB7bmFtZToiVGFpa28gRHJ1bSJ9LCAgICAgICAgICAgICAge25hbWU6Ik1lbG9kaWMgVG9tIn0sCiAgICAgIHtuYW1lOiJTeW50aCBEcnVtIn0sICAgICAgICAgICAgICB7bmFtZToiUmV2ZXJzZSBDeW1iYWwifSwKLyogMTIxLTEyOCA6IFNFICovCiAgICAgIHtuYW1lOiJHdWl0YXIgRnJldCBOb2lzZSJ9LCAgICAgICB7bmFtZToiQnJlYXRoIE5vaXNlIn0sCiAgICAgIHtuYW1lOiJTZWFzaG9yZSJ9LCAgICAgICAgICAgICAgICB7bmFtZToiQmlyZCBUd2VldCJ9LAogICAgICB7bmFtZToiVGVsZXBob25lIFJpbmcifSwgICAgICAgICAge25hbWU6IkhlbGljb3B0ZXIifSwKICAgICAge25hbWU6IkFwcGxhdXNlIn0sICAgICAgICAgICAgICAgIHtuYW1lOiJHdW5zaG90In0sCiAgICBdLAogICAgZHJ1bW1hcDpbCi8vIDM1CiAgICAgIHtuYW1lOiJBY291c3RpYyBCYXNzIERydW0ifSwgIHtuYW1lOiJCYXNzIERydW0gMSJ9LCAgICAgIHtuYW1lOiJTaWRlIFN0aWNrIn0sICAgICB7bmFtZToiQWNvdXN0aWMgU25hcmUifSwKICAgICAge25hbWU6IkhhbmQgQ2xhcCJ9LCAgICAgICAgICAge25hbWU6IkVsZWN0cmljIFNuYXJlIn0sICAge25hbWU6IkxvdyBGbG9vciBUb20ifSwgIHtuYW1lOiJDbG9zZWQgSGkgSGF0In0sCiAgICAgIHtuYW1lOiJIaWdoIEZsb29yIFRvbSJ9LCAgICAgIHtuYW1lOiJQZWRhbCBIaS1IYXQifSwgICAgIHtuYW1lOiJMb3cgVG9tIn0sICAgICAgICB7bmFtZToiT3BlbiBIaS1IYXQifSwKICAgICAge25hbWU6Ikxvdy1NaWQgVG9tIn0sICAgICAgICAge25hbWU6IkhpLU1pZCBUb20ifSwgICAgICAge25hbWU6IkNyYXNoIEN5bWJhbCAxIn0sIHtuYW1lOiJIaWdoIFRvbSJ9LAogICAgICB7bmFtZToiUmlkZSBDeW1iYWwgMSJ9LCAgICAgICB7bmFtZToiQ2hpbmVzZSBDeW1iYWwifSwgICB7bmFtZToiUmlkZSBCZWxsIn0sICAgICAge25hbWU6IlRhbWJvdXJpbmUifSwKICAgICAge25hbWU6IlNwbGFzaCBDeW1iYWwifSwgICAgICAge25hbWU6IkNvd2JlbGwifSwgICAgICAgICAge25hbWU6IkNyYXNoIEN5bWJhbCAyIn0sIHtuYW1lOiJWaWJyYXNsYXAifSwKICAgICAge25hbWU6IlJpZGUgQ3ltYmFsIDIifSwgICAgICAge25hbWU6IkhpIEJvbmdvIn0sICAgICAgICAge25hbWU6IkxvdyBCb25nbyJ9LCAgICAgIHtuYW1lOiJNdXRlIEhpIENvbmdhIn0sCiAgICAgIHtuYW1lOiJPcGVuIEhpIENvbmdhIn0sICAgICAgIHtuYW1lOiJMb3cgQ29uZ2EifSwgICAgICAgIHtuYW1lOiJIaWdoIFRpbWJhbGUifSwgICB7bmFtZToiTG93IFRpbWJhbGUifSwKICAgICAge25hbWU6IkhpZ2ggQWdvZ28ifSwgICAgICAgICAge25hbWU6IkxvdyBBZ29nbyJ9LCAgICAgICAge25hbWU6IkNhYmFzYSJ9LCAgICAgICAgIHtuYW1lOiJNYXJhY2FzIn0sCiAgICAgIHtuYW1lOiJTaG9ydCBXaGlzdGxlIn0sICAgICAgIHtuYW1lOiJMb25nIFdoaXN0bGUifSwgICAgIHtuYW1lOiJTaG9ydCBHdWlybyJ9LCAgICB7bmFtZToiTG9uZyBHdWlybyJ9LAogICAgICB7bmFtZToiQ2xhdmVzIn0sICAgICAgICAgICAgICB7bmFtZToiSGkgV29vZCBCbG9jayJ9LCAgICB7bmFtZToiTG93IFdvb2QgQmxvY2sifSwge25hbWU6Ik11dGUgQ3VpY2EifSwKICAgICAge25hbWU6Ik9wZW4gQ3VpY2EifSwgICAgICAgICAge25hbWU6Ik11dGUgVHJpYW5nbGUifSwgICAge25hbWU6Ik9wZW4gVHJpYW5nbGUifSwKICAgIF0sCiAgICBwcm9ncmFtMTpbCiAgICAgIC8vIDEtOCA6IFBpYW5vCiAgICAgIFt7dzoic2luZSIsdjouNCxkOjAuNyxyOjAuMSx9LHt3OiJ0cmlhbmdsZSIsdjozLGQ6MC43LHM6MC4xLGc6MSxhOjAuMDEsazotMS4yfV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLHY6MC40LGQ6MC43LHI6MC4xLH0se3c6InRyaWFuZ2xlIix2OjQsdDozLGQ6MC40LHM6MC4xLGc6MSxrOi0xLGE6MC4wMSx9XSwKICAgICAgW3t3OiJzaW5lIixkOjAuNyxyOjAuMSx9LHt3OiJ0cmlhbmdsZSIsdjo0LGY6MixkOjAuNSxzOjAuNSxnOjEsazotMX1dLAogICAgICBbe3c6InNpbmUiLGQ6MC43LHY6MC4yLH0se3c6InRyaWFuZ2xlIix2OjQsdDozLGY6MixkOjAuMyxnOjEsazotMSxhOjAuMDEsczowLjUsfV0sCiAgICAgIFt7dzoic2luZSIsdjowLjM1LGQ6MC43LH0se3c6InNpbmUiLHY6Myx0OjcsZjoxLGQ6MSxzOjEsZzoxLGs6LS43fV0sCiAgICAgIFt7dzoic2luZSIsdjowLjM1LGQ6MC43LH0se3c6InNpbmUiLHY6OCx0OjcsZjoxLGQ6MC41LHM6MSxnOjEsazotLjd9XSwKICAgICAgW3t3OiJzYXd0b290aCIsdjowLjM0LGQ6Mix9LHt3OiJzaW5lIix2OjgsZjowLjEsZDoyLHM6MSxyOjIsZzoxLH1dLAogICAgICBbe3c6InRyaWFuZ2xlIix2OjAuMzQsZDoxLjUsfSx7dzoic3F1YXJlIix2OjYsZjowLjEsZDoxLjUsczowLjUscjoyLGc6MSx9XSwKICAgICAgLyogOS0xNiA6IENocm9tYXRpYyBQZXJjKi8KICAgICAgW3t3OiJzaW5lIixkOjAuMyxyOjAuMyx9LHt3OiJzaW5lIix2OjcsdDoxMSxkOjAuMDMsZzoxLH1dLAogICAgICBbe3c6InNpbmUiLGQ6MC4zLHI6MC4zLH0se3c6InNpbmUiLHY6MTEsdDo2LGQ6MC4yLHM6MC40LGc6MSx9XSwKICAgICAgW3t3OiJzaW5lIix2OjAuMixkOjAuMyxyOjAuMyx9LHt3OiJzaW5lIix2OjExLHQ6NSxkOjAuMSxzOjAuNCxnOjEsfV0sCiAgICAgIFt7dzoic2luZSIsdjowLjIsZDowLjYscjowLjYsfSx7dzoidHJpYW5nbGUiLHY6MTEsdDo1LGY6MSxzOjAuNSxnOjEsfV0sCiAgICAgIFt7dzoic2luZSIsdjowLjMsZDowLjIscjowLjIsfSx7dzoic2luZSIsdjo2LHQ6NSxkOjAuMDIsZzoxLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC4zLGQ6MC4yLHI6MC4yLH0se3c6InNpbmUiLHY6Nyx0OjExLGQ6MC4wMyxnOjEsfV0sCiAgICAgIFt7dzoic2luZSIsdjowLjIsZDoxLHI6MSx9LHt3OiJzaW5lIix2OjExLHQ6My41LGQ6MSxyOjEsZzoxLH1dLAogICAgICBbe3c6InRyaWFuZ2xlIix2OjAuMixkOjAuNSxyOjAuMix9LHt3OiJzaW5lIix2OjYsdDoyLjUsZDowLjIsczowLjEscjowLjIsZzoxLH1dLAogICAgICAvKiAxNy0yNCA6IE9yZ2FuICovCiAgICAgIFt7dzoidzk5OTkiLHY6MC4yMixzOjAuOSx9LHt3OiJ3OTk5OSIsdjowLjIyLHQ6MixmOjIsczowLjksfV0sCiAgICAgIFt7dzoidzk5OTkiLHY6MC4yLHM6MSx9LHt3OiJzaW5lIix2OjExLHQ6NixmOjIsczowLjEsZzoxLGg6MC4wMDYscjowLjAwMixkOjAuMDAyLH0se3c6Inc5OTk5Iix2OjAuMix0OjIsZjoxLGg6MCxzOjEsfV0sCiAgICAgIFt7dzoidzk5OTkiLHY6MC4yLGQ6MC4xLHM6MC45LH0se3c6Inc5OTk5Iix2OjAuMjUsdDo0LGY6MixzOjAuNSx9XSwKICAgICAgW3t3OiJ3OTk5OSIsdjowLjMsYTowLjA0LHM6MC45LH0se3c6Inc5OTk5Iix2OjAuMix0OjgsZjoyLGE6MC4wNCxzOjAuOSx9XSwKICAgICAgW3t3OiJzaW5lIix2OjAuMixhOjAuMDIsZDowLjA1LHM6MSx9LHt3OiJzaW5lIix2OjYsdDozLGY6MSxhOjAuMDIsZDowLjA1LHM6MSxnOjEsfV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLHY6MC4yLGE6MC4wMixkOjAuMDUsczowLjgsfSx7dzoic3F1YXJlIix2OjcsdDozLGY6MSxkOjAuMDUsczoxLjUsZzoxLH1dLAogICAgICBbe3c6InNxdWFyZSIsdjowLjIsYTowLjAyLGQ6MC4yLHM6MC41LH0se3c6InNxdWFyZSIsdjoxLGQ6MC4wMyxzOjIsZzoxLH1dLAogICAgICBbe3c6InNxdWFyZSIsdjowLjIsYTowLjAyLGQ6MC4xLHM6MC44LH0se3c6InNxdWFyZSIsdjoxLGE6MC4zLGQ6MC4xLHM6MixnOjEsfV0sCiAgICAgIC8qIDI1LTMyIDogR3VpdGFyICovCiAgICAgIFt7dzoic2luZSIsdjowLjMsZDowLjUsZjoxLH0se3c6InRyaWFuZ2xlIix2OjUsdDozLGY6LTEsZDoxLHM6MC4xLGc6MSx9XSwKICAgICAgW3t3OiJzaW5lIix2OjAuNCxkOjAuNixmOjEsfSx7dzoidHJpYW5nbGUiLHY6MTIsdDozLGQ6MC42LHM6MC4xLGc6MSxmOi0xLH1dLAogICAgICBbe3c6InRyaWFuZ2xlIix2OjAuMyxkOjEsZjoxLH0se3c6InRyaWFuZ2xlIix2OjYsZjotMSxkOjAuNCxzOjAuNSxnOjEsdDozLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC4zLGQ6MSxmOi0xLH0se3c6InRyaWFuZ2xlIix2OjExLGY6MSxkOjAuNCxzOjAuNSxnOjEsdDozLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC40LGQ6MC4xLHI6MC4wMX0se3c6InNpbmUiLHY6NyxnOjEsfV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLHY6MC40LGQ6MSxmOjEsfSx7dzoic3F1YXJlIix2OjQsZjotMSxkOjEsczowLjcsZzoxLH1dLC8vW3t3OiJ0cmlhbmdsZSIsdjowLjM1LGQ6MSxmOjEsfSx7dzoic3F1YXJlIix2OjcsZjotMSxkOjAuMyxzOjAuNSxnOjEsfV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLHY6MC4zNSxkOjEsZjoxLH0se3c6InNxdWFyZSIsdjo3LGY6LTEsZDowLjMsczowLjUsZzoxLH1dLC8vW3t3OiJ0cmlhbmdsZSIsdjowLjQsZDoxLGY6MSx9LHt3OiJzcXVhcmUiLHY6NCxmOi0xLGQ6MSxzOjAuNyxnOjEsfV0sLy9be3c6InRyaWFuZ2xlIix2OjAuNCxkOjEsfSx7dzoic3F1YXJlIix2OjQsZjoyLGQ6MSxzOjAuNyxnOjEsfV0sCiAgICAgIFt7dzoic2luZSIsdjowLjIsdDoxLjUsYTowLjAwNSxoOjAuMixkOjAuNix9LHt3OiJzaW5lIix2OjExLHQ6NSxmOjIsZDoxLHM6MC41LGc6MSx9XSwKICAgICAgLyogMzMtNDAgOiBCYXNzICovCiAgICAgIFt7dzoic2luZSIsZDowLjMsfSx7dzoic2luZSIsdjo0LHQ6MyxkOjEsczoxLGc6MSx9XSwKICAgICAgW3t3OiJzaW5lIixkOjAuMyx9LHt3OiJzaW5lIix2OjQsdDozLGQ6MSxzOjEsZzoxLH1dLAogICAgICBbe3c6Inc5OTk5IixkOjAuMyx2OjAuNyxzOjAuNSx9LHt3OiJzYXd0b290aCIsdjoxLjIsZDowLjAyLHM6MC41LGc6MSxoOjAscjowLjAyLH1dLAogICAgICBbe3c6InNpbmUiLGQ6MC4zLH0se3c6InNpbmUiLHY6NCx0OjMsZDoxLHM6MSxnOjEsfV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLHY6MC4zLHQ6MixkOjEsfSx7dzoidHJpYW5nbGUiLHY6MTUsdDoyLjUsZDowLjA0LHM6MC4xLGc6MSx9XSwKICAgICAgW3t3OiJ0cmlhbmdsZSIsdjowLjMsdDoyLGQ6MSx9LHt3OiJ0cmlhbmdsZSIsdjoxNSx0OjIuNSxkOjAuMDQsczowLjEsZzoxLH1dLAogICAgICBbe3c6InRyaWFuZ2xlIixkOjAuNyx9LHt3OiJzcXVhcmUiLHY6MC40LHQ6MC41LGY6MSxkOjAuMixzOjEwLGc6MSx9XSwKICAgICAgW3t3OiJ0cmlhbmdsZSIsZDowLjcsfSx7dzoic3F1YXJlIix2OjAuNCx0OjAuNSxmOjEsZDowLjIsczoxMCxnOjEsfV0sCiAgICAgIC8qIDQxLTQ4IDogU3RyaW5ncyAqLwogICAgICBbe3c6InNhd3Rvb3RoIix2OjAuNCxhOjAuMSxkOjExLH0se3c6InNpbmUiLHY6NSxkOjExLHM6MC4yLGc6MSx9XSwKICAgICAgW3t3OiJzYXd0b290aCIsdjowLjQsYTowLjEsZDoxMSx9LHt3OiJzaW5lIix2OjUsZDoxMSxzOjAuMixnOjEsfV0sCiAgICAgIFt7dzoic2F3dG9vdGgiLHY6MC40LGE6MC4xLGQ6MTEsfSx7dzoic2luZSIsdjo1LHQ6MC41LGQ6MTEsczowLjIsZzoxLH1dLAogICAgICBbe3c6InNhd3Rvb3RoIix2OjAuNCxhOjAuMSxkOjExLH0se3c6InNpbmUiLHY6NSx0OjAuNSxkOjExLHM6MC4yLGc6MSx9XSwKICAgICAgW3t3OiJzaW5lIix2OjAuNCxhOjAuMSxkOjExLH0se3c6InNpbmUiLHY6NixmOjIuNSxkOjAuMDUsczoxLjEsZzoxLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC4zLGQ6MC4xLHI6MC4xLH0se3c6InNxdWFyZSIsdjo0LHQ6MyxkOjEsczowLjIsZzoxLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC4zLGQ6MC41LHI6MC41LH0se3c6InNpbmUiLHY6Nyx0OjIsZjoyLGQ6MSxyOjEsZzoxLH1dLAogICAgICBbe3c6InRyaWFuZ2xlIix2OjAuNixoOjAuMDMsZDowLjMscjowLjMsdDowLjUsfSx7dzoibjAiLHY6OCx0OjEuNSxkOjAuMDgscjowLjA4LGc6MSx9XSwKICAgICAgLyogNDktNTYgOiBFbnNhbWJsZSAqLwogICAgICBbe3c6InNhd3Rvb3RoIix2OjAuMyxhOjAuMDMsczowLjUsfSx7dzoic2F3dG9vdGgiLHY6MC4yLHQ6MixmOjIsZDoxLHM6Mix9XSwKICAgICAgW3t3OiJzYXd0b290aCIsdjowLjMsZjotMixhOjAuMDMsczowLjUsfSx7dzoic2F3dG9vdGgiLHY6MC4yLHQ6MixmOjIsZDoxLHM6Mix9XSwKICAgICAgW3t3OiJzYXd0b290aCIsdjowLjIsYTowLjAyLHM6MSx9LHt3OiJzYXd0b290aCIsdjowLjIsdDoyLGY6MixhOjEsZDoxLHM6MSx9XSwKICAgICAgW3t3OiJzYXd0b290aCIsdjowLjIsYTowLjAyLHM6MSx9LHt3OiJzYXd0b290aCIsdjowLjIsZjoyLGE6MC4wMixkOjEsczoxLH1dLAogICAgICBbe3c6InRyaWFuZ2xlIix2OjAuMyxhOjAuMDMsczoxLH0se3c6InNpbmUiLHY6Myx0OjUsZjoxLGQ6MSxzOjEsZzoxLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC40LGE6MC4wMyxzOjAuOSx9LHt3OiJzaW5lIix2OjEsdDoyLGY6MyxkOjAuMDMsczowLjIsZzoxLH1dLAogICAgICBbe3c6InRyaWFuZ2xlIix2OjAuNixhOjAuMDUsczowLjUsfSx7dzoic2luZSIsdjoxLGY6MC44LGQ6MC4yLHM6MC4yLGc6MSx9XSwKICAgICAgW3t3OiJzcXVhcmUiLHY6MC4xNSxhOjAuMDEsZDowLjIscjowLjIsdDowLjUsaDowLjAzLH0se3c6InNxdWFyZSIsdjo0LGY6MC41LGQ6MC4yLHI6MTEsYTowLjAxLGc6MSxoOjAuMDIsfSx7dzoic3F1YXJlIix2OjAuMTUsdDo0LGY6MSxhOjAuMDIsZDowLjE1LHI6MC4xNSxoOjAuMDMsfSx7ZzozLHc6InNxdWFyZSIsdjo0LGY6LTAuNSxhOjAuMDEsaDowLjAyLGQ6MC4xNSxyOjExLH1dLAogICAgICAvKiA1Ny02NCA6IEJyYXNzICovCiAgICAgIFt7dzoic3F1YXJlIix2OjAuMixhOjAuMDEsZDoxLHM6MC42LHI6MC4wNCx9LHt3OiJzaW5lIix2OjEsZDowLjEsczo0LGc6MSx9XSwKICAgICAgW3t3OiJzcXVhcmUiLHY6MC4yLGE6MC4wMixkOjEsczowLjUscjowLjA4LH0se3c6InNpbmUiLHY6MSxkOjAuMSxzOjQsZzoxLH1dLAogICAgICBbe3c6InNxdWFyZSIsdjowLjIsYTowLjA0LGQ6MSxzOjAuNCxyOjAuMDgsfSx7dzoic2luZSIsdjoxLGQ6MC4xLHM6NCxnOjEsfV0sCiAgICAgIFt7dzoic3F1YXJlIix2OjAuMTUsYTowLjA0LHM6MSx9LHt3OiJzaW5lIix2OjIsZDowLjEsZzoxLH1dLAogICAgICBbe3c6InNxdWFyZSIsdjowLjIsYTowLjAyLGQ6MSxzOjAuNSxyOjAuMDgsfSx7dzoic2luZSIsdjoxLGQ6MC4xLHM6NCxnOjEsfV0sCiAgICAgIFt7dzoic3F1YXJlIix2OjAuMixhOjAuMDIsZDoxLHM6MC42LHI6MC4wOCx9LHt3OiJzaW5lIix2OjEsZjowLjIsZDowLjEsczo0LGc6MSx9XSwKICAgICAgW3t3OiJzcXVhcmUiLHY6MC4yLGE6MC4wMixkOjAuNSxzOjAuNyxyOjAuMDgsfSx7dzoic2luZSIsdjoxLGQ6MC4xLHM6NCxnOjEsfV0sCiAgICAgIFt7dzoic3F1YXJlIix2OjAuMixhOjAuMDIsZDoxLHM6MC41LHI6MC4wOCx9LHt3OiJzaW5lIix2OjEsZDowLjEsczo0LGc6MSx9XSwKICAgICAgLyogNjUtNzIgOiBSZWVkICovCiAgICAgIFt7dzoic3F1YXJlIix2OjAuMixhOjAuMDIsZDoyLHM6MC42LH0se3c6InNpbmUiLHY6MixkOjEsZzoxLH1dLAogICAgICBbe3c6InNxdWFyZSIsdjowLjIsYTowLjAyLGQ6MixzOjAuNix9LHt3OiJzaW5lIix2OjIsZDoxLGc6MSx9XSwKICAgICAgW3t3OiJzcXVhcmUiLHY6MC4yLGE6MC4wMixkOjEsczowLjYsfSx7dzoic2luZSIsdjoyLGQ6MSxnOjEsfV0sCiAgICAgIFt7dzoic3F1YXJlIix2OjAuMixhOjAuMDIsZDoxLHM6MC42LH0se3c6InNpbmUiLHY6MixkOjEsZzoxLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC40LGE6MC4wMixkOjAuNyxzOjAuNSx9LHt3OiJzcXVhcmUiLHY6NSx0OjIsZDowLjIsczowLjUsZzoxLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC4zLGE6MC4wNSxkOjAuMixzOjAuOCx9LHt3OiJzYXd0b290aCIsdjo2LGY6MC4xLGQ6MC4xLHM6MC4zLGc6MSx9XSwKICAgICAgW3t3OiJzaW5lIix2OjAuMyxhOjAuMDMsZDowLjIsczowLjQsfSx7dzoic3F1YXJlIix2OjcsZjowLjIsZDoxLHM6MC4xLGc6MSx9XSwKICAgICAgW3t3OiJzcXVhcmUiLHY6MC4yLGE6MC4wNSxkOjAuMSxzOjAuOCx9LHt3OiJzcXVhcmUiLHY6NCxkOjAuMSxzOjEuMSxnOjEsfV0sCiAgICAgIC8qIDczLTgwIDogUGlwZSAqLwogICAgICBbe3c6InNpbmUiLGE6MC4wMixkOjIsfSx7dzoic2luZSIsdjo2LHQ6MixkOjAuMDQsZzoxLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC43LGE6MC4wMyxkOjAuNCxzOjAuNCx9LHt3OiJzaW5lIix2OjQsdDoyLGY6MC4yLGQ6MC40LGc6MSx9XSwKICAgICAgW3t3OiJzaW5lIix2OjAuNyxhOjAuMDIsZDowLjQsczowLjYsfSx7dzoic2luZSIsdjozLHQ6MixkOjAsczoxLGc6MSx9XSwKICAgICAgW3t3OiJzaW5lIix2OjAuNCxhOjAuMDYsZDowLjMsczowLjMsfSx7dzoic2luZSIsdjo3LHQ6MixkOjAuMixzOjAuMixnOjEsfV0sCiAgICAgIFt7dzoic2luZSIsYTowLjAyLGQ6MC4zLHM6MC4zLH0se3c6InNhd3Rvb3RoIix2OjMsdDoyLGQ6MC4zLGc6MSx9XSwKICAgICAgW3t3OiJzaW5lIix2OjAuNCxhOjAuMDIsZDoyLHM6MC4xLH0se3c6InNhd3Rvb3RoIix2OjgsdDoyLGY6MSxkOjAuNSxnOjEsfV0sCiAgICAgIFt7dzoic2luZSIsdjowLjcsYTowLjAzLGQ6MC41LHM6MC4zLH0se3c6InNpbmUiLHY6MC4wMDMsdDowLGY6NCxkOjAuMSxzOjAuMDAyLGc6MSx9XSwKICAgICAgW3t3OiJzaW5lIix2OjAuNyxhOjAuMDIsZDoyLH0se3c6InNpbmUiLHY6MSx0OjIsZjoxLGQ6MC4wMixnOjEsfV0sCiAgICAgIC8qIDgxLTg4IDogU3ludGhMZWFkICovCiAgICAgIFt7dzoic3F1YXJlIix2OjAuMyxkOjEsczowLjUsfSx7dzoic3F1YXJlIix2OjEsZjowLjIsZDoxLHM6MC41LGc6MSx9XSwKICAgICAgW3t3OiJzYXd0b290aCIsdjowLjMsZDoyLHM6MC41LH0se3c6InNxdWFyZSIsdjoyLGY6MC4xLHM6MC41LGc6MSx9XSwKICAgICAgW3t3OiJ0cmlhbmdsZSIsdjowLjUsYTowLjA1LGQ6MixzOjAuNix9LHt3OiJzaW5lIix2OjQsdDoyLGc6MSx9XSwKICAgICAgW3t3OiJ0cmlhbmdsZSIsdjowLjMsYTowLjAxLGQ6MixzOjAuMyx9LHt3OiJzaW5lIix2OjIyLHQ6MixmOjEsZDowLjAzLHM6MC4yLGc6MSx9XSwKICAgICAgW3t3OiJzYXd0b290aCIsdjowLjMsZDoxLHM6MC41LH0se3c6InNpbmUiLHY6MTEsdDoxMSxhOjAuMixkOjAuMDUsczowLjMsZzoxLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC4zLGE6MC4wNixkOjEsczowLjUsfSx7dzoic2luZSIsdjo3LGY6MSxkOjEsczowLjIsZzoxLH1dLAogICAgICBbe3c6InNhd3Rvb3RoIix2OjAuMyxhOjAuMDMsZDowLjcsczowLjMscjowLjIsfSx7dzoic2F3dG9vdGgiLHY6MC4zLHQ6MC43NSxkOjAuNyxhOjAuMSxzOjAuMyxyOjAuMix9XSwKICAgICAgW3t3OiJ0cmlhbmdsZSIsdjowLjMsYTowLjAxLGQ6MC43LHM6MC41LH0se3c6InNxdWFyZSIsdjo1LHQ6MC41LGQ6MC43LHM6MC41LGc6MSx9XSwKICAgICAgLyogODktOTYgOiBTeW50aFBhZCAqLwogICAgICBbe3c6InRyaWFuZ2xlIix2OjAuMyxhOjAuMDIsZDowLjMsczowLjMscjowLjMsfSx7dzoic3F1YXJlIix2OjMsdDo0LGY6MSxhOjAuMDIsZDowLjEsczoxLGc6MSx9LHt3OiJ0cmlhbmdsZSIsdjowLjA4LHQ6MC41LGE6MC4xLGg6MCxkOjAuMSxzOjAuNSxyOjAuMSxiOjAsYzowLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC4zLGE6MC4wNSxkOjEsczowLjcscjowLjMsfSx7dzoic2luZSIsdjoyLGY6MSxkOjAuMyxzOjEsZzoxLH1dLAogICAgICBbe3c6InNxdWFyZSIsdjowLjMsYTowLjAzLGQ6MC41LHM6MC4zLHI6MC4xLH0se3c6InNxdWFyZSIsdjo0LGY6MSxhOjAuMDMsZDowLjEsZzoxLH1dLAogICAgICBbe3c6InRyaWFuZ2xlIix2OjAuMyxhOjAuMDgsZDoxLHM6MC4zLHI6MC4xLH0se3c6InNxdWFyZSIsdjoyLGY6MSxkOjAuMyxzOjAuMyxnOjEsdDo0LGE6MC4wOCx9XSwKICAgICAgW3t3OiJzaW5lIix2OjAuMyxhOjAuMDUsZDoxLHM6MC4zLHI6MC4xLH0se3c6InNpbmUiLHY6MC4xLHQ6Mi4wMDEsZjoxLGQ6MSxzOjUwLGc6MSx9XSwKICAgICAgW3t3OiJ0cmlhbmdsZSIsdjowLjMsYTowLjAzLGQ6MC43LHM6MC4zLHI6MC4yLH0se3c6InNpbmUiLHY6MTIsdDo3LGY6MSxkOjAuNSxzOjEuNyxnOjEsfV0sCiAgICAgIFt7dzoic2luZSIsdjowLjMsYTowLjA1LGQ6MSxzOjAuMyxyOjAuMSx9LHt3OiJzYXd0b290aCIsdjoyMix0OjYsZDowLjA2LHM6MC4zLGc6MSx9XSwKICAgICAgW3t3OiJ0cmlhbmdsZSIsdjowLjMsYTowLjA1LGQ6MTEscjowLjMsfSx7dzoidHJpYW5nbGUiLHY6MSxkOjEsczo4LGc6MSx9XSwKICAgICAgLyogOTctMTA0IDogRlggKi8KICAgICAgW3t3OiJzYXd0b290aCIsdjowLjMsZDo0LHM6MC44LHI6MC4xLH0se3c6InNxdWFyZSIsdjoxLHQ6MixmOjgsYToxLGQ6MSxzOjEscjowLjEsZzoxLH1dLAogICAgICBbe3c6InRyaWFuZ2xlIix2OjAuMyxkOjEsczowLjUsdDowLjgsYTowLjIscDoxLjI1LHE6MC4yLH0se3c6InNhd3Rvb3RoIix2OjAuMixhOjAuMixkOjAuMyxzOjEsdDoxLjIscDoxLjI1LHE6MC4yLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC4zLGQ6MSxzOjAuMyx9LHt3OiJzcXVhcmUiLHY6MjIsdDoxMSxkOjAuNSxzOjAuMSxnOjEsfV0sCiAgICAgIFt7dzoic2F3dG9vdGgiLHY6MC4zLGE6MC4wNCxkOjEsczowLjgscjowLjEsfSx7dzoic3F1YXJlIix2OjEsdDowLjUsZDoxLHM6MixnOjEsfV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLHY6MC4zLGQ6MSxzOjAuMyx9LHt3OiJzaW5lIix2OjIyLHQ6NixkOjAuNixzOjAuMDUsZzoxLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC42LGE6MC4xLGQ6MC4wNSxzOjAuNCx9LHt3OiJzaW5lIix2OjUsdDo1LGY6MSxkOjAuMDUsczowLjMsZzoxLH1dLAogICAgICBbe3c6InNpbmUiLGE6MC4xLGQ6MC4wNSxzOjAuNCx2OjAuOCx9LHt3OiJzaW5lIix2OjUsdDo1LGY6MSxkOjAuMDUsczowLjMsZzoxLH1dLAogICAgICBbe3c6InNxdWFyZSIsdjowLjMsYTowLjEsZDowLjEsczowLjQsfSx7dzoic3F1YXJlIix2OjEsZjoxLGQ6MC4zLHM6MC4xLGc6MSx9XSwKICAgICAgLyogMTA1LTExMiA6IEV0aG5pYyAqLwogICAgICBbe3c6InNhd3Rvb3RoIix2OjAuMyxkOjAuNSxyOjAuNSx9LHt3OiJzYXd0b290aCIsdjoxMSx0OjUsZDowLjA1LGc6MSx9XSwKICAgICAgW3t3OiJzcXVhcmUiLHY6MC4zLGQ6MC4yLHI6MC4yLH0se3c6InNxdWFyZSIsdjo3LHQ6MyxkOjAuMDUsZzoxLH1dLAogICAgICBbe3c6InRyaWFuZ2xlIixkOjAuMixyOjAuMix9LHt3OiJzcXVhcmUiLHY6OSx0OjMsZDowLjEscjowLjEsZzoxLH1dLAogICAgICBbe3c6InRyaWFuZ2xlIixkOjAuMyxyOjAuMyx9LHt3OiJzcXVhcmUiLHY6Nix0OjMsZDoxLHI6MSxnOjEsfV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLHY6MC40LGQ6MC4yLHI6MC4yLH0se3c6InNxdWFyZSIsdjoyMix0OjEyLGQ6MC4xLHI6MC4xLGc6MSx9XSwKICAgICAgW3t3OiJzaW5lIix2OjAuMjUsYTowLjAyLGQ6MC4wNSxzOjAuOCx9LHt3OiJzcXVhcmUiLHY6MSx0OjIsZDowLjAzLHM6MTEsZzoxLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC4zLGE6MC4wNSxkOjExLH0se3c6InNxdWFyZSIsdjo3LHQ6MyxmOjEsczowLjcsZzoxLH1dLAogICAgICBbe3c6InNxdWFyZSIsdjowLjMsYTowLjA1LGQ6MC4xLHM6MC44LH0se3c6InNxdWFyZSIsdjo0LGQ6MC4xLHM6MS4xLGc6MSx9XSwKICAgICAgLyogMTEzLTEyMCA6IFBlcmN1c3NpdmUgKi8KICAgICAgW3t3OiJzaW5lIix2OjAuNCxkOjAuMyxyOjAuMyx9LHt3OiJzaW5lIix2OjcsdDo5LGQ6MC4xLHI6MC4xLGc6MSx9XSwKICAgICAgW3t3OiJzaW5lIix2OjAuNyxkOjAuMSxyOjAuMSx9LHt3OiJzaW5lIix2OjIyLHQ6NyxkOjAuMDUsZzoxLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC42LGQ6MC4xNSxyOjAuMTUsfSx7dzoic3F1YXJlIix2OjExLHQ6My4yLGQ6MC4xLHI6MC4xLGc6MSx9XSwKICAgICAgW3t3OiJzaW5lIix2OjAuOCxkOjAuMDcscjowLjA3LH0se3c6InNxdWFyZSIsdjoxMSx0OjcscjowLjAxLGc6MSx9XSwKICAgICAgW3t3OiJ0cmlhbmdsZSIsdjowLjcsdDowLjUsZDowLjIscjowLjIscDowLjk1LH0se3c6Im4wIix2OjksZzoxLGQ6MC4yLHI6MC4yLH1dLAogICAgICBbe3c6InNpbmUiLHY6MC43LGQ6MC4xLHI6MC4xLHA6MC45LH0se3c6InNxdWFyZSIsdjoxNCx0OjIsZDowLjAwNSxyOjAuMDA1LGc6MSx9XSwKICAgICAgW3t3OiJzcXVhcmUiLGQ6MC4xNSxyOjAuMTUscDowLjUsfSx7dzoic3F1YXJlIix2OjQsdDo1LGQ6MC4wMDEscjowLjAwMSxnOjEsfV0sCiAgICAgIFt7dzoibjEiLHY6MC4zLGE6MSxzOjEsZDowLjE1LHI6MCx0OjAuNSx9XSwKICAgICAgLyogMTIxLTEyOCA6IFNFICovCiAgICAgIFt7dzoic2luZSIsdDoxMi41LGQ6MCxyOjAscDowLjUsdjowLjMsaDowLjIscTowLjUsfSx7ZzoxLHc6InNpbmUiLHY6MSx0OjIsZDowLHI6MCxzOjEsfSx7ZzoxLHc6Im4wIix2OjAuMix0OjIsYTowLjYsaDowLGQ6MC4xLHI6MC4xLGI6MCxjOjAsfV0sCiAgICAgIFt7dzoibjAiLHY6MC4yLGE6MC4wNSxoOjAuMDIsZDowLjAyLHI6MC4wMix9XSwKICAgICAgW3t3OiJuMCIsdjowLjQsYToxLGQ6MSx0OjAuMjUsfV0sCiAgICAgIFt7dzoic2luZSIsdjowLjMsYTowLjEsZDoxLHM6MC41LH0se3c6InNpbmUiLHY6NCx0OjAsZjoxLjUsZDoxLHM6MSxyOjAuMSxnOjEsfSx7ZzoxLHc6InNpbmUiLHY6NCx0OjAsZjoyLGE6MC42LGg6MCxkOjAuMSxzOjEscjowLjEsYjowLGM6MCx9XSwKICAgICAgW3t3OiJzcXVhcmUiLHY6MC4zLHQ6MC4yNSxkOjExLHM6MSx9LHt3OiJzcXVhcmUiLHY6MTIsdDowLGY6OCxkOjEsczoxLHI6MTEsZzoxLH1dLAogICAgICBbe3c6Im4wIix2OjAuNCx0OjAuNSxhOjEsZDoxMSxzOjEscjowLjUsfSx7dzoic3F1YXJlIix2OjEsdDowLGY6MTQsZDoxLHM6MSxyOjExLGc6MSx9XSwKICAgICAgW3t3OiJzaW5lIix0OjAsZjoxMjIxLGE6MC4yLGQ6MSxyOjAuMjUsczoxLH0se2c6MSx3OiJuMCIsdjozLHQ6MC41LGQ6MSxzOjEscjoxLH1dLAogICAgICBbe3c6InNpbmUiLGQ6MC40LHI6MC40LHA6MC4xLHQ6Mi41LHY6MSx9LHt3OiJuMCIsdjoxMix0OjIsZDoxLHI6MSxnOjEsfV0sCiAgICBdLAogICAgcHJvZ3JhbTA6WwovLyAxLTggOiBQaWFubwogICAgICBbe3c6InRyaWFuZ2xlIix2Oi41LGQ6Ljd9XSwgICAgICAgICAgICAgICAgICAgW3t3OiJ0cmlhbmdsZSIsdjouNSxkOi43fV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLHY6LjUsZDouN31dLCAgICAgICAgICAgICAgICAgICBbe3c6InRyaWFuZ2xlIix2Oi41LGQ6Ljd9XSwKICAgICAgW3t3OiJ0cmlhbmdsZSIsdjouNSxkOi43fV0sICAgICAgICAgICAgICAgICAgIFt7dzoidHJpYW5nbGUiLHY6LjUsZDouN31dLAogICAgICBbe3c6InNhd3Rvb3RoIix2Oi4zLGQ6Ljd9XSwgICAgICAgICAgICAgICAgICAgW3t3OiJzYXd0b290aCIsdjouMyxkOi43fV0sCi8qIDktMTYgOiBDaHJvbWF0aWMgUGVyYyovCiAgICAgIFt7dzoic2luZSIsdjouNSxkOi4zLHI6LjN9XSwgICAgICAgICAgICAgICAgICBbe3c6InRyaWFuZ2xlIix2Oi41LGQ6LjMscjouM31dLAogICAgICBbe3c6InNxdWFyZSIsdjouMixkOi4zLHI6LjN9XSwgICAgICAgICAgICAgICAgW3t3OiJzcXVhcmUiLHY6LjIsZDouMyxyOi4zfV0sCiAgICAgIFt7dzoic2luZSIsdjouNSxkOi4xLHI6LjF9XSwgICAgICAgICAgICAgICAgICBbe3c6InNpbmUiLHY6LjUsZDouMSxyOi4xfV0sCiAgICAgIFt7dzoic3F1YXJlIix2Oi4yLGQ6MSxyOjF9XSwgICAgICAgICAgICAgICAgICBbe3c6InNhd3Rvb3RoIix2Oi4zLGQ6LjcscjouN31dLAovKiAxNy0yNCA6IE9yZ2FuICovCiAgICAgIFt7dzoic2luZSIsdjowLjUsYTowLjAxLHM6MX1dLCAgICAgICAgICAgICAgICBbe3c6InNpbmUiLHY6MC43LGQ6MC4wMixzOjAuN31dLAogICAgICBbe3c6InNxdWFyZSIsdjouMixzOjF9XSwgICAgICAgICAgICAgICAgICAgICAgW3t3OiJ0cmlhbmdsZSIsdjouNSxhOi4wMSxzOjF9XSwKICAgICAgW3t3OiJzcXVhcmUiLHY6LjIsYTouMDIsczoxfV0sICAgICAgICAgICAgICAgIFt7dzoic3F1YXJlIix2OjAuMixhOjAuMDIsczoxfV0sCiAgICAgIFt7dzoic3F1YXJlIix2OjAuMixhOjAuMDIsczoxfV0sICAgICAgICAgICAgICBbe3c6InNxdWFyZSIsdjouMixhOi4wNSxzOjF9XSwKLyogMjUtMzIgOiBHdWl0YXIgKi8KICAgICAgW3t3OiJ0cmlhbmdsZSIsdjouNSxkOi41fV0sICAgICAgICAgICAgICAgICAgIFt7dzoic3F1YXJlIix2Oi4yLGQ6LjZ9XSwKICAgICAgW3t3OiJzcXVhcmUiLHY6LjIsZDouNn1dLCAgICAgICAgICAgICAgICAgICAgIFt7dzoidHJpYW5nbGUiLHY6LjgsZDouNn1dLAogICAgICBbe3c6InRyaWFuZ2xlIix2Oi40LGQ6LjA1fV0sICAgICAgICAgICAgICAgICAgW3t3OiJzcXVhcmUiLHY6LjIsZDoxfV0sCiAgICAgIFt7dzoic3F1YXJlIix2Oi4yLGQ6MX1dLCAgICAgICAgICAgICAgICAgICAgICBbe3c6InNpbmUiLHY6LjQsZDouNn1dLAovKiAzMy00MCA6IEJhc3MgKi8KICAgICAgW3t3OiJ0cmlhbmdsZSIsdjouNyxkOi40fV0sICAgICAgICAgICAgICAgICAgIFt7dzoidHJpYW5nbGUiLHY6LjcsZDouN31dLAogICAgICBbe3c6InRyaWFuZ2xlIix2Oi43LGQ6Ljd9XSwgICAgICAgICAgICAgICAgICAgW3t3OiJ0cmlhbmdsZSIsdjouNyxkOi43fV0sCiAgICAgIFt7dzoic3F1YXJlIix2Oi4zLGQ6LjJ9XSwgICAgICAgICAgICAgICAgICAgICBbe3c6InNxdWFyZSIsdjouMyxkOi4yfV0sCiAgICAgIFt7dzoic3F1YXJlIix2Oi4zLGQ6LjEsczouMn1dLCAgICAgICAgICAgICAgICBbe3c6InNhd3Rvb3RoIix2Oi40LGQ6LjEsczouMn1dLAovKiA0MS00OCA6IFN0cmluZ3MgKi8KICAgICAgW3t3OiJzYXd0b290aCIsdjouMixhOi4wMixzOjF9XSwgICAgICAgICAgICAgIFt7dzoic2F3dG9vdGgiLHY6LjIsYTouMDIsczoxfV0sCiAgICAgIFt7dzoic2F3dG9vdGgiLHY6LjIsYTouMDIsczoxfV0sICAgICAgICAgICAgICBbe3c6InNhd3Rvb3RoIix2Oi4yLGE6LjAyLHM6MX1dLAogICAgICBbe3c6InNhd3Rvb3RoIix2Oi4yLGE6LjAyLHM6MX1dLCAgICAgICAgICAgICAgW3t3OiJzYXd0b290aCIsdjouMyxkOi4xfV0sCiAgICAgIFt7dzoic2F3dG9vdGgiLHY6LjMsZDouNSxyOi41fV0sICAgICAgICAgICAgICBbe3c6InRyaWFuZ2xlIix2Oi42LGQ6LjEscjouMSxoOjAuMDMscDowLjh9XSwKLyogNDktNTYgOiBFbnNhbWJsZSAqLwogICAgICBbe3c6InNhd3Rvb3RoIix2Oi4yLGE6LjAyLHM6MX1dLCAgICAgICAgICAgICAgW3t3OiJzYXd0b290aCIsdjouMixhOi4wMixzOjF9XSwKICAgICAgW3t3OiJzYXd0b290aCIsdjouMixhOi4wMixzOjF9XSwgICAgICAgICAgICAgIFt7dzoic2F3dG9vdGgiLHY6LjIsYTouMDIsczoxfV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLHY6LjMsYTouMDMsczoxfV0sICAgICAgICAgICAgICBbe3c6InNpbmUiLHY6LjMsYTouMDMsczoxfV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLHY6LjMsYTouMDUsczoxfV0sICAgICAgICAgICAgICBbe3c6InNhd3Rvb3RoIix2Oi41LGE6LjAxLGQ6LjF9XSwKLyogNTctNjQgOiBCcmFzcyAqLwogICAgICBbe3c6InNxdWFyZSIsdjouMyxhOi4wNSxkOi4yLHM6LjZ9XSwgICAgICAgICAgW3t3OiJzcXVhcmUiLHY6LjMsYTouMDUsZDouMixzOi42fV0sCiAgICAgIFt7dzoic3F1YXJlIix2Oi4zLGE6LjA1LGQ6LjIsczouNn1dLCAgICAgICAgICBbe3c6InNxdWFyZSIsdjowLjIsYTouMDUsZDowLjAxLHM6MX1dLAogICAgICBbe3c6InNxdWFyZSIsdjouMyxhOi4wNSxzOjF9XSwgICAgICAgICAgICAgICAgW3t3OiJzcXVhcmUiLHY6LjMsczouN31dLAogICAgICBbe3c6InNxdWFyZSIsdjouMyxzOi43fV0sICAgICAgICAgICAgICAgICAgICAgW3t3OiJzcXVhcmUiLHY6LjMsczouN31dLAovKiA2NS03MiA6IFJlZWQgKi8KICAgICAgW3t3OiJzcXVhcmUiLHY6LjMsYTouMDIsZDoyfV0sICAgICAgICAgICAgICAgIFt7dzoic3F1YXJlIix2Oi4zLGE6LjAyLGQ6Mn1dLAogICAgICBbe3c6InNxdWFyZSIsdjouMyxhOi4wMyxkOjJ9XSwgICAgICAgICAgICAgICAgW3t3OiJzcXVhcmUiLHY6LjMsYTouMDQsZDoyfV0sCiAgICAgIFt7dzoic3F1YXJlIix2Oi4zLGE6LjAyLGQ6Mn1dLCAgICAgICAgICAgICAgICBbe3c6InNxdWFyZSIsdjouMyxhOi4wNSxkOjJ9XSwKICAgICAgW3t3OiJzcXVhcmUiLHY6LjMsYTouMDMsZDoyfV0sICAgICAgICAgICAgICAgIFt7dzoic3F1YXJlIix2Oi4zLGE6LjAzLGQ6Mn1dLAovKiA3My04MCA6IFBpcGUgKi8KICAgICAgW3t3OiJzaW5lIix2Oi43LGE6LjAyLGQ6Mn1dLCAgICAgICAgICAgICAgICAgIFt7dzoic2luZSIsdjouNyxhOi4wMixkOjJ9XSwKICAgICAgW3t3OiJzaW5lIix2Oi43LGE6LjAyLGQ6Mn1dLCAgICAgICAgICAgICAgICAgIFt7dzoic2luZSIsdjouNyxhOi4wMixkOjJ9XSwKICAgICAgW3t3OiJzaW5lIix2Oi43LGE6LjAyLGQ6Mn1dLCAgICAgICAgICAgICAgICAgIFt7dzoic2luZSIsdjouNyxhOi4wMixkOjJ9XSwKICAgICAgW3t3OiJzaW5lIix2Oi43LGE6LjAyLGQ6Mn1dLCAgICAgICAgICAgICAgICAgIFt7dzoic2luZSIsdjouNyxhOi4wMixkOjJ9XSwKLyogODEtODggOiBTeW50aExlYWQgKi8KICAgICAgW3t3OiJzcXVhcmUiLHY6LjMsczouN31dLCAgICAgICAgICAgICAgICAgICAgIFt7dzoic2F3dG9vdGgiLHY6LjQsczouN31dLAogICAgICBbe3c6InRyaWFuZ2xlIix2Oi41LHM6Ljd9XSwgICAgICAgICAgICAgICAgICAgW3t3OiJzYXd0b290aCIsdjouNCxzOi43fV0sCiAgICAgIFt7dzoic2F3dG9vdGgiLHY6LjQsZDoxMn1dLCAgICAgICAgICAgICAgICAgICBbe3c6InNpbmUiLHY6LjQsYTouMDYsZDoxMn1dLAogICAgICBbe3c6InNhd3Rvb3RoIix2Oi40LGQ6MTJ9XSwgICAgICAgICAgICAgICAgICAgW3t3OiJzYXd0b290aCIsdjouNCxkOjEyfV0sCi8qIDg5LTk2IDogU3ludGhQYWQgKi8KICAgICAgW3t3OiJzYXd0b290aCIsdjouMyxkOjEyfV0sICAgICAgICAgICAgICAgICAgIFt7dzoidHJpYW5nbGUiLHY6LjUsZDoxMn1dLAogICAgICBbe3c6InNxdWFyZSIsdjouMyxkOjEyfV0sICAgICAgICAgICAgICAgICAgICAgW3t3OiJ0cmlhbmdsZSIsdjouNSxhOi4wOCxkOjExfV0sCiAgICAgIFt7dzoic2F3dG9vdGgiLHY6LjUsYTouMDUsZDoxMX1dLCAgICAgICAgICAgICBbe3c6InNhd3Rvb3RoIix2Oi41LGQ6MTF9XSwKICAgICAgW3t3OiJ0cmlhbmdsZSIsdjouNSxkOjExfV0sICAgICAgICAgICAgICAgICAgIFt7dzoidHJpYW5nbGUiLHY6LjUsZDoxMX1dLAovKiA5Ny0xMDQgOiBGWCAqLwogICAgICBbe3c6InRyaWFuZ2xlIix2Oi41LGQ6MTF9XSwgICAgICAgICAgICAgICAgICAgW3t3OiJ0cmlhbmdsZSIsdjouNSxkOjExfV0sCiAgICAgIFt7dzoic3F1YXJlIix2Oi4zLGQ6MTF9XSwgICAgICAgICAgICAgICAgICAgICBbe3c6InNhd3Rvb3RoIix2OjAuNSxhOjAuMDQsZDoxMX1dLAogICAgICBbe3c6InNhd3Rvb3RoIix2Oi41LGQ6MTF9XSwgICAgICAgICAgICAgICAgICAgW3t3OiJ0cmlhbmdsZSIsdjouNSxhOi44LGQ6MTF9XSwKICAgICAgW3t3OiJ0cmlhbmdsZSIsdjouNSxkOjExfV0sICAgICAgICAgICAgICAgICAgIFt7dzoic3F1YXJlIix2Oi4zLGQ6MTF9XSwKLyogMTA1LTExMiA6IEV0aG5pYyAqLwogICAgICBbe3c6InNhd3Rvb3RoIix2Oi4zLGQ6MSxyOjF9XSwgICAgICAgICAgICAgICAgW3t3OiJzYXd0b290aCIsdjouNSxkOi4zfV0sCiAgICAgIFt7dzoic2F3dG9vdGgiLHY6LjUsZDouMyxyOi4zfV0sICAgICAgICAgICAgICBbe3c6InNhd3Rvb3RoIix2Oi41LGQ6LjMscjouM31dLAogICAgICBbe3c6InNxdWFyZSIsdjouMyxkOi4yLHI6LjJ9XSwgICAgICAgICAgICAgICAgW3t3OiJzcXVhcmUiLHY6LjMsYTouMDIsZDoyfV0sCiAgICAgIFt7dzoic2F3dG9vdGgiLHY6LjIsYTouMDIsZDouN31dLCAgICAgICAgICAgICBbe3c6InRyaWFuZ2xlIix2Oi41LGQ6MX1dLAovKiAxMTMtMTIwIDogUGVyY3Vzc2l2ZSAqLwogICAgICBbe3c6InNhd3Rvb3RoIix2Oi4zLGQ6LjMscjouM31dLCAgICAgICAgICAgICAgW3t3OiJzaW5lIix2Oi44LGQ6LjEscjouMX1dLAogICAgICBbe3c6InNxdWFyZSIsdjouMixkOi4xLHI6LjEscDoxLjA1fV0sICAgICAgICAgW3t3OiJzaW5lIix2Oi44LGQ6LjA1LHI6LjA1fV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLHY6MC41LGQ6MC4xLHI6MC4xLHA6MC45Nn1dLCAgICBbe3c6InRyaWFuZ2xlIix2OjAuNSxkOjAuMSxyOjAuMSxwOjAuOTd9XSwKICAgICAgW3t3OiJzcXVhcmUiLHY6LjMsZDouMSxyOi4xLH1dLCAgICAgICAgICAgICAgIFt7dzoibjEiLHY6MC4zLGE6MSxzOjEsZDowLjE1LHI6MCx0OjAuNSx9XSwKLyogMTIxLTEyOCA6IFNFICovCiAgICAgIFt7dzoidHJpYW5nbGUiLHY6MC41LGQ6MC4wMyx0OjAsZjoxMzMyLHI6MC4wMDEscDoxLjF9XSwKICAgICAgW3t3OiJuMCIsdjowLjIsdDowLjEsZDowLjAyLGE6MC4wNSxoOjAuMDIscjowLjAyfV0sCiAgICAgIFt7dzoibjAiLHY6MC40LGE6MSxkOjEsdDowLjI1LH1dLAogICAgICBbe3c6InNpbmUiLHY6MC4zLGE6MC44LGQ6MSx0OjAsZjoxODMyfV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLGQ6MC41LHQ6MCxmOjQ0NCxzOjEsfV0sCiAgICAgIFt7dzoibjAiLHY6MC40LGQ6MSx0OjAsZjoyMixzOjEsfV0sCiAgICAgIFt7dzoibjAiLHY6MC41LGE6MC4yLGQ6MTEsdDowLGY6NDR9XSwKICAgICAgW3t3OiJuMCIsdjowLjUsdDowLjI1LGQ6MC40LHI6MC40fV0sCiAgICBdLAogICAgZHJ1bW1hcDE6WwovKjM1Ki8gIFt7dzoidHJpYW5nbGUiLHQ6MCxmOjcwLHY6MSxkOjAuMDUsaDowLjAzLHA6MC45LHE6MC4xLH0se3c6Im4wIixnOjEsdDo2LHY6MTcscjowLjAxLGg6MCxwOjAsfV0sCiAgICAgICAgW3t3OiJ0cmlhbmdsZSIsdDowLGY6ODgsdjoxLGQ6MC4wNSxoOjAuMDMscDowLjUscTowLjEsfSx7dzoibjAiLGc6MSx0OjUsdjo0MixyOjAuMDEsaDowLHA6MCx9XSwKICAgICAgICBbe3c6Im4wIixmOjIyMixwOjAsdDowLHI6MC4wMSxoOjAsfV0sCiAgICAgICAgW3t3OiJ0cmlhbmdsZSIsdjowLjMsZjoxODAsZDowLjA1LHQ6MCxoOjAuMDMscDowLjkscTowLjEsfSx7dzoibjAiLHY6MC42LHQ6MCxmOjcwLGg6MC4wMixyOjAuMDEscDowLH0se2c6MSx3OiJzcXVhcmUiLHY6Mix0OjAsZjozNjAscjowLjAxLGI6MCxjOjAsfV0sCiAgICAgICAgW3t3OiJzcXVhcmUiLGY6MTE1MCx2OjAuMzQsdDowLHI6MC4wMyxoOjAuMDI1LGQ6MC4wMyx9LHtnOjEsdzoibjAiLHQ6MCxmOjEzLGg6MC4wMjUsZDowLjEsczoxLHI6MC4xLHY6MSx9XSwKLyo0MCovICBbe3c6InRyaWFuZ2xlIixmOjIwMCx2OjEsZDowLjA2LHQ6MCxyOjAuMDYsfSx7dzoibjAiLGc6MSx0OjAsZjo0MDAsdjoxMixyOjAuMDIsZDowLjAyLH1dLAogICAgICAgIFt7dzoidHJpYW5nbGUiLGY6MTAwLHY6MC45LGQ6MC4xMixoOjAuMDIscDowLjUsdDowLHI6MC4xMix9LHtnOjEsdzoibjAiLHY6NSx0OjAuNCxoOjAuMDE1LGQ6MC4wMDUscjowLjAwNSx9XSwKICAgICAgICBbe3c6Im4xIixmOjM5MCx2OjAuMjUscjowLjAxLHQ6MCx9XSwKICAgICAgICBbe3c6InRyaWFuZ2xlIixmOjEyMCx2OjAuOSxkOjAuMTIsaDowLjAyLHA6MC41LHQ6MCxyOjAuMTIsfSx7ZzoxLHc6Im4wIix2OjUsdDowLjUsaDowLjAxNSxkOjAuMDA1LHI6MC4wMDUsfV0sCiAgICAgICAgW3t3OiJuMSIsdjowLjI1LGY6MzkwLHI6MC4wMyx0OjAsaDowLjAwNSxkOjAuMDMsfV0sCi8qNDUqLyAgW3t3OiJ0cmlhbmdsZSIsZjoxNDAsdjowLjksZDowLjEyLGg6MC4wMixwOjAuNSx0OjAscjowLjEyLH0se2c6MSx3OiJuMCIsdjo1LHQ6MC4zLGg6MC4wMTUsZDowLjAwNSxyOjAuMDA1LH1dLAogICAgICAgIFt7dzoibjEiLHY6MC4yNSxmOjM5MCx0OjAsZDowLjIscjowLjIsfSx7dzoibjAiLHY6MC4zLHQ6MCxjOjAsZjo0NDAsaDowLjAwNSxkOjAuMDUsfV0sCiAgICAgICAgW3t3OiJ0cmlhbmdsZSIsZjoxNTUsdjowLjksZDowLjEyLGg6MC4wMixwOjAuNSx0OjAscjowLjEyLH0se2c6MSx3OiJuMCIsdjo1LHQ6MC4zLGg6MC4wMTUsZDowLjAwNSxyOjAuMDA1LH1dLAogICAgICAgIFt7dzoidHJpYW5nbGUiLGY6MTgwLHY6MC45LGQ6MC4xMixoOjAuMDIscDowLjUsdDowLHI6MC4xMix9LHtnOjEsdzoibjAiLHY6NSx0OjAuMyxoOjAuMDE1LGQ6MC4wMDUscjowLjAwNSx9XSwKICAgICAgICBbe3c6Im4xIix2OjAuMyxmOjEyMDAsZDowLjIscjowLjIsaDowLjA1LHQ6MCx9LHt3OiJuMSIsdDowLHY6MSxkOjAuMSxyOjAuMSxwOjEuMixmOjQ0MCx9XSwKLyo1MCovICBbe3c6InRyaWFuZ2xlIixmOjIyMCx2OjAuOSxkOjAuMTIsaDowLjAyLHA6MC41LHQ6MCxyOjAuMTIsfSx7ZzoxLHc6Im4wIix2OjUsdDowLjMsaDowLjAxNSxkOjAuMDA1LHI6MC4wMDUsfV0sCiAgICAgICAgW3t3OiJuMSIsZjo1MDAsdjowLjE1LGQ6MC40LHI6MC40LGg6MCx0OjAsfSx7dzoibjAiLHY6MC4xLHQ6MCxyOjAuMDEsZjo0NDAsfV0sCiAgICAgICAgW3t3OiJuMSIsdjowLjMsZjo4MDAsZDowLjIscjowLjIsaDowLjA1LHQ6MCx9LHt3OiJzcXVhcmUiLHQ6MCx2OjEsZDowLjEscjowLjEscDowLjEsZjoyMjAsZzoxLH1dLAogICAgICAgIFt7dzoic2luZSIsZjoxNjUxLHY6MC4xNSxkOjAuMixyOjAuMixoOjAsdDowLH0se3c6InNhd3Rvb3RoIixnOjEsdDoxLjIxLHY6Ny4yLGQ6MC4xLHI6MTEsaDoxLH0se2c6MSx3OiJuMCIsdjozLjEsdDowLjE1MixkOjAuMDAyLHI6MC4wMDIsfV0sCiAgICAgICAgbnVsbCwKLyo1NSovICBbe3c6Im4xIix2Oi4zLGY6MTIwMCxkOjAuMixyOjAuMixoOjAuMDUsdDowLH0se3c6Im4xIix0OjAsdjoxLGQ6MC4xLHI6MC4xLHA6MS4yLGY6NDQwLH1dLAogICAgICAgIG51bGwsCiAgICAgICAgW3t3OiJuMSIsdjowLjMsZjo1NTUsZDowLjI1LHI6MC4yNSxoOjAuMDUsdDowLH0se3c6Im4xIix0OjAsdjoxLGQ6MC4xLHI6MC4xLGY6NDQwLGE6MC4wMDUsaDowLjAyLH1dLAogICAgICAgIFt7dzoic2F3dG9vdGgiLGY6Nzc2LHY6MC4yLGQ6MC4zLHQ6MCxyOjAuMyx9LHtnOjEsdzoibjAiLHY6Mix0OjAsZjo3NzYsYTowLjAwNSxoOjAuMDIsZDowLjEsczoxLHI6MC4xLGM6MCx9LHtnOjExLHc6InNpbmUiLHY6MC4xLHQ6MCxmOjIyLGQ6MC4zLHI6MC4zLGI6MCxjOjAsfV0sCiAgICAgICAgW3t3OiJuMSIsZjo0NDAsdjowLjE1LGQ6MC40LHI6MC40LGg6MCx0OjAsfSx7dzoibjAiLHY6MC40LHQ6MCxyOjAuMDEsZjo0NDAsfV0sCi8qNjAqLyAgbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLAovKjY1Ki8gIG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCwKLyo3MCovICBudWxsLG51bGwsbnVsbCxudWxsLG51bGwsCi8qNzUqLyAgbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLAovKjgwKi8gIFt7dzoic2luZSIsZjoxNzIwLHY6MC4zLGQ6MC4wMix0OjAscjowLjAyLH0se3c6InNxdWFyZSIsZzoxLHQ6MCxmOjI4NzYsdjo2LGQ6MC4yLHM6MSxyOjAuMix9XSwKICAgICAgICBbe3c6InNpbmUiLGY6MTcyMCx2OjAuMyxkOjAuMjUsdDowLHI6MC4yNSx9LHt3OiJzcXVhcmUiLGc6MSx0OjAsZjoyODc2LHY6NixkOjAuMixzOjEscjowLjIsfV0sCiAgICBdLAogICAgZHJ1bW1hcDA6WwovKjM1Ki9be3c6InRyaWFuZ2xlIix0OjAsZjoxMTAsdjoxLGQ6MC4wNSxoOjAuMDIscDowLjEsfV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLHQ6MCxmOjE1MCx2OjAuOCxkOjAuMSxwOjAuMSxoOjAuMDIscjowLjAxLH1dLAogICAgICBbe3c6Im4wIixmOjM5Mix2OjAuNSxkOjAuMDEscDowLHQ6MCxyOjAuMDV9XSwKICAgICAgW3t3OiJuMCIsZjozMyxkOjAuMDUsdDowLH1dLAogICAgICBbe3c6Im4wIixmOjEwMCx2OjAuNyxkOjAuMDMsdDowLHI6MC4wMyxoOjAuMDIsfV0sCi8qNDAqL1t7dzoibjAiLGY6NDQsdjowLjcsZDowLjAyLHA6MC4xLHQ6MCxoOjAuMDIsfV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLGY6MjQwLHY6MC45LGQ6MC4xLGg6MC4wMixwOjAuMSx0OjAsfV0sCiAgICAgIFt7dzoibjAiLGY6NDQwLHY6MC4yLHI6MC4wMSx0OjAsfV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLGY6MjcwLHY6MC45LGQ6MC4xLGg6MC4wMixwOjAuMSx0OjAsfV0sCiAgICAgIFt7dzoibjAiLGY6NDQwLHY6MC4yLGQ6MC4wNCxyOjAuMDQsdDowLH1dLAovKjQ1Ki9be3c6InRyaWFuZ2xlIixmOjMwMCx2OjAuOSxkOjAuMSxoOjAuMDIscDowLjEsdDowLH1dLAogICAgICBbe3c6Im4wIixmOjQ0MCx2OjAuMixkOjAuMSxyOjAuMSxoOjAuMDIsdDowLH1dLAogICAgICBbe3c6InRyaWFuZ2xlIixmOjMyMCx2OjAuOSxkOjAuMSxoOjAuMDIscDowLjEsdDowLH1dLAogICAgICBbe3c6InRyaWFuZ2xlIixmOjM2MCx2OjAuOSxkOjAuMSxoOjAuMDIscDowLjEsdDowLH1dLAogICAgICBbe3c6Im4wIixmOjE1MCx2OjAuMixkOjAuMSxyOjAuMSxoOjAuMDUsdDowLHA6MC4xLH1dLAovKjUwKi9be3c6InRyaWFuZ2xlIixmOjQwMCx2OjAuOSxkOjAuMSxoOjAuMDIscDowLjEsdDowLH1dLAogICAgICBbe3c6Im4wIixmOjE1MCx2OjAuMixkOjAuMSxyOjAuMDEsaDowLjA1LHQ6MCxwOjAuMX1dLAogICAgICBbe3c6Im4wIixmOjE1MCx2OjAuMixkOjAuMSxyOjAuMDEsaDowLjA1LHQ6MCxwOjAuMX1dLAogICAgICBbe3c6Im4wIixmOjQ0MCx2OjAuMyxkOjAuMSxwOjAuOSx0OjAscjowLjEsfV0sCiAgICAgIFt7dzoibjAiLGY6MjAwLHY6MC4yLGQ6MC4wNSxwOjAuOSx0OjAsfV0sCi8qNTUqL1t7dzoibjAiLGY6NDQwLHY6MC4zLGQ6MC4xMixwOjAuOSx0OjAsfV0sCiAgICAgIFt7dzoic2luZSIsZjo4MDAsdjowLjQsZDowLjA2LHQ6MCx9XSwKICAgICAgW3t3OiJuMCIsZjoxNTAsdjowLjIsZDowLjEscjowLjAxLGg6MC4wNSx0OjAscDowLjF9XSwKICAgICAgW3t3OiJuMCIsZjozMyx2OjAuMyxkOjAuMixwOjAuOSx0OjAsfV0sCiAgICAgIFt7dzoibjAiLGY6MzAwLHY6MC4zLGQ6MC4xNCxwOjAuOSx0OjAsfV0sCi8qNjAqL1t7dzoic2luZSIsZjoyMDAsZDowLjA2LHQ6MCx9XSwKICAgICAgW3t3OiJzaW5lIixmOjE1MCxkOjAuMDYsdDowLH1dLAogICAgICBbe3c6InNpbmUiLGY6MzAwLHQ6MCx9XSwKICAgICAgW3t3OiJzaW5lIixmOjMwMCxkOjAuMDYsdDowLH1dLAogICAgICBbe3c6InNpbmUiLGY6MjUwLGQ6MC4wNix0OjAsfV0sCi8qNjUqL1t7dzoic3F1YXJlIixmOjMwMCx2Oi4zLGQ6LjA2LHA6LjgsdDowLH1dLAogICAgICBbe3c6InNxdWFyZSIsZjoyNjAsdjouMyxkOi4wNixwOi44LHQ6MCx9XSwKICAgICAgW3t3OiJzaW5lIixmOjg1MCx2Oi41LGQ6LjA3LHQ6MCx9XSwKICAgICAgW3t3OiJzaW5lIixmOjc5MCx2Oi41LGQ6LjA3LHQ6MCx9XSwKICAgICAgW3t3OiJuMCIsZjo0NDAsdjowLjMsYTowLjA1LHQ6MCx9XSwKLyo3MCovW3t3OiJuMCIsZjo0NDAsdjowLjMsYTowLjA1LHQ6MCx9XSwKICAgICAgW3t3OiJ0cmlhbmdsZSIsZjoxODAwLHY6MC40LHA6MC45LHQ6MCxoOjAuMDMsfV0sCiAgICAgIFt7dzoidHJpYW5nbGUiLGY6MTgwMCx2OjAuMyxwOjAuOSx0OjAsaDowLjEzLH1dLAogICAgICBbe3c6Im4wIixmOjMzMCx2OjAuMyxhOjAuMDIsdDowLHI6MC4wMSx9XSwKICAgICAgW3t3OiJuMCIsZjozMzAsdjowLjMsYTowLjAyLHQ6MCxoOjAuMDQscjowLjAxLH1dLAovKjc1Ki9be3c6Im4wIixmOjQ0MCx2OjAuMyx0OjAsfV0sCiAgICAgIFt7dzoic2luZSIsZjo4MDAsdDowLH1dLAogICAgICBbe3c6InNpbmUiLGY6NzAwLHQ6MCx9XSwKICAgICAgW3t3OiJuMCIsZjozMzAsdjowLjMsdDowLH1dLAogICAgICBbe3c6Im4wIixmOjMzMCx2OjAuMyx0OjAsaDowLjEscjowLjAxLHA6MC43LH1dLAovKjgwKi9be3c6InNpbmUiLHQ6MCxmOjEyMDAsdjowLjMscjowLjAxLH1dLAogICAgICBbe3c6InNpbmUiLHQ6MCxmOjEyMDAsdjowLjMsZDowLjIscjowLjIsfV0sCgogICAgXSwKICAgIC8qQEBndWkqLwogICAgX2d1aUluaXQ6KCk9PnsKICAgICAgaWYodGhpcy5jYW52YXMpewogICAgICAgIHRoaXMuY3R4PXRoaXMuY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlPSIjMDAwIjsKICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCgwLDAsMzAwLDMyKTsKICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJkcmFnb3ZlciIsdGhpcy5kcmFnT3Zlci5iaW5kKHRoaXMpLGZhbHNlKTsKICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJkcmFnbGVhdmUiLHRoaXMuZHJhZ0xlYXZlLmJpbmQodGhpcyksZmFsc2UpOwogICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoImRyb3AiLHRoaXMuZXhlY0Ryb3AuYmluZCh0aGlzKSxmYWxzZSk7CiAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLHRoaXMuY2xpY2suYmluZCh0aGlzKSxmYWxzZSk7CiAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIix0aGlzLnBvaW50ZXJkb3duLmJpbmQodGhpcyksZmFsc2UpOwogICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5wb2ludGVybW92ZS5iaW5kKHRoaXMpLGZhbHNlKTsKICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0Iix0aGlzLnBvaW50ZXJkb3duLmJpbmQodGhpcyksZmFsc2UpOwogICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoInRvdWNoZW5kIix0aGlzLnBvaW50ZXJ1cC5iaW5kKHRoaXMpLGZhbHNlKTsKICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaGNhbmNlbCIsdGhpcy5wb2ludGVydXAuYmluZCh0aGlzKSxmYWxzZSk7CiAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIix0aGlzLnBvaW50ZXJtb3ZlLmJpbmQodGhpcyksZmFsc2UpOwogICAgICB9CiAgICB9LAogICAgX2d1aVVwZGF0ZTooKT0+ewoKCgoKICAgICAgaWYodGhpcy5jYW52YXMpewogICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZT0iIzAwMCI7CiAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoMCwwLDMwMCwzMik7CiAgICAgICAgdmFyIHJvdzE9OCxyb3cyPTIwOwogICAgICAgIGlmKHRoaXMuc29uZykKICAgICAgICAgIHJvdzE9NCxyb3cyPTI0OwogICAgICAgIGVsc2UgewogICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlPSIjZmZmIjsKICAgICAgICAgIHRoaXMuY3R4LmZpbGxUZXh0KCJUaW55U3ludGgiLDgsMjApOwogICAgICAgIH0KICAgICAgICBpZih0aGlzLmdyYXBoKXsKICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZT0iIzgwMCI7CiAgICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCg4MCxyb3cxLDEzMiw0KTsKICAgICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KDgwLHJvdzIsMTMyLDQpOwogICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlPSIjZjAwIjsKICAgICAgICAgIGZvcihsZXQgaT10aGlzLm5vdGV0YWIubGVuZ3RoLTE7aT49MDstLWkpewogICAgICAgICAgICBjb25zdCBudD10aGlzLm5vdGV0YWJbaV07CiAgICAgICAgICAgIGlmKCFudC5mIHx8IHRoaXMucmh5dGhtW250LmNoXSl7CiAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoODArbnQubixyb3cxLDQsNCk7CiAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoODArbnQuY2gqOCxyb3cyLDYsNCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYodGhpcy5wZXJmbW9uKXsKICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZT0iI2ZmZiI7CiAgICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCgxODAsMzAsMjgsLTEyKTsKICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZT0iIzAwMCI7CiAgICAgICAgICB0aGlzLmN0eC5maWxsVGV4dCh0aGlzLm5vdGV0YWIubGVuZ3RoLDE4NSwyOCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZT0iI2ZmZiI7CiAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoMjUwLDE1LDMyLDIpOwogICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZT0iI2ZmZiI7CiAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGU9IiMwMDAiOwogICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpOwogICAgICAgIHRoaXMuY3R4LmFyYygyNTArdGhpcy5tYXN0ZXJWb2wqMzIsMTYsNiwwLDYuMjgsMCk7CiAgICAgICAgdGhpcy5jdHgubW92ZVRvKDIyMCwxMik7IHRoaXMuY3R4LmxpbmVUbygyMjQsMTIpOyB0aGlzLmN0eC5saW5lVG8oMjMwLDYpOwogICAgICAgIHRoaXMuY3R4LmxpbmVUbygyMzAsMjYpOyB0aGlzLmN0eC5saW5lVG8oMjI0LDIwKTsgdGhpcy5jdHgubGluZVRvKDIyMCwyMCk7CiAgICAgICAgdGhpcy5jdHguZmlsbCgpOwogICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpOwogICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlPSIjZmZmIjsKICAgICAgICB0aGlzLmN0eC5saW5lV2lkdGg9MjsKICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTsKICAgICAgICB0aGlzLmN0eC5hcmMoMjMwLDE2LDQsLTEsMSxmYWxzZSk7CiAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7CiAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7CiAgICAgICAgdGhpcy5jdHguYXJjKDIzMCwxNiw4LC0xLDEsZmFsc2UpOwogICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpOwogICAgICAgIGlmKHRoaXMubWFzdGVyVm9sPT0wKXsKICAgICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlPSIjMDAwIjsKICAgICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aD00OwogICAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICB0aGlzLmN0eC5tb3ZlVG8oMjIwLDcpOwogICAgICAgICAgdGhpcy5jdHgubGluZVRvKDIzOCwyNSk7CiAgICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTsKICAgICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlPSIjZmZmIjsKICAgICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aD0yOwogICAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7CiAgICAgICAgfQogICAgaWYgKHRoaXMuc29uZykgewogICAgdGhpcy5jdHguZmlsbFN0eWxlID0gIiNmZmYiOwogICAgdGhpcy5jdHguZmlsbFJlY3QoNCwgMiwgMjgsIDI4KTsKICAgIHRoaXMuY3R4LmZpbGxSZWN0KDgwLCAxNSwgMTI4LCAyKTsKICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICIjMDAwIjsKICAgIGlmICh0aGlzLnBsYXlpbmcpIHsKICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCgxMiwgMTAsIDQsIDEyKTsKICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCgyMiwgMTAsIDQsIDEyKTsKICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7CiAgICAgICAgdGhpcy5jdHgubW92ZVRvKDEyLCA5KTsKICAgICAgICB0aGlzLmN0eC5saW5lVG8oMjUsIDE2KTsKICAgICAgICB0aGlzLmN0eC5saW5lVG8oMTIsIDIzKTsKICAgICAgICB0aGlzLmN0eC5maWxsKCk7CiAgICB9CiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSAiI2ZmZiI7CiAgICAKICAgIC8vIEVuc3VyZSBzb25nIGV4aXN0cyBiZWZvcmUgY2FsbGluZyB0b1RpbWUKICAgIGlmICh0aGlzLnNvbmcgJiYgdGhpcy5zb25nLnRpbWViYXNlKSB7CiAgICAgICAgdGhpcy5jdHguZmlsbFRleHQodGhpcy50b1RpbWUodGhpcy5wbGF5VGljayksIDM4LCAxNCk7CiAgICAgICAgdGhpcy5jdHguZmlsbFRleHQodGhpcy50b1RpbWUodGhpcy5tYXhUaWNrKSwgMzgsIDI4KTsKICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9ICIjMDAwIjsKICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTsKICAgICAgICB0aGlzLmN0eC5hcmMoODAgKyB0aGlzLnBsYXlUaWNrIC8gdGhpcy5tYXhUaWNrICogMTI4LCAxNiwgNiwgMCwgNi4yOCwgMCk7CiAgICAgICAgdGhpcy5jdHguZmlsbCgpOwogICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpOwogICAgfQp9CiAgICAgICAgaWYodGhpcy53YWl0ZHJvcCl7CiAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGU9InJnYmEoMCwwLDAsMC43KSIKICAgICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsMCwzMDAsMzIpOwogICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlPSIjZmZmIjsKICAgICAgICAgIHRoaXMuY3R4LmZpbGxUZXh0KCJEcm9wIE1JREkgRmlsZSBIZXJlIiwxMDAsMjApOwogICAgICAgIH0KICAgICAgfQogICAgfSwKdG9UaW1lOiAodGkpID0+IHsKICAgIGlmICghdGhpcy5zb25nIHx8ICF0aGlzLnNvbmcudGltZWJhc2UgfHwgIXRoaXMuc29uZy50ZW1wbykgcmV0dXJuICIwMDowMCI7CiAgICB0aSA9ICh0aSAqIDQgKiA2MCAvIHRoaXMuc29uZy50aW1lYmFzZSAvIHRoaXMuc29uZy50ZW1wbykgfCAwOwogICAgY29uc3QgbSA9ICh0aSAvIDYwKSB8IDA7CiAgICBjb25zdCBzID0gdGkgJSA2MDsKICAgIHJldHVybiAoIjAwIiArIG0pLnN1YnN0cigtMikgKyAiOiIgKyAoIjAwIiArIHMpLnN1YnN0cigtMik7Cn0sCiAgICBwcmV2ZW50U2Nyb2xsOihlKT0+ewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB9LAogICAgcG9pbnRlcnVwOihldik9PnsKICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jyx0aGlzLnByZXZlbnRTY3JvbGwsZmFsc2UpOwogICAgfSwKICAgIGdldFBvczooZSk9PnsKICAgICAgdmFyIHA9ZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIGlmKHAucmlnaHQhPXAubGVmdCkKICAgICAgICByZXR1cm4ge3g6KGUuY2xpZW50WC1wLmxlZnQpKjMwMC8ocC5yaWdodC1wLmxlZnQpLHk6ZS5jbGllbnRZLXAudG9wfTsKICAgICAgcmV0dXJuIHt4OjAseTowfTsKICAgIH0sCiAgICBwb2ludGVyZG93bjooZXYpPT57CiAgICAgIGxldCBlPWV2OwogICAgICBpZihldi50b3VjaGVzKQogICAgICAgIGU9ZXYudG91Y2hlc1swXTsKICAgICAgdGhpcy5kb3ducG9zPXRoaXMuZ2V0UG9zKGUpOwogICAgICBpZihldi50b3VjaGVzIHx8IChlLmJ1dHRvbnMmMSkpewogICAgICAgIGlmKHRoaXMuc29uZyYmdGhpcy5kb3ducG9zLng+PTgwJiZ0aGlzLmRvd25wb3MueDw9MjA4KXsKICAgICAgICAgIGNvbnN0IHA9KHRoaXMuZG93bnBvcy54LTgwKS8xMjgqdGhpcy5tYXhUaWNrOwogICAgICAgICAgdGhpcy5sb2NhdGVNSURJKHApOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jyx0aGlzLnByZXZlbnRTY3JvbGwsZmFsc2UpOwogICAgICAgIH0KICAgICAgICBpZih0aGlzLmRvd25wb3MueD49MjUwJiZ0aGlzLmRvd25wb3MueDwyODIpewogICAgICAgICAgY29uc3QgcD0odGhpcy5kb3ducG9zLngtMjUwKS8zMjsKICAgICAgICAgIHRoaXMuc2V0TWFzdGVyVm9sKHApOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jyx0aGlzLnByZXZlbnRTY3JvbGwsZmFsc2UpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHBvaW50ZXJtb3ZlOihldik9PnsKICAgICAgbGV0IGU9ZXY7CiAgICAgIGlmKGV2LnRvdWNoZXMpCiAgICAgICAgZT1ldi50b3VjaGVzWzBdOwogICAgICBpZihldi50b3VjaGVzIHx8IChlLmJ1dHRvbnMmMSkpewogICAgICAgIGNvbnN0IHBvcz10aGlzLmdldFBvcyhlKTsKICAgICAgICBpZih0aGlzLnNvbmcmJnBvcy54Pj03MCYmcG9zLng8PTIwOCl7CiAgICAgICAgICBpZihwb3MueDw4MCkgcG9zLng9ODA7CiAgICAgICAgICBjb25zdCBwPShwb3MueC04MCkvMTI4KnRoaXMubWF4VGljazsKICAgICAgICAgIHRoaXMubG9jYXRlTUlESShwKTsKICAgICAgICB9CiAgICAgICAgaWYocG9zLng+PTI1MCYmcG9zLng8MjgyKXsKICAgICAgICAgIGNvbnN0IHA9KHBvcy54LTI1MCkvMzI7CiAgICAgICAgICB0aGlzLnNldE1hc3RlclZvbChwKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjbGljazooZSk9PnsKICAgICAgY29uc3QgcG9zPXRoaXMuZ2V0UG9zKGUpOwogICAgICBpZihwb3MueDw0MCAmJiB0aGlzLnNvbmcpewogICAgICAgIGlmKHRoaXMucGxheWluZykKICAgICAgICAgIHRoaXMuc3RvcE1JREkoKTsKICAgICAgICBlbHNlIGlmKHRoaXMuc29uZykKICAgICAgICAgIHRoaXMucGxheU1JREkoKTsKICAgICAgfQogICAgICBpZihwb3MueD49MjE1JiZwb3MueDwyNDMgJiYgdGhpcy5kb3ducG9zLng+PTIxNSAmJiB0aGlzLmRvd25wb3MueDwyNDMpewogICAgICAgIGlmKHRoaXMubWFzdGVyVm9sPjApewogICAgICAgICAgdGhpcy5sYXN0TWFzdGVyVm9sPXRoaXMubWFzdGVyVm9sOwogICAgICAgICAgdGhpcy5tYXN0ZXJWb2w9MDsKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgICAgdGhpcy5tYXN0ZXJWb2w9dGhpcy5sYXN0TWFzdGVyVm9sOwogICAgICB9CiAgICB9LAogICAgZHJhZ0xlYXZlOihlKT0+ewogICAgICB0aGlzLndhaXRkcm9wPTA7CiAgICB9LAogICAgZHJhZ092ZXI6KGUpPT57CiAgICAgIHRoaXMud2FpdGRyb3A9MTsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gImNvcHkiOwogICAgfSwKICAgIGV4ZWNEcm9wOihlKT0+ewogICAgICB0aGlzLndhaXRkcm9wPTA7CiAgICAgIGNvbnN0IGYgPSBlLmRhdGFUcmFuc2Zlci5maWxlczsKICAgICAgaWYodGhpcy5kaXNhYmxlZHJvcD09MCl7CiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLm9ubG9hZD1mdW5jdGlvbihlKXsKICAgICAgICAgIHRoaXMubG9hZE1JREkocmVhZGVyLnJlc3VsdCk7CiAgICAgICAgfS5iaW5kKHRoaXMpOwogICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmWzBdKTsKICAgICAgfQogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB9LAogICAgLypAQGd1aUVORCovCiAgICByZWFkeTooKT0+ewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdik9PnsKICAgICAgICBjb25zdCB0aW1lcmlkPXNldEludGVydmFsKCgpPT57Ci8qCiAgICAgICAgICBpZih0aGlzLmRlYnVnKQogICAgICAgICAgICBjb25zb2xlLmxvZygiSW5pdGlhbGl6ZSBjaGVja2luZy4iKTsKKi8KICAgICAgICAgIGlmKHRoaXMuaXNSZWFkeSl7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJpZCk7CiAgICAgICAgICAgIGlmKHRoaXMuZGVidWcpCiAgICAgICAgICAgICAgY29uc29sZS5sb2coIkluaXRpYWxpemVkLiIpOwogICAgICAgICAgICByZXNvbHYoKTsKICAgICAgICAgIH0KICAgICAgICB9LDEwMCk7CiAgICAgIH0pOwogICAgfSwKICAgIGluaXQ6KCk9PnsKICAgICAgdGhpcy5wZz1bXTsgdGhpcy52b2w9W107IHRoaXMuZXg9W107IHRoaXMuYmVuZD1bXTsgdGhpcy5ycG5pZHg9W107IHRoaXMuYnJhbmdlPVtdOwogICAgICB0aGlzLnN1c3RhaW49W107IHRoaXMubm90ZXRhYj1bXTsgdGhpcy5yaHl0aG09W107CiAgICAgIHRoaXMubWFzdGVyVHVuaW5nQz0wOyB0aGlzLm1hc3RlclR1bmluZ0Y9MDsgdGhpcy50dW5pbmdDPVtdOyB0aGlzLnR1bmluZ0Y9W107IHRoaXMuc2NhbGVUdW5pbmc9W107CiAgICAgIHRoaXMubWF4VGljaz0wLCB0aGlzLnBsYXlUaWNrPTAsIHRoaXMucGxheWluZz0wOyB0aGlzLnJlbGVhc2VSYXRpbz0zLjU7CiAgICAgIGZvcihsZXQgaT0wO2k8MTY7KytpKXsKICAgICAgICB0aGlzLnBnW2ldPTA7IHRoaXMudm9sW2ldPTMqMTAwKjEwMC8oMTI3KjEyNyk7CiAgICAgICAgdGhpcy5iZW5kW2ldPTA7IHRoaXMuYnJhbmdlW2ldPTB4MTAwOwogICAgICAgIHRoaXMudHVuaW5nQ1tpXT0wOyB0aGlzLnR1bmluZ0ZbaV09MDsKICAgICAgICB0aGlzLnNjYWxlVHVuaW5nW2ldPVswLDAsMCwwLDAsMCwwLDAsMCwwLDAsMF07CiAgICAgICAgdGhpcy5yaHl0aG1baV09MDsKICAgICAgfQogICAgICB0aGlzLnJoeXRobVs5XT0xOwogICAgICB0aGlzLnByZXJvbGw9MC4yOwogICAgICB0aGlzLnJlbGNudD0wOwogICAgICBzZXRJbnRlcnZhbCgKICAgICAgICBmdW5jdGlvbigpewogICAgICAgICAgaWYoKyt0aGlzLnJlbGNudD49Myl7CiAgICAgICAgICAgIHRoaXMucmVsY250PTA7CiAgICAgICAgICAgIGZvcihsZXQgaT10aGlzLm5vdGV0YWIubGVuZ3RoLTE7aT49MDstLWkpewogICAgICAgICAgICAgIHZhciBudD10aGlzLm5vdGV0YWJbaV07CiAgICAgICAgICAgICAgaWYodGhpcy5hY3R4LmN1cnJlbnRUaW1lPm50LmUpewogICAgICAgICAgICAgICAgdGhpcy5fcHJ1bmVOb3RlKG50KTsKICAgICAgICAgICAgICAgIHRoaXMubm90ZXRhYi5zcGxpY2UoaSwxKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLypAQGd1aSovCiAgICAgICAgICAgIC8qQEBndWlFTkQqLwogICAgICAgICAgfQogICAgICAgICAgaWYodGhpcy5wbGF5aW5nICYmIHRoaXMuc29uZy5ldi5sZW5ndGg+MCl7CiAgICAgICAgICAgIGxldCBlPXRoaXMuc29uZy5ldlt0aGlzLnBsYXlJbmRleF07CiAgICAgICAgICAgIHdoaWxlKHRoaXMuYWN0eC5jdXJyZW50VGltZSt0aGlzLnByZXJvbGw+dGhpcy5wbGF5VGltZSl7CiAgICAgICAgICAgICAgaWYoZS5tWzBdPT0weGZmNTEpewogICAgICAgICAgICAgICAgdGhpcy5zb25nLnRlbXBvPWUubVsxXTsKICAgICAgICAgICAgICAgIHRoaXMudGljazJUaW1lPTQqNjAvdGhpcy5zb25nLnRlbXBvL3RoaXMuc29uZy50aW1lYmFzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgdGhpcy5zZW5kKGUubSx0aGlzLnBsYXlUaW1lKTsKICAgICAgICAgICAgICArK3RoaXMucGxheUluZGV4OwogICAgICAgICAgICAgIGlmKHRoaXMucGxheUluZGV4Pj10aGlzLnNvbmcuZXYubGVuZ3RoKXsKICAgICAgICAgICAgICAgIGlmKHRoaXMubG9vcCl7CiAgICAgICAgICAgICAgICAgIGU9dGhpcy5zb25nLmV2W3RoaXMucGxheUluZGV4PTBdOwogICAgICAgICAgICAgICAgICB0aGlzLnBsYXlUaWNrPWUudDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICAgIHRoaXMucGxheVRpY2s9dGhpcy5tYXhUaWNrOwogICAgICAgICAgICAgICAgICB0aGlzLnBsYXlpbmc9MDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICBlPXRoaXMuc29uZy5ldlt0aGlzLnBsYXlJbmRleF07CiAgICAgICAgICAgICAgICB0aGlzLnBsYXlUaW1lKz0oZS50LXRoaXMucGxheVRpY2spKnRoaXMudGljazJUaW1lOwogICAgICAgICAgICAgICAgdGhpcy5wbGF5VGljaz1lLnQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfS5iaW5kKHRoaXMpLDYwCiAgICAgICk7CiAgICAgIGlmKHRoaXMuZGVidWcpCiAgICAgICAgY29uc29sZS5sb2coImludGVybmFsY29udGV4dDoiK3RoaXMuaW50ZXJuYWxjb250ZXh0KQogICAgICBpZih0aGlzLmludGVybmFsY29udGV4dCl7CiAgICAgICAgd2luZG93LkF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDsKICAgICAgICB0aGlzLnNldEF1ZGlvQ29udGV4dChuZXcgQXVkaW9Db250ZXh0KCkpOwogICAgICB9CiAgICAgIHRoaXMuaXNSZWFkeT0xOwogICAgfSwKICAgIHNldE1hc3RlclZvbDoodik9PnsKICAgICAgaWYodiE9dW5kZWZpbmVkKQogICAgICAgIHRoaXMubWFzdGVyVm9sPXY7CiAgICAgIGlmKHRoaXMub3V0KQogICAgICAgIHRoaXMub3V0LmdhaW4udmFsdWU9dGhpcy5tYXN0ZXJWb2w7CiAgICB9LAogICAgc2V0UmV2ZXJiTGV2Oih2KT0+ewogICAgICBpZih2IT11bmRlZmluZWQpCiAgICAgICAgdGhpcy5yZXZlcmJMZXY9djsKICAgICAgdmFyIHI9cGFyc2VGbG9hdCh0aGlzLnJldmVyYkxldik7CiAgICAgIGlmKHRoaXMucmV2JiYhaXNOYU4ocikpCiAgICAgICAgdGhpcy5yZXYuZ2Fpbi52YWx1ZT1yKjg7CiAgICB9LAogICAgc2V0TG9vcDooZik9PnsKICAgICAgdGhpcy5sb29wPWY7CiAgICB9LAogICAgc2V0Vm9pY2VzOih2KT0+ewogICAgICB0aGlzLnZvaWNlcz12OwogICAgfSwKICAgIGdldFBsYXlTdGF0dXM6KCk9PnsKICAgICAgcmV0dXJuIHtwbGF5OnRoaXMucGxheWluZywgbWF4VGljazp0aGlzLm1heFRpY2ssIGN1clRpY2s6dGhpcy5wbGF5VGlja307CiAgICB9LAogICAgbG9jYXRlTUlESToodGljayk9PnsKICAgICAgbGV0IGkscD10aGlzLnBsYXlpbmc7CiAgICAgIHRoaXMuc3RvcE1JREkoKTsKICAgICAgZm9yKGk9MDtpPHRoaXMuc29uZy5ldi5sZW5ndGggJiYgdGljaz50aGlzLnNvbmcuZXZbaV0udDsrK2kpewogICAgICAgIHZhciBtPXRoaXMuc29uZy5ldltpXTsKICAgICAgICB2YXIgY2g9bS5tWzBdJjB4ZjsKICAgICAgICBzd2l0Y2gobS5tWzBdJjB4ZjApewogICAgICAgIGNhc2UgMHhiMDoKICAgICAgICAgIHN3aXRjaChtLm1bMV0pewogICAgICAgICAgY2FzZSAxOiAgdGhpcy5zZXRNb2R1bGF0aW9uKGNoLG0ubVsyXSk7IGJyZWFrOwogICAgICAgICAgY2FzZSA3OiAgdGhpcy5zZXRDaFZvbChjaCxtLm1bMl0pOyBicmVhazsKICAgICAgICAgIGNhc2UgMTA6IHRoaXMuc2V0UGFuKGNoLG0ubVsyXSk7IGJyZWFrOwogICAgICAgICAgY2FzZSAxMTogdGhpcy5zZXRFeHByZXNzaW9uKGNoLG0ubVsyXSk7IGJyZWFrOwogICAgICAgICAgY2FzZSA2NDogdGhpcy5zZXRTdXN0YWluKGNoLG0ubVsyXSk7IGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAweGMwOiB0aGlzLnBnW20ubVswXSYweDBmXT1tLm1bMV07IGJyZWFrOwogICAgICAgIH0KICAgICAgICBpZihtLm1bMF09PTB4ZmY1MSkKICAgICAgICAgIHRoaXMuc29uZy50ZW1wbz1tLm1bMV07CiAgICAgIH0KICAgICAgaWYoIXRoaXMuc29uZy5ldltpXSl7CiAgICAgICAgdGhpcy5wbGF5SW5kZXg9MDsKICAgICAgICB0aGlzLnBsYXlUaWNrPXRoaXMubWF4VGljazsKICAgICAgfQogICAgICBlbHNlewogICAgICAgIHRoaXMucGxheUluZGV4PWk7CiAgICAgICAgdGhpcy5wbGF5VGljaz10aGlzLnNvbmcuZXZbaV0udDsKICAgICAgfQogICAgICBpZihwKQogICAgICAgIHRoaXMucGxheU1JREkoKTsKICAgIH0sCiAgICBnZXRUaW1icmVOYW1lOihtLG4pPT57CiAgICAgIGlmKG09PTApCiAgICAgICAgcmV0dXJuIHRoaXMucHJvZ3JhbVtuXS5uYW1lOwogICAgICBlbHNlCiAgICAgICAgcmV0dXJuIHRoaXMuZHJ1bW1hcFtuLTM1XS5uYW1lOwogICAgfSwKICAgIGxvYWRNSURJZnJvbVNyYzooKT0+ewogICAgICB0aGlzLmxvYWRNSURJVXJsKHRoaXMuc3JjKTsKICAgIH0sCiAgICBsb2FkTUlESVVybDoodXJsKT0+ewogICAgICBpZighdXJsKQogICAgICAgIHJldHVybjsKICAgICAgdmFyIHhocj1uZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgeGhyLm9wZW4oIkdFVCIsdXJsLHRydWUpOwogICAgICB4aHIucmVzcG9uc2VUeXBlPSJhcnJheWJ1ZmZlciI7CiAgICAgIHhoci5sb2FkTUlEST10aGlzLmxvYWRNSURJLmJpbmQodGhpcyk7CiAgICAgIHhoci5vbmxvYWQ9ZnVuY3Rpb24oZSl7CiAgICAgICAgaWYodGhpcy5zdGF0dXM9PTIwMCl7CiAgICAgICAgICB0aGlzLmxvYWRNSURJKHRoaXMucmVzcG9uc2UpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgeGhyLnNlbmQoKTsKICAgIH0sCiAgICByZXNldDooKT0+ewogICAgICBmb3IobGV0IGk9MDtpPDE2OysraSl7CiAgICAgICAgdGhpcy5zZXRQcm9ncmFtKGksMCk7CiAgICAgICAgdGhpcy5zZXRCZW5kUmFuZ2UoaSwweDEwMCk7CiAgICAgICAgdGhpcy5zZXRNb2R1bGF0aW9uKGksMCk7CiAgICAgICAgdGhpcy5zZXRDaFZvbChpLDEwMCk7CiAgICAgICAgdGhpcy5zZXRQYW4oaSw2NCk7CiAgICAgICAgdGhpcy5yZXNldEFsbENvbnRyb2xsZXJzKGkpOwogICAgICAgIHRoaXMuYWxsU291bmRPZmYoaSk7CiAgICAgICAgdGhpcy5yaHl0aG1baV09MDsKICAgICAgICB0aGlzLnR1bmluZ0NbaV09MDsKICAgICAgICB0aGlzLnR1bmluZ0ZbaV09MDsKICAgICAgfQogICAgICB0aGlzLm1hc3RlclR1bmluZ0M9MDsKICAgICAgdGhpcy5tYXN0ZXJUdW5pbmdGPTA7CiAgICAgIHRoaXMucmh5dGhtWzldPTE7CiAgICB9LAogICAgc3RvcE1JREk6KCk9PnsKICAgICAgdGhpcy5wbGF5aW5nPTA7CiAgICAgIGZvcih2YXIgaT0wO2k8MTY7KytpKQogICAgICAgIHRoaXMuYWxsU291bmRPZmYoaSk7CiAgICB9LAogICAgcGxheU1JREk6KCk9PnsKICAgICAgaWYoIXRoaXMuc29uZykKICAgICAgICByZXR1cm47CiAgICAgIGNvbnN0IGR1bW15PXRoaXMuYWN0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgIGR1bW15LmNvbm5lY3QodGhpcy5hY3R4LmRlc3RpbmF0aW9uKTsKICAgICAgZHVtbXkuZnJlcXVlbmN5LnZhbHVlPTA7CiAgICAgIGR1bW15LnN0YXJ0KDApOwogICAgICBkdW1teS5zdG9wKHRoaXMuYWN0eC5jdXJyZW50VGltZSswLjAwMSk7CiAgICAgIGlmKHRoaXMucGxheVRpY2s+PXRoaXMubWF4VGljaykKICAgICAgICB0aGlzLnBsYXlUaWNrPTAsdGhpcy5wbGF5SW5kZXg9MDsKICAgICAgdGhpcy5wbGF5VGltZT10aGlzLmFjdHguY3VycmVudFRpbWUrLjE7CiAgICAgIHRoaXMudGljazJUaW1lPTQqNjAvdGhpcy5zb25nLnRlbXBvL3RoaXMuc29uZy50aW1lYmFzZTsKICAgICAgdGhpcy5wbGF5aW5nPTE7CiAgICB9LAogICAgbG9hZE1JREk6KGRhdGEpPT57CiAgICAgIGZ1bmN0aW9uIEdldDIocywgaSkgeyByZXR1cm4gKHNbaV08PDgpICsgc1tpKzFdOyB9CiAgICAgIGZ1bmN0aW9uIEdldDMocywgaSkgeyByZXR1cm4gKHNbaV08PDE2KSArIChzW2krMV08PDgpICsgc1tpKzJdOyB9CiAgICAgIGZ1bmN0aW9uIEdldDQocywgaSkgeyByZXR1cm4gKHNbaV08PDI0KSArIChzW2krMV08PDE2KSArIChzW2krMl08PDgpICsgc1tpKzNdOyB9CiAgICAgIGZ1bmN0aW9uIEdldFN0cihzLCBpLCBsZW4pIHsKICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHMuc2xpY2UoaSxpK2xlbikpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIERlbHRhKHMsIGkpIHsKICAgICAgICB2YXIgdiwgZDsKICAgICAgICB2ID0gMDsKICAgICAgICBkYXRhbGVuID0gMTsKICAgICAgICB3aGlsZSgoZCA9IHNbaV0pICYgMHg4MCkgewogICAgICAgICAgdiA9ICh2PDw3KSArIChkJjB4N2YpOwogICAgICAgICAgKytkYXRhbGVuOwogICAgICAgICAgKytpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKHY8PDcpK2Q7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gTXNnKHNvbmcsdGljayxzLGkpewogICAgICAgIHZhciB2PXNbaV07CiAgICAgICAgZGF0YWxlbj0xOwogICAgICAgIGlmKCh2JjB4ODApPT0wKQogICAgICAgICAgdj1ydW5zdCxkYXRhbGVuPTA7CiAgICAgICAgcnVuc3Q9djsKICAgICAgICBzd2l0Y2godiYweGYwKXsKICAgICAgICBjYXNlIDB4YzA6IGNhc2UgMHhkMDoKICAgICAgICAgIHNvbmcuZXYucHVzaCh7dDp0aWNrLG06W3Ysc1tpK2RhdGFsZW5dXX0pOwogICAgICAgICAgZGF0YWxlbis9MTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMHhmMDoKICAgICAgICAgIHN3aXRjaCh2KSB7CiAgICAgICAgICBjYXNlIDB4ZjA6CiAgICAgICAgICBjYXNlIDB4Zjc6CiAgICAgICAgICAgIHZhciBsZW49RGVsdGEocyxpKzEpOwogICAgICAgICAgICBkYXRhc3RhcnQ9MStkYXRhbGVuOwogICAgICAgICAgICB2YXIgZXhkPUFycmF5LmZyb20ocy5zbGljZShpK2RhdGFzdGFydCxpK2RhdGFzdGFydCtsZW4pKTsKICAgICAgICAgICAgZXhkLnVuc2hpZnQoMHhmMCk7CiAgICAgICAgICAgIHNvbmcuZXYucHVzaCh7dDp0aWNrLG06ZXhkfSk7Ci8qCiAgICAgICAgICAgIHZhciBzeXNleD1bXTsKICAgICAgICAgICAgZm9yKHZhciBqaj0wO2pqPGxlbjsrK2pqKQogICAgICAgICAgICAgIHN5c2V4LnB1c2goc1tpK2RhdGFzdGFydCtqal0udG9TdHJpbmcoMTYpKTsKICAgICAgICAgICAgaWYodGhpcy5kZWJ1ZykKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzeXNleCk7CiovCiAgICAgICAgICAgIGRhdGFsZW4rPWxlbisxOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMHhmZjoKICAgICAgICAgICAgdmFyIGxlbiA9IERlbHRhKHMsIGkgKyAyKTsKICAgICAgICAgICAgZGF0YXN0YXJ0ID0gMitkYXRhbGVuOwogICAgICAgICAgICBkYXRhbGVuID0gbGVuK2RhdGFsZW4rMjsKICAgICAgICAgICAgc3dpdGNoKHNbaSsxXSkgewogICAgICAgICAgICBjYXNlIDB4MDI6IHNvbmcuY29weXJpZ2h0Kz1HZXRTdHIocywgaSArIGRhdGFzdGFydCwgZGF0YWxlbiAtIDMpOyBicmVhazsKICAgICAgICAgICAgY2FzZSAweDAxOiBjYXNlIDB4MDM6IGNhc2UgMHgwNDogY2FzZSAweDA5OgogICAgICAgICAgICAgIHNvbmcudGV4dD1HZXRTdHIocywgaSArIGRhdGFzdGFydCwgZGF0YWxlbiAtIGRhdGFzdGFydCk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMHgyZjoKICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgY2FzZSAweDUxOgogICAgICAgICAgICAgIHZhciB2YWwgPSBNYXRoLmZsb29yKDYwMDAwMDAwIC8gR2V0MyhzLCBpICsgMykpOwogICAgICAgICAgICAgIHNvbmcuZXYucHVzaCh7dDp0aWNrLCBtOlsweGZmNTEsIHZhbF19KTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBzb25nLmV2LnB1c2goe3Q6dGljayxtOlt2LHNbaStkYXRhbGVuXSxzW2krZGF0YWxlbisxXV19KTsKICAgICAgICAgIGRhdGFsZW4rPTI7CiAgICAgICAgfQogICAgICAgIHJldHVybiAwOwogICAgICB9CiAgICAgIHRoaXMuc3RvcE1JREkoKTsKICAgICAgdmFyIHM9bmV3IFVpbnQ4QXJyYXkoZGF0YSk7CiAgICAgIHZhciBkYXRhbGVuID0gMCwgZGF0YXN0YXJ0ID0gMCwgcnVuc3QgPSAweDkwOwogICAgICB2YXIgaWR4ID0gMDsKICAgICAgdmFyIGhkID0gcy5zbGljZSgwLCAgNCk7CiAgICAgIGlmKGhkLnRvU3RyaW5nKCkhPSI3Nyw4NCwxMDQsMTAwIikgIC8vTVRoZAogICAgICAgIHJldHVybjsKICAgICAgdmFyIGxlbiA9IEdldDQocywgNCk7CiAgICAgIHZhciBmbXQgPSBHZXQyKHMsIDgpOwogICAgICB2YXIgbnVtdHJrID0gR2V0MihzLCAxMCk7CiAgICAgIHRoaXMubWF4VGljaz0wOwogICAgICB2YXIgdGIgPSBHZXQyKHMsIDEyKSo0OwogICAgICBpZHggPSAobGVuICsgOCk7CiAgICAgIHRoaXMuc29uZz17Y29weXJpZ2h0OiIiLHRleHQ6IiIsdGVtcG86MTIwLHRpbWViYXNlOnRiLGV2OltdfTsKICAgICAgZm9yKGxldCB0cj0wO3RyPG51bXRyazsrK3RyKXsKICAgICAgICBoZD1zLnNsaWNlKGlkeCwgaWR4KzQpOwogICAgICAgIGxlbj1HZXQ0KHMsIGlkeCs0KTsKICAgICAgICBpZihoZC50b1N0cmluZygpPT0iNzcsODQsMTE0LDEwNyIpIHsvL01UcmsKICAgICAgICAgIHZhciB0aWNrID0gMDsKICAgICAgICAgIHZhciBqID0gMDsKICAgICAgICAgIHRoaXMubm90ZXRhYi5sZW5ndGggPSAwOwogICAgICAgICAgZm9yKDs7KSB7CiAgICAgICAgICAgIHRpY2sgKz0gRGVsdGEocywgaWR4ICsgOCArIGopOwogICAgICAgICAgICBqICs9IGRhdGFsZW47CiAgICAgICAgICAgIHZhciBlID0gTXNnKHRoaXMuc29uZywgdGljaywgcywgaWR4ICsgOCArIGopOwogICAgICAgICAgICBqICs9IGRhdGFsZW47CiAgICAgICAgICAgIGlmKGUpCiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBpZih0aWNrPnRoaXMubWF4VGljaykKICAgICAgICAgICAgdGhpcy5tYXhUaWNrPXRpY2s7CiAgICAgICAgfQogICAgICAgIGlkeCArPSAobGVuKzgpOwogICAgICB9CiAgICAgIHRoaXMuc29uZy5ldi5zb3J0KGZ1bmN0aW9uKHgseSl7cmV0dXJuIHgudC15LnR9KTsKICAgICAgdGhpcy5yZXNldCgpOwogICAgICB0aGlzLmxvY2F0ZU1JREkoMCk7CiAgICB9LAogICAgc2V0UXVhbGl0eToocSk9PnsKICAgICAgaWYocSE9dW5kZWZpbmVkKQogICAgICAgIHRoaXMucXVhbGl0eT1xOwogICAgICBmb3IobGV0IGk9MDtpPDEyODsrK2kpCiAgICAgICAgdGhpcy5zZXRUaW1icmUoMCxpLHRoaXMucHJvZ3JhbTBbaV0pOwogICAgICBmb3IobGV0IGk9MDtpPHRoaXMuZHJ1bW1hcDAubGVuZ3RoOysraSkKICAgICAgICB0aGlzLnNldFRpbWJyZSgxLGkrMzUsdGhpcy5kcnVtbWFwMFtpXSk7CiAgICAgIGlmKHRoaXMucXVhbGl0eSl7CiAgICAgICAgZm9yKGxldCBpPTA7aTx0aGlzLnByb2dyYW0xLmxlbmd0aDsrK2kpCiAgICAgICAgICB0aGlzLnNldFRpbWJyZSgwLGksdGhpcy5wcm9ncmFtMVtpXSk7CiAgICAgICAgZm9yKGxldCBpPTA7aTx0aGlzLmRydW1tYXAubGVuZ3RoOysraSl7CiAgICAgICAgICBpZih0aGlzLmRydW1tYXAxW2ldKQogICAgICAgICAgICB0aGlzLnNldFRpbWJyZSgxLGkrMzUsdGhpcy5kcnVtbWFwMVtpXSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2V0VGltYnJlOihtLG4scCk9PnsKICAgICAgY29uc3QgZGVmcD17ZzowLHc6InNpbmUiLHQ6MSxmOjAsdjowLjUsYTowLGg6MC4wMSxkOjAuMDEsczowLHI6MC4wNSxwOjEscToxLGs6MH07CiAgICAgIGZ1bmN0aW9uIGZpbGxkZWYocCl7CiAgICAgICAgZm9yKG49MDtuPHAubGVuZ3RoOysrbil7CiAgICAgICAgICBmb3IobGV0IGsgaW4gZGVmcCl7CiAgICAgICAgICAgIGlmKCFwW25dLmhhc093blByb3BlcnR5KGspIHx8IHR5cGVvZihwW25dW2tdKT09InVuZGVmaW5lZCIpCiAgICAgICAgICAgICAgcFtuXVtrXT1kZWZwW2tdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gcDsKICAgICAgfQogICAgICBpZihtICYmIG4+PTM1ICYmIG48PTgxKQogICAgICAgIHRoaXMuZHJ1bW1hcFtuLTM1XS5wPWZpbGxkZWYocCk7CiAgICAgIGlmKG09PTAgJiYgbj49MCAmJiBuPD0xMjcpCiAgICAgICAgdGhpcy5wcm9ncmFtW25dLnA9ZmlsbGRlZihwKTsKICAgIH0sCiAgICBfcHJ1bmVOb3RlOihudCk9PnsKICAgICAgZm9yKGxldCBrPW50Lm8ubGVuZ3RoLTE7az49MDstLWspewogICAgICAgIGlmKG50Lm9ba10uZnJlcXVlbmN5KXsKICAgICAgICAgIG50Lm9ba10uZnJlcXVlbmN5LmNhbmNlbFNjaGVkdWxlZFZhbHVlcygwKTsKICAgICAgICB9CiAgICAgICAgZWxzZXsKICAgICAgICAgIG50Lm9ba10ucGxheWJhY2tSYXRlLmNhbmNlbFNjaGVkdWxlZFZhbHVlcygwKTsKICAgICAgICB9CiAgICAgICAgbnQuZ1trXS5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcygwKTsKCiAgICAgICAgbnQub1trXS5zdG9wKCk7CiAgICAgICAgaWYobnQub1trXS5kZXR1bmUpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHRoaXMuY2htb2RbbnQuY2hdLmRpc2Nvbm5lY3QobnQub1trXS5kZXR1bmUpOwogICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICB9CiAgICAgICAgbnQuZ1trXS5nYWluLnZhbHVlID0gMDsKICAgICAgfQogICAgfSwKICAgIF9saW1pdFZvaWNlczooY2gsbik9PnsKICAgICAgdGhpcy5ub3RldGFiLnNvcnQoZnVuY3Rpb24objEsbjIpewogICAgICAgIGlmKG4xLmYhPW4yLmYpIHJldHVybiBuMS5mLW4yLmY7CiAgICAgICAgaWYobjEuZSE9bjIuZSkgcmV0dXJuIG4yLmUtbjEuZTsKICAgICAgICByZXR1cm4gbjIudC1uMS50OwogICAgICB9KTsKICAgICAgZm9yKGxldCBpPXRoaXMubm90ZXRhYi5sZW5ndGgtMTtpPj0wOy0taSl7CiAgICAgICAgdmFyIG50PXRoaXMubm90ZXRhYltpXTsKICAgICAgICBpZih0aGlzLmFjdHguY3VycmVudFRpbWU+bnQuZSB8fCBpPj0odGhpcy52b2ljZXMtMSkpewogICAgICAgICAgdGhpcy5fcHJ1bmVOb3RlKG50KTsKICAgICAgICAgIHRoaXMubm90ZXRhYi5zcGxpY2UoaSwxKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBfbm90ZToodCxjaCxuLHYscCk9PnsKICAgICAgbGV0IG91dCxzYyxwbjsKICAgICAgY29uc3Qgbz1bXSxnPVtdLHZwPVtdLGZwPVtdLHI9W107CiAgICAgIGNvbnN0IGY9NDQwKk1hdGgucG93KDIsKG4tNjkgKyB0aGlzLm1hc3RlclR1bmluZ0MgKyB0aGlzLnR1bmluZ0NbY2hdICsgKHRoaXMubWFzdGVyVHVuaW5nRiArIHRoaXMudHVuaW5nRltjaF0vODE5MiArIHRoaXMuc2NhbGVUdW5pbmdbY2hdW24lMTJdKSkvMTIpOwogICAgICB0aGlzLl9saW1pdFZvaWNlcyhjaCxuKTsKICAgICAgZm9yKGxldCBpPTA7aTxwLmxlbmd0aDsrK2kpewogICAgICAgIHBuPXBbaV07CiAgICAgICAgY29uc3QgZHQ9dCtwbi5hK3BuLmg7CiAgICAgICAgaWYocG4uZz09MCkKICAgICAgICAgIG91dD10aGlzLmNodm9sW2NoXSwgc2M9dip2LzE2Mzg0LCBmcFtpXT1mKnBuLnQrcG4uZjsKICAgICAgICBlbHNlIGlmKHBuLmc+MTApCiAgICAgICAgICBvdXQ9Z1twbi5nLTExXS5nYWluLCBzYz0xLCBmcFtpXT1mcFtwbi5nLTExXSpwbi50K3BuLmY7CiAgICAgICAgZWxzZSBpZihvW3BuLmctMV0uZnJlcXVlbmN5KQogICAgICAgICAgb3V0PW9bcG4uZy0xXS5mcmVxdWVuY3ksIHNjPWZwW3BuLmctMV0sIGZwW2ldPWZwW3BuLmctMV0qcG4udCtwbi5mOwogICAgICAgIGVsc2UKICAgICAgICAgIG91dD1vW3BuLmctMV0ucGxheWJhY2tSYXRlLCBzYz1mcFtwbi5nLTFdLzQ0MCwgZnBbaV09ZnBbcG4uZy0xXSpwbi50K3BuLmY7CiAgICAgICAgc3dpdGNoKHBuLndbMF0pewogICAgICAgIGNhc2UgIm4iOgogICAgICAgICAgb1tpXT10aGlzLmFjdHguY3JlYXRlQnVmZmVyU291cmNlKCk7CiAgICAgICAgICBvW2ldLmJ1ZmZlcj10aGlzLm5vaXNlQnVmW3BuLnddOwogICAgICAgICAgb1tpXS5sb29wPXRydWU7CiAgICAgICAgICBvW2ldLnBsYXliYWNrUmF0ZS52YWx1ZT1mcFtpXS80NDA7CiAgICAgICAgICBpZihwbi5wIT0xKQogICAgICAgICAgICB0aGlzLl9zZXRQYXJhbVRhcmdldChvW2ldLnBsYXliYWNrUmF0ZSxmcFtpXS80NDAqcG4ucCx0LHBuLnEpOwogICAgICAgICAgaWYgKG9baV0uZGV0dW5lKSB7CiAgICAgICAgICAgIHRoaXMuY2htb2RbY2hdLmNvbm5lY3Qob1tpXS5kZXR1bmUpOwogICAgICAgICAgICBvW2ldLmRldHVuZS52YWx1ZT10aGlzLmJlbmRbY2hdOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIG9baV09dGhpcy5hY3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgICAgIG9baV0uZnJlcXVlbmN5LnZhbHVlPWZwW2ldOwogICAgICAgICAgaWYocG4ucCE9MSkKICAgICAgICAgICAgdGhpcy5fc2V0UGFyYW1UYXJnZXQob1tpXS5mcmVxdWVuY3ksZnBbaV0qcG4ucCx0LHBuLnEpOwogICAgICAgICAgaWYocG4ud1swXT09InciKQogICAgICAgICAgICBvW2ldLnNldFBlcmlvZGljV2F2ZSh0aGlzLndhdmVbcG4ud10pOwogICAgICAgICAgZWxzZQogICAgICAgICAgICBvW2ldLnR5cGU9cG4udzsKICAgICAgICAgIGlmIChvW2ldLmRldHVuZSkgewogICAgICAgICAgICB0aGlzLmNobW9kW2NoXS5jb25uZWN0KG9baV0uZGV0dW5lKTsKICAgICAgICAgICAgb1tpXS5kZXR1bmUudmFsdWU9dGhpcy5iZW5kW2NoXTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBnW2ldPXRoaXMuYWN0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgcltpXT1wbi5yOwogICAgICAgIG9baV0uY29ubmVjdChnW2ldKTsgZ1tpXS5jb25uZWN0KG91dCk7CiAgICAgICAgdnBbaV09c2MqcG4udjsKICAgICAgICBpZihwbi5rKQogICAgICAgICAgdnBbaV0qPU1hdGgucG93KDIsKG4tNjApLzEyKnBuLmspOwogICAgICAgIGlmKHBuLmEpewogICAgICAgICAgZ1tpXS5nYWluLnZhbHVlPTA7CiAgICAgICAgICBnW2ldLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCx0KTsKICAgICAgICAgIGdbaV0uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh2cFtpXSx0K3BuLmEpOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgICBnW2ldLmdhaW4uc2V0VmFsdWVBdFRpbWUodnBbaV0sdCk7CiAgICAgICAgdGhpcy5fc2V0UGFyYW1UYXJnZXQoZ1tpXS5nYWluLHBuLnMqdnBbaV0sZHQscG4uZCk7CiAgICAgICAgb1tpXS5zdGFydCh0KTsKICAgICAgICBpZih0aGlzLnJoeXRobVtjaF0pewoKICAgICAgICAgIG9baV0ub25lbmRlZCA9ICgpPT57CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKG9baV0uZGV0dW5lKSB0aGlzLmNobW9kW2NoXS5kaXNjb25uZWN0KG9baV0uZGV0dW5lKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaChlKXt9CiAgICAgICAgICB9OwogICAgICAgICAgb1tpXS5zdG9wKHQrcFswXS5kKnRoaXMucmVsZWFzZVJhdGlvKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYoIXRoaXMucmh5dGhtW2NoXSkKICAgICAgICB0aGlzLm5vdGV0YWIucHVzaCh7dDp0LGU6OTk5OTksY2g6Y2gsbjpuLG86byxnOmcsdDI6dCtwbi5hLHY6dnAscjpyLGY6MH0pOwogICAgfSwKICAgIF9zZXRQYXJhbVRhcmdldDoocCx2LHQsZCk9PnsKICAgICAgaWYoZCE9MCkKICAgICAgICBwLnNldFRhcmdldEF0VGltZSh2LHQsZCk7CiAgICAgIGVsc2UKICAgICAgICBwLnNldFZhbHVlQXRUaW1lKHYsdCk7CiAgICB9LAogICAgX3JlbGVhc2VOb3RlOihudCx0KT0+ewogICAgICBpZihudC5jaCE9OSl7CiAgICAgICAgZm9yKGxldCBrPW50LmcubGVuZ3RoLTE7az49MDstLWspewogICAgICAgICAgbnQuZ1trXS5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyh0KTsKICAgICAgICAgIGlmKHQ9PW50LnQyKQogICAgICAgICAgICBudC5nW2tdLmdhaW4uc2V0VmFsdWVBdFRpbWUobnQudltrXSx0KTsKICAgICAgICAgIGVsc2UgaWYodDxudC50MikKICAgICAgICAgICAgbnQuZ1trXS5nYWluLnNldFZhbHVlQXRUaW1lKG50LnZba10qKHQtbnQudCkvKG50LnQyLW50LnQpLHQpOwogICAgICAgICAgdGhpcy5fc2V0UGFyYW1UYXJnZXQobnQuZ1trXS5nYWluLDAsdCxudC5yW2tdKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgbnQuZT10K250LnJbMF0qdGhpcy5yZWxlYXNlUmF0aW87CiAgICAgIG50LmY9MTsKICAgIH0sCiAgICBzZXRNb2R1bGF0aW9uOihjaCx2LHQpPT57CiAgICAgIHRoaXMuY2htb2RbY2hdLmdhaW4uc2V0VmFsdWVBdFRpbWUodioxMDAvMTI3LHRoaXMuX3RzQ29udih0KSk7CiAgICB9LAogICAgc2V0Q2hWb2w6KGNoLHYsdCk9PnsKICAgICAgdGhpcy52b2xbY2hdPTMqdip2LygxMjcqMTI3KTsKICAgICAgdGhpcy5jaHZvbFtjaF0uZ2Fpbi5zZXRWYWx1ZUF0VGltZSh0aGlzLnZvbFtjaF0qdGhpcy5leFtjaF0sdGhpcy5fdHNDb252KHQpKTsKICAgIH0sCiAgICBzZXRQYW46KGNoLHYsdCk9PnsKICAgICAgaWYodGhpcy5jaHBhbltjaF0pCiAgICAgICAgdGhpcy5jaHBhbltjaF0ucGFuLnNldFZhbHVlQXRUaW1lKCh2LTY0KS82NCx0aGlzLl90c0NvbnYodCkpOwogICAgfSwKICAgIHNldEV4cHJlc3Npb246KGNoLHYsdCk9PnsKICAgICAgdGhpcy5leFtjaF09dip2LygxMjcqMTI3KTsKICAgICAgdGhpcy5jaHZvbFtjaF0uZ2Fpbi5zZXRWYWx1ZUF0VGltZSh0aGlzLnZvbFtjaF0qdGhpcy5leFtjaF0sdGhpcy5fdHNDb252KHQpKTsKICAgIH0sCiAgICBzZXRTdXN0YWluOihjaCx2LHQpPT57CiAgICAgIHRoaXMuc3VzdGFpbltjaF09djsKICAgICAgdD10aGlzLl90c0NvbnYodCk7CiAgICAgIGlmKHY8NjQpewogICAgICAgIGZvcihsZXQgaT10aGlzLm5vdGV0YWIubGVuZ3RoLTE7aT49MDstLWkpewogICAgICAgICAgY29uc3QgbnQ9dGhpcy5ub3RldGFiW2ldOwogICAgICAgICAgaWYodD49bnQudCAmJiBudC5jaD09Y2ggJiYgbnQuZj09MSkKICAgICAgICAgICAgdGhpcy5fcmVsZWFzZU5vdGUobnQsdCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgYWxsU291bmRPZmY6KGNoKT0+ewogICAgICBmb3IobGV0IGk9dGhpcy5ub3RldGFiLmxlbmd0aC0xO2k+PTA7LS1pKXsKICAgICAgICBjb25zdCBudD10aGlzLm5vdGV0YWJbaV07CiAgICAgICAgaWYobnQuY2g9PWNoKXsKICAgICAgICAgIHRoaXMuX3BydW5lTm90ZShudCk7CiAgICAgICAgICB0aGlzLm5vdGV0YWIuc3BsaWNlKGksMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcmVzZXRBbGxDb250cm9sbGVyczooY2gpPT57CiAgICAgIHRoaXMuYmVuZFtjaF09MDsgdGhpcy5leFtjaF09MS4wOwogICAgICB0aGlzLnJwbmlkeFtjaF09MHgzZmZmOyB0aGlzLnN1c3RhaW5bY2hdPTA7CiAgICAgIGlmKHRoaXMuY2h2b2xbY2hdKXsKICAgICAgICB0aGlzLmNodm9sW2NoXS5nYWluLnZhbHVlPXRoaXMudm9sW2NoXSp0aGlzLmV4W2NoXTsKICAgICAgICB0aGlzLmNobW9kW2NoXS5nYWluLnZhbHVlPTA7CiAgICAgIH0KICAgIH0sCiAgICBzZXRCZW5kUmFuZ2U6KGNoLHYpPT57CiAgICAgIHRoaXMuYnJhbmdlW2NoXT12OwogICAgfSwKICAgIHNldFByb2dyYW06KGNoLHYpPT57CiAgICAgIGlmKHRoaXMuZGVidWcpCiAgICAgICAgY29uc29sZS5sb2coIlBnKCIrY2grIik9Iit2KTsKICAgICAgdGhpcy5wZ1tjaF09djsKICAgIH0sCiAgICBfdHNDb252Oih0KT0+ewogICAgICBpZih0PT11bmRlZmluZWR8fHQ8PTApewogICAgICAgIHQ9MDsKICAgICAgICBpZih0aGlzLmFjdHgpCiAgICAgICAgICB0PXRoaXMuYWN0eC5jdXJyZW50VGltZTsKICAgICAgfQogICAgICBlbHNlewogICAgICAgIGlmKHRoaXMudHNtb2RlKQogICAgICAgICAgdD10Ki4wMDEtdGhpcy50c2RpZmY7CiAgICAgIH0KICAgICAgcmV0dXJuIHQ7CiAgICB9LAogICAgc2V0QmVuZDooY2gsdix0KT0+ewogICAgICB0PXRoaXMuX3RzQ29udih0KTsKICAgICAgY29uc3QgYnI9dGhpcy5icmFuZ2VbY2hdKjEwMC8xMjc7CiAgICAgIHRoaXMuYmVuZFtjaF09KHYtODE5MikqYnIvODE5MjsKICAgICAgZm9yKGxldCBpPXRoaXMubm90ZXRhYi5sZW5ndGgtMTtpPj0wOy0taSl7CiAgICAgICAgY29uc3QgbnQ9dGhpcy5ub3RldGFiW2ldOwogICAgICAgIGlmKG50LmNoPT1jaCl7CiAgICAgICAgICBmb3IobGV0IGs9bnQuby5sZW5ndGgtMTtrPj0wOy0tayl7CiAgICAgICAgICAgIGlmKG50Lm9ba10uZnJlcXVlbmN5KQogICAgICAgICAgICAgIGlmIChudC5vW2tdLmRldHVuZSkgbnQub1trXS5kZXR1bmUuc2V0VmFsdWVBdFRpbWUodGhpcy5iZW5kW2NoXSx0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBub3RlT2ZmOihjaCxuLHQpPT57CiAgICAgIGlmKHRoaXMucmh5dGhtW2NoXSkKICAgICAgICByZXR1cm47CiAgICAgIHQ9dGhpcy5fdHNDb252KHQpOwogICAgICBmb3IobGV0IGk9dGhpcy5ub3RldGFiLmxlbmd0aC0xO2k+PTA7LS1pKXsKICAgICAgICBjb25zdCBudD10aGlzLm5vdGV0YWJbaV07CiAgICAgICAgaWYodD49bnQudCAmJiBudC5jaD09Y2ggJiYgbnQubj09biAmJiBudC5mPT0wKXsKICAgICAgICAgIG50LmY9MTsKICAgICAgICAgIGlmKHRoaXMuc3VzdGFpbltjaF08NjQpCiAgICAgICAgICAgIHRoaXMuX3JlbGVhc2VOb3RlKG50LHQpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG5vdGVPbjooY2gsbix2LHQpPT57CiAgICAgIGlmKHY9PTApewogICAgICAgIHRoaXMubm90ZU9mZihjaCxuLHQpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0PXRoaXMuX3RzQ29udih0KTsKICAgICAgaWYodGhpcy5yaHl0aG1bY2hdKXsKICAgICAgICBpZihuPj0zNSYmbjw9ODEpCiAgICAgICAgICB0aGlzLl9ub3RlKHQsY2gsbix2LHRoaXMuZHJ1bW1hcFtuLTM1XS5wKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fbm90ZSh0LGNoLG4sdix0aGlzLnByb2dyYW1bdGhpcy5wZ1tjaF1dLnApOwogICAgfSwKICAgIHNldFRzTW9kZToodHNtb2RlKT0+ewogICAgICB0aGlzLnRzbW9kZT10c21vZGU7CiAgICB9LAogICAgc2VuZDoobXNnLHQpPT57ICAgIC8qIHNlbmQgbWlkaSBtZXNzYWdlICovCiAgICAgIGNvbnN0IGNoPW1zZ1swXSYweGY7CiAgICAgIGNvbnN0IGNtZD1tc2dbMF0mfjB4ZjsKICAgICAgaWYoY21kPDB4ODB8fGNtZD49MHgxMDApCiAgICAgICAgcmV0dXJuOwogICAgICBpZih0aGlzLmF1ZGlvQ29udGV4dC5zdGF0ZT09InN1c3BlbmRlZCIpewogICAgICAgIHRoaXMuYXVkaW9Db250ZXh0LnJlc3VtZSgpOwogICAgICB9CiAgICAgIHN3aXRjaChjbWQpewogICAgICBjYXNlIDB4YjA6ICAvKiBjdGwgY2hhbmdlICovCiAgICAgICAgc3dpdGNoKG1zZ1sxXSl7CiAgICAgICAgY2FzZSAxOiAgdGhpcy5zZXRNb2R1bGF0aW9uKGNoLG1zZ1syXSx0KTsgYnJlYWs7CiAgICAgICAgY2FzZSA3OiAgdGhpcy5zZXRDaFZvbChjaCxtc2dbMl0sdCk7IGJyZWFrOwogICAgICAgIGNhc2UgMTA6IHRoaXMuc2V0UGFuKGNoLG1zZ1syXSx0KTsgYnJlYWs7CiAgICAgICAgY2FzZSAxMTogdGhpcy5zZXRFeHByZXNzaW9uKGNoLG1zZ1syXSx0KTsgYnJlYWs7CiAgICAgICAgY2FzZSA2NDogdGhpcy5zZXRTdXN0YWluKGNoLG1zZ1syXSx0KTsgYnJlYWs7CiAgICAgICAgY2FzZSA5ODogIGNhc2UgOTk6IHRoaXMucnBuaWR4W2NoXT0weDNmZmY7IGJyZWFrOyAvKiBucnBuIGxzYi9tc2IgKi8KICAgICAgICBjYXNlIDEwMDogdGhpcy5ycG5pZHhbY2hdPSh0aGlzLnJwbmlkeFtjaF0mMHgzZjgwKXxtc2dbMl07IGJyZWFrOyAvKiBycG4gbHNiICovCiAgICAgICAgY2FzZSAxMDE6IHRoaXMucnBuaWR4W2NoXT0odGhpcy5ycG5pZHhbY2hdJjB4N2YpfChtc2dbMl08PDcpOyBicmVhazsgLyogcnBuIG1zYiAqLwogICAgICAgIGNhc2UgNjogIC8qIGRhdGEgZW50cnkgbXNiICovCiAgICAgICAgICBzd2l0Y2ggKHRoaXMucnBuaWR4W2NoXSkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdGhpcy5icmFuZ2VbY2hdPShtc2dbMl08PDcpKyh0aGlzLmJyYW5nZVtjaF0mMHg3Zik7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICB0aGlzLnR1bmluZ0ZbY2hdPShtc2dbMl08PDcpKygodGhpcy50dW5pbmdGW2NoXSsweDIwMDApJjB4N2YpLTB4MjAwMDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHRoaXMudHVuaW5nQ1tjaF09bXNnWzJdLTB4NDA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDM4OiAgLyogZGF0YSBlbnRyeSBsc2IgKi8KICAgICAgICAgIHN3aXRjaCAodGhpcy5ycG5pZHhbY2hdKSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB0aGlzLmJyYW5nZVtjaF09KHRoaXMuYnJhbmdlW2NoXSYweDNmODApfG1zZ1syXTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIHRoaXMudHVuaW5nRltjaF09KCgodGhpcy50dW5pbmdGW2NoXSsweDIwMDApJjB4M2Y4MCl8bXNnWzJdKS0weDIwMDA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjogYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDEyMDogIC8qIGFsbCBzb3VuZCBvZmYgKi8KICAgICAgICBjYXNlIDEyMzogIC8qIGFsbCBub3RlcyBvZmYgKi8KICAgICAgICBjYXNlIDEyNDogY2FzZSAxMjU6IGNhc2UgMTI2OiBjYXNlIDEyNzogLyogb21uaSBvZmYvb24gbW9uby9wb2x5ICovCiAgICAgICAgICB0aGlzLmFsbFNvdW5kT2ZmKGNoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMTIxOiB0aGlzLnJlc2V0QWxsQ29udHJvbGxlcnMoY2gpOyBicmVhazsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgMHhjMDogdGhpcy5zZXRQcm9ncmFtKGNoLG1zZ1sxXSk7IGJyZWFrOwogICAgICBjYXNlIDB4ZTA6IHRoaXMuc2V0QmVuZChjaCwobXNnWzFdKyhtc2dbMl08PDcpKSx0KTsgYnJlYWs7CiAgICAgIGNhc2UgMHg5MDogdGhpcy5ub3RlT24oY2gsbXNnWzFdLG1zZ1syXSx0KTsgYnJlYWs7CiAgICAgIGNhc2UgMHg4MDogdGhpcy5ub3RlT2ZmKGNoLG1zZ1sxXSx0KTsgYnJlYWs7CiAgICAgIGNhc2UgMHhmMDoKICAgICAgICBpZiAobXNnWzBdID09IDB4ZmYpIHsKICAgICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBpZihtc2dbMF0hPTI1NCAmJiB0aGlzLmRlYnVnKXsKICAgICAgICAgIHZhciBkcz1bXTsKICAgICAgICAgIGZvcihsZXQgaWk9MDtpaTxtc2cubGVuZ3RoOysraWkpCiAgICAgICAgICAgIGRzLnB1c2gobXNnW2lpXS50b1N0cmluZygxNikpOwogICAgICAgIH0KICAgICAgICBpZiAobXNnWzBdPT0weGYwKSB7CiAgICAgICAgICBpZiAobXNnWzFdPT0weDdmICYmIG1zZ1szXT09NCkgewogICAgICAgICAgICBpZiAobXNnWzRdPT0zICYmIG1zZy5sZW5ndGggPj0gOCkgeyAvLyBNYXN0ZXIgRmluZSBUdW5pbmcKICAgICAgICAgICAgICB0aGlzLm1hc3RlclR1bmluZ0YgPSAobXNnWzZdKjB4ODAgKyBtc2dbNV0gLSA4MTkyKSAvIDgxOTI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1zZ1s0XT09NCAmJiBtc2cubGVuZ3RoID49IDgpIHsgLy8gTWFzdGVyIENvYXJzZSBUdW5pbmcKICAgICAgICAgICAgICB0aGlzLm1hc3RlclR1bmluZ0MgPSBtc2dbNl0tMHg0MDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKG1zZ1sxXT09MHg0MSAmJiBtc2dbM109PTB4NDIgJiYgbXNnWzRdPT0weDEyICYmbXNnWzVdPT0weDQwKSB7IC8vIEdTCiAgICAgICAgICAgIGlmICgobXNnWzZdJjB4ZjApPT0weDEwICYmIG1zZy5sZW5ndGg9PTExKSB7CiAgICAgICAgICAgICAgY29uc3QgYz1bOSwwLDEsMiwzLDQsNSw2LDcsOCwxMCwxMSwxMiwxMywxNCwxNV1bbXNnWzZdJjB4Zl07CiAgICAgICAgICAgICAgaWYgKG1zZ1s3XT09MHgxNSkgewogICAgICAgICAgICAgICAgdGhpcy5yaHl0aG1bY109bXNnWzhdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmIChtc2dbN10gPj0gMHg0MCAmJiBtc2dbN10gPD0gMHg0YikgeyAvLyBTY2FsZSBUdW5pbmcKICAgICAgICAgICAgICAgIHRoaXMuc2NhbGVUdW5pbmdbY11bbXNnWzddLTB4NDBdID0gKG1zZ1s4XS0weDQwKSAvIDEwMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAobXNnWzZdPT0wKSB7CiAgICAgICAgICAgICAgaWYgKG1zZ1s3XT09MCAmJiBtc2cubGVuZ3RoPT0xNCkgeyAvLyBNYXN0ZXIgVHVuaW5nCiAgICAgICAgICAgICAgICB0aGlzLm1hc3RlclR1bmluZ0YgPSAobXNnWzhdKjB4MTAwMCArIG1zZ1s5XSoweDEwMCArIG1zZ1sxMF0qMHgxMCArIG1zZ1sxMV0gLSAweDQwMCkgLyAxMDAwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmIChtc2dbN109PTUgJiYgbXNnLmxlbmd0aD09MTEpIHsgLy8gTWFzdGVyIFRyYW5zcG9zZQogICAgICAgICAgICAgICAgdGhpcy5tYXN0ZXJUdW5pbmdDID0gbXNnWzhdLTB4NDA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9LAogICAgX2NyZWF0ZVdhdmU6KHcpPT57CiAgICAgIGNvbnN0IGltYWc9bmV3IEZsb2F0MzJBcnJheSh3Lmxlbmd0aCk7CiAgICAgIGNvbnN0IHJlYWw9bmV3IEZsb2F0MzJBcnJheSh3Lmxlbmd0aCk7CiAgICAgIGZvcihsZXQgaT0xO2k8dy5sZW5ndGg7KytpKQogICAgICAgIGltYWdbaV09d1tpXTsKICAgICAgcmV0dXJuIHRoaXMuYWN0eC5jcmVhdGVQZXJpb2RpY1dhdmUocmVhbCxpbWFnKTsKICAgIH0sCiAgICBnZXRBdWRpb0NvbnRleHQ6KCk9PnsKICAgICAgcmV0dXJuIHRoaXMuYWN0eDsKICAgIH0sCiAgICBzZXRBdWRpb0NvbnRleHQ6KGFjdHgsZGVzdCk9PnsKICAgICAgdGhpcy5hdWRpb0NvbnRleHQ9dGhpcy5hY3R4PWFjdHg7CiAgICAgIHRoaXMuZGVzdD1kZXN0OwogICAgICBpZighZGVzdCkKICAgICAgICB0aGlzLmRlc3Q9YWN0eC5kZXN0aW5hdGlvbjsKICAgICAgdGhpcy50c2RpZmY9cGVyZm9ybWFuY2Uubm93KCkqLjAwMS10aGlzLmFjdHguY3VycmVudFRpbWU7CiAgICAgIGlmKHRoaXMuZGVidWcpCiAgICAgICAgY29uc29sZS5sb2coIlRTRGlmZjoiK3RoaXMudHNkaWZmKTsKICAgICAgdGhpcy5vdXQ9dGhpcy5hY3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgdGhpcy5jb21wPXRoaXMuYWN0eC5jcmVhdGVEeW5hbWljc0NvbXByZXNzb3IoKTsKICAgICAgdmFyIGJsZW49dGhpcy5hY3R4LnNhbXBsZVJhdGUqLjV8MDsKICAgICAgdGhpcy5jb252QnVmPXRoaXMuYWN0eC5jcmVhdGVCdWZmZXIoMixibGVuLHRoaXMuYWN0eC5zYW1wbGVSYXRlKTsKICAgICAgdGhpcy5ub2lzZUJ1Zj17fTsKICAgICAgdGhpcy5ub2lzZUJ1Zi5uMD10aGlzLmFjdHguY3JlYXRlQnVmZmVyKDEsYmxlbix0aGlzLmFjdHguc2FtcGxlUmF0ZSk7CiAgICAgIHRoaXMubm9pc2VCdWYubjE9dGhpcy5hY3R4LmNyZWF0ZUJ1ZmZlcigxLGJsZW4sdGhpcy5hY3R4LnNhbXBsZVJhdGUpOwogICAgICB2YXIgZDE9dGhpcy5jb252QnVmLmdldENoYW5uZWxEYXRhKDApOwogICAgICB2YXIgZDI9dGhpcy5jb252QnVmLmdldENoYW5uZWxEYXRhKDEpOwogICAgICB2YXIgZG49dGhpcy5ub2lzZUJ1Zi5uMC5nZXRDaGFubmVsRGF0YSgwKTsKICAgICAgdmFyIGRyPXRoaXMubm9pc2VCdWYubjEuZ2V0Q2hhbm5lbERhdGEoMCk7CiAgICAgIGZvcihsZXQgaT0wO2k8YmxlbjsrK2kpewogICAgICAgIGlmKGkvYmxlbjxNYXRoLnJhbmRvbSgpKXsKICAgICAgICAgIGQxW2ldPU1hdGguZXhwKC0zKmkvYmxlbikqKE1hdGgucmFuZG9tKCktLjUpKi41OwogICAgICAgICAgZDJbaV09TWF0aC5leHAoLTMqaS9ibGVuKSooTWF0aC5yYW5kb20oKS0uNSkqLjU7CiAgICAgICAgfQogICAgICAgIGRuW2ldPU1hdGgucmFuZG9tKCkqMi0xOwogICAgICB9CiAgICAgIGZvcihsZXQgamo9MDtqajw2NDsrK2pqKXsKICAgICAgICBjb25zdCByMT1NYXRoLnJhbmRvbSgpKjEwKzE7CiAgICAgICAgY29uc3QgcjI9TWF0aC5yYW5kb20oKSoxMCsxOwogICAgICAgIGZvcihsZXQgaT0wO2k8YmxlbjsrK2kpewogICAgICAgICAgdmFyIGRkPU1hdGguc2luKChpL2JsZW4pKjIqTWF0aC5QSSo0NDAqcjEpKk1hdGguc2luKChpL2JsZW4pKjIqTWF0aC5QSSo0NDAqcjIpOwogICAgICAgICAgZHJbaV0rPWRkLzg7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmKHRoaXMudXNlUmV2ZXJiKXsKICAgICAgICB0aGlzLmNvbnY9dGhpcy5hY3R4LmNyZWF0ZUNvbnZvbHZlcigpOwogICAgICAgIHRoaXMuY29udi5idWZmZXI9dGhpcy5jb252QnVmOwogICAgICAgIHRoaXMucmV2PXRoaXMuYWN0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgdGhpcy5yZXYuZ2Fpbi52YWx1ZT10aGlzLnJldmVyYkxldjsKICAgICAgICB0aGlzLm91dC5jb25uZWN0KHRoaXMuY29udik7CiAgICAgICAgdGhpcy5jb252LmNvbm5lY3QodGhpcy5yZXYpOwogICAgICAgIHRoaXMucmV2LmNvbm5lY3QodGhpcy5jb21wKTsKICAgICAgfQogICAgICB0aGlzLnNldE1hc3RlclZvbCgpOwogICAgICB0aGlzLm91dC5jb25uZWN0KHRoaXMuY29tcCk7CiAgICAgIHRoaXMuY29tcC5jb25uZWN0KHRoaXMuZGVzdCk7CiAgICAgIHRoaXMuY2h2b2w9W107IHRoaXMuY2htb2Q9W107IHRoaXMuY2hwYW49W107CiAgICAgIHRoaXMud2F2ZT17Inc5OTk5Ijp0aGlzLl9jcmVhdGVXYXZlKCJ3OTk5OSIpfTsKICAgICAgdGhpcy5sZm89dGhpcy5hY3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgdGhpcy5sZm8uZnJlcXVlbmN5LnZhbHVlPTU7CiAgICAgIHRoaXMubGZvLnN0YXJ0KDApOwogICAgICBmb3IobGV0IGk9MDtpPDE2OysraSl7CiAgICAgICAgdGhpcy5jaHZvbFtpXT10aGlzLmFjdHguY3JlYXRlR2FpbigpOwogICAgICAgIGlmKHRoaXMuYWN0eC5jcmVhdGVTdGVyZW9QYW5uZXIpewogICAgICAgICAgdGhpcy5jaHBhbltpXT10aGlzLmFjdHguY3JlYXRlU3RlcmVvUGFubmVyKCk7CiAgICAgICAgICB0aGlzLmNodm9sW2ldLmNvbm5lY3QodGhpcy5jaHBhbltpXSk7CiAgICAgICAgICB0aGlzLmNocGFuW2ldLmNvbm5lY3QodGhpcy5vdXQpOwogICAgICAgIH0KICAgICAgICBlbHNlewogICAgICAgICAgdGhpcy5jaHBhbltpXT1udWxsOwogICAgICAgICAgdGhpcy5jaHZvbFtpXS5jb25uZWN0KHRoaXMub3V0KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5jaG1vZFtpXT10aGlzLmFjdHguY3JlYXRlR2FpbigpOwogICAgICAgIHRoaXMubGZvLmNvbm5lY3QodGhpcy5jaG1vZFtpXSk7CiAgICAgICAgdGhpcy5wZ1tpXT0wOwogICAgICAgIHRoaXMucmVzZXRBbGxDb250cm9sbGVycyhpKTsKICAgICAgfQogICAgICB0aGlzLnNldFJldmVyYkxldigpOwogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIHRoaXMuc2VuZChbMHg5MCw2MCwxXSk7CiAgICAgIHRoaXMuc2VuZChbMHg5MCw2MCwwXSk7CiAgICB9LAogIH0pOwp9CmlmKHdpbmRvdyAmJiB3aW5kb3cuY3VzdG9tRWxlbWVudHMpewogIGNsYXNzIFdlYkF1ZGlvVGlueVN5bnRoRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHsKICAgIGNvbnN0cnVjdG9yKCl7CiAgICAgIHN1cGVyKCk7CiAgICB9CiAgICBjb25uZWN0ZWRDYWxsYmFjaygpewogICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgZGl2LmlubmVySFRNTD0KICBgPGNhbnZhcwogICAgaWQ9J3dhLWNhbnZhcycgd2lkdGg9JzMwMCcgaGVpZ2h0PSczMicKICAgIHRvdWNoLWFjdGlvbj0nbm9uZScgdGFiaW5kZXg9JzAnCiAgICBzdHlsZT0nCiAgICAgIHBvc2l0aW9uOnJlbGF0aXZlOwogICAgICBtYXJnaW46MDsKICAgICAgYm9yZGVyOm5vbmU7CiAgICAgIHdpZHRoOjMwMHB4OwogICAgICBoZWlnaHQ6MzJweDsKICAgICcKICA+PC9jYW52YXM+CiAgPGRpdiBpZD0nd2EtbG9nbycKICAgIHN0eWxlPScKICAgICAgZGlzcGxheTpub25lOwogICAgICBwb3NpdGlvbjphYnNvbHV0ZTsKICAgICAgdG9wOjVweDsKICAgICAgbGVmdDo1cHg7CiAgICAgIGNvbG9yOiNmZmY7CiAgICAgIGZvbnQtc2l6ZTo4cHg7CiAgICAgIGJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjUpOwogICAgJwogID5UaW55U3ludGg8L2Rpdj5gOwoKICAgICAgdGhpcy5nZXRBdHRyID0gKG4sZGVmKT0+ewogICAgICAgIGxldCB2PXRoaXMuZ2V0QXR0cmlidXRlKG4pOwogICAgICAgIGlmKHY9PSIifHx2PT1udWxsKSByZXR1cm4gZGVmOwogICAgICAgIHN3aXRjaCh0eXBlb2YoZGVmKSl7CiAgICAgICAgY2FzZSAibnVtYmVyIjoKICAgICAgICAgIGlmKHY9PSJ0cnVlIikgcmV0dXJuIDE7CiAgICAgICAgICB2PSt2OwogICAgICAgICAgaWYoaXNOYU4odikpIHJldHVybiAwOwogICAgICAgICAgcmV0dXJuIHY7CiAgICAgICAgfQogICAgICAgIHJldHVybiB2OwogICAgICB9OwoKICAgICAgdGhpcy5jYW52YXMgPSBkaXYuY2hpbGRyZW5bMF07CiAgICAgIHRoaXMuYXBwZW5kQ2hpbGQoZGl2KTsKICAgICAgV2ViQXVkaW9UaW55U3ludGhDb3JlLmJpbmQodGhpcykodGhpcyk7CiAgICAgIGNvbnN0IHBsaXN0PXRoaXMucHJvcGVydGllczsKICAgICAgZm9yKGxldCBrIGluIHBsaXN0KXsKICAgICAgICBjb25zdCB2ID0gcGxpc3Rba107CiAgICAgICAgaWYodi5vYnNlcnZlcil7CiAgICAgICAgICB0aGlzWyJfIitrXSA9IHYudmFsdWU7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgaywgewogICAgICAgICAgICBnZXQ6KCk9PntyZXR1cm4gdGhpc1siXyIra119LAogICAgICAgICAgICBzZXQ6KHZhbCk9PnsKICAgICAgICAgICAgICB0aGlzWyJfIitrXSA9IHZhbDsKICAgICAgICAgICAgICB0aGlzW3Yub2JzZXJ2ZXJdKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBlbHNlewogICAgICAgICAgdGhpc1trXT12OwogICAgICAgIH0KICAgICAgfQogICAgICBmb3IobGV0IGsgaW4gcGxpc3QpewogICAgICAgIGNvbnN0IHYgPSBwbGlzdFtrXTsKICAgICAgICB0aGlzW2tdID0gdGhpcy5nZXRBdHRyKGssdi52YWx1ZSk7CiAgICAgIH0KICAgICAgdGhpcy5zZXRRdWFsaXR5KDEpOwogICAgICB0aGlzLmluaXQoKTsKICAgICAgdGhpcy5fZ3VpSW5pdC5iaW5kKHRoaXMpKCk7CiAgICAgIHNldEludGVydmFsKHRoaXMuX2d1aVVwZGF0ZS5iaW5kKHRoaXMpLDEwMCk7CiAgICB9CiAgfQogIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3dlYmF1ZGlvLXRpbnlzeW50aCcsIFdlYkF1ZGlvVGlueVN5bnRoRWxlbWVudCk7Cn0KCmNsYXNzIFdlYkF1ZGlvVGlueVN5bnRoIHsKICBjb25zdHJ1Y3RvcihvcHQpewogICAgV2ViQXVkaW9UaW55U3ludGhDb3JlLmJpbmQodGhpcykodGhpcyk7CiAgICBmb3IobGV0IGsgaW4gdGhpcy5wcm9wZXJ0aWVzKXsKICAgICAgdGhpc1trXT10aGlzLnByb3BlcnRpZXNba10udmFsdWU7CiAgICB9CiAgICB0aGlzLnNldFF1YWxpdHkoMSk7CiAgICBpZihvcHQpewogICAgICBpZihvcHQudXNlUmV2ZXJiIT11bmRlZmluZWQpCiAgICAgICAgdGhpcy51c2VSZXZlcmI9b3B0LnVzZVJldmVyYjsKICAgICAgaWYob3B0LnF1YWxpdHkhPXVuZGVmaW5lZCkKICAgICAgICB0aGlzLnNldFF1YWxpdHkob3B0LnF1YWxpdHkpOwogICAgICBpZihvcHQudm9pY2VzIT11bmRlZmluZWQpCiAgICAgICAgdGhpcy5zZXRWb2ljZXMob3B0LnZvaWNlcyk7CiAgICB9CiAgICB0aGlzLmluaXQoKTsKICB9Cn0KCmlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyl7CiAgbW9kdWxlLmV4cG9ydHMgPSBXZWJBdWRpb1RpbnlTeW50aDsKfQplbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCl7CiAgICBkZWZpbmUoZnVuY3Rpb24oKXsKICAgICAgcmV0dXJuIFdlYkF1ZGlvVGlueVN5bnRoOwogICAgfSk7Cn0KZWxzZXsKICB3aW5kb3cuV2ViQXVkaW9UaW55U3ludGggPSBXZWJBdWRpb1RpbnlTeW50aDsKfQoKfSkodGhpcyk7PC9zY3JpcHQ+CjxzY3JpcHQ+CgpmdW5jdGlvbiBsb2FkTWlkaVVybCgpewogIHN5bnRoLmxvYWRNSURJVXJsKCd3cy5taWQnKTsKfQpmdW5jdGlvbiBsb2FkTWlkaShmaWxlcyl7CiAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgcmVhZGVyLm9ubG9hZD0oZSk9PnsKICAgIHN5bnRoLmxvYWRNSURJKHJlYWRlci5yZXN1bHQpOwogIH0KICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZXNbMF0pOwp9CmZ1bmN0aW9uIHBsYXlNaWRpKCl7CiAgc3ludGgucGxheU1JREkoKTsKfQpmdW5jdGlvbiBzdG9wTWlkaSgpIHsKICAgIHN5bnRoLnN0b3BNSURJKCk7CiAgICBzdG9wVGltZVVwZGF0ZXMoKTsKICAgIHVwZGF0ZVRyYWNrTGlzdCgpOyAvLyBVcGRhdGUgc3RhdHVzIGluZGljYXRvcgp9CgpmdW5jdGlvbiBTZXRQcm9ncmFtKHApewogIHN5bnRoLnNlbmQoWzB4YzAscF0pOwp9Ci8vIFVwZGF0ZSBkZSBpbml0IGZ1bmN0aWUgb20gdGl0ZWxiYWxrIHRlIGluaXRpYWxpc2VyZW4KCi8vIFVwZGF0ZSBJbml0IGZ1bmN0aW9uIHRvIHNldCB1cCBpbnRlcnZhbCBmb3IgdXBkYXRpbmcgdGltZXMKCgoKCmZ1bmN0aW9uIFRlc3QoKXsKICB2YXIgbz1zeW50aC5nZXRBdWRpb0NvbnRleHQoKS5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgby5jb25uZWN0KHN5bnRoLmdldEF1ZGlvQ29udGV4dCgpLmRlc3RpbmF0aW9uKTsKICBvLnN0YXJ0KDApOwogIG8uc3RvcChzeW50aC5nZXRBdWRpb0NvbnRleHQoKS5jdXJyZW50VGltZSsxKTsKICBjb25zb2xlLmxvZyhzeW50aCkKfQoKCgoKCgpsZXQgcGxheWxpc3QgPSBbXTsKbGV0IGN1cnJlbnRJbmRleCA9IDA7CmxldCBkdXJhdGlvbkNhY2hlID0ge307IC8vIFNpbXBsZSBjYWNoZSBmb3IgZHVyYXRpb25zCgovLyBQYXMgZGUgbG9hZE11bHRpcGxlRmlsZXMgZnVuY3RpZSBhYW4KZnVuY3Rpb24gbG9hZE11bHRpcGxlRmlsZXMoZmlsZXMpIHsKICAgIHBsYXlsaXN0ID0gQXJyYXkuZnJvbShmaWxlcyk7CiAgICBjdXJyZW50SW5kZXggPSAwOwogICAgZHVyYXRpb25DYWNoZSA9IHt9OyAvLyBDbGVhciBjYWNoZQogICAgCiAgICAvLyBSZXNldCB0aXRlbGJhbGsgbmFhciBiYXNpcyB0ZWtzdAogICAgZG9jdW1lbnQudGl0bGUgPSAiUGFyYSBUYXRiaW4gTWVkaWEgUGxheWVyIERVQSdTIjsKICAgIAogICAgdXBkYXRlVHJhY2tMaXN0KCk7CiAgICAKICAgIGlmIChwbGF5bGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgc3ludGguc3RvcE1JREkoKTsKICAgICAgICBzdG9wVGltZVVwZGF0ZXMoKTsKICAgICAgICBsb2FkQW5kUGxheShjdXJyZW50SW5kZXgpOwogICAgICAgIAogICAgICAgIC8vIFN0YXJ0IGNhY2hpbmcgZHVyYXRpb25zIGluIHRoZSBiYWNrZ3JvdW5kCiAgICAgICAgY2FjaGVEdXJhdGlvbnNJbkJhY2tncm91bmQoKTsKICAgIH0KfQoKLy8gQ2FjaGUgZHVyYXRpb25zIGluIGJhY2tncm91bmQgd2l0aG91dCBibG9ja2luZwpmdW5jdGlvbiBjYWNoZUR1cmF0aW9uc0luQmFja2dyb3VuZCgpIHsKICAgIHBsYXlsaXN0LmZvckVhY2goKGZpbGUsIGluZGV4KSA9PiB7CiAgICAgICAgLy8gRG9uJ3QgY2FjaGUgaWYgYWxyZWFkeSBjYWNoZWQgb3IgY3VycmVudGx5IHBsYXlpbmcKICAgICAgICBpZiAoZHVyYXRpb25DYWNoZVtmaWxlLm5hbWVdIHx8IGluZGV4ID09PSBjdXJyZW50SW5kZXgpIHJldHVybjsKICAgICAgICAKICAgICAgICAvLyBVc2Ugc2V0VGltZW91dCB0byBzcHJlYWQgdGhlIGNhbGN1bGF0aW9ucwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBjYWxjdWxhdGVBbmRDYWNoZUR1cmF0aW9uKGZpbGUsIGluZGV4KTsKICAgICAgICB9LCBpbmRleCAqIDUwMCk7IC8vIFN0YWdnZXIgY2FsY3VsYXRpb25zIGJ5IDUwMG1zIGVhY2gKICAgIH0pOwp9CgovLyBDYWxjdWxhdGUgYW5kIGNhY2hlIGR1cmF0aW9uIGZvciBhIHNpbmdsZSBmaWxlCmZ1bmN0aW9uIGNhbGN1bGF0ZUFuZENhY2hlRHVyYXRpb24oZmlsZSwgaW5kZXgpIHsKICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHsKICAgICAgICAvLyBDcmVhdGUgYSB0ZW1wb3Jhcnkgc3ludGggaW5zdGFuY2UgdG8gcGFyc2UgdGhlIE1JREkKICAgICAgICBjb25zdCB0ZW1wU3ludGggPSBuZXcgV2ViQXVkaW9UaW55U3ludGgoe3ZvaWNlczogNjQsIHVzZVJldmVyYjogMH0pOwogICAgICAgIAogICAgICAgIHRlbXBTeW50aC5yZWFkeSgpLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0ZW1wU3ludGgubG9hZE1JREkoZS50YXJnZXQucmVzdWx0KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFdhaXQgYSBiaXQgZm9yIHRoZSBNSURJIHRvIGxvYWQKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXMgPSB0ZW1wU3ludGguZ2V0UGxheVN0YXR1cygpOwogICAgICAgICAgICAgICAgaWYgKHN0YXR1cy5tYXhUaWNrID4gMCkgewogICAgICAgICAgICAgICAgICAgIC8vIENhY2hlIHRoZSBkdXJhdGlvbgogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uQ2FjaGVbZmlsZS5uYW1lXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgbWF4VGljazogc3RhdHVzLm1heFRpY2ssCiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBzeW50aC50b1RpbWUoc3RhdHVzLm1heFRpY2spCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRyYWNrIGxpc3QgaWYgdGhpcyB0cmFjayBpcyB2aXNpYmxlCiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVHJhY2tMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYENhY2hlZCBkdXJhdGlvbiBmb3IgJHtmaWxlLm5hbWV9OiAke2R1cmF0aW9uQ2FjaGVbZmlsZS5uYW1lXS5kdXJhdGlvbn1gKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAKICAgICAgICAgICAgICAgIHRlbXBTeW50aC5zdG9wTUlESSgpOwogICAgICAgICAgICB9LCAxMDApOwogICAgICAgIH0pOwogICAgfTsKICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsKfQoKLy8gUGFzIG9vayBkZSBsb2FkQW5kUGxheSBmdW5jdGllIGFhbiBvbSBkZSBzdGF0dXMgdGUgdXBkYXRlbgovLyBVcGRhdGUgZGUgbG9hZEFuZFBsYXkgZnVuY3RpZSBvbSBvb2sgZGUgdGl0ZWxiYWxrIGJpaiB0ZSB3ZXJrZW4KCi8vIFBhcyBvb2sgZGUgbG9hZEFuZFBsYXkgZnVuY3RpZSBhYW4KZnVuY3Rpb24gbG9hZEFuZFBsYXkoaW5kZXgpIHsKICAgIGlmIChpbmRleCA+PSBwbGF5bGlzdC5sZW5ndGgpIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzJykuaW5uZXJUZXh0ID0gIlBsYXlsaXN0IGNvbXBsZXRlZCI7CiAgICAgICAgaWYgKHByb2dyZXNzSW50ZXJ2YWwpIGNsZWFySW50ZXJ2YWwocHJvZ3Jlc3NJbnRlcnZhbCk7CiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSAiUGFyYSBUYXRiaW4gTWVkaWEgUGxheWVyIERVQSdTIjsKICAgICAgICAvLyBDbGVhciBzZWxlY3Rpb24KICAgICAgICBjdXJyZW50SW5kZXggPSAtMTsKICAgICAgICB1cGRhdGVUcmFja0xpc3QoKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIC8vIEp1c3QgdXNlIGhhbmRsZVRyYWNrQ2xpY2sgZm9yIGNvbnNpc3RlbmN5CiAgICBoYW5kbGVUcmFja0NsaWNrKGluZGV4KTsKfQovLyBGdW5jdGllIG9tIHRpdGVsYmFsayBiaWogdGUgd2Vya2VuCmZ1bmN0aW9uIHVwZGF0ZVRpdGxlQmFyKGZpbGVuYW1lLCB0cmFja051bWJlcikgewogICAgY29uc3QgdGl0bGViYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd21wX3RpdGxlYmFyX3RleHQnKTsKICAgIGlmICh0aXRsZWJhcikgewogICAgICAgIC8vIFZlcndpamRlciBleHRlbnNpZSB2b29yIGVlbiBzY2hvbmVyZSB3ZWVyZ2F2ZQogICAgICAgIGNvbnN0IGNsZWFuTmFtZSA9IGZpbGVuYW1lLnJlcGxhY2UoL1wuKG1pZHxtaWRpKSQvaSwgJycpOwogICAgICAgIHRpdGxlYmFyLnRleHRDb250ZW50ID0gYFBhcmEgVGF0YmluIE1lZGlhIFBsYXllciBEVUEnUyAtIFRyYWNrICR7dHJhY2tOdW1iZXJ9OiAke2NsZWFuTmFtZX1gOwogICAgfQp9CgoKCi8vIFZvZWcgb29rIGVlbiBmdW5jdGllIHRvZSBvbSB0ZSBzdG9wcGVuIG1ldCB1cGRhdGVzCmZ1bmN0aW9uIHN0b3BUaW1lVXBkYXRlcygpIHsKICAgIGlmIChwcm9ncmVzc0ludGVydmFsKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbChwcm9ncmVzc0ludGVydmFsKTsKICAgICAgICBwcm9ncmVzc0ludGVydmFsID0gbnVsbDsKICAgIH0KfQoKCgovLyBGdW5jdGlvbiB0byBsb2FkIGEgc3BlY2lmaWMgZmlsZSBmcm9tIHRoZSBwbGF5bGlzdCBhbmQgcGxheSBpdApmdW5jdGlvbiBsb2FkQW5kUGxheWRkKGluZGV4KSB7CiAgICBpZiAoaW5kZXggPj0gcGxheWxpc3QubGVuZ3RoKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1cycpLmlubmVyVGV4dCA9ICJGaW5pc2hlZCBQbGF5bGlzdCI7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IGZpbGUgPSBwbGF5bGlzdFtpbmRleF07CiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgcmVhZGVyLm9ubG9hZCA9IChlKSA9PiB7CiAgICAgICAgLy8gTG9hZCB0aGUgTUlESSBkYXRhIGludG8gdGhlIHN5bnRoCiAgICAgICAgc3ludGgubG9hZE1JREkoZS50YXJnZXQucmVzdWx0KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzJykuaW5uZXJIVE1MID0gIlBsYXlpbmc6ICIgKyBmaWxlLm5hbWU7CgogICAgICAgIC8vIFN0YXJ0IHBsYXliYWNrCiAgICAgICAgc3ludGgucGxheU1JREkoKTsKCiAgICAgICAgLy8gT25lLXRpbWUgbGlzdGVuZXIgdG8ganVtcCB0byB0aGUgbmV4dCBmaWxlIHdoZW4gdGhpcyBvbmUgZmluaXNoZXMKICAgICAgICAvLyBOb3RlOiBDaGVjayBpZiB5b3VyIHN5bnRoIGNvcmUgdHJpZ2dlcnMgJ2VuZGVkJyBvbiB0aGUgc3ludGggb2JqZWN0CiAgICAgICAgc3ludGgub25lbmRlZCA9ICgpID0+IHsKICAgICAgICAgICAgY3VycmVudEluZGV4Kys7CiAgICAgICAgICAgIGxvYWRBbmRQbGF5KGN1cnJlbnRJbmRleCk7CiAgICAgICAgfTsKICAgIH07CiAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSk7Cn0KCi8vIFVwZGF0ZSB5b3VyIHBsYXkgYnV0dG9uIHRvIHVzZSB0aGUgcGxheWxpc3QgbG9naWMgaWYgbmVlZGVkCi8vIFVwZGF0ZSBvb2sgcGxheSBlbiBzdG9wIGZ1bmN0aWVzCmZ1bmN0aW9uIHBsYXlNaWRpKCkgewogICAgaWYgKHBsYXlsaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICBzeW50aC5wbGF5TUlESSgpOwogICAgICAgIHN0YXJ0VGltZVVwZGF0ZXMoKTsKICAgICAgICB1cGRhdGVUcmFja0xpc3QoKTsgLy8gVXBkYXRlIHN0YXR1cyBpbmRpY2F0b3IKICAgIH0KfQoKCmxldCBtZWRpYVJlY29yZGVyOwpsZXQgYXVkaW9DaHVua3MgPSBbXTsKCmFzeW5jIGZ1bmN0aW9uIGV4cG9ydFBsYXlsaXN0VG9XYXYoKSB7CiAgICBpZiAocGxheWxpc3QubGVuZ3RoID09PSAwKSB7CiAgICAgICAgYWxlcnQoIlVwbG9hZCBlZXJzdCB3YXQgTUlESSBiZXN0YW5kZW4hIik7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIDEuIFNldHVwIGRlIEF1ZGlvIERlc3RpbmF0aW9uIG9tIG9wIHRlIG5lbWVuCiAgICBjb25zdCBzdHJlYW1EZXN0ID0gc3ludGguY3R4LmNyZWF0ZU1lZGlhU3RyZWFtRGVzdGluYXRpb24oKTsKICAgIHN5bnRoLm91dC5jb25uZWN0KHN0cmVhbURlc3QpOyAvLyBWZXJiaW5kIGRlIHN5bnRoLW91dHB1dCBtZXQgZGUgcmVjb3JkZXIKCiAgICAvLyBEZSBhdWRpbyBtb2V0IG9vayBub2cgbmFhciBkZSBzcGVha2VycywgYW5kZXJzIGhvb3IgamUgbmlldHMgdGlqZGVucyBvcG5hbWUKICAgIHN5bnRoLm91dC5jb25uZWN0KHN5bnRoLmN0eC5kZXN0aW5hdGlvbik7CgogICAgbWVkaWFSZWNvcmRlciA9IG5ldyBNZWRpYVJlY29yZGVyKHN0cmVhbURlc3Quc3RyZWFtKTsKICAgIGF1ZGlvQ2h1bmtzID0gW107CgogICAgbWVkaWFSZWNvcmRlci5vbmRhdGFhdmFpbGFibGUgPSAoZXZlbnQpID0+IHsKICAgICAgICBpZiAoZXZlbnQuZGF0YS5zaXplID4gMCkgYXVkaW9DaHVua3MucHVzaChldmVudC5kYXRhKTsKICAgIH07CgogICAgbWVkaWFSZWNvcmRlci5vbnN0b3AgPSAoKSA9PiB7CiAgICAgICAgY29uc3QgYXVkaW9CbG9iID0gbmV3IEJsb2IoYXVkaW9DaHVua3MsIHsgdHlwZTogJ2F1ZGlvL3dhdicgfSk7CiAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChhdWRpb0Jsb2IpOwogICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgIGEuZG93bmxvYWQgPSAicGxheWxpc3Rfb3BuYW1lLndhdiI7CiAgICAgICAgYS5jbGljaygpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0dXMnKS5pbm5lclRleHQgPSAiRXhwb3J0IHZvbHRvb2lkISI7CiAgICB9OwoKICAgIC8vIDIuIFN0YXJ0IGRlIHBsYXlsaXN0IHZhbmFmIGhldCBiZWdpbgogICAgY3VycmVudEluZGV4ID0gMDsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0dXMnKS5pbm5lclRleHQgPSAiQWFuIGhldCBvcG5lbWVuLi4uIChwbGF5bGlzdCBzcGVlbHQgYWYpIjsKICAgIG1lZGlhUmVjb3JkZXIuc3RhcnQoKTsKCiAgICAvLyBPdmVyc2NocmlqZiBkZSAnb25lbmRlZCcgdGlqZGVsaWprIG9tIHRlIHdldGVuIHdhbm5lZXIgd2UgbW9ldGVuIHN0b3BwZW4KICAgIGNvbnN0IG9yaWdpbmFsT25FbmRlZCA9IHN5bnRoLm9uZW5kZWQ7CgogICAgZnVuY3Rpb24gcGxheUFuZFJlY29yZChpbmRleCkgewogICAgICAgIGlmIChpbmRleCA+PSBwbGF5bGlzdC5sZW5ndGgpIHsKICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5zdG9wKCk7IC8vIFN0b3AgZGUgb3BuYW1lIGFscyBkZSBsaWpzdCBrbGFhciBpcwogICAgICAgICAgICBzeW50aC5vbmVuZGVkID0gb3JpZ2luYWxPbkVuZGVkOyAvLyBIZXJzdGVsIG9yaWdpbmVsZSBmdW5jdGllCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGNvbnN0IGZpbGUgPSBwbGF5bGlzdFtpbmRleF07CiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHsKICAgICAgICAgICAgc3ludGgubG9hZE1JREkoZS50YXJnZXQucmVzdWx0KTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1cycpLmlubmVyVGV4dCA9ICJPcG5lbWVuOiAiICsgZmlsZS5uYW1lOwogICAgICAgICAgICBzeW50aC5wbGF5TUlESSgpOwoKICAgICAgICAgICAgc3ludGgub25lbmRlZCA9ICgpID0+IHsKICAgICAgICAgICAgICAgIHBsYXlBbmRSZWNvcmQoaW5kZXggKyAxKTsKICAgICAgICAgICAgfTsKICAgICAgICB9OwogICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsKICAgIH0KCiAgICBwbGF5QW5kUmVjb3JkKDApOwp9Ci8vIEhlbHBlciBmdW5jdGllIG9tIGRlIFdBVi1zdHJ1Y3R1dXIgdGUgYm91d2VuCmZ1bmN0aW9uIGF1ZGlvQnVmZmVyVG9XYXYoYnVmZmVyKSB7CiAgICBjb25zdCBudW1DaGFubmVscyA9IGJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzOwogICAgY29uc3Qgc2FtcGxlUmF0ZSA9IGJ1ZmZlci5zYW1wbGVSYXRlOwogICAgY29uc3QgZm9ybWF0ID0gMTsgLy8gUENNCiAgICBjb25zdCBiaXREZXB0aCA9IDE2OwoKICAgIGNvbnN0IGJ5dGVzUGVyU2FtcGxlID0gYml0RGVwdGggLyA4OwogICAgY29uc3QgYmxvY2tBbGlnbiA9IG51bUNoYW5uZWxzICogYnl0ZXNQZXJTYW1wbGU7CgogICAgY29uc3QgZGF0YUxlbiA9IGJ1ZmZlci5sZW5ndGggKiBibG9ja0FsaWduOwogICAgY29uc3QgYnVmZmVyTGVuID0gNDQgKyBkYXRhTGVuOwogICAgY29uc3QgYXJyYXlCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoYnVmZmVyTGVuKTsKICAgIGNvbnN0IHZpZXcgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIpOwoKICAgIC8qIFJJRkYgaWRlbnRpZmllciAqLwogICAgd3JpdGVTdHJpbmcodmlldywgMCwgJ1JJRkYnKTsKICAgIC8qIFJJRkYgY2h1bmsgbGVuZ3RoICovCiAgICB2aWV3LnNldFVpbnQzMig0LCAzNiArIGRhdGFMZW4sIHRydWUpOwogICAgLyogUklGRiB0eXBlICovCiAgICB3cml0ZVN0cmluZyh2aWV3LCA4LCAnV0FWRScpOwogICAgLyogZm9ybWF0IGNodW5rIGlkZW50aWZpZXIgKi8KICAgIHdyaXRlU3RyaW5nKHZpZXcsIDEyLCAnZm10ICcpOwogICAgLyogZm9ybWF0IGNodW5rIGxlbmd0aCAqLwogICAgdmlldy5zZXRVaW50MzIoMTYsIDE2LCB0cnVlKTsKICAgIC8qIHNhbXBsZSBmb3JtYXQgKHJhdykgKi8KICAgIHZpZXcuc2V0VWludDE2KDIwLCBmb3JtYXQsIHRydWUpOwogICAgLyogY2hhbm5lbCBjb3VudCAqLwogICAgdmlldy5zZXRVaW50MTYoMjIsIG51bUNoYW5uZWxzLCB0cnVlKTsKICAgIC8qIHNhbXBsZSByYXRlICovCiAgICB2aWV3LnNldFVpbnQzMigyNCwgc2FtcGxlUmF0ZSwgdHJ1ZSk7CiAgICAvKiBieXRlIHJhdGUgKHNhbXBsZSByYXRlICogYmxvY2sgYWxpZ24pICovCiAgICB2aWV3LnNldFVpbnQzMigyOCwgc2FtcGxlUmF0ZSAqIGJsb2NrQWxpZ24sIHRydWUpOwogICAgLyogYmxvY2sgYWxpZ24gKGNoYW5uZWwgY291bnQgKiBieXRlcyBwZXIgc2FtcGxlKSAqLwogICAgdmlldy5zZXRVaW50MTYoMzIsIGJsb2NrQWxpZ24sIHRydWUpOwogICAgLyogYml0cyBwZXIgc2FtcGxlICovCiAgICB2aWV3LnNldFVpbnQxNigzNCwgYml0RGVwdGgsIHRydWUpOwogICAgLyogZGF0YSBjaHVuayBpZGVudGlmaWVyICovCiAgICB3cml0ZVN0cmluZyh2aWV3LCAzNiwgJ2RhdGEnKTsKICAgIC8qIGRhdGEgY2h1bmsgbGVuZ3RoICovCiAgICB2aWV3LnNldFVpbnQzMig0MCwgZGF0YUxlbiwgdHJ1ZSk7CgogICAgLy8gU2NocmlqZiBkZSBhdWRpbyBzYW1wbGVzCiAgICBsZXQgb2Zmc2V0ID0gNDQ7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGNoYW5uZWwgPSAwOyBjaGFubmVsIDwgbnVtQ2hhbm5lbHM7IGNoYW5uZWwrKykgewogICAgICAgICAgICBsZXQgc2FtcGxlID0gYnVmZmVyLmdldENoYW5uZWxEYXRhKGNoYW5uZWwpW2ldOwogICAgICAgICAgICBzYW1wbGUgPSBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgc2FtcGxlKSk7IC8vIENsaXBwaW5nCiAgICAgICAgICAgIHZpZXcuc2V0SW50MTYob2Zmc2V0LCBzYW1wbGUgPCAwID8gc2FtcGxlICogMHg4MDAwIDogc2FtcGxlICogMHg3RkZGLCB0cnVlKTsKICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiBuZXcgQmxvYihbYXJyYXlCdWZmZXJdLCB7IHR5cGU6ICdhdWRpby93YXYnIH0pOwp9CgpmdW5jdGlvbiB3cml0ZVN0cmluZyh2aWV3LCBvZmZzZXQsIHN0cmluZykgewogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHsKICAgICAgICB2aWV3LnNldFVpbnQ4KG9mZnNldCArIGksIHN0cmluZy5jaGFyQ29kZUF0KGkpKTsKICAgIH0KfQo8L3NjcmlwdD4KPHN0eWxlPgovKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgIEFMR0VNRU5FIEJBU0lTCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KYm9keSB7CiAgICBtYXJnaW46IDA7CiAgICBwYWRkaW5nOiAwOwogICAgYmFja2dyb3VuZDogIzIyMjIyMjsKICAgIGZvbnQtZmFtaWx5OiBUYWhvbWEsIFZlcmRhbmEsIHNhbnMtc2VyaWY7CiAgICBjb2xvcjogI2ZmZmZmZjsKCXdpZHRoOjEwMCU7CgloZWlnaHQ6MTAwdmg7Cn0KI3N0YXR1c3sKY29sb3I6I2ZmZjsKfQoKI3dtcF9hcHBfd2luZG93IHsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDB2aDsKICAgIGJhY2tncm91bmQ6ICMyYjJiMmI7CiAgICBib3JkZXI6IDJweCBzb2xpZCAjMjIyMjIyOwogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBib3gtc2hhZG93OiAwIDAgMjBweCAjMDAwOwp9CgovKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgIFRJVEVMQkFMSyAoWFAtc3RpamwpCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KI3dtcF90aXRsZWJhciB7CiAgICBoZWlnaHQ6IDI4cHg7CiAgICBiYWNrZ3JvdW5kOiAjMDAwMDgwOwogICAgY29sb3I6IHdoaXRlOwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBwYWRkaW5nOiAwIDZweDsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMGEwYTBhOwp9Cgojd21wX3RpdGxlYmFyX2ljb24gewogICAgd2lkdGg6IDIwcHg7CiAgICBoZWlnaHQ6IDIwcHg7CiAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmNTU7CiAgICBtYXJnaW4tcmlnaHQ6IDZweDsKICAgIGJvcmRlci1yYWRpdXM6IDNweDsKfQoKI3dtcF90aXRsZWJhcl90ZXh0IHsKICAgIGZsZXg6IDE7CiAgICBmb250LXdlaWdodDogYm9sZDsKICAgIGZvbnQtc2l6ZTogMTNweDsKICAgIHRleHQtc2hhZG93OiAxcHggMXB4IDFweCAjMDAwOwp9Cgojd21wX3RpdGxlYmFyX2J1dHRvbnMgYnV0dG9uIHsKICAgIHdpZHRoOiAyNnB4OwogICAgaGVpZ2h0OiAyMHB4OwogICAgbWFyZ2luLWxlZnQ6IDNweDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICMyMjIyMjI7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoI2ZlZmVmZSwgI2M4YzhjOCk7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBib3JkZXItcmFkaXVzOiAycHg7Cn0KCiN3bXBfdGl0bGViYXJfYnV0dG9ucyBidXR0b246aG92ZXIgewogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KCNmZmZmZmYsICNlMGUwZTApOwp9CgovKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgIE1FTlVCQUxLCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KI3dtcF9tZW51YmFyIHsKICAgIGJhY2tncm91bmQ6ICNkNGQwYzg7CiAgICBjb2xvcjogIzAwMDsKICAgIHBhZGRpbmc6IDRweCA4cHg7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzgwODA4MDsKfQoKI3dtcF9tZW51YmFyIHNwYW4gewogICAgbWFyZ2luLXJpZ2h0OiAxNXB4OwogICAgY3Vyc29yOiBwb2ludGVyOwp9Cgojd21wX21lbnViYXIgc3Bhbjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOwogICAgcGFkZGluZzogMnB4IDRweDsKICAgIGJvcmRlci1yYWRpdXM6IDJweDsKfQoKLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICBUQUJTCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KI3dtcF92aWV3X3RhYnMgewogICAgYmFja2dyb3VuZDogI2Q0ZDBjODsKICAgIHBhZGRpbmc6IDRweDsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjODA4MDgwOwp9Cgojd21wX3ZpZXdfdGFicyBidXR0b24gewogICAgbWFyZ2luLXJpZ2h0OiA0cHg7CiAgICBwYWRkaW5nOiA0cHggMTBweDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICM4MDgwODA7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBib3JkZXItcmFkaXVzOiAycHg7Cn0KCiN3bXBfdmlld190YWJzIGJ1dHRvbjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoI2ZmZmZmZiwgI2ZlZmVmZSk7Cn0KCi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgSE9PRkRHRUJJRUQgKGxpbmtzICsgcmVjaHRzKQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCiN3bXBfbWFpbl9hcmVhIHsKICAgIGZsZXg6IDE7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYmFja2dyb3VuZDogIzFiMWIxYjsKfQoKLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICBMSU5LRVJQQU5FRUwKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwojd21wX2xlZnRfcGFuZWwgewogICAgd2lkdGg6IDIyMHB4OwogICAgYmFja2dyb3VuZDogIzJmMmYyZjsKICAgIGJvcmRlci1yaWdodDogMnB4IHNvbGlkICMwMDA7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKfQoKI3dtcF9sZWZ0X25vd19wbGF5aW5nX2luZm8gewogICAgcGFkZGluZzogMTBweDsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjNDQ0Owp9Cgojd21wX2xvZ29fYXJlYSB7CiAgICBoZWlnaHQ6IDk2cHg7CiAgICBiYWNrZ3JvdW5kOiAjNDQ0OwogICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgIGJvcmRlci1yYWRpdXM6IDRweDsKfQoKI3dtcF9saWJyYXJ5X25hdmlnYXRpb24gewogICAgcGFkZGluZzogMTBweDsKICAgIGZvbnQtc2l6ZTogMTJweDsKfQoKI3dtcF9saWJyYXJ5X25hdmlnYXRpb24gZGl2IHsKICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICBmb250LXdlaWdodDogYm9sZDsKICAgIGNvbG9yOiAjZGRkOwp9Cgojd21wX2xpYnJhcnlfbmF2aWdhdGlvbiB1bCB7CiAgICBsaXN0LXN0eWxlOiBub25lOwogICAgcGFkZGluZy1sZWZ0OiAxMHB4Owp9Cgojd21wX2xpYnJhcnlfbmF2aWdhdGlvbiBsaSB7CiAgICBtYXJnaW46IDRweCAwOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgY29sb3I6ICNjY2M7Cn0KCiN3bXBfbGlicmFyeV9uYXZpZ2F0aW9uIGxpOmhvdmVyIHsKICAgIGNvbG9yOiAjZmZmOwogICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7Cn0KCi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgUkVDSFRFUlBBTkVFTAotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCiN3bXBfcmlnaHRfcGFuZWwgewogICAgZmxleDogMTsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgYmFja2dyb3VuZDogIzIwMjAyMjsKfQoKLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICBDT05URU5UIEhFQURFUgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCiN3bXBfY29udGVudF9oZWFkZXIgewogICAgcGFkZGluZzogOHB4OwogICAgYmFja2dyb3VuZDogIzMwMzAzMDsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMDAwOwogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KCiN3bXBfY29udGVudF90aXRsZSB7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBmb250LXdlaWdodDogYm9sZDsKfQoKI3dtcF9jb250ZW50X3NlYXJjaF9hcmVhIGlucHV0IHsKICAgIGJhY2tncm91bmQ6ICMyMjI7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjNTU1OwogICAgY29sb3I6IHdoaXRlOwogICAgcGFkZGluZzogMnB4IDRweDsKfQoKLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICBUUkFDS0xJU1QKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwojd21wX3RyYWNrbGlzdF9hcmVhIHsKICAgIGZsZXg6IDE7CiAgICBvdmVyZmxvdy15OiBhdXRvOwoJYmFja2dyb3VuZC1pbWFnZTp1cmwoZGF0YTppbWFnZS9naWY7YmFzZTY0LCk7CgliYWNrZ3JvdW5kLXNpemU6Y292ZXI7Cn0KCiN3bXBfdHJhY2tsaXN0X2hlYWRlcl9yb3cgewogICAgZGlzcGxheTogZ3JpZDsKICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMmZyIDFmciAxZnIgMWZyIDFmcjsKICAgIGJhY2tncm91bmQ6ICMzYTNhM2E7CiAgICBwYWRkaW5nOiA2cHg7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzAwMDsKICAgIGNvbG9yOiAjZGRkOwp9Cgoud21wX3RyYWNrX3JvdyB7CiAgICBkaXNwbGF5OiBncmlkOwogICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAyZnIgMWZyIDFmciAxZnIgMWZyOwogICAgcGFkZGluZzogNnB4OwogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMzMzM7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBjb2xvcjogI2NjYzsKfQoKLndtcF90cmFja19yb3c6aG92ZXIgewogICAgYmFja2dyb3VuZDogIzJkMmQyZDsKICAgIGNvbG9yOiAjZmZmOwp9CgovKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgIE5PVyBQTEFZSU5HIFBBTkVMCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KI3dtcF9ub3dfcGxheWluZ19wYW5lbCB7CiAgICBoZWlnaHQ6IDE1MHB4OwogICAgYmFja2dyb3VuZDogIzExMTsKICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjMDAwOwogICAgZGlzcGxheTogZmxleDsKICAgIHBhZGRpbmc6IDEwcHg7Cn0KCiN3bXBfYWxidW1fYXJ0X2FyZWEgewogICAgd2lkdGg6IDEyMHB4OwogICAgaGVpZ2h0OiAxMjBweDsKICAgIGJhY2tncm91bmQ6ICMzMzM7CiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7CiAgICBib3JkZXItcmFkaXVzOiA0cHg7Cn0KCiN3bXBfdmlzdWFsaXphdGlvbl9hcmVhIHsKICAgIGZsZXg6IDE7CiAgICBiYWNrZ3JvdW5kOiAjMjIyOwogICAgbWFyZ2luLXJpZ2h0OiAxMHB4OwogICAgYm9yZGVyLXJhZGl1czogNHB4Owp9Cgojd21wX25vd19wbGF5aW5nX3RleHRfYXJlYSB7CiAgICB3aWR0aDogMjAwcHg7CiAgICBmb250LXNpemU6IDEycHg7Cn0KCi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgT05ERVJTVEUgQ09OVFJPTEVTCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KI3dtcF9ib3R0b21fY29udHJvbHNfYmFyIHsKICAgIGhlaWdodDogNzBweDsKICAgIGJhY2tncm91bmQ6ICMyYzJjMmM7CiAgICBib3JkZXItdG9wOiAycHggc29saWQgIzAwMDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgcGFkZGluZzogNnB4Owp9Cgojd21wX3BsYXliYWNrX2NvbnRyb2xzIGJ1dHRvbiB7CiAgICBtYXJnaW4tcmlnaHQ6IDZweDsKICAgIHBhZGRpbmc6IDRweCA4cHg7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoI2ZlZmVmZSwgI2M4YzhjOCk7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjNTU1OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgYm9yZGVyLXJhZGl1czogMnB4Owp9Cgojd21wX3BsYXliYWNrX2NvbnRyb2xzIGJ1dHRvbjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoI2ZmZmZmZiwgI2UwZTBlMCk7Cn0KCiN3bXBfcHJvZ3Jlc3NfYXJlYSB7CiAgICBmbGV4OiAxOwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBtYXJnaW46IDAgMjBweDsKfQoKI3dtcF9wcm9ncmVzc19iYXIgewogICAgZmxleDogMTsKICAgIGhlaWdodDogNnB4OwogICAgYmFja2dyb3VuZDogIzQ0NDsKICAgIG1hcmdpbjogMCA4cHg7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBib3JkZXItcmFkaXVzOiAzcHg7Cn0KCiN3bXBfcHJvZ3Jlc3NfZmlsbCB7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICB3aWR0aDogMCU7CiAgICBiYWNrZ3JvdW5kOiAjMWU5MGZmOwogICAgYm9yZGVyLXJhZGl1czogM3B4Owp9Cgojd21wX3Byb2dyZXNzX2hhbmRsZSB7CiAgICB3aWR0aDogMTBweDsKICAgIGhlaWdodDogMTBweDsKICAgIGJhY2tncm91bmQ6ICNmZmY7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBsZWZ0OiA0MCU7CiAgICB0b3A6IC0ycHg7CiAgICBib3JkZXItcmFkaXVzOiA1MCU7Cn0KCiN3bXBfdm9sdW1lX2FyZWEgewogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KCiN3bXBfdm9sdW1lX2JhciB7CiAgICB3aWR0aDogODBweDsKICAgIGhlaWdodDogNnB4OwogICAgYmFja2dyb3VuZDogIzQ0NDsKICAgIG1hcmdpbi1sZWZ0OiA2cHg7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBib3JkZXItcmFkaXVzOiAzcHg7Cn0KCiN3bXBfdm9sdW1lX2ZpbGwgewogICAgaGVpZ2h0OiAxMDAlOwogICAgd2lkdGg6IDYwJTsKICAgIGJhY2tncm91bmQ6ICMxZTkwZmY7CiAgICBib3JkZXItcmFkaXVzOiAzcHg7Cn0KCiN3bXBfdm9sdW1lX2hhbmRsZSB7CiAgICB3aWR0aDogMTBweDsKICAgIGhlaWdodDogMTBweDsKICAgIGJhY2tncm91bmQ6ICNmZmY7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBsZWZ0OiA2MCU7CiAgICB0b3A6IC0ycHg7CiAgICBib3JkZXItcmFkaXVzOiA1MCU7Cn0KCiN3bXBfY29udHJvbHMgewogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIGdhcDogOHB4OwogICAgLyogRGFyayBDaGFyY29hbCBNZXRhbGxpYyBCYWNrZ3JvdW5kICovCiAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjNDQ0LCAjMTExKTsKICAgIHBhZGRpbmc6IDEycHggMjBweDsKICAgIGJvcmRlci1yYWRpdXM6IDYwcHg7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAwOwogICAgYm94LXNoYWRvdzogaW5zZXQgMCAxcHggMXB4IHJnYmEoMjU1LDI1NSwyNTUsMC4xKSwgMCA1cHggMTVweCByZ2JhKDAsMCwwLDAuNSk7CiAgICB3aWR0aDogZml0LWNvbnRlbnQ7Cn0KCiN3bXBfY29udHJvbHMgYnV0dG9uIHsKICAgIC8qIERlZXAgQmx1ZSBHbG9zc3kgT3JiIFN0eWxlICovCiAgICBiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IDUwJSAxMjAlLCAjMWU0ZDkyIDAlLCAjMDAwIDEwMCUpOwogICAgYm9yZGVyOiAxcHggc29saWQgIzAwMDsKICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgIHdpZHRoOiAzOHB4OwogICAgaGVpZ2h0OiAzOHB4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuOCksIGluc2V0IDAgMXB4IDNweCByZ2JhKDI1NSwyNTUsMjU1LDAuMik7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlOwp9CgovKiBQbGF5IGJ1dHRvbiBpcyBzbGlnaHRseSBsYXJnZXIgYW5kIGJyaWdodGVyIGJsdWUgKi8KI3dtcF9idG5fcGxheSB7CiAgICB3aWR0aDogNTJweCAhaW1wb3J0YW50OwogICAgaGVpZ2h0OiA1MnB4ICFpbXBvcnRhbnQ7CiAgICBiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IDUwJSAwJSwgIzRmYWNmZSAwJSwgIzAwNGU5MiAxMDAlKSAhaW1wb3J0YW50OwogICAgYm94LXNoYWRvdzogMCAwIDE1cHggcmdiYSg3OSwgMTcyLCAyNTQsIDAuNCksIGluc2V0IDAgMXB4IDVweCByZ2JhKDI1NSwyNTUsMjU1LDAuNSkgIWltcG9ydGFudDsKfQoKI3dtcF9jb250cm9scyBidXR0b246aG92ZXIgewogICAgZmlsdGVyOiBicmlnaHRuZXNzKDEuMyk7CiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpOwp9Cgojd21wX2NvbnRyb2xzIGJ1dHRvbjphY3RpdmUgewogICAgdHJhbnNmb3JtOiBzY2FsZSgwLjk1KTsKICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuOCk7Cn0KCiN3bXBfY29udHJvbHMgc3ZnIHsKICAgIHdpZHRoOiAxOHB4OwogICAgaGVpZ2h0OiAxOHB4OwogICAgZmlsbDogI2UwZTBlMDsgLyogT2ZmLXdoaXRlIGZvciBsZXNzIGhhcnNoIGNvbnRyYXN0ICovCiAgICBmaWx0ZXI6IGRyb3Atc2hhZG93KDAgMXB4IDJweCByZ2JhKDAsMCwwLDAuOCkpOwp9Cgojd21wX2J0bl9wbGF5IHN2ZyB7CiAgICB3aWR0aDogMjhweDsKICAgIGhlaWdodDogMjhweDsKICAgIGZpbGw6ICNmZmY7Cn0KCi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgU1RBVFVTQkFMSwotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCiN3bXBfc3RhdHVzX2JhciB7CiAgICBoZWlnaHQ6IDIycHg7CiAgICBiYWNrZ3JvdW5kOiAjZDRkMGM4OwogICAgY29sb3I6ICMwMDA7CiAgICBmb250LXNpemU6IDExcHg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIHBhZGRpbmc6IDAgOHB4OwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICM4MDgwODA7Cn0KCi8qIENvbnRhaW5lciBmb3IgdGhlIHBsYXlsaXN0IHNlY3Rpb24gKi8KI3dtcF9uYXZfc2VjdGlvbl9wbGF5bGlzdHMgewogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDE4MGRlZywgIzJhMmEyYSAwJSwgIzFhMWExYSAxMDAlKTsKICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICMzMzM7CiAgICBjb2xvcjogI2NjYzsKICAgIGZvbnQtZmFtaWx5OiAnU2Vnb2UgVUknLCBUYWhvbWEsIHNhbnMtc2VyaWY7CiAgICBwYWRkaW5nOiAxMHB4IDA7CiAgICB3aWR0aDogMjIwcHg7Cgp9CgovKiBTZWN0aW9uIFRpdGxlOiBCcnVzaGVkIEFsdW1pbnVtIGxvb2sgKi8KI3dtcF9uYXZfcGxheWxpc3RzX3RpdGxlIHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sICM0NDQsICMyMjIpOwogICAgY29sb3I6ICNmZmY7CiAgICBmb250LXNpemU6IDAuODVyZW07CiAgICBmb250LXdlaWdodDogYm9sZDsKICAgIHBhZGRpbmc6IDZweCAxNXB4OwogICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICAgIGxldHRlci1zcGFjaW5nOiAxcHg7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzAwMDsKICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMXB4IDAgcmdiYSgyNTUsMjU1LDI1NSwwLjEpOwp9CgovKiBQbGF5bGlzdCBMaXN0IFN0eWxpbmcgKi8KI3dtcF9uYXZfcGxheWxpc3RzX2xpc3QgewogICAgbGlzdC1zdHlsZTogbm9uZTsKICAgIHBhZGRpbmc6IDVweCAwOwogICAgbWFyZ2luOiAwOwp9Cgojd21wX25hdl9wbGF5bGlzdHNfbGlzdCBsaSB7CiAgICBwYWRkaW5nOiA4cHggMTVweDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgZm9udC1zaXplOiAwLjlyZW07CiAgICBjb2xvcjogI2JiYjsKICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4ycywgY29sb3IgMC4yczsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB0cmFuc3BhcmVudDsKfQoKLyogVGhlIEljb24gaW5zaWRlIHRoZSBsaXN0ICovCi5uYXYtaWNvbiB7CiAgICB3aWR0aDogMTZweDsKICAgIGhlaWdodDogMTZweDsKICAgIGZpbGw6ICMwMGEyZmY7IC8qIENsYXNzaWMgV01QIEJsdWUgKi8KICAgIG1hcmdpbi1yaWdodDogMTBweDsKICAgIGZpbHRlcjogZHJvcC1zaGFkb3coMCAwIDJweCByZ2JhKDAsIDE2MiwgMjU1LCAwLjQpKTsKfQoKLyogSG92ZXIgU3RhdGU6IEdsYXNzeSBoaWdobGlnaHQgKi8KI3dtcF9uYXZfcGxheWxpc3RzX2xpc3QgbGk6aG92ZXIgewogICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZ2JhKDI1NSwyNTUsMjU1LDAuMDUpLCByZ2JhKDI1NSwyNTUsMjU1LDAuMSkpOwogICAgY29sb3I6ICNmZmY7Cn0KCi8qIFNlbGVjdGVkIFN0YXRlOiBEZWVwIEJsdWUgbWV0YWxsaWMgaGlnaGxpZ2h0ICovCiN3bXBfbmF2X3BsYXlsaXN0X25vd19wbGF5aW5nIHsKICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzAwNGU5MiwgIzAwMDQyOCk7CiAgICBjb2xvcjogI2ZmZjsKICAgIGJvcmRlci1sZWZ0OiAzcHggc29saWQgIzAwYTJmZjsKICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAxMHB4IHJnYmEoMCwwLDAsMC41KTsKfQoKLyogQ3VzdG9tIHBsYXlsaXN0cyBzdWJ0bGUgc2VwYXJhdGlvbiAqLwojd21wX25hdl9wbGF5bGlzdF9jdXN0b20xLCAjd21wX25hdl9wbGF5bGlzdF9jdXN0b20yIHsKICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMDMpOwp9CiN3bXBfdmlld190YWJzIHsKICAgIGJhY2tncm91bmQ6ICMwYjBjMTA7CiAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgIzFmMjgzMzsKfQoKLndtcF90YWIgewogICAgYmFja2dyb3VuZDogIzFhMWExYjsKICAgIGNvbG9yOiAjNDVhMjllOwogICAgYm9yZGVyOiAxcHggc29saWQgIzAwMDsKICAgIGJvcmRlci1ib3R0b206IG5vbmU7CiAgICBtYXJnaW4tcmlnaHQ6IDRweDsKfQoKLndtcF90YWIuYWN0aXZlIHsKICAgIGJhY2tncm91bmQ6ICMxZjI4MzM7CiAgICBjb2xvcjogIzY2ZmNmMTsKICAgIGJvcmRlci10b3A6IDJweCBzb2xpZCAjNjZmY2YxOyAvKiAiR2xvdyIgbGluZSBhdCB0aGUgdG9wICovCiAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgIzFmMjgzMzsgLyogQmxlbmRzIGludG8gdGhlIGNvbnRhaW5lciAqLwp9CgoKCgoKCgovKiBUcmFja2xpc3Qgc3R5bGluZyAqLwojd21wX3RyYWNrbGlzdF9hcmVhIHsKICAgIGZsZXg6IDE7CiAgICBvdmVyZmxvdy15OiBhdXRvOwogICAgYmFja2dyb3VuZC1jb2xvcjogIzIwMjAyMjsKICAgIHBhZGRpbmc6IDVweDsKfQoKLndtcF90cmFja19yb3cgewogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBwYWRkaW5nOiA4cHggMTJweDsKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMzMzOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgY29sb3I6ICNjY2M7CiAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7Cn0KCi53bXBfdHJhY2tfcm93OmhvdmVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICMzMzM7Cn0KCi53bXBfdHJhY2tfcm93Om50aC1jaGlsZChldmVuKSB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDMpOwp9Cgoud21wX3RyYWNrX3JvdzpudGgtY2hpbGQoZXZlbik6aG92ZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogIzMzMzsKfQoKLndtcF90cmFja19udW1iZXIgewogICAgY29sb3I6ICM4ODg7CiAgICBmb250LXNpemU6IDEycHg7Cn0KCi53bXBfdHJhY2tfdGl0bGUgewogICAgZm9udC1zaXplOiAxM3B4OwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKfQoKLndtcF90cmFja19hcnRpc3QgewogICAgZm9udC1zaXplOiAxMnB4OwogICAgY29sb3I6ICM5OTk7Cn0KCi53bXBfdHJhY2tfZHVyYXRpb24gewogICAgZm9udC1zaXplOiAxMnB4OwogICAgY29sb3I6ICM4ODg7Cn0KCi53bXBfdHJhY2tfc3RhdHVzIHsKICAgIGNvbG9yOiAjMDBhOGZmOwogICAgZm9udC13ZWlnaHQ6IGJvbGQ7Cn0KCmh0bWwsIGJvZHkgewogICAgbWFyZ2luOiAwOwogICAgcGFkZGluZzogMDsKICAgIHdpZHRoOiAxMDB2dzsKICAgIGhlaWdodDogMTAwdmg7CiAgICBvdmVyZmxvdzogaGlkZGVuOyAvKiBQcmV2ZW50IHNjcm9sbGJhcnMgb24gYm9keSAqLwp9Cgojd2VlcnJlIHsKICAgIHdpZHRoOiAxMDB2dzsKICAgIGhlaWdodDogMTAwdmg7CiAgICBtYXgtd2lkdGg6IDEwMHZ3OwogICAgbWF4LWhlaWdodDogMTAwdmg7CiAgICBib3JkZXItcmFkaXVzOiAwOyAvKiBSZW1vdmUgcm91bmRlZCBjb3JuZXJzIGZvciBmdWxsIHNjcmVlbiAqLwogICAgcGFkZGluZzogMTBweDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7IC8qIEluY2x1ZGUgcGFkZGluZyBpbiBkaW1lbnNpb25zICovCn0KCgoKCi8qIEZpeCBmb3IgdGhlIHRhYmxlIGluc2lkZSAjd2VlcnJlICovCiN3ZWVycmUgPiB0YWJsZSB7CiAgICB3aWR0aDogMTAwJTsKICAgIHRhYmxlLWxheW91dDogZml4ZWQ7Cn0KCgoKLyogRml4IGZvciB0aGUgY29udGFpbmVyIGluc2lkZSAqLwojY29udGFpbmVyZyB7CiAgICBtYXgtaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMjAwcHgpOyAvKiBBZGp1c3QgYmFzZWQgb24geW91ciBsYXlvdXQgKi8KICAgIG92ZXJmbG93LXk6IGF1dG87Cn0KCgovKiBFbnN1cmUgYWxsIGNoaWxkIGVsZW1lbnRzIGRvbid0IGNhdXNlIG92ZXJmbG93ICovCiN3ZWVycmUgKiB7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Owp9CgoKLyogRml4IGZvciBtb2JpbGUgcmVzcG9uc2l2ZW5lc3MgKi8KQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7CiAgICAjd2VlcnJlIHsKICAgICAgICBwYWRkaW5nOiA1cHg7CiAgICB9CiAgICAKICAgICNjb250YWluZXJnIHsKICAgICAgICBtYXgtaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMTUwcHgpOwogICAgfQp9CgoKI3RyYWNrbGlzdCBsaSB7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBwYWRkaW5nOiA4cHg7CiAgICBtYXJnaW46IDJweCAwOwogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjEpOwp9CgojdHJhY2tsaXN0IGxpOmhvdmVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSk7Cn0KCiN0cmFja2xpc3QgbGkucGxheWluZyB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDEwMCwgMjU1LCAwLjE1KTsKICAgIGZvbnQtd2VpZ2h0OiBib2xkOwp9CgojdHJhY2tsaXN0IGxpIC50cmFjay1uYW1lIHsKICAgIGZsZXg6IDE7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgbWFyZ2luLXJpZ2h0OiAxMHB4Owp9CgojdHJhY2tsaXN0IGxpIC5kdXJhdGlvbiB7CiAgICBjb2xvcjogI2FhYTsKICAgIGZvbnQtc2l6ZTogMC44NWVtOwogICAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsKICAgIG1pbi13aWR0aDogNTBweDsKICAgIHRleHQtYWxpZ246IHJpZ2h0Owp9CgovKiBGb3IgdGhlIGV4aXN0aW5nICN3bXBfdHJhY2tsaXN0X2FyZWEgKi8KI3dtcF90cmFja2xpc3RfYXJlYSB7CiAgICBmbGV4OiAxOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgcGFkZGluZzogMTBweDsKfQoKI3RyYWNrbGlzdC1oZWFkZXIgewogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgIHBhZGRpbmc6IDVweCAxMHB4OwogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsKICAgIGZvbnQtc2l6ZTogMTJweDsKICAgIGNvbG9yOiAjYWFhOwogICAgbWFyZ2luLWJvdHRvbTogNXB4OwogICAgZmxleC1zaHJpbms6IDA7IC8qIFByZXZlbnQgaGVhZGVyIGZyb20gc2hyaW5raW5nICovCn0KCiN0cmFja2xpc3QgewogICAgZmxleDogMTsKICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICBvdmVyZmxvdy14OiBoaWRkZW47CiAgICBsaXN0LXN0eWxlOiBub25lOwogICAgcGFkZGluZzogMCA1cHggMCAwOyAvKiBSaWdodCBwYWRkaW5nIGZvciBzY3JvbGwgc3BhY2UgKi8KICAgIG1hcmdpbjogMDsKICAgIAogICAgLyogSGlkZSBzY3JvbGxiYXIgYnV0IGtlZXAgZnVuY3Rpb25hbGl0eSAqLwogICAgc2Nyb2xsYmFyLXdpZHRoOiBub25lOyAvKiBGaXJlZm94ICovCiAgICAtbXMtb3ZlcmZsb3ctc3R5bGU6IG5vbmU7IC8qIElFIGFuZCBFZGdlICovCn0KCiN0cmFja2xpc3Q6Oi13ZWJraXQtc2Nyb2xsYmFyIHsKICAgIGRpc3BsYXk6IG5vbmU7IC8qIENocm9tZSwgU2FmYXJpLCBPcGVyYSAqLwp9CgovKiBPcHRpb25hbDogU2hvdyBzY3JvbGxiYXIgb24gaG92ZXIgZm9yIGJldHRlciBVWCAqLwojdHJhY2tsaXN0OmhvdmVyOjotd2Via2l0LXNjcm9sbGJhciB7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIHdpZHRoOiA2cHg7Cn0KCiN0cmFja2xpc3Q6aG92ZXI6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHsKICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTsKfQoKI3RyYWNrbGlzdDpob3Zlcjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIgewogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOwogICAgYm9yZGVyLXJhZGl1czogM3B4Owp9CgojdHJhY2tsaXN0OmhvdmVyOjotd2Via2l0LXNjcm9sbGJhci10aHVtYjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyk7Cn0KCiN0cmFja2xpc3QgbGkgewogICAgY3Vyc29yOiBwb2ludGVyOwogICAgcGFkZGluZzogOHB4IDEwcHg7CiAgICBtYXJnaW46IDJweCAwOwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICBmb250LXNpemU6IDEzcHg7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4yczsKICAgIGhlaWdodDogMzJweDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsKfQoKI3RyYWNrbGlzdCBsaTpob3ZlciB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDgpOwogICAgYm9yZGVyLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7Cn0KCiN0cmFja2xpc3QgbGkuY3VycmVudC10cmFjayB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDEwMCwgMjU1LCAwLjE1KTsKICAgIGJvcmRlci1jb2xvcjogcmdiYSgwLCAxMDAsIDI1NSwgMC4zKTsKICAgIGZvbnQtd2VpZ2h0OiBib2xkOwp9CgojdHJhY2tsaXN0IGxpLnBsYXlpbmcgewogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAxMDAsIDI1NSwgMC4yKTsKfQoKI3RyYWNrbGlzdCBsaSAucGxheWluZy1pbmRpY2F0b3IgewogICAgY29sb3I6ICM0Q0FGNTA7CiAgICBtYXJnaW4tcmlnaHQ6IDhweDsKICAgIGZvbnQtc2l6ZTogMTBweDsKICAgIHdpZHRoOiAxNXB4OwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKfQoKI3RyYWNrbGlzdCBsaSAudHJhY2stbnVtYmVyIHsKICAgIGNvbG9yOiAjODg4OwogICAgZm9udC1zaXplOiAxMXB4OwogICAgd2lkdGg6IDI1cHg7CiAgICBtYXJnaW4tcmlnaHQ6IDVweDsKICAgIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7CiAgICBmbGV4LXNocmluazogMDsKfQoKI3RyYWNrbGlzdCBsaSAudHJhY2stbmFtZSB7CiAgICBmbGV4OiAxOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgIG1hcmdpbi1yaWdodDogMTBweDsKICAgIG1pbi13aWR0aDogMDsgLyogSW1wb3J0YW50IGZvciBlbGxpcHNpcyB0byB3b3JrIHdpdGggZmxleCAqLwp9CgojdHJhY2tsaXN0IGxpIC5kdXJhdGlvbiB7CiAgICBjb2xvcjogI2FhYTsKICAgIGZvbnQtc2l6ZTogMTFweDsKICAgIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7CiAgICBtaW4td2lkdGg6IDQ1cHg7CiAgICB0ZXh0LWFsaWduOiByaWdodDsKICAgIGZsZXgtc2hyaW5rOiAwOwp9CgovKiBUcmFja2xpc3QgaGVhZGVyIGNvbHVtbnMgKi8KLnRyYWNrbGlzdC1jb2wtbnVtYmVyIHsKICAgIHdpZHRoOiAyNXB4OwogICAgbWFyZ2luLXJpZ2h0OiA1cHg7CiAgICBmbGV4LXNocmluazogMDsKfQoKLnRyYWNrbGlzdC1jb2wtbmFtZSB7CiAgICBmbGV4OiAxOwogICAgbWFyZ2luLXJpZ2h0OiAxMHB4OwogICAgbWluLXdpZHRoOiAwOwp9CgoudHJhY2tsaXN0LWNvbC1kdXJhdGlvbiB7CiAgICB3aWR0aDogNDVweDsKICAgIHRleHQtYWxpZ246IHJpZ2h0OwogICAgZmxleC1zaHJpbms6IDA7Cn0KCi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgVFJBQ0tMSVNUCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KI3dtcF90cmFja2xpc3RfYXJlYSB7CiAgICBmbGV4OiAxOwogICAgb3ZlcmZsb3cteTogYXV0bzsKICAgIGJhY2tncm91bmQtY29sb3I6ICMyMDIwMjI7CiAgICBtYXgtaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMjAwcHgpOyAvKiBBZGp1c3QgdGhpcyB2YWx1ZSBiYXNlZCBvbiB5b3VyIGxheW91dCAqLwp9CgovKiBDcmVhdGUgYW4gaW5uZXIgY29udGFpbmVyIGZvciB0aGUgdHJhY2tsaXN0IGl0ZW1zICovCiN3bXBfdHJhY2tsaXN0X2NvbnRlbnQgewogICAgcGFkZGluZzogOHB4Owp9CgovKiBUcmFjayBpdGVtIHN0eWxpbmcgKi8KLnRyYWNrLWl0ZW0gewogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBwYWRkaW5nOiA4cHggMTJweDsKICAgIG1hcmdpbi1ib3R0b206IDRweDsKICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSk7CiAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICBib3JkZXItbGVmdDogM3B4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzIGVhc2U7Cn0KCi50cmFjay1pdGVtOmhvdmVyIHsKICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKfQoKLnRyYWNrLWl0ZW0ucGxheWluZyB7CiAgICBib3JkZXItbGVmdDogM3B4IHNvbGlkICMwMDc4ZDc7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDEyMCwgMjE1LCAwLjEpOwp9CgoudHJhY2stbnVtYmVyIHsKICAgIG1pbi13aWR0aDogMzBweDsKICAgIGZvbnQtc2l6ZTogMTJweDsKICAgIGNvbG9yOiAjY2NjOwp9CgoudHJhY2stbmFtZSB7CiAgICBmbGV4OiAxOwogICAgZm9udC1zaXplOiAxMnB4OwogICAgY29sb3I6ICNmZmY7CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwp9CgoudHJhY2stZHVyYXRpb24gewogICAgZm9udC1zaXplOiAxMXB4OwogICAgY29sb3I6ICM5OTk7CiAgICBtYXJnaW4tbGVmdDogMTJweDsKICAgIG1pbi13aWR0aDogNjBweDsKICAgIHRleHQtYWxpZ246IHJpZ2h0Owp9CgovKiBFbXB0eSBwbGF5bGlzdCBtZXNzYWdlICovCi5lbXB0eS1wbGF5bGlzdCB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBwYWRkaW5nOiA0MHB4IDIwcHg7CiAgICBjb2xvcjogIzY2NjsKICAgIGZvbnQtc2l6ZTogMTNweDsKfQoKLyogUmVtb3ZlIGJ1dHRvbiAqLwoucmVtb3ZlLXRyYWNrIHsKICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCA1MCwgNTAsIDAuMik7CiAgICBib3JkZXI6IG5vbmU7CiAgICBjb2xvcjogI2ZmMzIzMjsKICAgIHBhZGRpbmc6IDRweCA4cHg7CiAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBmb250LXNpemU6IDExcHg7CiAgICBtYXJnaW4tbGVmdDogOHB4OwogICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzIGVhc2U7Cn0KCi5yZW1vdmUtdHJhY2s6aG92ZXIgewogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDUwLCA1MCwgMC4zKTsKfQoKLyogVHJhY2sgaXRlbSBzdHlsaW5nICovCi50cmFjay1pdGVtIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgcGFkZGluZzogOHB4IDEycHg7CiAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpOwogICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4ycyBlYXNlOwogICAgY3Vyc29yOiBwb2ludGVyOwp9CgoudHJhY2staXRlbTpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7Cn0KCi8qIFNlbGVjdGVkIHRyYWNrIChjbGlja2VkIGluIGxpc3QpICovCi50cmFjay1pdGVtLnNlbGVjdGVkIHsKICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xNSk7Cn0KCi8qIEN1cnJlbnRseSBwbGF5aW5nIHRyYWNrICovCi50cmFjay1pdGVtLnBsYXlpbmcgewogICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCAjMDA3OGQ3OwogICAgYmFja2dyb3VuZDogcmdiYSgwLCAxMjAsIDIxNSwgMC4xNSk7Cn0KCi8qIEJvdGggc2VsZWN0ZWQgQU5EIHBsYXlpbmcgKi8KLnRyYWNrLWl0ZW0uc2VsZWN0ZWQucGxheWluZyB7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDEyMCwgMjE1LCAwLjI1KTsKICAgIGJvcmRlci1sZWZ0OiAzcHggc29saWQgIzAwNzhkNzsKfQo8L3N0eWxlPgogICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgPHRpdGxlPlBhcmEgVGF0YmluIE1lZGlhIFBsYXllciBEVUEnUzwvdGl0bGU+CjwvaGVhZD4KPGJvZHk+CgoKCjxkaXYgc3R5bGU9ImRpc3BsYXk6bm9uZSI+CjxoMT53ZWJhdWRpby10aW55c3ludGggOiBqcyB2ZXJzaW9uIHRlc3Q8L2gxPgpUaGlzIGlzIGEgc2ltcGxlIHNhbXBsZSBvZiB3ZWJhdWRpby10aW55c3ludGggKEphdmFTY3JpcHQgbGlicmFyeSB2ZXJzaW9uKSBwYWdlLgo8aHI+CjxidXR0b24gb25jbGljaz0iVGVzdCgpIj5UZXN0IGF1ZGlvQ29udGV4dDwvYnV0dG9uPgo8aHI+CkxvYWQgU2FtcGxlIE1JREkgZnJvbSBVUkwgOiA8YnV0dG9uIG9uY2xpY2s9ImxvYWRNaWRpVXJsKCkiPkxvYWQgKHdzLm1pZCk8L2J1dHRvbj48YnI+Cgo8YnV0dG9uIG9uY2xpY2s9InBsYXlNaWRpKCkiPlBsYXk8L2J1dHRvbj4KPGJ1dHRvbiBvbmNsaWNrPSJzdG9wTWlkaSgpIj5TdG9wPC9idXR0b24+CjxkaXYgaWQ9InN0YXR1cyI+UGxheWxpc3QgY29tcGxldGVkPC9kaXY+Cjxicj48YnI+Ckxvb3AgOiA8aW5wdXQgdHlwZT0iY2hlY2tib3giIG9uY2hhbmdlPSJzeW50aC5zZXRMb29wKHRoaXMuY2hlY2tlZCkiPjxicj4KTWFzdGVyVm9sPGJyPgo8YnI+ClJldmVyYkxldjxicj4KPGJyPgoKPGJyPjxicj4KUXVhbGl0eSA6IDxzZWxlY3Qgb25jaGFuZ2U9InN5bnRoLnNldFF1YWxpdHkodGhpcy5zZWxlY3RlZEluZGV4KSI+PG9wdGlvbj5RdWFsaXR5PTA8L29wdGlvbj48b3B0aW9uIHNlbGVjdGVkPSIiPlF1YWxpdHk9MTwvb3B0aW9uPjwvc2VsZWN0Pgo8YnI+CgpQbGF5IGJ5IGtleXMgOjxicj4KCiAgPGJ1dHRvbiBvbm1vdXNlZG93bj0ic3ludGguc2VuZChbMHg5MCw2MCwxMDBdKSIgb25tb3VzZXVwPSJzeW50aC5zZW5kKFsweDgwLDYwLDBdKSI+QzwvYnV0dG9uPgogIDxidXR0b24gb25tb3VzZWRvd249InN5bnRoLnNlbmQoWzB4OTAsNjIsMTAwXSkiIG9ubW91c2V1cD0ic3ludGguc2VuZChbMHg4MCw2MiwwXSkiPkQ8L2J1dHRvbj4KICA8YnV0dG9uIG9ubW91c2Vkb3duPSJzeW50aC5zZW5kKFsweDkwLDY0LDEwMF0pIiBvbm1vdXNldXA9InN5bnRoLnNlbmQoWzB4ODAsNjQsMF0pIj5FPC9idXR0b24+CiAgPGJ1dHRvbiBvbm1vdXNlZG93bj0ic3ludGguc2VuZChbMHg5MCw2NSwxMDBdKSIgb25tb3VzZXVwPSJzeW50aC5zZW5kKFsweDgwLDY1LDBdKSI+RjwvYnV0dG9uPgogIDxidXR0b24gb25tb3VzZWRvd249InN5bnRoLnNlbmQoWzB4OTAsNjcsMTAwXSkiIG9ubW91c2V1cD0ic3ludGguc2VuZChbMHg4MCw2NywwXSkiPkc8L2J1dHRvbj4KICA8YnV0dG9uIG9ubW91c2Vkb3duPSJzeW50aC5zZW5kKFsweDkwLDY5LDEwMF0pIiBvbm1vdXNldXA9InN5bnRoLnNlbmQoWzB4ODAsNjksMF0pIj5BPC9idXR0b24+CiAgPGJ1dHRvbiBvbm1vdXNlZG93bj0ic3ludGguc2VuZChbMHg5MCw3MSwxMDBdKSIgb25tb3VzZXVwPSJzeW50aC5zZW5kKFsweDgwLDcxLDBdKSI+QjwvYnV0dG9uPgogIDxidXR0b24gb25tb3VzZWRvd249InN5bnRoLnNlbmQoWzB4OTAsNzIsMTAwXSkiIG9ubW91c2V1cD0ic3ludGguc2VuZChbMHg4MCw3MiwwXSkiPkM8L2J1dHRvbj4KICA8YnI+CiAgPGJ1dHRvbiBvbmNsaWNrPSJleHBvcnRQbGF5bGlzdFRvV2F2KCkiPkRvd25sb2FkIEFsbGVzIGFscyBXQVY8L2J1dHRvbj4KPC9kaXY+CgoKCgoKCiA8IS0tIEhvb2ZkY29udGFpbmVyIC0tPgogICAgPGRpdiBpZD0id21wX2FwcF93aW5kb3ciPgoKICAgICAgICA8IS0tIFRpdGVsYmFsayBib3ZlbmFhbiAobWV0IGtub3BwZW4gc2x1aXRlbi9tYXgvbWluKSAtLT4KICAgICAgICAKCiAgICAgICAgPCEtLSBCb3ZlbnN0ZSBtZW51IChCZXN0YW5kLCBXZWVyZ2F2ZSwgQWZzcGVsZW4sIEV4dHJhLCBIZWxwKSAtLT4KICAgICAgICAKCiAgICAgICAgPCEtLSBCYWxrIG1ldCB2aWV3LXRhYnMgKE51IGFhbiBoZXQgYWZzcGVsZW4sIE1lZGllYmlibGlvdGhlZWssIGV0Yy4pIC0tPgoKCiAgICAgICAgPCEtLSBIb29mZCBpbmhvdWRzZ2ViaWVkOiBsaW5rcyBuYXZpZ2F0aWUsIHJlY2h0cyBpbmhvdWQgLS0+CiAgICAgICAgPGRpdiBpZD0id21wX21haW5fYXJlYSI+CgogICAgICAgICAgICA8IS0tIExpbmtlciBuYXZpZ2F0aWUgLyB0YWtlbnBhbmVlbCAtLT4KICAgICAgICAgICAgPGRpdiBpZD0id21wX2xlZnRfcGFuZWwiPgoKICAgICAgICAgICAgICAgIDwhLS0gTG9nbyAvIE51IGFmc3BlbGVuIGluZm8gYm92ZW4gaW4gbGlua2VyIHBhbmVlbCAtLT4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9IndtcF9sZWZ0X25vd19wbGF5aW5nX2luZm8iPgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9IndtcF9sb2dvX2FyZWEiIHN0eWxlPSJjb2xvcjpibGFjaztiYWNrZ3JvdW5kLWltYWdlOnVybChkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhRQUcwQVBjZkFBQUFBQ1FBQUVnQUFHd0FBSkFBQUxRQUFOZ0FBUHdBQUFBa0FDUWtBRWdrQUd3a0FKQWtBTFFrQU5na0FQd2tBQUJJQUNSSUFFaElBR3hJQUpCSUFMUklBTmhJQVB4SUFBQnNBQ1JzQUVoc0FHeHNBSkJzQUxSc0FOaHNBUHhzQUFDUUFDU1FBRWlRQUd5UUFKQ1FBTFNRQU5pUUFQeVFBQUMwQUNTMEFFaTBBR3kwQUpDMEFMUzBBTmkwQVB5MEFBRFlBQ1RZQUVqWUFHellBSkRZQUxUWUFOallBUHpZQUFEOEFDVDhBRWo4QUd6OEFKRDhBTFQ4QU5qOEFQejhBQUFBVlNRQVZVZ0FWV3dBVlpBQVZiUUFWZGdBVmZ3QVZRQWtWU1FrVlVna1ZXd2tWWkFrVmJRa1ZkZ2tWZndrVlFCSVZTUklWVWhJVld4SVZaQklWYlJJVmRoSVZmeElWUUJzVlNSc1ZVaHNWV3hzVlpCc1ZiUnNWZGhzVmZ4c1ZRQ1FWU1NRVlVpUVZXeVFWWkNRVmJTUVZkaVFWZnlRVlFDMFZTUzBWVWkwVld5MFZaQzBWYlMwVmRpMFZmeTBWUURZVlNUWVZVallWV3pZVlpEWVZiVFlWZGpZVmZ6WVZRRDhWU1Q4VlVqOFZXejhWWkQ4VmJUOFZkajhWZno4VlFBQXFpUUFxa2dBcW13QXFwQUFxclFBcXRnQXF2d0FxZ0FrcWlRa3FrZ2txbXdrcXBBa3FyUWtxdGdrcXZ3a3FnQklxaVJJcWtoSXFteElxcEJJcXJSSXF0aElxdnhJcWdCc3FpUnNxa2hzcW14c3FwQnNxclJzcXRoc3F2eHNxZ0NRcWlTUXFraVFxbXlRcXBDUXFyU1FxdGlRcXZ5UXFnQzBxaVMwcWtpMHFteTBxcEMwcXJTMHF0aTBxdnkwcWdEWXFpVFlxa2pZcW16WXFwRFlxclRZcXRqWXF2ellxZ0Q4cWlUOHFrajhxbXo4cXBEOHFyVDhxdGo4cXZ6OHFnQUEveVFBLzBnQS8yd0EvNUFBLzdRQS85Z0EvL3dBL3dBay95UWsvMGdrLzJ3ay81QWsvN1FrLzlnay8vd2svd0JJL3lSSS8waEkvMnhJLzVCSS83UkkvOWhJLy94SS93QnMveVJzLzBocy8yeHMvNUJzLzdScy85aHMvL3hzL3dDUS95U1EvMGlRLzJ5US81Q1EvN1NRLzlpUS8veVEvd0MwL3lTMC8waTAvMnkwLzVDMC83UzAvOWkwLy95MC93RFkveVRZLzBqWS8yelkvNURZLzdUWS85alkvL3pZL3dEOC95VDgvMGo4LzJ6OC81RDgvN1Q4LzlqOC8vejgveUgvQzA1RlZGTkRRVkJGTWk0d0F3RUFBQUFoK1FRRUNnQWZBQ3dBQUFBQVFBRzBBQUFJL3dDQklBR0FSQ0FRQkFZSEZpeUljQ0ZCZ3cwRlBtU1ljT0xCaWdzdlp0eVlzQ09TaFNBRmh2d29zdVRIa3lSUGlrU0o2R1RMank5akltbEpjeWFTUkRacjZzdzVrNmJQbmtrUUNlMHBGRkVpb1VlUEZsMjZOS25ScDB5YkdrM2tGR2xScFZTekhrMzJsT3ZXcm1DL2lrWGtsV3hZczJQTHFqMjdOaTJpU0NpUklFQTU5MlRkajNmbDB0MXJseTlldjNvREM0NUx1TERoazBGaElnRmtFNmRqSklGc1NrYVVCR2ZseVM0L0prcHlrK2RPeDVSREJ3VmRXZlJRMFk2RFZvWXlGSkxRS0VZalVaV2RDRkx0Mm0vZjNwYk4rMjBrUk5Gc1I3SU5MZEh3Wkx4dEJ6Y2VyWFlrNU1wL1Iyb082Zm53Uk5Ha1U3Y2UvZTEyNk5pMU8vOEhuOTM3K092bFpUK015TEc5eC9mdTQ4T2ZuN0xoU0pNZ1B6S2VHV1FtNTQvOXhmVWZFcHh4OWxKQkJ3YlJVb0U3MWZUWVk2RjFkbFJuVUkxMlUwdTFCZVVhSkRmWmxwdHhUcmxHRTI0V2JsYlZiMEw5bHRSUnNpRnpXMjdKMkdZYmlORVlOYU9LTTk0WUc0dFU2UWlpYnJjWnR5T1FQc3BHNUd4RDBsYWtjWEVKVkZkRFR6cUpsNVJ5VVFubGxJRmRXV1dXVkI3bUpXSDd4ZFVmSW1OaWRoTVFxaDFZazMrVVVXaG1tNXU1MmVCTnJPR0VDR3hJd0lVSUZFZVZScUZSRXFvR1NSS3V6YlJoVXJ6ZEptTnVId3AzcEl3czJ2Z2piZFJ4WlYwaXhVWGlvcWEvVlZwYmpOaTlaU2t5c21YcUlpVElBZmVwcU1xOXRTbXBtSDcvK21tbm91cW0wVUVicGJSU1FycXFsQit2dVFZTGJFSVJzY2VyU1dqbUJ5Q0JBaEtXaEVDSk1TdVRUWnhaTmlkTmFWS1kyR053MllubmhIM2VTWm1ISEg2NDIxTkhpUWpvYjZOcGxhZFFIcXE0bzVKSnhUc1Zka2p5S0Z1OFNOSm01TDRnQmlsY2p3VDNKaVNJS2lZczVMLzk4cmd3TWxFWU5oZXVlbEU4OFpNTS9XVnh4aFZqdkRIRlcwcjhwWmcyQWJHZ1FHM3FsQmhuQ2lybXNyVUd1dXlnaEo3bHRPMU00WkwyMUxiWURvb2FhejJ4NXVHUHNFbG5JN3lSMG5hd2pLRG1scWgxcWdKblZITXhnbHExcUpxR21uVnp6MG1OSEw2a3Fvb2NxS1FtWTl6VlhKdGRIS3I0Z2xvY2lCSlI5T3Q5ZExlWHEwZDMzMjNmU0h5WC84U1pTSnlGaVpoQWxxRzAwbitGNDJReVROVVN1S0JNanp0dVlHSjZFZ29hYk51eXRtZWZQaGM2OUUySVVzV29VQnIycWZUUlI4SDI0bXlSMXFob3JEY1NIQ1RBQXc5c3RMOGc4dHViZEt4RGlyRFRBVVBxTC9DOGJhcnNTUVJ0aVhISEh5WHZjVjNPYXd6OVh4VWJYbGhlaGoxNzRFa0JicitZWW9sRjVuaG1rNmxXODVvUHpnUjBnMEZoeUNGcHRsM1lma3Z5UnNGdFM2NEpiWHE5U2NncklvNEIrOWVIR29VdjNZQ3FPY1Y1VzllZTh5bmJtSTFXaVlDVnFXNWpOZHZBU2xXb2FsV29aTVcyREdvdGdsbFQwZlEwb2l6NHBLUlh1L0xWc0ZTNGtJa1pyaUVXNlZ2Mjl0T21BZ21PZXg4eFg3Umt3cklJdmFremFRb2lodi9vRkJyUTBLeUlRaU1VWlVCenNLZ2d4VFdzVzlINzdQVWlnMG5LZDZ6NzJ1dEF0RGJaT1lwVEMrT1JibXEwT3lFMVozWkpTcFhCR0FhcU1FWUNXQ1J4WWZJRVl4OFgzc1dPTGV5TGxMcmtRcm1ORERFbnhBK3pUUElmYkVXT00rSlRrK1FXZEQ1dDJTa3huOUZXdVlMeW0zY2xnaytod1pDTkxyTVp1UHhHYU8raVpCRzd0U2hFOEt0L2lISWFXUmIxTkZrOWgxL0drU0JWeUpnVlZIV0tLcG1LRFZsYWxEQldnVEJXUnR1ZzY5NzJSUXppWklSM1JPSGVJTktlUGpwa2JpNDhWbDd3UTgxY0RVZ3lJREZmWndUVUptbVJ6eitML0tGcENNV1RTNzdHS0hXNkVKdUtxTTUwZ1U2VjRaTEtqRUJVR1hrUk1FV3N5dzBaMFhYL3h1RUJzRGxobTFTUVloVENnc1dTbHc1em5lc1NwUnRZTlVjM3RvTlYyWHFVakNqQUVXK0NLUW4ycUxlcmpWSnNKWUg1YUgxOE5US1J0Q1JBMnp3SlRzZ25QaVMwTEdiVGVzd09GZk80eGczUm5CR0NFRTdZaFVTcUlHRkRPTXZUVFZTRG0veVo4a0tYckZlOVRDa3BJR1VsbUVsejJ0Zk1aa3VEa3JGc3J3eWdVZDVXSEZpZHExSzJXMldzdEFpcE05YUlsa3BTR0pibVdKZGIxZkdaY2R0ajlTYUN4N2lHbEtRbDdOVi91dmNzNnhFSUVOZjBYdU8wcVIvTmpDOWJrYnhNaEg3Q3BzYjA1RUx4ZTlCUG5NSWowQkdscWJPcFRCV1B4cWd5cXJKVURndWpxM2k1bzZXRmlveGZDeXNZMVlpd1V3VlFVUStrYXBCQWRDcXovNEV0Q25Oa29jUkFTcjBUN3MwdUtSek1DdHNhUjhQd2xyZmRWQW5MWU5LeWJzYk1UaTlEVXplbjVhQnNtZE82bUNTVW9DWVhydzUxeURHWWk5U0dqb3BPSm9rUlJhWmswVTFVTkttd1pVMDN3RU50R0EvcVh0bWVkNWRpelIxdGYyT3BSQ0NIVkdGTGJkS282cnJhM1U1eGNrT21YZUc2a2VTWkpJWVo4OGdjb3dkUzRzSXhtNGI3MjVuR2g4MGNGdVNSeVpLWjVPUkUweUN5QnBMbDdJeHIybWNucGFTcHhlNXppdjNTUkpPaFRZVTJvVEdhSldObjJpc2FVR25CQkdzV2EvYzFCWmEyUmxYYlRSaDl0enNYcGMxYzFnSHdMTTltMFl3ZTczaDVXUjdIc3R3OHZ0d0ZXU3I1TGNtWWRUenZBYktRNE11aGRIbWkwaEdualAvTk1Kc1poalFub1RsUFNIVkNmY3RQU2JkRVBxVnl2RWRUblZIczU2RVVQWEZGQVB5c1VvdUh5NFBSSzZBaDNKRXRxeVk4Q3FKcWw3OU1WYXowS3p3MXptdUFzdWxWbEJTQ3ExdkpoNFVZcFkrV2o4dTNFL29LRVN0cFdjdFFkazN0M1F6Tk5nTW5kRk04MU5USWVhZysreE5Ta1RxLzBnMndmNDl0elJKMVk3K3B1QVpGd2JSZHBKcjJPdGtJZUZaaTVacWo4UXNxM3UxTHRtMEVHTzAybURVSFdydXN0Ym9scHlERzFtQWQ1bm5BclY1Z0hEeHZ1cGhRekI3TzY4b0FpWklDa1dRbi8wR3pJc0VaTFRiVGhFOXU4dG42SUJrYWhLZk96a0xGRGMxTTVHemNNSFYxcWV6UnVBNHRPb0oxa1drejBpSm8zU2lwNHFBMVlHLy9reHFTdm1hMGh5S1pZYnlqVHBBZXF0K3ZBU25VSkZ3cmcyTUlacEJFVTQvNW1VaHZuWGtzZmJkNmNTZ0ZaNGI5WTdJaytCc3pRVVF4Wm1TNldBclZpWnhZY2JnbWsySVRLSFkzMUhiYUU1ODlHVEJ6V3R4b3VtR292Qkw5TkYyRzBNbU9iclRVRXNaeVdBRk1WVW8yRXRmZ0hpL1pZbTFUc0YwVlhIeVYyOTQyYVhrWHk5WEZWcEw0TUdQMGVJV0gxbUcyUjVsa0FXR2xQSlFXaWhkbmsvN2N6RE9UTzZLY29QdElkV29TYzN1ZWtHbDhLaVIxcFJjcDRWSlNVM1U1VzN0Rlc2QUtGYWdGU1dzd3JoRVFkbVQ5V3Roa0RsSC9DdEQzdkh1YnpCT2xFUXVUR3E3MmVYeTlRYnJDdUtHRTNzZ2pES3ZuNWxJMU02NHdnU1A0LzBLbVJUT1kwdFEvanl5WFk4ZGxJVDA3VzM3eEUvdnJJekVhbnVLUEpnQkRwV1BJaFRTdlJ4RlNZblZwWi9OVUpYYzJhWmQyWElGOG0zSkFSNUpMYUNRYm5zSTBER1ZXYmhjYm94SXh2VElZaHVkbGNnTkhkTlZsWGZKTXhTVlNLK1JYWllKWGZUVStOQ0Y1ZitORGFoSjZheEtEb3ZkSVl0ZFk0dUltTk1oRWpoVXVwWUZlSWxKbkRvTlpVT1JVbTFXRVQzTkxiTU13dVRkM1I5RlBINklrWXlNa1g0TkFWQUZwRktRaUNVUXdQM1pCQUpNSVhjSnp4Z0pEZHNNOEZRWXMwVFJOMmxkU0dIWWdKaFV6NDROY0k0WnI1UU5FTytGWTVnTmROWmhUbUlSVURoZFo4dWQvMy9VV2dvSi91SkVvTE5JK2g1SWJsUFE3c0dPRVcvK2hNTVN4YmJ5elpFa0dVUHdWVEhjbmJyRjBOandHTUduak95YUhhZXdSRnhzVmVWSGdEL1pnRC81Z0M2bllpcW00aXE2b2l2YkFpckdJaXFsSWk3WndEN0hZaXF4NEQ3Um9EN29JalA0UWpLNTRENmhJak1Eb2l2L1FpcnFJak1YNGpOQ0lqTU9JaXRSb0Q4dUlpc3VZaXNZb2k3YjRpcTNZamRTb2k4dG9DNmpJaXNNb2k5NllpdG00aTc2QWp1Zm9pN1pZamE3WWpkdklqZXBJQ2dDUWova0lCUG9JQVB5SUVQdVlqd0RaandKWmtBQ0FBUDA0RVB1SWtQN1lqd2hCVE1BSFg3eUROVXBtR3lzeEVURWtkTllIQUt6d0R4NzVrU0Faa2lJNWtpUlpraVo1a2lpWmtpcTVraXpaa2k3NWtqRDVENjFBa0RSWmt6WjVremovYVpOQXdCdmRabWtGZEVaRFUxQmRabmlGWjJVRllRc3htWlJLdVpSTTJaUk8rWlFxT1pNT3FZOE1tWk1HYVpVM1daVkkwRFFJTlpHZU9DdU9sa0o0WTJweUJRQlJBSlZvbVpacXVaWnNHWk5TZVpBNVdaVlVpWlU0S1pmN21EWkJvbnlxOGxDOWRFQkpvQ1ZaUW9wWVlqaWowSmFHZVppSW1aaEwrWlpUQ1FBQklKY0JBSmMxeVpDVWFaQ1ZhWmY2ZUJQMTFVcy80a29zVjFrWllTelBWM1RKNDQrMW9KaW9tWnFxbVpxTXFZK1JTWkFKUUpCVkdadU82WnEyYVpPdkNRQzA2WTh5ZHh0VUNFWXk1eUdvOVJZZ00xSjlVVDNFVlJCSnNKck0yWnpPMlpTdTBKaFhLWnRXaVptMWVaM1RTUkMrU1hzTVUxYVN5Q1FRSVZmdy85RkhVYUlGejNtZTZKbWVKVmtMQkJtWmNsbVZrTm1ZNzJtWjJkbVBRQUNVSHdRclZuTXdtYUkyUG1XVTFQTmxxRVlTSGFtZUJucWd6ZG1hbUptYmRIbWJkTW1RVzJsdVUxTjh6b0ZwQzdNall5bWFKQlE5eW9NRTk0Q2dJQnFpaHhtZDlTbVpEVnFia0dtWENQbVkrZmlhTzFsdFppUXJGL3B5V2dOdng5bHVZOGlQWnltaVBOcWpUc21lSjRxVjh6bVZERXFRRVJwYm9xSXZjL2RBVlVRVlkyazNab2dsYlVVS1BscWxWdXFTSkJxazBrbVhSWHFWVzJsYXU1R0F3WE9GSU1RWmlCZWdlalNLR3pFWHAzbWxidnFtSXdta1JLcWkxRm1uTm1tZGRybVRGRGxCamdKTW0wSTg5R0ZDY1ZHVVFBQUVPd3FuaVBxbVdhcWxqUDg2bCsxNWtQZlpwR0hGV3JxaGw5SHdIOGtVbUIwVG5uRmtNVUN3QllrYXFsWXFwNDFhcWpUSmtQYzVOV1BsU2tsYVZVcEduQXhHSDRVaGxpVFJDcUo2cXlKcUMzWnFxbHM2bVVhcVgwdTJhUU1qTlM1SEZjbkpVY21rRWV1UlJ4eURxODU2b0lzcW5YUXFwS2ZhcTNlSlFSWEVwTGFrS3ZRaUhkWm5hcDE2WlVDWEVtYjVyT1o2bnFSYW9pYnFxNDZhbGYzb252bjRwYkdqSTVGR01OdjZOY1lWTXZaR2FxTlluRUJRb09jYXNLbXBxNDc2bXRaWnJRMjZvbHY2b3JIQ3JWNmxkNnlxWDhyS01TQ29FRjVDYjZXSkJFZ3BzQnlMbUFSN2sxM0txemdabVJIS2lET3lOcCs1ZTVzMmVFMUNzU3BVTEx5Vm5JYmFzVFRibGgvL3U2c2k2NnNzbXBDcFVqVU0xS2RZYUh5T0JqRnhkU1VZNGEvWkI2N1FVNWcxMjdSUWViTW1DcS9yMnE1eFdaMzc2RzJTVXF4VkJTbXdNaU1ibFIvWXcwd1dTeGdaMmFaT2U3WktDYlV0V3BjNVM1T3YrYVVLdEVFRDA2UjFoeDE5dFdCaFNDVmlLWVo3Z1Nabys3Y3hxYmJyZXJEdWVxZU9pZ0FNbXFxZ05UQXVwNnFnd2kveG82Ky9KYUJPRW9JaklYUUFvQW1BdTdrc0NiVkQ2cGlFeTdiVXFwMXNSRUM3ODJQNFloeThNa2QySlJKb09MR0dKeEljeWJtMGU1S0MyNmloMjZDcHlwY1VpV1JWNVduU0FUSEw0N3FrMkJINGhrSjNoUUFmV3J2TUc1SzNxN0FtaXBtNUc2UmJLUjBzSnlrR0F5azlTeHQ0azVGZ0cyOGYvM2hYcFlZRWg5cTh6ZXU1MkVtNEI3dWJKd3FoNStWazNFYVJYRmxaZDFGNDJBTmgrOG9yeVVrUVkyQys1bnU3Ym91Vm1yQU83S0FGaG91d2QrbGY5T3BHTUNwa0Z6V2FZNnR6K2x1eEhLV3gvc3U4Tnd1Zm84dVFvcUFPNm9DUDFucXdpbnRhRkhWUVpMR0pzRFI0ZlB0Q2hIYzlHUml1c2x1K0Z3eTRBQ3lRQmt1VnI4bWdIYXdPck1DK0o3cGV3Tk5CK3FKa1NZWXFWWlpDeStwenZSSkR4RldVRG1hZU03eTVhb3U0amRyQjRxQU9vOUNvcVRwVlh5UjhsK2hlK2pWcWFQakNBcm9sZXV0SEdXR3JVZnkzdnJDbG9WdVoramdPSGl3T3F5QUZqRnE5a2JLSkFCUjNKbHhSMVllY1NTdUNqUGU5dm9VWGEveTN0ekM2VS8vYmp3a3dEK0tnQ3VuQXd6Nk1sWHA2S2JTRUwyZUZ3dUhtVTlNem1LRlpZVGNhRXFOb0xFQUF4WWZjdElJTHZUVVpzZ0NnRHVsd3hWY013ai9zZHdualhzVzNSZ0IyeE5sbm5DOGtxQzRid1ZGQ3BhZGNzMjNza0F3NnZmMzR5QjZzQ2g2OEJYYXF3ZnRZVmZLbE1KdFdITndLbXNzVVlmeEtHUFU3TnlJRmh0WTR6QjJieUFkY3psUzVEdUdnRHVMd3loNmN4UTFhdlpJQ1c1ekNuVktvSEVuQXVyL0ZhbVM1TjI5MVlmTW13K0pzcnNXY2t6dkxyZ0N3RHVyUXdhSVF5WFM4Q2JwcnZRZVZMMUJEaFdtblhydzF0bnhMbnRRWGIwQUhZVURRdndFZHNPUjh1SVZia3d2dHl1b1FEcERzd1dOQWwvS3FaTXFYeC81Q05yei9VYmxqbTNQQzRpdUxSNjdNcWpGVllyWWg3YXdETGJJSUlNZmljTkxwSEFxUlBBcVRUSk5BOEx0SkdGOWFZNFdvOGg5STNNTHhsbmlzOXJwcnVoRExHZFRQT3RJaUd3Q3VETW5pa0FwbkxRN2hzTlJOemJPWU9LRnlLenRaZFJ2TzB5VjJIWDA2YlgwL2w2ek9CQUNtRE5haU90U2lXNWZvZk1YcHZOYmhnTmJwM01QdGlxb3E0bnRvQlNSNitkaDI2ODArVFgyTjE3SWJMWDBPcHNhQUhhcS9VTTdJZkpBSXJkU2hrTmlJRGNucHpOUTNHYWxNZzNLTjlrWEc5NFFkU3NGYkVubjhTcng2SGFEZnFoQWIrOW1JS3RaYUNwbnFuQTRkWE5ycUVBcmlFQXJKamNXdGJXNHZzbEEvWmt4SlNMUzZNazFpWm4xa20xZlNSMzBBL3czY1ZpcllDWHVxNjZEYzRiQUtVeEFCbXVEQmlCME80U0FPemx5VDhBeE11U05nOE9XRXRFR3h4TkxMZDRXUmc0cW10NTNWSHdIUzRPMm1vZDIyQ2JBTzZaRFk0a0NiQ1M0SzRRRGhTaTBLVGYzVXFWdHVOamMyY3gySm1QS1h2R3k4TEpTcFlpdXJlU01SNFZ6Z1ZucmdPWXNBNkt6Y295Q1hIWHphcHgwT3N1eldUMmhhbUVqZnZMTzN4N25meUJ0Y210ckpqZGNRWDQzaVZhcmlSSTNPQzc0S05Ma0s3aTNqNnhBQlRuMnlKdHdjeFhxSkZNV3RDY1pnUUFjeWR5UzdwK1pxeXVMWFJuN2tnNzNJN1puY3l6ME9QaHdBcWhBT01nN2ZORG5mN0NWQVJ1SnAyblliRzMxNEQ0eS9YR1lscnJ1UitlSFpaUjZpU042K3AvOTZ4Uk0reVFtUTBqSStEbmxhVmFaeVN4OGtvYmVSS1pudDMrQjdQUktXUjZzcnJtTDRDNFV1b29mT3F4RHUzaFJlazFudzVPZXRCRWFxYVYySWlkMW1nYlAxWUxNcVp2NE42SGlscnhWcmlxTnU2RzE3a0djTjV3MU90ZVVONStFUTMvcG80U0dVWkZCRDJmTU1nWHFXVzV4SzdjZjd3bnVVellUS01iUDc2d2RhNnFYYTZNaWU2aldwQ2NnZUN1NmNtYkxWU3pqQ3BEY094cnVzZ1QxZHRMb3ViN3pNWUgwa0VML3Q3ZWdKN3MvTXJpd2VEdUFRQ3V2UTFoR3c0SmtRRHVrZXpUL1poS2tiaVpmeXNLbzdvSFExd1pwZE40RWVtbjFiWE9YSzcrbnA3NHFjandrT0NuQXVDdmM4bWNzZERwakEydXFPdGNjM0tkaXJjb24vVUN3YkNGTGU2K1ZiTnI1ZHZrelRST0FlNzV3Z1A5enJNUEFSM3RZQUVBNlpRUEtpUUpBVzNyQlBkdWNNbE1scFo5M09wOWNYSGJiNTdGZENaMlZWandDRS92T3JHZlJhT3ZTblRlNG1qZlNnTUFvTVN1YzQzclVWQ2VzclJienlwbEd0RzhHQ2Jya1FOc3JLQmZaQVg3VjBLZTVLZi9JMUdRclpBQXJaOE9MMnFSeXhnbFU4TXF3TGRWclA4bk0rcm9GeTcrUDZqRzlici9FRElRVjh6NXhpYjlDeVdkN2dVUFIyU3ZpaGtBbWF3UFI4eVlqOUdTdHhhNFZLYkdVOFZ6MlZ2K215Znp3Zmd4SnMwUG1xK2ZuV3lzanFVUGpob0FsdGpRRGFnQW1aRUFvR25KQUM0L0NuK3p1UlhWRllnaEhjek92UFo5c2NrV1VqbmlzVC84SDdxZW43RDdvT29ERHdaaytRU1hENjJKQUp5cDdBeFdGei9BWGRLZ2VGMG1HL2p0ZUJQTTNmdS95Ni9UeDBRZmZkQVBGUDRFQ0NCUTBlUkpoUTRVS0dEUjAraEJneDRTOEFGUzFleEppeElnS0xDZFJoQzRWTlZBQ05BTFNFdzVSSmxCU01RQ0FsU3ZRU1VySklpQ0xCckJrSjJjMmJPeEVsdWdrVUNaQ2hDSWdTUlpJVUNRS2xTSmNtSlFwQXFWS3BVSWNpcWNxMDZWV3NWNlU2clFwZ2xFU3laYzJlUlp2V0xNV1NGem0ydFloZ1hTaHdvVVM5emFncEpUWk5DVnBHczVrb1dzeEVOQkVCSGd3VVViS1hrUmduZ2dhVHFOYXJScThlZllvWmlOYW9YRHRQMWZ4MDZtaW9uSXZhVXB0YTlXcldyUVd5aFJ2YjdUaHdtZi9BOWRXSVFGd20zbHN5SWdINitHZE9uRFlYOHh4ZVBKTFZ5WldWTWtWSzJlcFV5NVEzTjg5Y3RQUDFvbHl6dXdZZlh2ejQxN0h4eXBhTEtaektKQnFqck1la0tVcEdJSkdITzM3NWVLZmltb0p0N2tRR3FLcVdjc29yend6Y0xLbXZRUFB1TXE2a2E5QXp5eFRjZ2p3TEw4UVFJdGpNaXlBTE1iVDRNSW9JL0tySW8xQ3lBUVczakVUSkpLVlJOQUtDcHdBREk2Nm5td3dMaXJoRXRHdHF3aDZUa3E1QXl3YUVUaXNqUXh2d0t5TzNJa3FMREorRU1zb05OWUpBQzFIVVVVZWNkTUpKSngwczFSbEZDNy9XVVE4VFVkeERLUnNWTVVMaXNVZ2MrODgvd2dpYkNiSkVEaU5zdEFTcDZzN0I1cmdyY0VFL1NlTXNTQWRGUStML25pZ1haVlM4S1MrQzRFcDF0Z1FuSEVzdkRjWFNkTVJaWlIyUWJpTVJBSTRTRUFlVGxGaHlxNklZN1F3TXFEc2R1eWt5NUhoNk5SSHVvSXN3dXVjSzNIVzBySURzYkVHa2pscXlxNmhhYVRSWlpWUDc1YnlLSXNEeTBuQlNtUlljYWpNTkI1Unc2TW8wRk50R3draVRGalB4clNRa0FuUTFzc2htNnU4bFZnZWJLYjhvdHVwMVFjc3dRM0JDN3BpTThEbm5RbXRLazJVSEpsaWlSOFZRWjl0MFFsbllVbXd6MVZiYlRHMmorTXlMb2loVkV5M2dpckVtd0Z5ZGxTWTNZWEwzcHBjKzI5ZGZwNG9rclU4ZWk5WE1SKzlNcTZwZ20yOVdhTW9zMUtsMHkwdXBiYml1dXJiTkpsUDFRTW5tTG95a2tHSyszQ3BxazhZN1A5NnYvOVY0QzZ1SnNXU2lzRzRyUVJYMGp0Z0NlUTJOS2JPOUJ0WTVxSkRGdVcyM2Z3bDFaNFc3cFhiYmNJUit1QzRVd1RFMUZFMWtLMm5WeHlJRDJjNllrbkZWSmxlQndneFhRd2ZzMDdvSmxkUjFVR0xwWlE0cmdkM20vR2JZRUVqNFlVeXp0YnZiOVZCYUQrbVFSQWtWTG1mYkxKbXdkWEhhNzZYOWFQSnBSd0tCZEJEeVB3Y0ZlN1I3UlZ1Wk9aWXppNkp6NVF0dXRpSlJmSzY3VzZFbDNoYWNpSXRlNzhUNFdrZFBWWk9Uc1FueHJJa0xQNmlYQW9zbUNhZndSZlIzZjBVYmNEczllUytiUVdMcldUNS9aWDhoS1FwMVRPZVc5ZTRHUUpBVTBGdVpTQjF2dU5lV3Q1QUVkcTR5VHVJUXg2NmZzRXN3dGFvT24vQTFQR01CRC84N1BacE00MVJtb015TVJYOG5YRlR6UkRIQUFZSmplcVhEbnVvUWlNQ1VaQ00rM2FzSVNidzNRWnI0SnpHTmVaVmg2QVMrU0F5cks5UmhuOHd5U0Q4U1RtZDNLV3ZmVUpLSFFpbytpWCtnTXgwb2hrYTlFM0VMSkJRTENXOUFrUWxzWkdLQmNXbkxBOXZGbi8zc3B6K3dTczV5WlBZWkpvSVFiY1Vqb2N6dXFEYlVWTkdQRm1vV3FUSTFOQUN1cHk0RkJBVTJ4b2lTVENUU1ZKblFoTE9jaFVaUkFXQlZlQm9NbmhJSGxBRHBwRC93U29iNk5HaWF4dEZSYlhiOG9CR0ZCYUY3bWZDUHJ3elBGWGtHc2RJWjBtZ29BUVVtVHRRaWxOUXdKZUFDSEpzZVF5ZVNKZUoyamFHUjFYYTBKM29kaVVIeHV3eUVOdmhCNHZGSWlyRC94Q1o0NE9ZUjdNM1FsaWdxV2lKM2liUmNaaUliNHlKWE1DMml3MVhKcWpBdkdVeE9odE5KZW5wU2R3RGpZR2w4eGJ2TUVXbHN3T3NhRXV5UlRZS3VwbmtRQXducHlKbklYQmJOTnFhcUlXOHdZVVBXcWJPU1VCdm03Tm9sdmg2U0wwZUorRlYyUmhuTjliMXNLdEFrRWhQeEJRQzJGZFNsYU9HZlNhb1hFcHJTVUlhMU1kVTVKYnBUVkZtMGtxdDY0enN2S00vRHdZUndzN1BjOFp5NEZRZ2Q2a0daRTJIYW5QUlNxcTZGUk9Lb0RkKzZpS0l5YXE5RlhaM29Ybml6aWFkdGhKSVhpVm84YzdkUlRnSUZpSTNabW1nTWRhZ2hwVzA3em53aVA1MlpzcXIybFN4d2UxYXBUalRHTDJxUG9TbVo2TGhTa2drdFROSThPYlNrLzhscUJTZkg4RWN4dUt1c3U1REVSTFA5czFlWSs1cXduRnFhZHZqVnRBOXBYa1hlVXlaR1l1T1J2RG5uT1JjYmlmaHNUSjE0SVFsSHpuV1R4R2pVT0ptTTUwOEk4eGgrWnM2NGV4SnRueUMzTytyd0UxQlRQVzEwYzlhNktJakNoalQwMWpuTDJLTEZQbElURWJodFcySkV4RlpSRm5HQk9SOStMQnN6WFRGVHBPL0RsZkhXTjd6TEtXaUswc1h2UVFDTEVTdTFsamVLM2FrMnRCQUZIZUl3VlJaNW9IOTBRaGppZkN5ZWJlVkpzWndvdjlLRVpsZ1NwdVlSbllpLy9IYVlJUHZOaUJRZ3ladjF3SlkzbXRqQ0dYMktScURHTVh5Y3BKWHRpTE1mQ3l0VmcvRFZKejdacTgraGlNWERQMzZOaWplU2dDZ1F1Y2hGRm5KSkp2L0prZHhhQkFpQU1ZeURDUk9Zd3lRbk9DWExUbnp2aWtUZ2NibEIwb2t2QUNJQlpDQ0RlTVZudm1oR0hHaFp4UkNtdDdUelpISk9kaUJFOFV0STNRRVVuM2dFTUtUMGtjd2ROak9hdzN2Z2l6ejVKNGpScER3bGE3NG9DMFd1SkkwYzJOalhYR1l1bHpKaGNlV2Y4eHRvUVdORWtwNHVjS2lBazhrY1ZWbGtSYTN5VGFoc3F5NnJkR2FTemlmNzVCZS8rMnA2MDBrK3MyUFZHVFhrQUlaV3hsbTBVWVVkaVdJVmFkTEc3aGR6blRuWEJObjZ4NytRUUtlbDdlbklIcTVWZG9LbnNIMHR0WnRZbURSNTNpZUZrOXM3MExEQzJUOG13YlRWN1dSZlgzbE9Id1BpaXo4bXEwY2JTNC9EVzY2ZVQ5cmNDa1AzM1BqOUJSblVyV3Yvc3pJUXJjR0pJTHh3SXFjZjFvb3czdDUzeXJxbUpMUlpKYmxBZ01LL1BjeHB2SnpINDJqdWVLb01IWlIyRDY1V011bWhyK082TzYxOExlS25IRzBxMDRhQTBtcDgwOUZlZDZmWmFTTXE2eWhXTUNIMWNJUXJLRjdWdGVpWThlY1JrVDRkQUd6TzVnREhOY2d0aWhjMUdwTzNRaVdjNHVBNEdHak1hNFF1ZjZJZXJjbGpNQThsNDAvZk5IaHpUdkMzdEIwQUJmYmVzSW41UmszYVI5VkJvWERFeFc3U0gwRTFtalZIdTNSL29RQnBFN3pnQmtmd01HMkhjRGhLMWxYSDFKMGQ4ODBqMzBYVFFaUTVVcVlEZjlwZnFEMGpIeis4NFFFM3lmRm1lNDJmTkthQzBlc3FlMzI3Zy9PRFhIenpxcGxhYjU3emhNKzU2dzZ2RVY3WC95cWVSSnhzK1I3amE3dDJVRHFVUTVUTExaMjJnZHBlOEo3UFBiV0R1U3FWUnhDZTRZdjNuRncxNmVMemFyVFdGQnRYQUdCdTV3c2U5NFNPUHVBU2pNd0hTeTFBc29xeVRlQTM5c3pVMWE0K3lyQmxhbDkrdjNZKzl5RmZzVldwa3dYTEduWUpFQ0JhbyszckY0RFpwNWFCSmdwclB2N2pQSnpUdlhVRHdEUlRvMlNpRlpEeGlSN1NENjh6dW5wRFBraExrdUpTRVBLVFFNNkxPdWxEUDJrYnI2S3FrM216dGxuaHRzbHJ0ZW1RSnZ2UkRxZExRZE9DTmtFVHZSWVVyM2FqTzVDeE1zSUJyc05JQWhMVXF5MGpOMWh6cnJQcndRbFVzdlJUdjh1aUlGRENQZ2FySUFncW9qcTdRYkl6cmtHaHVTbU1yaDlrd2NJTHdIYXpMUDhFUExSaHd5eVk2S2NtN0tDcXFCOE5hemtlTk1PKzhyL1JDNllnaEF2Z3dMYkNZTHhPZWhXaG14Tm9hSS8zWVVBVGZMUkF1WXo5MjBPcVFrTXJSTHcwVXhWM1lvd0U5QmhNc3BQR1d5WU93anh2RTYwUTBwTXluRVFmcE1DcFM4TUtUQ00yR3lxdE1aODU2UTg4V1E3aHdhZjNJUlR4MHc3TlMwVktYRVZMM0wwaFBJNVU2MExmSXhueGFUanUrQnBja1orNzhxeWh5SUpmcE1MUFd6dUxBZzdpY0JlVnU3N0RJU29zYzBDWSs2eUttNUFJcE1hcXFzUkxCRVJNdEtqNllMeVJRU2JrY0xkMm16WFlRNUFLcXlZRklZVnpWRVZYckVJaC9FT29ZVE4zUVVKaHc1T2VNeWF1Y1QzM0FzT3VpUTRnQUlKcDVNZitDMFoyRkViL0dJR3lUM1NUWTVRc2xXT3dwZnVkUEh0R3VYSUtjNXpJbDBySGk1eStSVHRHK0lzWDhSRTZXTkdkQ1pHOVU4VEZzQm0vazZSSWxmUkhxSEdqMjVsRlpicWdyR01jT29NMWxLRy9FTkpEblhTcGxBeElnTHhFK3JDUlluckpHMmtNbjVBUlY0RVpEV3VaS0pLS0NXSEtuUncwUHd5OTJOaXRJQW9xWWdvdUNCdU9tSGtteXZzK3FLaUZzT1REaXR5OWRSekdkdndlMUx1YWhqdEluaUF1aHdURHJrUStBTmdFdXVSRERlQkpiTndQTGl3MUdIU1ZiVk5BN0tDdmU3SE1iNU5DeEVUSkNiREdzZXkwdDJnbllUTzU0TW9zdEZ3TUVPUyttbFE2NHdNOHpXeEt1MXpNd0NGS3gxc2pIT2toeDJRZjVETkZhTnFWdzNSTlNsVE0vMnZzdEd3OFNMVnlsY2R3bDVjNHFzSlFTT2JxeW1iaUVVbjhUV3o2QmM0MHNMenNTZXgwUjhkalB4cDVqSTFzTTFtelRQbHh4cWt3eWVuTXBsOEl6cWhjc1NVTFJHSHpEeUZTdFk5cE0zdUtwL25UeFhITURBRFlSL1Rjek03MHpGeHpNcUlFSWluN25teHJzem1icngyN3NHSHhOLzhrS1BXMFFyeGtFemNEdWk2VXA0NDZ4Q2hiUXBacndIMmJEbitBMFArTVRjQjVNbUtDS3dLY01wWHp1WkxpTTY0TW9TM3dCM3V3QjF1WVVWKzRCeHoxaFgvNEJSNzEwUjRGMGg4VjBpRDlCU0lkMGlNMTBpUkYwaVZWMGlabDBpZDEwaWlGMGlsVlVoKzEwaDY5MHRmUTBpemxVaDZOTm80QTAwb0swekVWMHpJTlV6TkZVeklWRmYrWHdCcXN3ZERGUU5EYW5BbXUrYUNRb2hsNnNTU2pzQ1RLQVFKTDZ0T3UrTXFuT0JzRVNBSUU0Sm9qRTVGRWpZQW9rSUFvMElJSTBBSXAwQUF0b05SSnBkUXQrSkF4d05ReDROUk9KWU14WUFNeVdBTTJJRlUyYUlNNk9OVTZzQU03OElOV2RWVS8rSU5ZbGRWWnBkVS8rQVZadmRWWXZkVmM1VlZiOWRWZC9kVmczZFZodFZWaUxkSmhQZFprVlZaa1hkWm1kZFpuL1FWZjBBUlBDaERFc0RxdHNSTnJqUXh0OVNFNzBSckUrTmJEQ05mQkVBN1UrMFRsT0k0TEFpSWpjdEduVWh2dld5ck1lVkY1TmNxd2lUay9rYlhqNGdwQUdBcCtSUVFrK0ZkRWdBS0JUUVFvaUFRb2dBUklRTmlFaFFLRU5kZ29pQVNJZFZpRnBkai9LSUNFTElDRUtNZ0VnNFdDVERoWWorM1lTTWdFalkwRUxJQUVUSUFDVElpRUxCRFpsdFdDbHNVRWs0MVprY1VDa1gxWmNaR0UvMG9KTEVDbkU5TUVjUkdYL3hMYS8vclpvcTJKOGtMSTVLeFBSQ3hDYlpTVHBoVXVwUVhNZUp5bjhWbTl3TmdQRDkyVFM3Tlg1S3FNM1F5ZUJrR0tFbHlxYUlSWGVCMk5EazJLZ0FYWXRrVUV0ZjFYMHZqWEpkeVJ1STFidDAyQ3R3V092ZDJSdW0xYnY3MlRnSzNidXMzYnVoVmNSUGdKNEVpQ083a1RnRVhjeDJWY21JQ0p3azNjbjdEY095bGNtTGpjelkxYzRVcFhuM2l6ek9vaG9MUkZvTndKeENHY1JTTWk4ZGtQS092RW54c01VbXV6d1dqZG5pc3BQOEcvclV3YjF3c2VxUWhVL3lQaU1iTHBTdUR0eWlYTTI2SFlFYlZWQ3VOOVc3MTEyN2JsV3lSWVFyYWxYdWx0M3JhRmhMWmRqc0hkMjdmbDNzVEYzQXBDWE1YMTNFakkyL1BKWGtUSTNqd0pLdU13RGtqZ3lHTEtDWm1ZWDhHNHVobzV4THREU0VWek9NV2h4UU04THhxOHV6WWo0Tk5iWFIzWnhzQlFMa2M4a0drQ0RmdmJPenl5akNWOHlBbExOdWsxSW41RkFuNGxpZzZkM3JWRmdpQ0lXK09GWGhBZTRlaUZYcnZOMnhWR2hDZ0kyT1A5MSswZDJCMkIzNEo5VzBqSTIrMU5YeVNvWVJ4dVljdGQzUFJWWHlBV0xzWTFYL2Z0UXZVMTRtTDZDZnVBdDJKNlBJOEpEbzNNMW5URkxGbDAwNThyTlZDNkVTbk9RanloSUFVN1JCZ3puQWdUMnowcnR2K3dyUzk2L1Jwd2cxRittNTk2bmR1a1VONGwxT0Rwb0ZzZ2NGNjJWWXJtL1dDN2ZWNC9CdHhBSnR4LzdWdmdhTjYrYmQ1RnB0ekpWV0RFaFYrQXJRa2dpZ0xHZGQ5SmpxQU5WQnpGeWVTRkc2WXA4eWd2SkthbHpZa0pVZ3dpak1ua2lDTW96cmJBY0VsV05wd0dkVVJ2TXlKUzBqQkxZOGpYd3c1ODRiN2w3V01HU1FwV20rUG5qYndPRFlTcFlGc1dUb0kvZmw0a1dJN2o5ZHNYbHVZYlhtUkVCZzRmTHRnN1NWOFhUb0x6cVdUM0JWajRUV1RMTmQ5YXJHRnl2bHdJWWhWUVR0Y1lHNzRwcGlBMzZhUmhJc0JPZWpFYW1lZjh3TDRlY3VJM1pEQ3JnMkxYbFpPWGNCbmMxYXNSY3RmZzVhQ2xJNVJlQm1aZVRvb2dtSTcvWlpMZWlpNWhpeVpjRXg0S0ZiYmVaZ2JrUkZqaDdqM2VTTTVtWis1ZUY4NW1RMDVreDdWa2tCWXVSSFpoY1g3ZlJLaGt6U1VaOFlYZlNTNGM2eU1tZDRLVGYrYnBBYWFzV3RHb3kyb3djajY1VFpvVE42eG5SdnRuclhNVkpzRTh5M205bG9PMEwwdG9hTFRKeXlrUTVZMDhPcjZLRGtVRUlJRGJ0U1hyRUxiZXNtN2JKVHpta0U1aGdKM2V4UVZZRjRicjZ5MWtSTDdlSCs1bUdyYmhnZDNySHdhS3ZIMWNnWDNwL0JXS21FaGl6SFdYMWVQa0o1NHM4UEZXZXpyZDlDTGp3REFNNElPeDh2SFdPa0hDZlo1QlVhWWc5ZXJzVDB5cHZGdVNmMExicjMwcWhvN2oxS1lYNEVXS3NmNWxpUTVtcDVCb0dHYmV0LzdianE1ZS94WDI0OTUyMisrRjVuRXVYSlpHM0w2ZFhQU05DY2Y5NGY0QWFjWk5MOFNGZ2xGK3pQTUp1c0lKTmdTZTNhS1M0bkxsclFqYUpHUmFIUDhGb25TNTF2MWR1TFFrYUNoQ3BiREpJR1owbVFxdUhJc2JpZzQxUlloTDIrZjhhdVd0WG94R2E5Mm1XK2s5M2tDdTZ3Q3ZXN3ErNGJ5bDY1cHdabXBlWVJ5T2laRXUzT24raWVKK1hIRU9YTXVxNlNHKzVLZ3RqaG5NWk8rRUNhM0IydTlXVnlqRzN5ZTJKL3M0dGRBMjNjeitHTlhORCtWTVBRUE1taWdvcWRZRDBlVkMyOCtRR2RHU25JTE9UNjZnYmRpMmJ3eUc2NzJkaWdBWFlkNUc1cjJGWVk4VzZVT20zaWluOHVFV2JKUmU1RWkrM0FhbmFjSVlXTUtXaWNXMWFaNjJ2di95b3NyOFRUaWNVTnAyZTZ0aDY4QUNoT2NQZnhQREhxcC9ua1VKcWs5YVRDYnM5bEE3bTZNalFqYUttekJXWW0xOXBUUGxYVjVBUm1ZS2ZuS0E3V0NMRnV1M1R0N2taZlM0dFhTNmp1YTZubXZ3L1ZmNExlNGQyVjdIM1Y2VXBsekJodHhGcm9tYUptanhCZStsMWx5aTZtUjMrY1Rrb0NlNU0wTExNbzdMaHBOM0hzVGliR0oza3hVdzV1Y0xoU090bWJNNUJFUDNjbWpqd2JNbWlxS2lXL0tIanVpN0RXdEFzTy9jRG1zbjMzUVFYc0ltSDNEZ25tNG8vL1RqWFE3QWRsc2ZabUV2Zjl4ekYydzV2QWtLaDkrQnpWNGRpZlVjSG1MRVJ1eWdRTmREbE16STNHNmJvTHRlQzNaN2VtZW5sY2Q0RzJBdTVQT2xUV3BRWHB6LzVXQW13ZHdUSHo5SzR3UG1hc3JGUFF2RE9QNjJTVWRyUGpiZXM3WnZRTlpiUzlmdHZsMzNUVmRwdmwxcGJWWm1HdzdubjlEeXlCWGlWTC9od0xia2RybG15ZFhBVkR0QXRLVHozN3JRMkJXdVVBWnFxOFdSMnMxV0dBZTZiaVhBQTViRjR4QWl3aW5QK3JMbE1Yek9xRXFpZjdsZ1JuUVFpUzRwVnV2b2l2N2dxVGptNk9YanV3MXAzVmw3dkYzMzM5NXRIeDUzK1J0Y3ZUN3V3KzNteGVWbW5PYmhLWFBwVGVMd0tTdHZ3QmZ2MkVuZ2pnSzIvQjArUEpuNmcwY3Y4Wm1zQkYwNFRsYTFUWktzbUZ4Ui9wQmdnQW9lWkFPVUplTDZ5OXpsUXpIRkJsRjBSWWQwcGJqanM0OXJzQmFsanc1bUp3OWtBKzlldkkxaFJCWnMveGh1M3BvZldCN08vVEpYaklDRjNMK1h4eVRXNld2enFDNk03dUI0ek1oQW5KSnpQTXgzc2VFS1NpMDBlR3BWMXduaXVuZEtPYU51VThybStEdWJOR20zNEsxZFk5NmQ2dWZNK0t2NDEwZzMrNHErNDdWRzNxUTRaa1l2Y0hKL1htaSsvWE1IQ0NTUmtDQkNrb2lnd1lTSUlpRktzakRod1VTSUpocEVKUEZncENRREQwSkMxQkZTRWtpSkxscE1GT1ZpUjRzZUpZcE1raWlTUklZTVVTYUM5bkxreTRXSlJNcTBHRzJoeFdTUWZ0WWNDU2tadzJpSmxPNlUrRE1TVXAwd2M4b2NPWlBuU0owOFZTYWxDaFRwMGlSSXhvNUZBR1FzQUNSbmtTQkFxN2J0MmJSbjU4SnRTM1l0V2JWdjZhNmRPOVl2NEw5NnlRSVNtMWN3RXY5QVpBMFhSQktrb0dHSGhnOGlMQWhFY2tLRWxSRWVkTW1aWU1HQ0VhRk1kQWlSb01Rb0RTRUpSQVFGbzhxTE0wTlBaT2t5WTBtUmlGVHJ2bm96cDlDYVBYRkNnb2tVMlZLTFVHSHFmR3BWZWJLY1JuY2lCUXRUWkNLaDJoZEdGMm5UZUZLZFVaZFNiNHFJNlhlZ2tlU2FQZXdXcjJDN2VPM2ViZDhlU0h1MjdwR2tKWnRmLzFpR0xmYVhnSHFaaHBsWWdRUTRWbU1FSGFoWmd3bUpSVmxvbXhrRWhXY1JiWllJYVJ4YVpCQklFdzMwSVVrTzBSYVJhaHBWUkZwS0REbkUzRTBpSVpIU1RzcVZKRjF2c1lra1VuVE16UVJWYitOZEY5eFQzUEdJM1k2SklBT1RUZGpCZEYxMnpCVjVVNUZLYlFXVFVqcmRGRjAwQmVyRlhsNy8rSjBsbjMrQS9UZFlYbko5aWFhWVlTTG1GNXAzTVRnWWZHTWRGR0VTWitYWkdWa1ZPaWhhWmcwQzJoQ2hCSkZtR3FHbTNWa29SeGlCU0pDTXMyVkZFa1dzMVRqU1NSYTlhRkdMQlQzNW5Ia3lMU25WVFUrTytsSndSbG8xblkvU09SZGNVNlpTWjJOVldJWUtLbm94RlhWVWtwRzBpWitiY2NuWjE1bjB0VmxYblFDeU5hYWJoeVVyNTM0REFzSG5ZWVVWT3BsbURFNkloRmgrVWtSWklwSzVkdWRtZ0hvb21XNGFTdVNRUktDaDJGQkdBMzAwVVd5dktXZmVTamxtTlZWUFVPcEVhcXFmT2dtclRlZHhkOTVMeUVFWlhGZEsxc29kZUVxYXAxUWtvNElGMUUwMjNTUVZNbDZ1V1phY2R2WDMxMzF4eHFtbW1uRENTU2ZJWVhSR3BsYTNNQ2MyNTE4TkFSSGhnZzNSN0dkbk9sdFlZVVBpL25taG82SVpyVkJJc00xSTBFWVhrWFFSYUR1eXU3RkxTVTZVNDFTOUlYY1V4a2VoT3BYR05pbThKS3RVeGFpcnhsV1JqVlZ3WUZrZGlYRklydXJkMTFJWkROVzlBUUVBT3c9PSk7YmFja2dyb3VuZC1zaXplOjEwMCUgMTAwJSI+IDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9IndtcF9jdXJyZW50X3RyYWNrX2luZm8iPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ3bXBfY3VycmVudF90cmFja190aXRsZSI+VGl0ZWwgaHVpZGlnIG51bW1lcjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ3bXBfY3VycmVudF90cmFja19hcnRpc3QiPkFydGllc3QgaHVpZGlnIG51bW1lcjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ3bXBfY3VycmVudF90cmFja19hbGJ1bSI+QWxidW0gaHVpZGlnIG51bW1lcjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPCEtLSBNZWRpZWJpYmxpb3RoZWVrIG5hdmlnYXRpZSAoYWZzcGVlbGxpanN0ZW4sIGFydGllc3RlbiwgYWxidW1zLCBnZW5yZXMpIC0tPgogICAgICAgICAgICAgICAgPGRpdiBpZD0id21wX2xpYnJhcnlfbmF2aWdhdGlvbiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0id21wX25hdl9oZWFkZXIiPkxvYWQgTUlESSBmaWxlIGZyb20gbG9jYWwgOiA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImZpbGVzIiBhY2NlcHQ9ImF1ZGlvL21pZGkiIG11bHRpcGxlPSIiIG9uY2hhbmdlPSJsb2FkTXVsdGlwbGVGaWxlcyh0aGlzLmZpbGVzKSI+TWVkaWViaWJsaW90aGVlazwvZGl2PgoKPGRpdiBpZD0id21wX25hdl9zZWN0aW9uX3BsYXlsaXN0cyI+CiAgICA8ZGl2IGlkPSJ3bXBfbmF2X3BsYXlsaXN0c190aXRsZSI+QWZzcGVlbGxpanN0ZW48L2Rpdj4KICAgIDx1bCBpZD0id21wX25hdl9wbGF5bGlzdHNfbGlzdCI+CiAgICAgICAgPGxpIGlkPSJ3bXBfbmF2X3BsYXlsaXN0X25vd19wbGF5aW5nIj4KICAgICAgICAgICAgPHN2ZyBjbGFzcz0ibmF2LWljb24iIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTEyIDN2MTAuNTVjLS41OS0uMzQtMS4yNy0uNTUtMi0uNTUtMi4yMSAwLTQgMS43OS00IDRzMS43OSA0IDQgNCA0LTEuNzkgNC00VjdoNFYzaC02eiI+PC9wYXRoPjwvc3ZnPgogICAgICAgICAgICBOdSBhYW4gaGV0IGFmc3BlbGVuIGxpanN0CiAgICAgICAgPC9saT4KICAgICAgICA8bGkgaWQ9IndtcF9uYXZfcGxheWxpc3RfYXV0byI+CiAgICAgICAgICAgIDxzdmcgY2xhc3M9Im5hdi1pY29uIiB2aWV3Qm94PSIwIDAgMjQgMjQiIG9uY2xpY2s9InppKDEpIj48cGF0aCBkPSJNMTkgOWwxLjI1LTIuNzVMMjMgNWwtMi43NS0xLjI1TDE5IDFsLTEuMjUgMi43NUwxNSA1bDIuNzUgMS4yNUwxOSA5em0tNy41LjVMOSA0IDYuNSA5LjUgMSAxMmw1LjUgMi41TDkgMjBsMi41LTUuNUwxNyAxMmwtNS41LTIuNXoiPjwvcGF0aD48L3N2Zz4KICAgICAgICAgICAgU2xpbW1lIGFmc3BlZWxsaWpzdAogICAgICAgIDwvbGk+CiAgICAgICAgPGxpIGlkPSJ3bXBfbmF2X3BsYXlsaXN0X2N1c3RvbTEiPgogICAgICAgICAgICA8c3ZnIGNsYXNzPSJuYXYtaWNvbiIgdmlld0JveD0iMCAwIDI0IDI0IiBvbmNsaWNrPSJ6aSgwKSI+PHBhdGggZD0iTTQgMTBoMTJ2Mkg0em0wLTRoMTJ2Mkg0em0wIDhoOHYySDR6bTEwIDB2Nmw1LTMtNS0zeiI+PC9wYXRoPjwvc3ZnPgogICAgICAgICAgICBBZnNwZWVsbGlqc3QKICAgICAgICA8L2xpPgoKICAgIDwvdWw+CjwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ3bXBfbmF2X3NlY3Rpb25fbXVzaWMiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ3bXBfbmF2X211c2ljX3RpdGxlIj5NdXppZWs8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGlkPSJ3bXBfbmF2X211c2ljX2xpc3QiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGlkPSJ3bXBfbmF2X211c2ljX2FydGlzdCI+QXJ0aWVzdGVuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBpZD0id21wX25hdl9tdXNpY19hbGJ1bSI+QWxidW1zPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBpZD0id21wX25hdl9tdXNpY19nZW5yZSI+R2VucmVzPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBpZD0id21wX25hdl9tdXNpY195ZWFyIj5KYWFyPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8IS0tIFJlY2h0ZXIgaG9vZmRpbmhvdWQgKHRyYWNrbGlqc3QsIHZpc3VhbGlzYXRpZSwgYWxidW1hcnQsIGV0Yy4pIC0tPgogICAgICAgICAgICA8ZGl2IGlkPSJ3bXBfcmlnaHRfcGFuZWwiPgoKICAgICAgICAgICAgICAgIDwhLS0gQm92ZW5zdGUgaW5mby1iYWxrIGluIGhvb2ZkaW5ob3VkICh6b2VrdmVsZCwgc29ydGVyaW5nLCB3ZWVyZ2F2ZW9wdGllcykgLS0+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJ3bXBfY29udGVudF9oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9IndtcF9jb250ZW50X3RpdGxlIiBvbmNsaWNrPSJwcmV2aWV3KCkiPk1lZGlhIGJpYmxpb3RoZWVrIE11emllazwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9IndtcF9jb250ZW50X2NvbnRyb2xzIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0id21wX2NvbnRlbnRfc2VhcmNoX2FyZWEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0id21wX2NvbnRlbnRfc2VhcmNoX2lucHV0IiBpZD0id21wX2NvbnRlbnRfc2VhcmNoX2xhYmVsIj5ab2VrZW46PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0id21wX2NvbnRlbnRfc2VhcmNoX2lucHV0IiB0eXBlPSJ0ZXh0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9IndtcF9jb250ZW50X3ZpZXdfb3B0aW9ucyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0id21wX3ZpZXdfb3B0aW9uX2RldGFpbHMiPkRldGFpbHM8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0id21wX3ZpZXdfb3B0aW9uX2ljb25zIj5QaWN0b2dyYW1tZW48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPCEtLSBUYWJlbCAvIGxpanN0IG1ldCBudW1tZXJzIChpbiBiaWJsaW90aGVlaykgLS0+CgkJCQk8dGFibGUgc3R5bGU9IndpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7b3ZlcmZsb3c7aGlkZGVuIj48dGJvZHk+PHRyIGlkPSJ0ZDAiPgogICAgICAgICAgICAgICAgPHRkIHZhbGlnbj0idG9wIj48ZGl2IGlkPSJ3bXBfdHJhY2tsaXN0X2FyZWEiPjxkaXYgaWQ9IndtcF90cmFja2xpc3RfY29udGVudCI+PGRpdiBjbGFzcz0iZW1wdHktcGxheWxpc3QiPk5vIHRyYWNrcyBsb2FkZWQuIERyb3AgTUlESSBmaWxlcyBoZXJlIG9yIHVzZSB0aGUgdXBsb2FkIGJ1dHRvbi48L2Rpdj48L2Rpdj48L2Rpdj48L3RkPgoJCQkJPC90cj4KCQkJCTx0ciBzdHlsZT0iZGlzcGxheTpub25lIiBpZD0idGQxIj4KCQkJCTx0ZCBzdHlsZT0ib3ZlcmZsb3c6aGlkZGVuIj48aWZyYW1lIGlkPSJ0YXJnZXRfaWZyYW1lIiBzYW5kYm94PSJhbGxvdy1zYW1lLW9yaWdpbiBhbGxvdy1zY3JpcHRzIiBib3JkZXI9IjAiIGZyYW1lYm9yZGVyPSIwIiBzdHlsZT0ibGVmdDotMiU7dG9wOi0yJTtmcmFtZWJvcmRlcjowO3dpZHRoOjEwNCU7aGVpZ2h0OjEwNCUiPjwvaWZyYW1lPgoJCQkJPC90ZD4KCQkJCTwvdHI+CgkJCQk8L3Rib2R5PjwvdGFibGU+CgogICAgICAgICAgICAgICAgPCEtLSBPbmRlcnN0ZSB2aXN1YWxpc2F0aWUgLyBhbGJ1bSBhcnQgLyBudSBhZnNwZWxlbiBzY2hlcm0gLS0+CiAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIE9uZGVyc3RlIGJlZGllbmluZ3NiYWxrIChwbGF5L3BhdXNlLCB0aWpkbGlqbiwgdm9sdW1lLCBldGMuKSAtLT4KICAgICAgICA8ZGl2IGlkPSJ3bXBfYm90dG9tX2NvbnRyb2xzX2JhciI+CgogICAgICAgICAgICA8IS0tIExpbmtlciBkZWVsOiBtYWluIHBsYXliYWNrIGNvbnRyb2xzIC0tPgogICAgICAgICAgICA8ZGl2IGlkPSJ3bXBfcGxheWJhY2tfY29udHJvbHMiPgo8ZGl2IGlkPSJ3bXBfY29udHJvbHMiPgogICAgPGJ1dHRvbiBpZD0id21wX2J0bl9zaHVmZmxlIiB0aXRsZT0iU2h1ZmZsZSI+CiAgICAgICAgPHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xMC41OSA5LjE3TDUuNDEgNCA0IDUuNDFsNS4xNyA1LjE3IDEuNDItMS40MXpNMTQuNSA0bDIuMDQgMi4wNEw0IDE4LjU5IDUuNDEgMjAgMTcuOTYgNy40NSAyMCA5LjVWNGgtNS41em0uNTkgMTEuMTdsLTEuNDEgMS40MSAzLjEzIDMuMTNMMjAgMTcuNVYyMGgtNS41bDIuMDQtMi4wNC0zLjEzLTMuMTN6Ij48L3BhdGg+PC9zdmc+CiAgICA8L2J1dHRvbj4KICAgIDxidXR0b24gaWQ9IndtcF9idG5fcHJldmlvdXMiIHRpdGxlPSJWb3JpZ2UiPgogICAgICAgIDxzdmcgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNiA2aDJ2MTJINnptMy41IDZsOC41IDZWNnoiPjwvcGF0aD48L3N2Zz4KICAgIDwvYnV0dG9uPgogICAgPGJ1dHRvbiBpZD0id21wX2J0bl9wbGF5IiB0aXRsZT0iQWZzcGVsZW4iPgogICAgICAgIDxzdmcgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNOCA1djE0bDExLTd6Ij48L3BhdGg+PC9zdmc+CiAgICA8L2J1dHRvbj4KICAgIDxidXR0b24gaWQ9IndtcF9idG5fcGF1c2UiIHRpdGxlPSJQYXV6ZSIgb25jbGljaz0ic3RwVHJhY2soKSI+CiAgICAgICAgPHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik02IDE5aDRWNUg2djE0em04LTE0djE0aDRWNWgtNHoiPjwvcGF0aD48L3N2Zz4KICAgIDwvYnV0dG9uPgogICAgPGJ1dHRvbiBpZD0id21wX2J0bl9zdG9wIiB0aXRsZT0iU3RvcCIgb25jbGljaz0ic3RwVHJhY2soKSI+CiAgICAgICAgPHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik02IDZoMTJ2MTJINnoiPjwvcGF0aD48L3N2Zz4KICAgIDwvYnV0dG9uPgogICAgPGJ1dHRvbiBpZD0id21wX2J0bl9uZXh0IiB0aXRsZT0iVm9sZ2VuZGUiPgogICAgICAgIDxzdmcgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNiAxOGw4LjUtNkw2IDZ2MTJ6TTE2IDZ2MTJoMlY2aC0yeiI+PC9wYXRoPjwvc3ZnPgogICAgPC9idXR0b24+CiAgICA8YnV0dG9uIGlkPSJ3bXBfYnRuX3JlcGVhdCIgdGl0bGU9IkhlcmhhbGVuIj4KICAgICAgICA8c3ZnIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTcgN2gxMHYzbDQtNC00LTR2M0g1djZoMlY3em0xMCAxMEg3di0zbC00IDQgNCA0di0zaDEydi02aC0ydjR6Ij48L3BhdGg+PC9zdmc+CiAgICA8L2J1dHRvbj4KCTxidXR0b24gaWQ9IndtcF9idG5fYmF0Y2giIHRpdGxlPSJFeHBvcnRlZXIgYWxsZSB0cmFja3MgYWxzIFdBViAoMjZzIHBlciB0cmFjaykiIHN0eWxlPSJiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IDUwJSAxMjAlLCByZ2IoMjU1LCA4NywgMzQpIDAlLCByZ2IoMjE2LCA2NywgMjEpIDEwMCUpOyBib3JkZXI6IDFweCBzb2xpZCByZ2IoMCwgMCwgMCk7IGJvcmRlci1yYWRpdXM6IDUwJTsgd2lkdGg6IDM4cHg7IGhlaWdodDogMzhweDsgY3Vyc29yOiBwb2ludGVyOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgZm9udC1zaXplOiAxNnB4OyBtYXJnaW4tbGVmdDogNXB4OyI+4o+677iPPC9idXR0b24+CjwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDwhLS0gTWlkZGVuOiB2b29ydGdhbmdzYmFsayArIHRpamQgLS0+CiAgICAgICAgICAgIDxkaXYgaWQ9IndtcF9wcm9ncmVzc19hcmVhIj4KICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJ3bXBfY3VycmVudF90aW1lIj4wMDowMDwvc3Bhbj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9IndtcF9wcm9ncmVzc19iYXIiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9IndtcF9wcm9ncmVzc19maWxsIiBzdHlsZT0id2lkdGg6IDA7Ij48L2Rpdj4KICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPHNwYW4gaWQ9IndtcF90b3RhbF90aW1lIj4tLTotLTwvc3Bhbj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8IS0tIFJlY2h0czogdm9sdW1lIGVuIGV4dHJhIGtub3BwZW4gLS0+CiAgICAgICAgICAgIDxkaXYgaWQ9IndtcF9yaWdodF9ib3R0b21fYXJlYSI+Cgo8aW5wdXQgdHlwZT0icmFuZ2UiIGlkPSJ3bXBfdm9sdW1lX2FyZWEiIHZhbHVlPSI1MCIgbWluPSIwIiBtYXg9IjEwMCIgb25pbnB1dD0ic3ludGguc2V0TWFzdGVyVm9sKHRoaXMudmFsdWUvMTAwKSI+CgogICAgICAgICAgICAgICAgPGRpdiBpZD0id21wX21vZGVfYnV0dG9ucyI+CjxpbnB1dCB0eXBlPSJyYW5nZSIgdmFsdWU9IjIwIiBtaW49IjAiIG1heD0iMTAwIiBvbmlucHV0PSJzeW50aC5zZXRSZXZlcmJMZXYodGhpcy52YWx1ZS8xMDApIj4KICAgICAgICAgICAgICAgICAgICA8IS0tYnV0dG9uIGlkPSJ3bXBfYnRuX2Z1bGxzY3JlZW4iPltdPC9idXR0b24tLT4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBTdGF0dXNiYWxrIGhlbGVtYWFsIG9uZGVyYWFuIChzdGF0dXNpbmZvLCBiaXRyYXRlLCBldGMuKSAtLT4KICAgICAgICA8ZGl2IGlkPSJ3bXBfc3RhdHVzX2JhciI+CiAgICAgICAgICAgIDxzcGFuIGlkPSJ3bXBfc3RhdHVzX3RleHQiPkdlcmVlZDwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gaWQ9IndtcF9zdGF0dXNfYml0cmF0ZSI+Qml0cmF0ZTogMTkyIGticHM8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIGlkPSJ3bXBfc3RhdHVzX2Nvbm5lY3Rpb24iPk9mZmxpbmU8L3NwYW4+CiAgICAgICAgPC9kaXY+CgogICAgPC9kaXY+CgoKPHNjcmlwdD4KCmZ1bmN0aW9uIHppKG1vZGUpIHsKICAgIGNvbnN0IHRkMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZDEnKTsKICAgIGNvbnN0IHRyYWNrbGlzdEFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd21wX3RyYWNrbGlzdF9hcmVhJyk7CiAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFyZ2V0X2lmcmFtZScpOwoKICAgIGlmIChtb2RlID09PSAwKSB7CiAgICAgICAgLy8gU2hvdyBvcmlnaW5hbCB0cmFja2xpc3QKICAgICAgICB0ZDEuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB0cmFja2xpc3RBcmVhLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgfSAKICAgIGVsc2UgaWYgKG1vZGUgPT09IDEpIHsKICAgICAgICAvLyBIaWRlIHRyYWNrbGlzdCBhbmQgc2hvdyBJZnJhbWUgd2l0aCBibHVlIGJhY2tncm91bmQgY29udGVudAogICAgICAgIHRyYWNrbGlzdEFyZWEuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB0ZDEuc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1yb3cnOwoKICAgICAgICAvLyBTZXQgdGhlIGNvbnRlbnQgdmlhIHNyY2RvYyB0byBhdm9pZCAiQmxvY2tlZCIgZXJyb3JzCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgkJCgogICAgfQp9CgpsZXQgY29udGV4dE1lbnUgPSBudWxsOwoKLy8gTWFhayBoZXQgY29udGV4dCBtZW51CmZ1bmN0aW9uIGNyZWF0ZUNvbnRleHRNZW51KCkgewogICAgY29udGV4dE1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIGNvbnRleHRNZW51LmlkID0gJ3dtcF9jb250ZXh0X21lbnUnOwogICAgY29udGV4dE1lbnUuc3R5bGUuY3NzVGV4dCA9IGAKICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgYmFja2dyb3VuZDogIzMzMzsKICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjNTU1OwogICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICBib3gtc2hhZG93OiAycHggMnB4IDVweCByZ2JhKDAsMCwwLDAuNSk7CiAgICAgICAgZGlzcGxheTogbm9uZTsKICAgICAgICB6LWluZGV4OiAxMDAwOwogICAgICAgIG1pbi13aWR0aDogMTUwcHg7CiAgICBgOwogICAgCiAgICBjb25zdCBtZW51SXRlbXMgPSBbCiAgICB7IAogICAgICAgIHRleHQ6ICfimqEgQ29udmVydCB0byBXQVYgKEZhc3QpJywgCiAgICAgICAgYWN0aW9uOiAoKSA9PiB7CiAgICAgICAgICAgIHNlbGVjdGVkVHJhY2tJbmRleCA9IGluZGV4OwogICAgICAgICAgICBjb252ZXJ0VG9XYXZGYXN0KCk7IC8vIFVzZSB0aGUgZmFzdCBtZXRob2QKICAgICAgICB9CiAgICB9LAogICAgeyAKICAgICAgICB0ZXh0OiAn8J+agCBDb252ZXJ0IHRvIFdBViAoSW5zdGFudCknLCAKICAgICAgICBhY3Rpb246ICgpID0+IHsKICAgICAgICAgICAgc2VsZWN0ZWRUcmFja0luZGV4ID0gaW5kZXg7CiAgICAgICAgICAgIGNvbnZlcnRUb1dhdkluc3RhbnQoKTsgLy8gVXNlIGluc3RhbnQgbWV0aG9kCiAgICAgICAgfQogICAgfSwgIAogICAgICB7IHRleHQ6ICdSZW1vdmUgZnJvbSBsaXN0JywgYWN0aW9uOiByZW1vdmVGcm9tTGlzdCB9LAogICAgICAgIHsgdGV4dDogJ1BsYXkgdGhpcyB0cmFjaycsIGFjdGlvbjogcGxheVNlbGVjdGVkVHJhY2sgfQogICAgXTsKICAgIAogICAgbWVudUl0ZW1zLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgY29uc3QgbWVudUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBtZW51SXRlbS5zdHlsZS5jc3NUZXh0ID0gYAogICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDsKICAgICAgICAgICAgY29sb3I6ICNkZGQ7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4OwogICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuMnM7CiAgICAgICAgYDsKICAgICAgICBtZW51SXRlbS50ZXh0Q29udGVudCA9IGl0ZW0udGV4dDsKICAgICAgICBtZW51SXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4gewogICAgICAgICAgICBtZW51SXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzQ0NCc7CiAgICAgICAgfSk7CiAgICAgICAgbWVudUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHsKICAgICAgICAgICAgbWVudUl0ZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JzsKICAgICAgICB9KTsKICAgICAgICBtZW51SXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGl0ZW0uYWN0aW9uKCk7CiAgICAgICAgICAgIGhpZGVDb250ZXh0TWVudSgpOwogICAgICAgIH0pOwogICAgICAgIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKG1lbnVJdGVtKTsKICAgIH0pOwogICAgCiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRleHRNZW51KTsKfQoKbGV0IHNlbGVjdGVkVHJhY2tJbmRleCA9IG51bGw7CgovLyBUb29uIGNvbnRleHQgbWVudQpmdW5jdGlvbiBzaG93Q29udGV4dE1lbnUoZSwgdHJhY2tJbmRleCkgewogICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgc2VsZWN0ZWRUcmFja0luZGV4ID0gdHJhY2tJbmRleDsKICAgIAogICAgaWYgKCFjb250ZXh0TWVudSkgY3JlYXRlQ29udGV4dE1lbnUoKTsKICAgIAogICAgY29udGV4dE1lbnUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICBjb250ZXh0TWVudS5zdHlsZS5sZWZ0ID0gZS5wYWdlWCArICdweCc7CiAgICBjb250ZXh0TWVudS5zdHlsZS50b3AgPSBlLnBhZ2VZICsgJ3B4JzsKICAgIAogICAgLy8gVmVyYmVyZyBtZW51IGFscyBlciBlbGRlcnMgZ2VrbGlrdCB3b3JkdAogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlQ29udGV4dE1lbnUpOwogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgaGlkZUNvbnRleHRNZW51KTsKICAgIH0sIDEwKTsKfQoKLy8gVmVyYmVyZyBjb250ZXh0IG1lbnUKZnVuY3Rpb24gaGlkZUNvbnRleHRNZW51KCkgewogICAgaWYgKGNvbnRleHRNZW51KSB7CiAgICAgICAgY29udGV4dE1lbnUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIH0KICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZUNvbnRleHRNZW51KTsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgaGlkZUNvbnRleHRNZW51KTsKfQoKLy8gQ29udmVydCB0byBXQVYgZnVuY3RpZWcKCgoKLy8gQ29udmVydCB0byBXQVYgZnVuY3RpZQphc3luYyBmdW5jdGlvbiBjb252ZXJ0VG9XYXYoKSB7CiAgICBpZiAoc2VsZWN0ZWRUcmFja0luZGV4ID09PSBudWxsIHx8ICFwbGF5bGlzdFtzZWxlY3RlZFRyYWNrSW5kZXhdKSB7CiAgICAgICAgYWxlcnQoJ05vIHRyYWNrIHNlbGVjdGVkJyk7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgCiAgICBjb25zdCBmaWxlID0gcGxheWxpc3Rbc2VsZWN0ZWRUcmFja0luZGV4XTsKICAgIGNvbnN0IG9yaWdpbmFsTmFtZSA9IGZpbGUubmFtZS5yZXBsYWNlKC9cLihtaWR8bWlkaSkkL2ksICcnKTsKICAgIGNvbnN0IHdhdkZpbGVOYW1lID0gb3JpZ2luYWxOYW1lICsgJy53YXYnOwogICAgCiAgICAvLyBUb29uIHN0YXR1cwogICAgY29uc3Qgc3RhdHVzRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0dXMnKTsKICAgIHN0YXR1c0VsZW1lbnQudGV4dENvbnRlbnQgPSBgQ29udmVydGluZyAke2ZpbGUubmFtZX0gdG8gV0FWLi4uYDsKICAgIAogICAgdHJ5IHsKICAgICAgICAvLyAxLiBNYWFrIGVlbiBuaWV1d2UgYXVkaW8gY29udGV4dCB2b29yIG9wbmFtZQogICAgICAgIGNvbnN0IGF1ZGlvQ29udGV4dCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSgpOwogICAgICAgIAogICAgICAgIC8vIDIuIE1hYWsgZWVuIG5pZXV3ZSBzeW50aGVzaXplciBpbiBkZSBvcG5hbWUgY29udGV4dAogICAgICAgIGNvbnN0IHJlY29yZFN5bnRoID0gbmV3IFdlYkF1ZGlvVGlueVN5bnRoKHt2b2ljZXM6IDY0fSk7CiAgICAgICAgCiAgICAgICAgLy8gMy4gR2VicnVpayBkZSBvcG5hbWUgYXVkaW8gY29udGV4dCB2b29yIGRlIHN5bnRoCiAgICAgICAgcmVjb3JkU3ludGguc2V0QXVkaW9Db250ZXh0KGF1ZGlvQ29udGV4dCk7CiAgICAgICAgCiAgICAgICAgLy8gNC4gTGFhZCBNSURJIGluIGRlIHJlY29yZCBzeW50aAogICAgICAgIGNvbnN0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIGZpbGVSZWFkZXIub25sb2FkID0gYXN5bmMgKGUpID0+IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJlY29yZFN5bnRoLmxvYWRNSURJKGUudGFyZ2V0LnJlc3VsdCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFdhY2h0IHRvdCBNSURJIGdlbGFkZW4gaXMKICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIENvbnRyb2xlZXIgb2Ygc29uZyBnZWxhZGVuIGlzCiAgICAgICAgICAgICAgICBpZiAoIXJlY29yZFN5bnRoLnNvbmcpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBsb2FkIE1JREkgZmlsZScpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyA1LiBNYWFrIE1lZGlhU3RyZWFtIGRlc3RpbmF0aW9uIHZvb3Igb3BuYW1lCiAgICAgICAgICAgICAgICBjb25zdCBkZXN0aW5hdGlvbiA9IGF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbURlc3RpbmF0aW9uKCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIDYuIFZlcmJpbmQgc3ludGggb3V0cHV0IG1ldCByZWNvcmRlcgogICAgICAgICAgICAgICAgLy8gR2VicnVpayBkZSBpbnRlcm5lIHZlcmJpbmRpbmdlbiB2YW4gZGUgc3ludGgKICAgICAgICAgICAgICAgIGlmIChyZWNvcmRTeW50aC5vdXQpIHsKICAgICAgICAgICAgICAgICAgICByZWNvcmRTeW50aC5vdXQuY29ubmVjdChkZXN0aW5hdGlvbik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3ludGggb3V0cHV0IG5vdCBhdmFpbGFibGUnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gNy4gTWFhayBNZWRpYVJlY29yZGVyIGFhbgogICAgICAgICAgICAgICAgY29uc3QgbWVkaWFSZWNvcmRlciA9IG5ldyBNZWRpYVJlY29yZGVyKGRlc3RpbmF0aW9uLnN0cmVhbSk7CiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0NodW5rcyA9IFtdOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyLm9uZGF0YWF2YWlsYWJsZSA9IChldmVudCkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhLnNpemUgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvQ2h1bmtzLnB1c2goZXZlbnQuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5vbnN0b3AgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gOC4gTWFhayBCbG9iIGVuIGRvd25sb2FkCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvQmxvYiA9IG5ldyBCbG9iKGF1ZGlvQ2h1bmtzLCB7IHR5cGU6ICdhdWRpby93ZWJtJyB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDkuIENvbnZlcnRlZXIgbmFhciBXQVYKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2F2QmxvYiA9IGF3YWl0IGNvbnZlcnRXZWJtVG9XYXYoYXVkaW9CbG9iKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEwLiBEb3dubG9hZCBXQVYgYmVzdGFuZAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHdhdkJsb2IpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICAgICAgICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgICAgICAgICAgICAgICAgIGEuZG93bmxvYWQgPSB3YXZGaWxlTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOwogICAgICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNFbGVtZW50LnRleHRDb250ZW50ID0gYERvd25sb2FkZWQ6ICR7d2F2RmlsZU5hbWV9YDsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0b3AgZW4gc2x1aXQgZGUgc3ludGgKICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkU3ludGguc3RvcE1JREkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF1ZGlvQ29udGV4dC5zdGF0ZSAhPT0gJ2Nsb3NlZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvQ29udGV4dC5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZpbmFsaXphdGlvbiBlcnJvcjonLCBlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0VsZW1lbnQudGV4dENvbnRlbnQgPSAnRmluYWxpemF0aW9uIGZhaWxlZDogJyArIGVycm9yLm1lc3NhZ2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gMTEuIFN0YXJ0IG9wbmFtZQogICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5zdGFydCgpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyAxMi4gU3BlZWwgTUlESSBhZgogICAgICAgICAgICAgICAgcmVjb3JkU3ludGgucGxheU1JREkoKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gMTMuIFN0b3Agb3BuYW1lIHdhbm5lZXIgTUlESSBrbGFhciBpcwogICAgICAgICAgICAgICAgbGV0IGNoZWNrRW5kSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGxheVN0YXR1cyA9IHJlY29yZFN5bnRoLmdldFBsYXlTdGF0dXMoKTsKICAgICAgICAgICAgICAgICAgICBpZiAocGxheVN0YXR1cy5jdXJUaWNrID49IHBsYXlTdGF0dXMubWF4VGljayB8fCAhcmVjb3JkU3ludGgucGxheWluZykgewogICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGNoZWNrRW5kSW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhY2h0IGV2ZW4gZW4gc2x1aXQgZGFuCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF1ZGlvQ29udGV4dC5zdGF0ZSAhPT0gJ2Nsb3NlZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdWRpb0NvbnRleHQuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgMTAwKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gVmVpbGlnaGVpZHN0aW1lb3V0IG5hIDIgbWludXRlbgogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChjaGVja0VuZEludGVydmFsKTsKICAgICAgICAgICAgICAgICAgICBpZiAobWVkaWFSZWNvcmRlci5zdGF0ZSA9PT0gJ3JlY29yZGluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZFN5bnRoLnN0b3BNSURJKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgMTIwMDAwKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignUGxheWJhY2svcmVjb3JkaW5nIGVycm9yOicsIGVycm9yKTsKICAgICAgICAgICAgICAgIHN0YXR1c0VsZW1lbnQudGV4dENvbnRlbnQgPSAnUGxheWJhY2sgZmFpbGVkOiAnICsgZXJyb3IubWVzc2FnZTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgZmlsZVJlYWRlci5vbmVycm9yID0gKGVycm9yKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZpbGUgcmVhZGluZyBlcnJvcjonLCBlcnJvcik7CiAgICAgICAgICAgIHN0YXR1c0VsZW1lbnQudGV4dENvbnRlbnQgPSAnRmlsZSByZWFkaW5nIGZhaWxlZCc7CiAgICAgICAgfTsKICAgICAgICAKICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgICAgIAogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdTZXR1cCBlcnJvcjonLCBlcnJvcik7CiAgICAgICAgc3RhdHVzRWxlbWVudC50ZXh0Q29udGVudCA9ICdTZXR1cCBmYWlsZWQ6ICcgKyBlcnJvci5tZXNzYWdlOwogICAgfQp9CgovLyBBbHRlcm5hdGlldmUsIGVlbnZvdWRpZ2VyZSBjb252ZXJzaWUgZnVuY3RpZQphc3luYyBmdW5jdGlvbiBjb252ZXJ0VG9XYXZTaW1wbGUoKSB7CiAgICBpZiAoc2VsZWN0ZWRUcmFja0luZGV4ID09PSBudWxsIHx8ICFwbGF5bGlzdFtzZWxlY3RlZFRyYWNrSW5kZXhdKSB7CiAgICAgICAgYWxlcnQoJ05vIHRyYWNrIHNlbGVjdGVkJyk7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgCiAgICBjb25zdCBmaWxlID0gcGxheWxpc3Rbc2VsZWN0ZWRUcmFja0luZGV4XTsKICAgIGNvbnN0IG9yaWdpbmFsTmFtZSA9IGZpbGUubmFtZS5yZXBsYWNlKC9cLihtaWR8bWlkaSkkL2ksICcnKTsKICAgIGNvbnN0IHdhdkZpbGVOYW1lID0gb3JpZ2luYWxOYW1lICsgJy53YXYnOwogICAgCiAgICBjb25zdCBzdGF0dXNFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1cycpOwogICAgc3RhdHVzRWxlbWVudC50ZXh0Q29udGVudCA9IGBDb252ZXJ0aW5nICR7ZmlsZS5uYW1lfSB0byBXQVYuLi5gOwogICAgCiAgICB0cnkgewogICAgICAgIC8vIDEuIE1hYWsgbmlldXdlIGF1ZGlvIGNvbnRleHQKICAgICAgICBjb25zdCBhdWRpb0NvbnRleHQgPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKTsKICAgICAgICAKICAgICAgICAvLyAyLiBNYWFrIG5pZXV3ZSBzeW50aCB2b29yIG9wbmFtZQogICAgICAgIGNvbnN0IHJlY29yZFN5bnRoID0gbmV3IFdlYkF1ZGlvVGlueVN5bnRoKHt2b2ljZXM6IDY0fSk7CiAgICAgICAgcmVjb3JkU3ludGguc2V0QXVkaW9Db250ZXh0KGF1ZGlvQ29udGV4dCk7CiAgICAgICAgCiAgICAgICAgLy8gMy4gTGFhZCBNSURJIGJlc3RhbmQKICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTsKICAgICAgICByZWNvcmRTeW50aC5sb2FkTUlESShhcnJheUJ1ZmZlcik7CiAgICAgICAgCiAgICAgICAgLy8gNC4gV2FjaHQgdG90IGdlbGFkZW4KICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTUwMCkpOwogICAgICAgIAogICAgICAgIC8vIDUuIE1hYWsgZGVzdGluYXRpb24gdm9vciBvcG5hbWUKICAgICAgICBjb25zdCBkZXN0aW5hdGlvbiA9IGF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbURlc3RpbmF0aW9uKCk7CiAgICAgICAgCiAgICAgICAgLy8gNi4gVmVyYmluZCBzeW50aAogICAgICAgIHJlY29yZFN5bnRoLm91dC5jb25uZWN0KGRlc3RpbmF0aW9uKTsKICAgICAgICAKICAgICAgICAvLyA3LiBNYWFrIHJlY29yZGVyCiAgICAgICAgY29uc3QgbWVkaWFSZWNvcmRlciA9IG5ldyBNZWRpYVJlY29yZGVyKGRlc3RpbmF0aW9uLnN0cmVhbSk7CiAgICAgICAgY29uc3QgY2h1bmtzID0gW107CiAgICAgICAgCiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5vbmRhdGFhdmFpbGFibGUgPSAoZSkgPT4gY2h1bmtzLnB1c2goZS5kYXRhKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIub25zdG9wID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB3ZWJtQmxvYiA9IG5ldyBCbG9iKGNodW5rcywgeyB0eXBlOiAnYXVkaW8vd2VibScgfSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2F2QmxvYiA9IGF3YWl0IGNvbnZlcnRXZWJtVG9XYXYod2VibUJsb2IpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIERvd25sb2FkCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh3YXZCbG9iKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgICAgICAgICAgICBhLmRvd25sb2FkID0gd2F2RmlsZU5hbWU7CiAgICAgICAgICAgICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBzdGF0dXNFbGVtZW50LnRleHRDb250ZW50ID0gYERvd25sb2FkZWQ6ICR7d2F2RmlsZU5hbWV9YDsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIAogICAgICAgICAgICBtZWRpYVJlY29yZGVyLm9uZXJyb3IgPSAoZSkgPT4gewogICAgICAgICAgICAgICAgcmVqZWN0KGUpOwogICAgICAgICAgICB9OwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gU3RhcnQgb3BuYW1lIGVuIHBsYXliYWNrCiAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIuc3RhcnQoKTsKICAgICAgICAgICAgcmVjb3JkU3ludGgucGxheU1JREkoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFN0b3AgbmEgZ2VzY2hhdHRlIHRpamQKICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSByZWNvcmRTeW50aC5zb25nID8gCiAgICAgICAgICAgICAgICAocmVjb3JkU3ludGgubWF4VGljayAqIDQgKiA2MCkgLyAocmVjb3JkU3ludGguc29uZy50aW1lYmFzZSAqIHJlY29yZFN5bnRoLnNvbmcudGVtcG8pICogMTAwMCA6IAogICAgICAgICAgICAgICAgNjAwMDA7IC8vIEZhbGxiYWNrOiA2MCBzZWNvbmRlbgogICAgICAgICAgICAKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAobWVkaWFSZWNvcmRlci5zdGF0ZSA9PT0gJ3JlY29yZGluZycpIHsKICAgICAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICByZWNvcmRTeW50aC5zdG9wTUlESSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBkdXJhdGlvbiArIDEwMDApOwogICAgICAgIH0pOwogICAgICAgIAogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdDb252ZXJzaW9uIGVycm9yOicsIGVycm9yKTsKICAgICAgICBzdGF0dXNFbGVtZW50LnRleHRDb250ZW50ID0gJ0NvbnZlcnNpb24gZmFpbGVkOiAnICsgZXJyb3IubWVzc2FnZTsKICAgIH0KfQphc3luYyBmdW5jdGlvbiBjb252ZXJ0VG9XYWdndigpIHsKICAgIGlmIChzZWxlY3RlZFRyYWNrSW5kZXggPT09IG51bGwgfHwgIXBsYXlsaXN0W3NlbGVjdGVkVHJhY2tJbmRleF0pIHsKICAgICAgICBhbGVydCgnTm8gdHJhY2sgc2VsZWN0ZWQnKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIGNvbnN0IGZpbGUgPSBwbGF5bGlzdFtzZWxlY3RlZFRyYWNrSW5kZXhdOwogICAgY29uc3Qgb3JpZ2luYWxOYW1lID0gZmlsZS5uYW1lLnJlcGxhY2UoL1wuKG1pZHxtaWRpKSQvaSwgJycpOwogICAgY29uc3Qgd2F2RmlsZU5hbWUgPSBvcmlnaW5hbE5hbWUgKyAnLndhdic7CiAgICAKICAgIC8vIFN0b3AgcGxheWJhY2sgYWxzIGVyIGlldHMgc3BlZWx0CiAgICBzeW50aC5zdG9wTUlESSgpOwogICAgc3RvcFRpbWVVcGRhdGVzKCk7CiAgICAKICAgIC8vIFRvb24gc3RhdHVzCiAgICBjb25zdCBzdGF0dXNFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1cycpOwogICAgc3RhdHVzRWxlbWVudC50ZXh0Q29udGVudCA9IGBDb252ZXJ0aW5nICR7ZmlsZS5uYW1lfSB0byBXQVYuLi5gOwogICAgCiAgICB0cnkgewogICAgICAgIC8vIDEuIExhYWQgTUlESSBpbiBzeW50aAogICAgICAgIGNvbnN0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIGZpbGVSZWFkZXIub25sb2FkID0gYXN5bmMgKGUpID0+IHsKICAgICAgICAgICAgc3ludGgubG9hZE1JREkoZS50YXJnZXQucmVzdWx0KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFdhY2h0IHRvdCBNSURJIGdlbGFkZW4gaXMKICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gMi4gTWFhayBhdWRpbyBjb250ZXh0IGFhbiB2b29yIG9wbmFtZQogICAgICAgICAgICBjb25zdCBhdWRpb0NvbnRleHQgPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKTsKICAgICAgICAgICAgY29uc3QgZGVzdGluYXRpb24gPSBhdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1EZXN0aW5hdGlvbigpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gMy4gTWFhayB2ZXJiaW5kaW5nIHR1c3NlbiBzeW50aCBvdXRwdXQgZW4gcmVjb3JkZXIKICAgICAgICAgICAgc3ludGgub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgICAgICAgc3ludGgub3V0LmNvbm5lY3QoZGVzdGluYXRpb24pOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gNC4gTWFhayBvb2sgdmVyYmluZGluZyBtZXQgc3BlYWtlcnMgKG9wdGlvbmVlbCwgb20gdGUgaG9yZW4pCiAgICAgICAgICAgIHN5bnRoLm91dC5jb25uZWN0KGF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyA1LiBNYWFrIE1lZGlhUmVjb3JkZXIgYWFuCiAgICAgICAgICAgIGNvbnN0IG1lZGlhUmVjb3JkZXIgPSBuZXcgTWVkaWFSZWNvcmRlcihkZXN0aW5hdGlvbi5zdHJlYW0pOwogICAgICAgICAgICBjb25zdCBhdWRpb0NodW5rcyA9IFtdOwogICAgICAgICAgICAKICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5vbmRhdGFhdmFpbGFibGUgPSAoZXZlbnQpID0+IHsKICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhLnNpemUgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgYXVkaW9DaHVua3MucHVzaChldmVudC5kYXRhKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgCiAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIub25zdG9wID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgLy8gNi4gTWFhayBCbG9iIGVuIGNvbnZlcnRlZXIgbmFhciBXQVYKICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvQmxvYiA9IG5ldyBCbG9iKGF1ZGlvQ2h1bmtzLCB7IHR5cGU6ICdhdWRpby93ZWJtJyB9KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gNy4gQ29udmVydGVlciBuYWFyIFdBViBmb3JtYWF0CiAgICAgICAgICAgICAgICBjb25zdCB3YXZCbG9iID0gYXdhaXQgY29udmVydFdlYm1Ub1dhdihhdWRpb0Jsb2IpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyA4LiBEb3dubG9hZCBXQVYgYmVzdGFuZAogICAgICAgICAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh3YXZCbG9iKTsKICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgICAgICAgICBhLmRvd25sb2FkID0gd2F2RmlsZU5hbWU7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTsKICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgc3RhdHVzRWxlbWVudC50ZXh0Q29udGVudCA9IGBEb3dubG9hZGVkOiAke3dhdkZpbGVOYW1lfWA7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIEhlcnN0ZWwgc3ludGggdmVyYmluZGluZwogICAgICAgICAgICAgICAgc3ludGgub3V0LmRpc2Nvbm5lY3QoKTsKICAgICAgICAgICAgICAgIHN5bnRoLm91dC5jb25uZWN0KHN5bnRoLmN0eC5kZXN0aW5hdGlvbik7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyA5LiBTdGFydCBvcG5hbWUKICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5zdGFydCgpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gMTAuIFNwZWVsIE1JREkgYWYKICAgICAgICAgICAgc3ludGgucGxheU1JREkoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIDExLiBTdG9wIG9wbmFtZSB3YW5uZWVyIE1JREkga2xhYXIgaXMKICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxPbkVuZGVkID0gc3ludGgub25lbmRlZDsKICAgICAgICAgICAgc3ludGgub25lbmRlZCA9ICgpID0+IHsKICAgICAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIuc3RvcCgpOwogICAgICAgICAgICAgICAgc3ludGgub25lbmRlZCA9IG9yaWdpbmFsT25FbmRlZDsKICAgICAgICAgICAgfTsKICAgICAgICB9OwogICAgICAgIAogICAgICAgIGZpbGVSZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSk7CiAgICAgICAgCiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvbnZlcnNpb24gZXJyb3I6JywgZXJyb3IpOwogICAgICAgIHN0YXR1c0VsZW1lbnQudGV4dENvbnRlbnQgPSAnQ29udmVyc2lvbiBmYWlsZWQ6ICcgKyBlcnJvci5tZXNzYWdlOwogICAgfQp9CgoKCi8vIENvbnZlcnRlZXIgV2ViTSBuYWFyIFdBViBmb3JtYWF0CmFzeW5jIGZ1bmN0aW9uIGNvbnZlcnRXZWJtVG9XYXYod2VibUJsb2IpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgY29uc3QgYXVkaW9Db250ZXh0ID0gbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpKCk7CiAgICAgICAgY29uc3QgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgCiAgICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvLyBEZWNvZGUgYXVkaW8gZGF0YQogICAgICAgICAgICAgICAgY29uc3QgYXVkaW9CdWZmZXIgPSBhd2FpdCBhdWRpb0NvbnRleHQuZGVjb2RlQXVkaW9EYXRhKGZpbGVSZWFkZXIucmVzdWx0KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gTWFhayBXQVYgYmxvYgogICAgICAgICAgICAgICAgY29uc3Qgd2F2QmxvYiA9IGF1ZGlvQnVmZmVyVG9XYXYoYXVkaW9CdWZmZXIpOwogICAgICAgICAgICAgICAgcmVzb2x2ZSh3YXZCbG9iKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIAogICAgICAgIGZpbGVSZWFkZXIub25lcnJvciA9IHJlamVjdDsKICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKHdlYm1CbG9iKTsKICAgIH0pOwp9CgovLyBBdWRpb0J1ZmZlciBuYWFyIFdBViAoZ2VicnVpayBkZSBiZXN0YWFuZGUgZnVuY3RpZSkKZnVuY3Rpb24gYXVkaW9CdWZmZXJUb1dhdihidWZmZXIpIHsKICAgIGNvbnN0IG51bUNoYW5uZWxzID0gYnVmZmVyLm51bWJlck9mQ2hhbm5lbHM7CiAgICBjb25zdCBzYW1wbGVSYXRlID0gYnVmZmVyLnNhbXBsZVJhdGU7CiAgICBjb25zdCBmb3JtYXQgPSAxOyAvLyBQQ00KICAgIGNvbnN0IGJpdERlcHRoID0gMTY7CiAgICAKICAgIGNvbnN0IGJ5dGVzUGVyU2FtcGxlID0gYml0RGVwdGggLyA4OwogICAgY29uc3QgYmxvY2tBbGlnbiA9IG51bUNoYW5uZWxzICogYnl0ZXNQZXJTYW1wbGU7CiAgICAKICAgIGNvbnN0IGRhdGFMZW4gPSBidWZmZXIubGVuZ3RoICogYmxvY2tBbGlnbjsKICAgIGNvbnN0IGJ1ZmZlckxlbiA9IDQ0ICsgZGF0YUxlbjsKICAgIGNvbnN0IGFycmF5QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGJ1ZmZlckxlbik7CiAgICBjb25zdCB2aWV3ID0gbmV3IERhdGFWaWV3KGFycmF5QnVmZmVyKTsKICAgIAogICAgLyogUklGRiBpZGVudGlmaWVyICovCiAgICB3cml0ZVN0cmluZyh2aWV3LCAwLCAnUklGRicpOwogICAgLyogUklGRiBjaHVuayBsZW5ndGggKi8KICAgIHZpZXcuc2V0VWludDMyKDQsIDM2ICsgZGF0YUxlbiwgdHJ1ZSk7CiAgICAvKiBSSUZGIHR5cGUgKi8KICAgIHdyaXRlU3RyaW5nKHZpZXcsIDgsICdXQVZFJyk7CiAgICAvKiBmb3JtYXQgY2h1bmsgaWRlbnRpZmllciAqLwogICAgd3JpdGVTdHJpbmcodmlldywgMTIsICdmbXQgJyk7CiAgICAvKiBmb3JtYXQgY2h1bmsgbGVuZ3RoICovCiAgICB2aWV3LnNldFVpbnQzMigxNiwgMTYsIHRydWUpOwogICAgLyogc2FtcGxlIGZvcm1hdCAocmF3KSAqLwogICAgdmlldy5zZXRVaW50MTYoMjAsIGZvcm1hdCwgdHJ1ZSk7CiAgICAvKiBjaGFubmVsIGNvdW50ICovCiAgICB2aWV3LnNldFVpbnQxNigyMiwgbnVtQ2hhbm5lbHMsIHRydWUpOwogICAgLyogc2FtcGxlIHJhdGUgKi8KICAgIHZpZXcuc2V0VWludDMyKDI0LCBzYW1wbGVSYXRlLCB0cnVlKTsKICAgIC8qIGJ5dGUgcmF0ZSAoc2FtcGxlIHJhdGUgKiBibG9jayBhbGlnbikgKi8KICAgIHZpZXcuc2V0VWludDMyKDI4LCBzYW1wbGVSYXRlICogYmxvY2tBbGlnbiwgdHJ1ZSk7CiAgICAvKiBibG9jayBhbGlnbiAoY2hhbm5lbCBjb3VudCAqIGJ5dGVzIHBlciBzYW1wbGUpICovCiAgICB2aWV3LnNldFVpbnQxNigzMiwgYmxvY2tBbGlnbiwgdHJ1ZSk7CiAgICAvKiBiaXRzIHBlciBzYW1wbGUgKi8KICAgIHZpZXcuc2V0VWludDE2KDM0LCBiaXREZXB0aCwgdHJ1ZSk7CiAgICAvKiBkYXRhIGNodW5rIGlkZW50aWZpZXIgKi8KICAgIHdyaXRlU3RyaW5nKHZpZXcsIDM2LCAnZGF0YScpOwogICAgLyogZGF0YSBjaHVuayBsZW5ndGggKi8KICAgIHZpZXcuc2V0VWludDMyKDQwLCBkYXRhTGVuLCB0cnVlKTsKICAgIAogICAgLy8gU2NocmlqZiBkZSBhdWRpbyBzYW1wbGVzCiAgICBsZXQgb2Zmc2V0ID0gNDQ7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGNoYW5uZWwgPSAwOyBjaGFubmVsIDwgbnVtQ2hhbm5lbHM7IGNoYW5uZWwrKykgewogICAgICAgICAgICBsZXQgc2FtcGxlID0gYnVmZmVyLmdldENoYW5uZWxEYXRhKGNoYW5uZWwpW2ldOwogICAgICAgICAgICBzYW1wbGUgPSBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgc2FtcGxlKSk7IC8vIENsaXBwaW5nCiAgICAgICAgICAgIHZpZXcuc2V0SW50MTYob2Zmc2V0LCBzYW1wbGUgPCAwID8gc2FtcGxlICogMHg4MDAwIDogc2FtcGxlICogMHg3RkZGLCB0cnVlKTsKICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CiAgICAgICAgfQogICAgfQogICAgCiAgICByZXR1cm4gbmV3IEJsb2IoW2FycmF5QnVmZmVyXSwgeyB0eXBlOiAnYXVkaW8vd2F2JyB9KTsKfQoKZnVuY3Rpb24gd3JpdGVTdHJpbmcodmlldywgb2Zmc2V0LCBzdHJpbmcpIHsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmlldy5zZXRVaW50OChvZmZzZXQgKyBpLCBzdHJpbmcuY2hhckNvZGVBdChpKSk7CiAgICB9Cn0KCi8vIEFuZGVyZSBjb250ZXh0IG1lbnUgb3B0aWVzCmZ1bmN0aW9uIHJlbW92ZUZyb21MaXN0KCkgewogICAgaWYgKHNlbGVjdGVkVHJhY2tJbmRleCAhPT0gbnVsbCAmJiBwbGF5bGlzdFtzZWxlY3RlZFRyYWNrSW5kZXhdKSB7CiAgICAgICAgLy8gU3RvcCBhbHMgd2UgZGUgaHVpZGlnZSB0cmFjayB2ZXJ3aWpkZXJlbgogICAgICAgIGlmIChzZWxlY3RlZFRyYWNrSW5kZXggPT09IGN1cnJlbnRJbmRleCkgewogICAgICAgICAgICBzeW50aC5zdG9wTUlESSgpOwogICAgICAgICAgICBzdG9wVGltZVVwZGF0ZXMoKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gVmVyd2lqZGVyIHVpdCBwbGF5bGlzdAogICAgICAgIHBsYXlsaXN0LnNwbGljZShzZWxlY3RlZFRyYWNrSW5kZXgsIDEpOwogICAgICAgIAogICAgICAgIC8vIFBhcyBjdXJyZW50SW5kZXggYWFuIGluZGllbiBub2RpZwogICAgICAgIGlmIChzZWxlY3RlZFRyYWNrSW5kZXggPCBjdXJyZW50SW5kZXgpIHsKICAgICAgICAgICAgY3VycmVudEluZGV4LS07CiAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZFRyYWNrSW5kZXggPT09IGN1cnJlbnRJbmRleCAmJiBwbGF5bGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGN1cnJlbnRJbmRleCA9IE1hdGgubWluKGN1cnJlbnRJbmRleCwgcGxheWxpc3QubGVuZ3RoIC0gMSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFVwZGF0ZSBVSQogICAgICAgIHVwZGF0ZVRyYWNrTGlzdCgpOwogICAgICAgIHNlbGVjdGVkVHJhY2tJbmRleCA9IG51bGw7CiAgICB9Cn0KCi8vIFVwZGF0ZSBkZSBjb250ZXh0IG1lbnUgZnVuY3RpZSAicGxheVNlbGVjdGVkVHJhY2siCmZ1bmN0aW9uIHBsYXlTZWxlY3RlZFRyYWNrKCkgewogICAgaWYgKHNlbGVjdGVkVHJhY2tJbmRleCAhPT0gbnVsbCAmJiBwbGF5bGlzdFtzZWxlY3RlZFRyYWNrSW5kZXhdKSB7CiAgICAgICAgc3ludGguc3RvcE1JREkoKTsKICAgICAgICBzdG9wVGltZVVwZGF0ZXMoKTsKICAgICAgICBjdXJyZW50SW5kZXggPSBzZWxlY3RlZFRyYWNrSW5kZXg7CiAgICAgICAgbG9hZEFuZFBsYXkoY3VycmVudEluZGV4KTsKICAgICAgICBzZWxlY3RlZFRyYWNrSW5kZXggPSBudWxsOwogICAgfQp9CgpmdW5jdGlvbiBoYW5kbGVUcmFja0NsaWNrKGluZGV4KSB7CiAgc2VsZWN0ZWRUcmFja0luZGV4ID0gaW5kZXg7CiAgICAvLyBTdG9yZSB0aGUgY2xpY2tlZCB0cmFjayBpbmRleAogICAgY3VycmVudEluZGV4ID0gaW5kZXg7CiAgICAKICAgIC8vIExvYWQgYW5kIHBsYXkgdGhlIGNsaWNrZWQgdHJhY2sKICAgIGNvbnN0IHBsYXlTdGF0dXMgPSBzeW50aC5nZXRQbGF5U3RhdHVzKCk7CiAgICAKICAgIC8vIFN0b3AgY3VycmVudCBwbGF5YmFjayBpZiBhbnkKICAgIGlmIChwbGF5U3RhdHVzLnBsYXkpIHsKICAgICAgICBzeW50aC5zdG9wTUlESSgpOwogICAgfQogICAgCiAgICAvLyBMb2FkIGFuZCBwbGF5IHRoZSBzZWxlY3RlZCB0cmFjawogICAgY29uc3QgZmlsZSA9IHBsYXlsaXN0W2luZGV4XTsKICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHsKICAgICAgICBzeW50aC5sb2FkTUlESShlLnRhcmdldC5yZXN1bHQpOwogICAgICAgIHVwZGF0ZVRpdGxlQmFyKGZpbGUubmFtZSwgaW5kZXggKyAxKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzJykuaW5uZXJIVE1MID0gIlBsYXlpbmc6ICIgKyBmaWxlLm5hbWU7CiAgICAgICAgCiAgICAgICAgLy8gVXBkYXRlIHRyYWNrIGxpc3QgdG8gc2hvdyBzZWxlY3Rpb24gQkVGT1JFIHBsYXlpbmcKICAgICAgICB1cGRhdGVUcmFja0xpc3QoKTsKICAgICAgICAKICAgICAgICAvLyBTdGFydCBwbGF5YmFjawogICAgICAgIHN5bnRoLnBsYXlNSURJKCk7CiAgICAgICAgc3RhcnRUaW1lVXBkYXRlcygpOwoKICAgICAgICAvLyBTZXQgdXAgZW5kZWQgaGFuZGxlciBmb3IgbmV4dCB0cmFjawogICAgICAgIHN5bnRoLm9uZW5kZWQgPSAoKSA9PiB7CiAgICAgICAgICAgIGN1cnJlbnRJbmRleCsrOwogICAgICAgICAgICBpZiAoY3VycmVudEluZGV4IDwgcGxheWxpc3QubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBoYW5kbGVUcmFja0NsaWNrKGN1cnJlbnRJbmRleCk7IC8vIFVzZSBzYW1lIGZ1bmN0aW9uIGZvciBjb25zaXN0ZW5jeQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1cycpLmlubmVyVGV4dCA9ICJQbGF5bGlzdCBjb21wbGV0ZWQiOwogICAgICAgICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSAiTmFnZXByb2dyYW1lZXJkZSBiZWtlbmRlIHNwZWxlciI7CiAgICAgICAgICAgICAgICB1cGRhdGVUcmFja0xpc3QoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICB9OwogICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwp9CgpmdW5jdGlvbiB1cGRhdGVUcmFja0xpc3QoKSB7CiAgICBjb25zdCB0cmFja2xpc3RBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dtcF90cmFja2xpc3RfYXJlYScpOwogICAgbGV0IGh0bWwgPSAnPGRpdiBpZD0id21wX3RyYWNrbGlzdF9jb250ZW50Ij4nOwogICAgCiAgICBpZiAocGxheWxpc3QubGVuZ3RoID09PSAwKSB7CiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0iZW1wdHktcGxheWxpc3QiPk5vIHRyYWNrcyBsb2FkZWQuIERyb3AgTUlESSBmaWxlcyBoZXJlIG9yIHVzZSB0aGUgdXBsb2FkIGJ1dHRvbi48L2Rpdj4nOwogICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBwbGF5U3RhdHVzID0gc3ludGguZ2V0UGxheVN0YXR1cygpOwogICAgICAgIGNvbnN0IGlzUGxheWluZyA9IHBsYXlTdGF0dXMucGxheTsKICAgICAgICAKICAgICAgICBwbGF5bGlzdC5mb3JFYWNoKChmaWxlLCBpbmRleCkgPT4gewogICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IGR1cmF0aW9uQ2FjaGVbZmlsZS5uYW1lXSA/IGR1cmF0aW9uQ2FjaGVbZmlsZS5uYW1lXS5kdXJhdGlvbiA6ICdDYWxjdWxhdGluZy4uLic7CiAgICAgICAgICAgIGNvbnN0IGlzQ3VycmVudFRyYWNrID0gaW5kZXggPT09IGN1cnJlbnRJbmRleDsKICAgICAgICAgICAgY29uc3QgaXNQbGF5aW5nTm93ID0gaXNDdXJyZW50VHJhY2sgJiYgaXNQbGF5aW5nOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIENTUyBjbGFzc2VzCiAgICAgICAgICAgIGxldCB0cmFja0NsYXNzZXMgPSAndHJhY2staXRlbSc7CiAgICAgICAgICAgIGlmIChpc0N1cnJlbnRUcmFjaykgdHJhY2tDbGFzc2VzICs9ICcgc2VsZWN0ZWQnOwogICAgICAgICAgICBpZiAoaXNQbGF5aW5nTm93KSB0cmFja0NsYXNzZXMgKz0gJyBwbGF5aW5nJzsKICAgICAgICAgICAgCiAgICAgICAgICAgIGh0bWwgKz0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iJHt0cmFja0NsYXNzZXN9IiBkYXRhLWluZGV4PSIke2luZGV4fSIgb25jbGljaz0iaGFuZGxlVHJhY2tDbGljaygke2luZGV4fSkiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRyYWNrLW51bWJlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICR7aW5kZXggKyAxfS4KICAgICAgICAgICAgICAgICAgICAgICAgJHtpc1BsYXlpbmdOb3cgPyAnPHNwYW4gY2xhc3M9InBsYXlpbmctaW5kaWNhdG9yIj7ilrY8L3NwYW4+JyA6ICcnfQogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRyYWNrLW5hbWUiIHRpdGxlPSIke2ZpbGUubmFtZX0iPgogICAgICAgICAgICAgICAgICAgICAgICAke2ZpbGUubmFtZS5yZXBsYWNlKC9cLihtaWR8bWlkaSkkL2ksICcnKX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0cmFjay1kdXJhdGlvbiI+JHtkdXJhdGlvbn08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJyZW1vdmUtdHJhY2siIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyByZW1vdmVUcmFjaygke2luZGV4fSkiPsOXPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICB9KTsKICAgIH0KICAgIAogICAgaHRtbCArPSAnPC9kaXY+JzsKICAgIHRyYWNrbGlzdEFyZWEuaW5uZXJIVE1MID0gaHRtbDsKCiAgICAvLyBBZGQgcmlnaHQtY2xpY2sgY29udGV4dCBtZW51IHRvIHRyYWNrIGl0ZW1zCiAgICBjb25zdCB0cmFja0l0ZW1zID0gdHJhY2tsaXN0QXJlYS5xdWVyeVNlbGVjdG9yQWxsKCcudHJhY2staXRlbScpOwogICAgdHJhY2tJdGVtcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZSkgPT4gewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBTZXQgdGhlIHNlbGVjdGVkIHRyYWNrIGZvciB5b3VyIGV4aXN0aW5nIGNvbnZlcnRUb1dhdiBmdW5jdGlvbgogICAgICAgICAgICBzZWxlY3RlZFRyYWNrSW5kZXggPSBpbmRleDsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFNob3cgdGhlIGNvbnRleHQgbWVudQogICAgICAgICAgICBzaG93VHJhY2tDb250ZXh0TWVudShlLCBwbGF5bGlzdFtpbmRleF0sIGluZGV4KTsKICAgICAgICB9KTsKICAgIH0pOwoKCgoKfQoKCgphc3luYyBmdW5jdGlvbiBjb252ZXJ0VG9XYXZGYXN0KCkgewogICAgaWYgKHNlbGVjdGVkVHJhY2tJbmRleCA9PT0gbnVsbCB8fCAhcGxheWxpc3Rbc2VsZWN0ZWRUcmFja0luZGV4XSkgewogICAgICAgIGFsZXJ0KCdObyB0cmFjayBzZWxlY3RlZCcpOwogICAgICAgIHJldHVybjsKICAgIH0KICAgIAogICAgY29uc3QgZmlsZSA9IHBsYXlsaXN0W3NlbGVjdGVkVHJhY2tJbmRleF07CiAgICBjb25zdCBvcmlnaW5hbE5hbWUgPSBmaWxlLm5hbWUucmVwbGFjZSgvXC4obWlkfG1pZGkpJC9pLCAnJyk7CiAgICBjb25zdCB3YXZGaWxlTmFtZSA9IG9yaWdpbmFsTmFtZSArICcud2F2JzsKICAgIAogICAgLy8gU2hvdyBzdGF0dXMKICAgIGNvbnN0IHN0YXR1c0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzJyk7CiAgICBzdGF0dXNFbGVtZW50LnRleHRDb250ZW50ID0gYFJlbmRlcmluZyAke2ZpbGUubmFtZX0gdG8gV0FWLi4uYDsKICAgIAogICAgdHJ5IHsKICAgICAgICAvLyAxLiBMb2FkIE1JREkgZGF0YQogICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpOwogICAgICAgIAogICAgICAgIC8vIDIuIENyZWF0ZSBvZmZsaW5lIGF1ZGlvIGNvbnRleHQgKGNhbiByZW5kZXIgYXQgYW55IHNhbXBsZSByYXRlKQogICAgICAgIGNvbnN0IG9mZmxpbmVDdHggPSBuZXcgT2ZmbGluZUF1ZGlvQ29udGV4dCh7CiAgICAgICAgICAgIG51bWJlck9mQ2hhbm5lbHM6IDIsCiAgICAgICAgICAgIGxlbmd0aDogNDQxMDAgKiA2MCAqIDEwLCAvLyAxMCBtaW51dGVzIG1heCAoYWRqdXN0IGFzIG5lZWRlZCkKICAgICAgICAgICAgc2FtcGxlUmF0ZTogNDQxMDAKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICAvLyAzLiBDcmVhdGUgc3ludGggaW4gb2ZmbGluZSBjb250ZXh0CiAgICAgICAgY29uc3Qgb2ZmbGluZVN5bnRoID0gbmV3IFdlYkF1ZGlvVGlueVN5bnRoKHt2b2ljZXM6IDY0fSk7CiAgICAgICAgb2ZmbGluZVN5bnRoLnNldEF1ZGlvQ29udGV4dChvZmZsaW5lQ3R4KTsKICAgICAgICAKICAgICAgICAvLyA0LiBMb2FkIE1JREkgaW50byBzeW50aAogICAgICAgIG9mZmxpbmVTeW50aC5sb2FkTUlESShhcnJheUJ1ZmZlcik7CiAgICAgICAgCiAgICAgICAgLy8gV2FpdCBmb3IgTUlESSB0byBsb2FkCiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTsKICAgICAgICAKICAgICAgICBpZiAoIW9mZmxpbmVTeW50aC5zb25nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGxvYWQgTUlESScpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyA1LiBDYWxjdWxhdGUgcmVuZGVyIGR1cmF0aW9uCiAgICAgICAgY29uc3QgZHVyYXRpb25TZWNvbmRzID0gb2ZmbGluZVN5bnRoLm1heFRpY2sgKiA0ICogNjAgLyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZmxpbmVTeW50aC5zb25nLnRpbWViYXNlIC8gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZsaW5lU3ludGguc29uZy50ZW1wbzsKICAgICAgICAKICAgICAgICAvLyBTZXQgdGhlIG9mZmxpbmUgY29udGV4dCBkdXJhdGlvbgogICAgICAgIG9mZmxpbmVDdHgubGVuZ3RoID0gNDQxMDAgKiAoZHVyYXRpb25TZWNvbmRzICsgMik7IC8vICsyIHNlY29uZHMgcGFkZGluZwogICAgICAgIAogICAgICAgIC8vIDYuIFN0YXJ0IHBsYXliYWNrICh0aGlzIGhhcHBlbnMgaW5zdGFudGx5IGluIG9mZmxpbmUgY29udGV4dCkKICAgICAgICBvZmZsaW5lU3ludGgucGxheU1JREkoKTsKICAgICAgICAKICAgICAgICAvLyA3LiBSZW5kZXIgYXVkaW8KICAgICAgICBzdGF0dXNFbGVtZW50LnRleHRDb250ZW50ID0gYFJlbmRlcmluZyBhdWRpby4uLmA7CiAgICAgICAgCiAgICAgICAgY29uc3QgYXVkaW9CdWZmZXIgPSBhd2FpdCBvZmZsaW5lQ3R4LnN0YXJ0UmVuZGVyaW5nKCk7CiAgICAgICAgCiAgICAgICAgLy8gOC4gQ29udmVydCBBdWRpb0J1ZmZlciB0byBXQVYKICAgICAgICBzdGF0dXNFbGVtZW50LnRleHRDb250ZW50ID0gYENvbnZlcnRpbmcgdG8gV0FWLi4uYDsKICAgICAgICAKICAgICAgICBjb25zdCB3YXZCbG9iID0gYXVkaW9CdWZmZXJUb1dhdihhdWRpb0J1ZmZlcik7CiAgICAgICAgCiAgICAgICAgLy8gOS4gRG93bmxvYWQKICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHdhdkJsb2IpOwogICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgIGEuZG93bmxvYWQgPSB3YXZGaWxlTmFtZTsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgICAgIGEuY2xpY2soKTsKICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOwogICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgICAKICAgICAgICBzdGF0dXNFbGVtZW50LnRleHRDb250ZW50ID0gYERvd25sb2FkZWQ6ICR7d2F2RmlsZU5hbWV9YDsKICAgICAgICAKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignUmVuZGVyIGVycm9yOicsIGVycm9yKTsKICAgICAgICBzdGF0dXNFbGVtZW50LnRleHRDb250ZW50ID0gJ0Vycm9yOiAnICsgZXJyb3IubWVzc2FnZTsKICAgIH0KfQoKLy8gQXVkaW9CdWZmZXIgdG8gV0FWIGNvbnZlcnNpb24KZnVuY3Rpb24gYXVkaW9CdWZmZXJUb1dhdihidWZmZXIpIHsKICAgIGNvbnN0IG51bUNoYW5uZWxzID0gYnVmZmVyLm51bWJlck9mQ2hhbm5lbHM7CiAgICBjb25zdCBzYW1wbGVSYXRlID0gYnVmZmVyLnNhbXBsZVJhdGU7CiAgICBjb25zdCBmb3JtYXQgPSAxOyAvLyBQQ00KICAgIGNvbnN0IGJpdERlcHRoID0gMTY7CiAgICAKICAgIGNvbnN0IGJ5dGVzUGVyU2FtcGxlID0gYml0RGVwdGggLyA4OwogICAgY29uc3QgYmxvY2tBbGlnbiA9IG51bUNoYW5uZWxzICogYnl0ZXNQZXJTYW1wbGU7CiAgICBjb25zdCBieXRlUmF0ZSA9IHNhbXBsZVJhdGUgKiBibG9ja0FsaWduOwogICAgCiAgICBjb25zdCBkYXRhTGVuZ3RoID0gYnVmZmVyLmxlbmd0aCAqIGJsb2NrQWxpZ247CiAgICBjb25zdCBidWZmZXJMZW5ndGggPSA0NCArIGRhdGFMZW5ndGg7CiAgICBjb25zdCBhcnJheUJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihidWZmZXJMZW5ndGgpOwogICAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhhcnJheUJ1ZmZlcik7CiAgICAKICAgIC8vIFdyaXRlIFdBViBoZWFkZXIKICAgIHdyaXRlU3RyaW5nKHZpZXcsIDAsICdSSUZGJyk7CiAgICB2aWV3LnNldFVpbnQzMig0LCBidWZmZXJMZW5ndGggLSA4LCB0cnVlKTsKICAgIHdyaXRlU3RyaW5nKHZpZXcsIDgsICdXQVZFJyk7CiAgICB3cml0ZVN0cmluZyh2aWV3LCAxMiwgJ2ZtdCAnKTsKICAgIHZpZXcuc2V0VWludDMyKDE2LCAxNiwgdHJ1ZSk7CiAgICB2aWV3LnNldFVpbnQxNigyMCwgZm9ybWF0LCB0cnVlKTsKICAgIHZpZXcuc2V0VWludDE2KDIyLCBudW1DaGFubmVscywgdHJ1ZSk7CiAgICB2aWV3LnNldFVpbnQzMigyNCwgc2FtcGxlUmF0ZSwgdHJ1ZSk7CiAgICB2aWV3LnNldFVpbnQzMigyOCwgYnl0ZVJhdGUsIHRydWUpOwogICAgdmlldy5zZXRVaW50MTYoMzIsIGJsb2NrQWxpZ24sIHRydWUpOwogICAgdmlldy5zZXRVaW50MTYoMzQsIGJpdERlcHRoLCB0cnVlKTsKICAgIHdyaXRlU3RyaW5nKHZpZXcsIDM2LCAnZGF0YScpOwogICAgdmlldy5zZXRVaW50MzIoNDAsIGRhdGFMZW5ndGgsIHRydWUpOwogICAgCiAgICAvLyBXcml0ZSBhdWRpbyBkYXRhCiAgICBsZXQgb2Zmc2V0ID0gNDQ7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGNoYW5uZWwgPSAwOyBjaGFubmVsIDwgbnVtQ2hhbm5lbHM7IGNoYW5uZWwrKykgewogICAgICAgICAgICBjb25zdCBzYW1wbGUgPSBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoY2hhbm5lbClbaV07CiAgICAgICAgICAgIGNvbnN0IGludFNhbXBsZSA9IHNhbXBsZSA8IDAgPyBzYW1wbGUgKiAzMjc2OCA6IHNhbXBsZSAqIDMyNzY3OwogICAgICAgICAgICB2aWV3LnNldEludDE2KG9mZnNldCwgaW50U2FtcGxlLCB0cnVlKTsKICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CiAgICAgICAgfQogICAgfQogICAgCiAgICByZXR1cm4gbmV3IEJsb2IoW2FycmF5QnVmZmVyXSwgeyB0eXBlOiAnYXVkaW8vd2F2JyB9KTsKfQoKZnVuY3Rpb24gd3JpdGVTdHJpbmcodmlldywgb2Zmc2V0LCBzdHJpbmcpIHsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmlldy5zZXRVaW50OChvZmZzZXQgKyBpLCBzdHJpbmcuY2hhckNvZGVBdChpKSk7CiAgICB9Cn0KCgoKZnVuY3Rpb24gc2hvd1RyYWNrQ29udGV4dE1lbnUoZXZlbnQsIGZpbGUsIGluZGV4KSB7CiAgICAvLyBSZW1vdmUgYW55IGV4aXN0aW5nIG1lbnUKICAgIGNvbnN0IG9sZE1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJhY2tDb250ZXh0TWVudScpOwogICAgaWYgKG9sZE1lbnUpIG9sZE1lbnUucmVtb3ZlKCk7CiAgICAKICAgIC8vIENyZWF0ZSBjb250ZXh0IG1lbnUKICAgIGNvbnN0IG1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIG1lbnUuaWQgPSAndHJhY2tDb250ZXh0TWVudSc7CiAgICBtZW51LnN0eWxlLmNzc1RleHQgPSBgCiAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgIGxlZnQ6ICR7ZXZlbnQuY2xpZW50WH1weDsKICAgICAgICB0b3A6ICR7ZXZlbnQuY2xpZW50WX1weDsKICAgICAgICBiYWNrZ3JvdW5kOiAjMmEyYTJhOwogICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM1NTU7CiAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgIGZvbnQtZmFtaWx5OiBUYWhvbWEsIFZlcmRhbmEsIHNhbnMtc2VyaWY7CiAgICAgICAgZm9udC1zaXplOiAxMXB4OwogICAgICAgIHotaW5kZXg6IDk5OTk7CiAgICAgICAgbWluLXdpZHRoOiAyMDBweDsKICAgICAgICBib3gtc2hhZG93OiAzcHggM3B4IDEwcHggcmdiYSgwLDAsMCwwLjcpOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICBwYWRkaW5nOiA1cHggMDsKICAgIGA7CiAgICAKICAgIC8vIE1lbnUgaXRlbXMKICAgIGNvbnN0IG1lbnVJdGVtcyA9IFsKICAgIHsgCiAgICAgICAgdGV4dDogJ+KaoSBDb252ZXJ0IHRvIFdBVicsIAogICAgICAgIGFjdGlvbjogKCkgPT4gewogICAgICAgICAgICBzZWxlY3RlZFRyYWNrSW5kZXggPSBpbmRleDsKICAgICAgICAgICAgY29udmVydFRvV2F2KCk7IC8vIFVzZSB0aGUgZmFzdCBtZXRob2QKICAgICAgICB9CiAgICB9LAogICAgICAgIHsgCiAgICAgICAgICAgIHRleHQ6ICfilrYgUGxheSBUcmFjaycsIAogICAgICAgICAgICBhY3Rpb246ICgpID0+IHsKICAgICAgICAgICAgICAgIHNlbGVjdGVkVHJhY2tJbmRleCA9IGluZGV4OwogICAgICAgICAgICAgICAgaGFuZGxlVHJhY2tDbGljayhpbmRleCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHsgCiAgICAgICAgICAgIHRleHQ6ICfinJUgUmVtb3ZlIGZyb20gUGxheWxpc3QnLCAKICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7CiAgICAgICAgICAgICAgICByZW1vdmVUcmFjayhpbmRleCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHsgCiAgICAgICAgICAgIHRleHQ6ICfwn5OEIEZpbGUgUHJvcGVydGllcycsIAogICAgICAgICAgICBhY3Rpb246ICgpID0+IHsKICAgICAgICAgICAgICAgIHNob3dGaWxlUHJvcGVydGllcyhmaWxlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIF07CiAgICAKICAgIC8vIENyZWF0ZSBtZW51IGl0ZW1zCiAgICBtZW51SXRlbXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBkaXYudGV4dENvbnRlbnQgPSBpdGVtLnRleHQ7CiAgICAgICAgZGl2LnN0eWxlLmNzc1RleHQgPSBgCiAgICAgICAgICAgIHBhZGRpbmc6IDZweCAxNXB4OwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4yczsKICAgICAgICBgOwogICAgICAgIGRpdi5vbm1vdXNlb3ZlciA9ICgpID0+IGRpdi5zdHlsZS5iYWNrZ3JvdW5kID0gJyMzYTZlYTUnOwogICAgICAgIGRpdi5vbm1vdXNlb3V0ID0gKCkgPT4gZGl2LnN0eWxlLmJhY2tncm91bmQgPSAnJzsKICAgICAgICBkaXYub25jbGljayA9IChlKSA9PiB7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGl0ZW0uYWN0aW9uKCk7CiAgICAgICAgICAgIG1lbnUucmVtb3ZlKCk7CiAgICAgICAgfTsKICAgICAgICBtZW51LmFwcGVuZENoaWxkKGRpdik7CiAgICB9KTsKICAgIAogICAgLy8gQWRkIHRvIGRvY3VtZW50CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1lbnUpOwogICAgCiAgICAvLyBDbG9zZSBtZW51IHdoZW4gY2xpY2tpbmcgZWxzZXdoZXJlCiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBjb25zdCBjbG9zZU1lbnUgPSAoZSkgPT4gewogICAgICAgICAgICBpZiAobWVudSAmJiAhbWVudS5jb250YWlucyhlLnRhcmdldCkpIHsKICAgICAgICAgICAgICAgIG1lbnUucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTWVudSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNZW51KTsKICAgIH0sIDEwKTsKfQoKLy8gRmlsZSBwcm9wZXJ0aWVzIGZ1bmN0aW9uCmZ1bmN0aW9uIHNob3dGaWxlUHJvcGVydGllcyhmaWxlKSB7CiAgICBjb25zdCBzaXplS0IgPSAoZmlsZS5zaXplIC8gMTAyNCkudG9GaXhlZCgxKTsKICAgIGNvbnN0IGxhc3RNb2RpZmllZCA9IG5ldyBEYXRlKGZpbGUubGFzdE1vZGlmaWVkKS50b0xvY2FsZVN0cmluZygpOwogICAgCiAgICBhbGVydChg8J+TgSBGaWxlIFByb3BlcnRpZXNcblxuYCArCiAgICAgICAgICBgTmFtZTogJHtmaWxlLm5hbWV9XG5gICsKICAgICAgICAgIGBTaXplOiAke3NpemVLQn0gS0JcbmAgKwogICAgICAgICAgYFR5cGU6ICR7ZmlsZS50eXBlIHx8ICdNSURJIEZpbGUnfVxuYCArCiAgICAgICAgICBgTGFzdCBNb2RpZmllZDogJHtsYXN0TW9kaWZpZWR9YCk7Cn0KCi8vIEF1ZGlvQnVmZmVyIHRvIFdBViBmdW5jdGlvbiAoc2FtZSBhcyBiZWZvcmUpCmZ1bmN0aW9uIGF1ZGlvQnVmZmVyVG9XYXYoYnVmZmVyKSB7CiAgICBjb25zdCBudW1DaGFubmVscyA9IGJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzOwogICAgY29uc3Qgc2FtcGxlUmF0ZSA9IGJ1ZmZlci5zYW1wbGVSYXRlOwogICAgY29uc3QgZm9ybWF0ID0gMTsKICAgIGNvbnN0IGJpdERlcHRoID0gMTY7CiAgICAKICAgIGNvbnN0IGJ5dGVzUGVyU2FtcGxlID0gYml0RGVwdGggLyA4OwogICAgY29uc3QgYmxvY2tBbGlnbiA9IG51bUNoYW5uZWxzICogYnl0ZXNQZXJTYW1wbGU7CiAgICBjb25zdCBieXRlUmF0ZSA9IHNhbXBsZVJhdGUgKiBibG9ja0FsaWduOwogICAgCiAgICBjb25zdCBkYXRhTGVuZ3RoID0gYnVmZmVyLmxlbmd0aCAqIGJsb2NrQWxpZ247CiAgICBjb25zdCBidWZmZXJMZW5ndGggPSA0NCArIGRhdGFMZW5ndGg7CiAgICBjb25zdCBhcnJheUJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihidWZmZXJMZW5ndGgpOwogICAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhhcnJheUJ1ZmZlcik7CiAgICAKICAgIC8vIFdyaXRlIFdBViBoZWFkZXIKICAgIHdyaXRlU3RyaW5nKHZpZXcsIDAsICdSSUZGJyk7CiAgICB2aWV3LnNldFVpbnQzMig0LCBidWZmZXJMZW5ndGggLSA4LCB0cnVlKTsKICAgIHdyaXRlU3RyaW5nKHZpZXcsIDgsICdXQVZFJyk7CiAgICB3cml0ZVN0cmluZyh2aWV3LCAxMiwgJ2ZtdCAnKTsKICAgIHZpZXcuc2V0VWludDMyKDE2LCAxNiwgdHJ1ZSk7CiAgICB2aWV3LnNldFVpbnQxNigyMCwgZm9ybWF0LCB0cnVlKTsKICAgIHZpZXcuc2V0VWludDE2KDIyLCBudW1DaGFubmVscywgdHJ1ZSk7CiAgICB2aWV3LnNldFVpbnQzMigyNCwgc2FtcGxlUmF0ZSwgdHJ1ZSk7CiAgICB2aWV3LnNldFVpbnQzMigyOCwgYnl0ZVJhdGUsIHRydWUpOwogICAgdmlldy5zZXRVaW50MTYoMzIsIGJsb2NrQWxpZ24sIHRydWUpOwogICAgdmlldy5zZXRVaW50MTYoMzQsIGJpdERlcHRoLCB0cnVlKTsKICAgIHdyaXRlU3RyaW5nKHZpZXcsIDM2LCAnZGF0YScpOwogICAgdmlldy5zZXRVaW50MzIoNDAsIGRhdGFMZW5ndGgsIHRydWUpOwogICAgCiAgICAvLyBXcml0ZSBhdWRpbyBkYXRhCiAgICBsZXQgb2Zmc2V0ID0gNDQ7CiAgICBjb25zdCBjaGFubmVsRGF0YSA9IFtdOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1DaGFubmVsczsgaSsrKSB7CiAgICAgICAgY2hhbm5lbERhdGFbaV0gPSBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoaSk7CiAgICB9CiAgICAKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCBudW1DaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgICAgICAgIGNvbnN0IHNhbXBsZSA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbigxLCBjaGFubmVsRGF0YVtjaGFubmVsXVtpXSkpOwogICAgICAgICAgICBjb25zdCBpbnRTYW1wbGUgPSBzYW1wbGUgPCAwID8gc2FtcGxlICogMzI3NjggOiBzYW1wbGUgKiAzMjc2NzsKICAgICAgICAgICAgdmlldy5zZXRJbnQxNihvZmZzZXQsIGludFNhbXBsZSwgdHJ1ZSk7CiAgICAgICAgICAgIG9mZnNldCArPSAyOwogICAgICAgIH0KICAgIH0KICAgIAogICAgcmV0dXJuIG5ldyBCbG9iKFthcnJheUJ1ZmZlcl0sIHsgdHlwZTogJ2F1ZGlvL3dhdicgfSk7Cn0KCmZ1bmN0aW9uIHdyaXRlU3RyaW5nKHZpZXcsIG9mZnNldCwgc3RyaW5nKSB7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7IGkrKykgewogICAgICAgIHZpZXcuc2V0VWludDgob2Zmc2V0ICsgaSwgc3RyaW5nLmNoYXJDb2RlQXQoaSkpOwogICAgfQp9CgpmdW5jdGlvbiByZW1vdmVUcmFjayhpbmRleCkgewogICAgaWYgKGNvbmZpcm0oYFJlbW92ZSAiJHtwbGF5bGlzdFtpbmRleF0ubmFtZX0iIGZyb20gcGxheWxpc3Q/YCkpIHsKICAgICAgICAvLyBJZiByZW1vdmluZyB0aGUgc2VsZWN0ZWQgdHJhY2ssIGNsZWFyIHNlbGVjdGlvbgogICAgICAgIGlmIChzZWxlY3RlZFRyYWNrSW5kZXggPT09IGluZGV4KSB7CiAgICAgICAgICAgIHNlbGVjdGVkVHJhY2tJbmRleCA9IG51bGw7CiAgICAgICAgfQogICAgICAgIC8vIElmIHJlbW92aW5nIGJlZm9yZSBzZWxlY3RlZCB0cmFjaywgYWRqdXN0IGluZGV4CiAgICAgICAgZWxzZSBpZiAoc2VsZWN0ZWRUcmFja0luZGV4ID4gaW5kZXgpIHsKICAgICAgICAgICAgc2VsZWN0ZWRUcmFja0luZGV4LS07CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFJlbW92ZSBmcm9tIHBsYXlsaXN0CiAgICAgICAgcGxheWxpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAKICAgICAgICAvLyBVcGRhdGUgVUkKICAgICAgICB1cGRhdGVUcmFja0xpc3QoKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzJykuaW5uZXJUZXh0ID0gYFRyYWNrIHJlbW92ZWRgOwogICAgfQp9Ci8vIEFkZCByZW1vdmUgdHJhY2sgZnVuY3Rpb24KZnVuY3Rpb24gcmVtb3ZlVHJhZGRjayhpbmRleCkgewogICAgaWYgKGNvbmZpcm0oJ1JlbW92ZSB0aGlzIHRyYWNrIGZyb20gcGxheWxpc3Q/JykpIHsKICAgICAgICBwbGF5bGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgIAogICAgICAgIC8vIEFkanVzdCBjdXJyZW50IGluZGV4IGlmIG5lZWRlZAogICAgICAgIGlmIChjdXJyZW50SW5kZXggPj0gaW5kZXggJiYgY3VycmVudEluZGV4ID4gMCkgewogICAgICAgICAgICBjdXJyZW50SW5kZXgtLTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKHBsYXlsaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICBzeW50aC5zdG9wTUlESSgpOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzJykuaW5uZXJUZXh0ID0gIlBsYXlsaXN0IGVtcHR5IjsKICAgICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSAiUGFyYSBUYXRiaW4gTWVkaWEgUGxheWVyIERVQSdTIjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdXBkYXRlVHJhY2tMaXN0KCk7CiAgICB9Cn0KCmZ1bmN0aW9uIGxvYWRUcmFja0R1cmF0aW9uKGZpbGUsIGluZGV4KSB7CiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgcmVhZGVyLm9ubG9hZCA9IChlKSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8gU2xhIGRlIE1JREkgZGF0YSB0aWpkZWxpamsgb3Agb20gZHV1ciB0ZSBiZXJla2VuZW4KICAgICAgICAgICAgY29uc3QgZGF0YSA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgICAgY29uc3QgdGVtcFN5bnRoID0gbmV3IFdlYkF1ZGlvVGlueVN5bnRoKHt2b2ljZXM6IDY0fSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBMYWFkIGRlIE1JREkgZGF0YSBpbiBkZSB0ZW1wIHN5bnRoCiAgICAgICAgICAgIHRlbXBTeW50aC5sb2FkTUlESShkYXRhKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFdhY2h0IHRvdCBkZSBzb25nIGdlbGFkZW4gaXMKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodGVtcFN5bnRoLnNvbmcgJiYgdGVtcFN5bnRoLm1heFRpY2spIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkdXJhdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjd21wX3RyYWNrX3Jvd18ke2luZGV4ICsgMX0gLndtcF90cmFja19kdXJhdGlvbmApOwogICAgICAgICAgICAgICAgICAgIGlmIChkdXJhdGlvbkVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmVyZWtlbiBkdXVyIGluIG1tOnNzIGZvcm1hYXQKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG90YWxTZWNvbmRzID0gKHRlbXBTeW50aC5tYXhUaWNrICogNCAqIDYwKSAvICh0ZW1wU3ludGguc29uZy50aW1lYmFzZSAqIHRlbXBTeW50aC5zb25nLnRlbXBvKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IodG90YWxTZWNvbmRzIC8gNjApOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmRzID0gTWF0aC5mbG9vcih0b3RhbFNlY29uZHMgJSA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uVGV4dCA9IGAke21pbnV0ZXN9OiR7c2Vjb25kcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGR1cmF0aW9uVGV4dDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFN0b3AgZGUgdGVtcCBzeW50aAogICAgICAgICAgICAgICAgdGVtcFN5bnRoLnN0b3BNSURJKCk7CiAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcignS29uIGR1dXIgbmlldCBiZXJla2VuZW4gdm9vcjonLCBmaWxlLm5hbWUsIGVycm9yKTsKICAgICAgICB9CiAgICB9OwogICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwp9CgoKCmZ1bmN0aW9uIHByZXZpZXcoKSB7CiAgIAp9CgoKLy8gVXBkYXRlIG9vayBhbmRlcmUgZnVuY3RpZXMgZGllIHRyYWNrcyB2ZXJhbmRlcmVuCgpmdW5jdGlvbiBuZXh0VHJhY2soKSB7CiAgICBpZiAocGxheWxpc3QubGVuZ3RoID4gMCAmJiBjdXJyZW50SW5kZXggPCBwbGF5bGlzdC5sZW5ndGggLSAxKSB7CiAgICAgICAgc3ludGguc3RvcE1JREkoKTsKICAgICAgICBzdG9wVGltZVVwZGF0ZXMoKTsKICAgICAgICBjdXJyZW50SW5kZXgrKzsKICAgICAgICBsb2FkQW5kUGxheShjdXJyZW50SW5kZXgpOwogICAgfSBlbHNlIGlmIChjdXJyZW50SW5kZXggPj0gcGxheWxpc3QubGVuZ3RoIC0gMSkgewogICAgICAgIHN5bnRoLnN0b3BNSURJKCk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1cycpLmlubmVyVGV4dCA9ICJQbGF5bGlzdCB2b2x0b29pZCI7CiAgICAgICAgLy8gUmVzZXQgdGl0ZWxiYWxrCiAgICAgICAgZG9jdW1lbnQudGl0bGU9ICJQYXJhIFRhdGJpbiBNZWRpYSBQbGF5ZXIgRFVBJ1MiOwogICAgfQp9CgoKCgpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd21wX2J0bl9uZXh0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBuZXh0VHJhY2spOwoKCmZ1bmN0aW9uIHN0cFRyYWNrKCl7CiAgc3ludGguc3RvcE1JREkoKTsKICAgICAgICAgICAgc3RvcFRpbWVVcGRhdGVzKCk7Cn0KCmxldCBwcm9ncmVzc0ludGVydmFsOwoKZnVuY3Rpb24gZm9ybWF0VGltZShzZWNvbmRzKSB7CiAgICBjb25zdCBtaW5zID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApOwogICAgY29uc3Qgc2VjcyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAlIDYwKTsKICAgIHJldHVybiBgJHttaW5zLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtzZWNzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gOwp9CgpmdW5jdGlvbiB1cGRhdGVUaW1lRGlzcGxheSgpIHsKICAgIGNvbnN0IHBsYXlTdGF0dXMgPSBzeW50aC5nZXRQbGF5U3RhdHVzKCk7CiAgICAKICAgIGlmIChzeW50aC5zb25nICYmIHBsYXlTdGF0dXMuY3VyVGljayAhPT0gdW5kZWZpbmVkICYmIHBsYXlTdGF0dXMubWF4VGljayAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgLy8gR2VicnVpayBkZSBiZXN0YWFuZGUgdG9UaW1lIGZ1bmN0aWUgdWl0IGplIGNvZGUKICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IHN5bnRoLnRvVGltZShwbGF5U3RhdHVzLmN1clRpY2spOwogICAgICAgIGNvbnN0IHRvdGFsVGltZSA9IHN5bnRoLnRvVGltZShwbGF5U3RhdHVzLm1heFRpY2spOwogICAgICAgIAogICAgICAgIC8vIFRpamRlbiBiaWp3ZXJrZW4KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd21wX2N1cnJlbnRfdGltZScpLnRleHRDb250ZW50ID0gY3VycmVudFRpbWU7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dtcF90b3RhbF90aW1lJykudGV4dENvbnRlbnQgPSB0b3RhbFRpbWU7CiAgICAgICAgCiAgICAgICAgLy8gVm9vcnRnYW5nc2JhbGsgYmlqd2Vya2VuCiAgICAgICAgaWYgKHBsYXlTdGF0dXMubWF4VGljayA+IDApIHsKICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3NQZXJjZW50ID0gKHBsYXlTdGF0dXMuY3VyVGljayAvIHBsYXlTdGF0dXMubWF4VGljaykgKiAxMDA7CiAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzRmlsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3bXBfcHJvZ3Jlc3NfZmlsbCcpOwogICAgICAgICAgICBpZiAocHJvZ3Jlc3NGaWxsKSB7CiAgICAgICAgICAgICAgICBwcm9ncmVzc0ZpbGwuc3R5bGUud2lkdGggPSBNYXRoLm1pbigxMDAsIE1hdGgubWF4KDAsIHByb2dyZXNzUGVyY2VudCkpICsgJyUnOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9CgpmdW5jdGlvbiBzdGFydFRpbWVVcGRhdGVzKCkgewogICAgLy8gU3RvcCBiZXN0YWFuZGUgaW50ZXJ2YWwKICAgIGlmIChwcm9ncmVzc0ludGVydmFsKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbChwcm9ncmVzc0ludGVydmFsKTsKICAgIH0KICAgIAogICAgLy8gU3RhcnQgbmlldXdlIGludGVydmFsIHZvb3IgdXBkYXRlcwogICAgcHJvZ3Jlc3NJbnRlcnZhbCA9IHNldEludGVydmFsKHVwZGF0ZVRpbWVEaXNwbGF5LCAxMDApOwp9CmZ1bmN0aW9uIHVwZGF0ZVRyYWNrVGltZUluZm8oKSB7CiAgICAvLyBSZXNldCB0aWpkZW4gYmlqIG5pZXV3IG51bW1lcgogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dtcF9jdXJyZW50X3RpbWUnKS50ZXh0Q29udGVudCA9ICcwMDowMCc7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd21wX3RvdGFsX3RpbWUnKS50ZXh0Q29udGVudCA9ICctLTotLSc7CiAgICAKICAgIC8vIFJlc2V0IHZvb3J0Z2FuZ3NiYWxrCiAgICBjb25zdCBwcm9ncmVzc0ZpbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd21wX3Byb2dyZXNzX2ZpbGwnKTsKICAgIGlmIChwcm9ncmVzc0ZpbGwpIHsKICAgICAgICBwcm9ncmVzc0ZpbGwuc3R5bGUud2lkdGggPSAnMCUnOwogICAgfQogICAgCiAgICAvLyBOYSBlZW4ga29ydGUgdmVydHJhZ2luZyAoem9kYXQgc29uZyBnZWxhZGVuIGlzKSwgc3RhcnQgdGlqZHVwZGF0ZXMKICAgIHNldFRpbWVvdXQoc3RhcnRUaW1lVXBkYXRlcywgNTAwKTsKfQoKZnVuY3Rpb24gSW5pdCgpIHsKICAgIHN5bnRoID0gbmV3IFdlYkF1ZGlvVGlueVN5bnRoKHt2b2ljZXM6IDY0fSk7CiAgICAKICAgIC8vIEluaXRpYWxpemUgdGl0bGUgYmFyIHRleHQKICAgIGRvY3VtZW50LnRpdGxlID0gIlBhcmEgVGF0YmluIE1lZGlhIFBsYXllciBEVUEnUyI7CiAgICAKICAgIC8vIFBvcHVsYXRlIGluc3RydW1lbnQgZHJvcGRvd24KICAgIGZvcih2YXIgaSA9IDA7IGkgPCAxMjg7ICsraSkgewogICAgICAgIC8vdmFyIG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKICAgICAgIC8vIG8uaW5uZXJIVE1MID0gc3ludGguZ2V0VGltYnJlTmFtZSgwLCBpKTsKICAgICAgLy8gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwcm9nIikuYXBwZW5kQ2hpbGQobyk7CiAgICB9CiAgICAKICAgIC8vIFVwZGF0ZSBzdGF0dXMgYW5kIGNhY2hlIGN1cnJlbnQgdHJhY2sgZHVyYXRpb24KICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBzdCA9IHN5bnRoLmdldFBsYXlTdGF0dXMoKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3RhdHVzIikuaW5uZXJIVE1MID0gIlBsYXk6IiArIHN0LnBsYXkgKyAiIFBvczoiICsgc3ludGgudG9UaW1lKHN0LmN1clRpY2spICsgIi8iICsgc3ludGgudG9UaW1lKHN0Lm1heFRpY2spOwogICAgICAgIAogICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IHRyYWNrIGR1cmF0aW9uIGluIGNhY2hlCiAgICAgICAgaWYgKHBsYXlsaXN0W2N1cnJlbnRJbmRleF0gJiYgc3QubWF4VGljayA+IDApIHsKICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBwbGF5bGlzdFtjdXJyZW50SW5kZXhdLm5hbWU7CiAgICAgICAgICAgIGR1cmF0aW9uQ2FjaGVbZmlsZU5hbWVdID0gewogICAgICAgICAgICAgICAgbWF4VGljazogc3QubWF4VGljaywKICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBzeW50aC50b1RpbWUoc3QubWF4VGljaykKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYoc3QuY3VyVGljayA9PSBzdC5tYXhUaWNrICkgewogICAgICAgICAgICAvLyBUcmFjayBlbmRlZCwgcGxheSBuZXh0CiAgICAgICAgICAgIGN1cnJlbnRJbmRleCsrOwogICAgICAgICAgICBpZiAoY3VycmVudEluZGV4IDwgcGxheWxpc3QubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBoYW5kbGVUcmFja0NsaWNrKGN1cnJlbnRJbmRleCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBQbGF5bGlzdCBjb21wbGV0ZWQKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0dXMnKS5pbm5lclRleHQgPSAiUGxheWxpc3QgY29tcGxldGVkIjsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gIlBhcmEgVGF0YmluIE1lZGlhIFBsYXllciBEVUEnUyI7CiAgICAgICAgICAgICAgICBzeW50aC5zdG9wTUlESSgpOwogICAgICAgICAgICAgICAgc3RvcFRpbWVVcGRhdGVzKCk7CiAgICAgICAgICAgICAgICB1cGRhdGVUcmFja0xpc3QoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBVcGRhdGUgdHJhY2sgbGlzdCB0byBzaG93IGN1cnJlbnQgcG9zaXRpb24KICAgICAgICB1cGRhdGVUcmFja0xpc3QoKTsKICAgIH0sIDEwMDApOyAvLyBVcGRhdGUgZXZlcnkgc2Vjb25kCiAgICAKICAgIC8vIEluaXRpYWxpemUgdHJhY2tsaXN0CiAgICB1cGRhdGVUcmFja0xpc3QoKTsKfQoKCiAgICAgY29uc3QgZnVsbEhUTUwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MOwogICAgICAgIGNvbnN0IGZ1bGxEb2N1bWVudCA9ICc8IURPQ1RZUEUgaHRtbD4nICsgZnVsbEhUTUw7CiAgICAgICAgY29uc3QgYmFzZTY0RW5jb2RlZCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGZ1bGxEb2N1bWVudCkpKTsKd2luZG93Lm9ubG9hZD1Jbml0OwoKICAgIGNvbnNvbGUubG9nKCJCYXNlNjQgZW5jb2RlZCBlbnRpcmUgSFRNTCBkb2N1bWVudDoiKTsKICAgICAgICBjb25zb2xlLmxvZyhiYXNlNjRFbmNvZGVkKTsKICAgICAgICAKICAgICAgICAvLyBZb3VyIGVuY29kaW5nIG1ldGhvZAoKLy8gQkFUQ0ggQ09OVkVSU0lFIC0gV0VSS0VOREUgVkVSU0lFCmFzeW5jIGZ1bmN0aW9uIGNvbnZlcnRBbGxUcmFja3NUb1NpbmdsZVdhdigpIHsKICAgIGlmIChwbGF5bGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICBhbGVydCgiVXBsb2FkIGVlcnN0IE1JREkgYmVzdGFuZGVuISIpOwogICAgICAgIHJldHVybjsKICAgIH0KICAgIAogICAgLy8gVG9vbiB2b29ydGdhbmcgb3ZlcmxheQogICAgY29uc3Qgb3ZlcmxheSA9IGNyZWF0ZVByb2dyZXNzT3ZlcmxheShwbGF5bGlzdC5sZW5ndGgpOwogICAgCiAgICB0cnkgewogICAgICAgIC8vIEFycmF5IG9tIGFsbGUgYXVkaW9idWZmZXJzIG9wIHRlIHNsYWFuCiAgICAgICAgY29uc3QgYXVkaW9CdWZmZXJzID0gW107CiAgICAgICAgCiAgICAgICAgLy8gUHJvY2VzcyBlYWNoIHRyYWNrCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwbGF5bGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB1cGRhdGVQcm9ncmVzcyhvdmVybGF5LCBpICsgMSwgcGxheWxpc3QubGVuZ3RoLCBwbGF5bGlzdFtpXS5uYW1lKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFJlY29yZCB0cmFjawogICAgICAgICAgICBjb25zdCBhdWRpb0J1ZmZlciA9IGF3YWl0IHJlY29yZFNpbmdsZVRyYWNrKHBsYXlsaXN0W2ldKTsKICAgICAgICAgICAgaWYgKGF1ZGlvQnVmZmVyKSB7CiAgICAgICAgICAgICAgICBhdWRpb0J1ZmZlcnMucHVzaChhdWRpb0J1ZmZlcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEtvcnRlIHBhdXplIHR1c3NlbiB0cmFja3MKICAgICAgICAgICAgYXdhaXQgZGVsYXkoMTAwKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gQ29tYmluZSBhbGwgYnVmZmVycyBpbnRvIG9uZQogICAgICAgIGlmIChhdWRpb0J1ZmZlcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBjb25zdCBjb21iaW5lZEJ1ZmZlciA9IGNvbWJpbmVBdWRpb0J1ZmZlcnMoYXVkaW9CdWZmZXJzKTsKICAgICAgICAgICAgc2F2ZUFzV2F2KGNvbWJpbmVkQnVmZmVyLCBgYmF0Y2hfJHtwbGF5bGlzdC5sZW5ndGh9X3RyYWNrc18ke0RhdGUubm93KCl9LndhdmApOwogICAgICAgICAgICAKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1cycpLmlubmVyVGV4dCA9IAogICAgICAgICAgICAgICAgYOKchSBCYXRjaCBjb252ZXJzaWUgdm9sdG9vaWQhICR7YXVkaW9CdWZmZXJzLmxlbmd0aH0gdHJhY2tzIGdlY29tYmluZWVyZC5gOwogICAgICAgIH0KICAgICAgICAKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigiQmF0Y2ggY29udmVyc2llIGZvdXQ6IiwgZXJyb3IpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0dXMnKS5pbm5lclRleHQgPSAiRm91dCBiaWogY29udmVyc2llISI7CiAgICB9IGZpbmFsbHkgewogICAgICAgIC8vIFZlcndpamRlciBvdmVybGF5CiAgICAgICAgaWYgKG92ZXJsYXkgJiYgb3ZlcmxheS5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgIG92ZXJsYXkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvdmVybGF5KTsKICAgICAgICB9CiAgICB9Cn0KCi8vIEhlbHBlcjogRGVsYXkgZnVuY3RpZQpmdW5jdGlvbiBkZWxheShtcykgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpOwp9CgovLyBIZWxwZXI6IE1hYWsgdm9vcnRnYW5nIG92ZXJsYXkKZnVuY3Rpb24gY3JlYXRlUHJvZ3Jlc3NPdmVybGF5KHRvdGFsVHJhY2tzKSB7CiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBvdmVybGF5LnN0eWxlLmNzc1RleHQgPSBgCiAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgIHRvcDogMDsKICAgICAgICBsZWZ0OiAwOwogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuOCk7CiAgICAgICAgei1pbmRleDogOTk5OTsKICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOwogICAgYDsKICAgIAogICAgY29uc3QgcHJvZ3Jlc3NUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBwcm9ncmVzc1RleHQuaWQgPSAnYmF0Y2hQcm9ncmVzc1RleHQnOwogICAgcHJvZ3Jlc3NUZXh0LnRleHRDb250ZW50ID0gYEJhdGNoIGNvbnZlcnNpZTogMC8ke3RvdGFsVHJhY2tzfWA7CiAgICBwcm9ncmVzc1RleHQuc3R5bGUuY3NzVGV4dCA9ICdmb250LXNpemU6IDIwcHg7IG1hcmdpbi1ib3R0b206IDIwcHg7JzsKICAgIAogICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHByb2dyZXNzQmFyLnN0eWxlLmNzc1RleHQgPSBgCiAgICAgICAgd2lkdGg6IDMwMHB4OwogICAgICAgIGhlaWdodDogMjBweDsKICAgICAgICBiYWNrZ3JvdW5kOiAjMzMzOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4OwogICAgYDsKICAgIAogICAgY29uc3QgcHJvZ3Jlc3NGaWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBwcm9ncmVzc0ZpbGwuaWQgPSAnYmF0Y2hQcm9ncmVzc0ZpbGwnOwogICAgcHJvZ3Jlc3NGaWxsLnN0eWxlLmNzc1RleHQgPSBgCiAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgIGJhY2tncm91bmQ6ICM0Q0FGNTA7CiAgICAgICAgd2lkdGg6IDAlOwogICAgICAgIHRyYW5zaXRpb246IHdpZHRoIDAuM3M7CiAgICBgOwogICAgcHJvZ3Jlc3NCYXIuYXBwZW5kQ2hpbGQocHJvZ3Jlc3NGaWxsKTsKICAgIAogICAgY29uc3QgY3VycmVudFRyYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBjdXJyZW50VHJhY2suaWQgPSAnYmF0Y2hDdXJyZW50VHJhY2snOwogICAgY3VycmVudFRyYWNrLnN0eWxlLmNzc1RleHQgPSAnZm9udC1zaXplOiAxNHB4OyBjb2xvcjogI2NjYzsgbWFyZ2luLWJvdHRvbTogMzBweDsnOwogICAgCiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgIGNhbmNlbEJ0bi50ZXh0Q29udGVudCA9ICJBbm51bGVyZW4iOwogICAgY2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgaWYgKG92ZXJsYXkucGFyZW50Tm9kZSkgewogICAgICAgICAgICBvdmVybGF5LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob3ZlcmxheSk7CiAgICAgICAgfQogICAgICAgIHN5bnRoLnN0b3BNSURJKCk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1cycpLmlubmVyVGV4dCA9ICJCYXRjaCBjb252ZXJzaWUgZ2Vhbm51bGVlcmQiOwogICAgICAgIHRocm93IG5ldyBFcnJvcignQ29udmVyc2llIGdlYW5udWxlZXJkJyk7CiAgICB9OwogICAgY2FuY2VsQnRuLnN0eWxlLmNzc1RleHQgPSBgCiAgICAgICAgcGFkZGluZzogMTBweCAyMHB4OwogICAgICAgIGJhY2tncm91bmQ6ICNmNDQzMzY7CiAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgIGA7CiAgICAKICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQocHJvZ3Jlc3NUZXh0KTsKICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQocHJvZ3Jlc3NCYXIpOwogICAgb3ZlcmxheS5hcHBlbmRDaGlsZChjdXJyZW50VHJhY2spOwogICAgb3ZlcmxheS5hcHBlbmRDaGlsZChjYW5jZWxCdG4pOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTsKICAgIAogICAgcmV0dXJuIG92ZXJsYXk7Cn0KCi8vIEhlbHBlcjogVXBkYXRlIHZvb3J0Z2FuZwpmdW5jdGlvbiB1cGRhdGVQcm9ncmVzcyhvdmVybGF5LCBjdXJyZW50LCB0b3RhbCwgZmlsZW5hbWUpIHsKICAgIGNvbnN0IHByb2dyZXNzVGV4dCA9IG92ZXJsYXkucXVlcnlTZWxlY3RvcignI2JhdGNoUHJvZ3Jlc3NUZXh0Jyk7CiAgICBjb25zdCBwcm9ncmVzc0ZpbGwgPSBvdmVybGF5LnF1ZXJ5U2VsZWN0b3IoJyNiYXRjaFByb2dyZXNzRmlsbCcpOwogICAgY29uc3QgY3VycmVudFRyYWNrID0gb3ZlcmxheS5xdWVyeVNlbGVjdG9yKCcjYmF0Y2hDdXJyZW50VHJhY2snKTsKICAgIAogICAgaWYgKHByb2dyZXNzVGV4dCkgewogICAgICAgIHByb2dyZXNzVGV4dC50ZXh0Q29udGVudCA9IGBCYXRjaCBjb252ZXJzaWU6ICR7Y3VycmVudH0vJHt0b3RhbH1gOwogICAgfQogICAgCiAgICBpZiAocHJvZ3Jlc3NGaWxsKSB7CiAgICAgICAgcHJvZ3Jlc3NGaWxsLnN0eWxlLndpZHRoID0gYCR7KGN1cnJlbnQgLyB0b3RhbCkgKiAxMDB9JWA7CiAgICB9CiAgICAKICAgIGlmIChjdXJyZW50VHJhY2spIHsKICAgICAgICBjb25zdCBzaG9ydE5hbWUgPSBmaWxlbmFtZS5sZW5ndGggPiAzMCA/IGZpbGVuYW1lLnN1YnN0cmluZygwLCAyNykgKyAnLi4uJyA6IGZpbGVuYW1lOwogICAgICAgIGN1cnJlbnRUcmFjay50ZXh0Q29udGVudCA9IGBUcmFjayAke2N1cnJlbnR9OiAke3Nob3J0TmFtZX1gOwogICAgfQogICAgCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzJykuaW5uZXJUZXh0ID0gCiAgICAgICAgYFRyYWNrICR7Y3VycmVudH0vJHt0b3RhbH06ICR7ZmlsZW5hbWV9YDsKfQoKLy8gSGVscGVyOiBSZWNvcmQgw6nDqW4gdHJhY2sKYXN5bmMgZnVuY3Rpb24gcmVjb3JkU2luZ2xlVHJhY2soZmlsZSkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIAogICAgICAgIHJlYWRlci5vbmxvYWQgPSBhc3luYyAoZSkgPT4gewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgLy8gUmVzZXQgc3ludGgKICAgICAgICAgICAgICAgIHN5bnRoLnN0b3BNSURJKCk7CiAgICAgICAgICAgICAgICBzeW50aC5yZXNldCgpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBMYWFkIE1JREkKICAgICAgICAgICAgICAgIHN5bnRoLmxvYWRNSURJKGUudGFyZ2V0LnJlc3VsdCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFdhY2h0IHRvdCBnZWxhZGVuCiAgICAgICAgICAgICAgICBhd2FpdCBkZWxheSg1MDApOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBNYWFrIGF1ZGlvY29udGV4dCB2b29yIG9wbmFtZQogICAgICAgICAgICAgICAgY29uc3QgYXVkaW9Db250ZXh0ID0gbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQpKCk7CiAgICAgICAgICAgICAgICBhd2FpdCBhdWRpb0NvbnRleHQucmVzdW1lKCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIE1hYWsgTWVkaWFTdHJlYW1EZXN0aW5hdGlvbgogICAgICAgICAgICAgICAgY29uc3QgbWVkaWFTdHJlYW1EZXN0ID0gYXVkaW9Db250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtRGVzdGluYXRpb24oKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gVmVyYmluZCBzeW50aCBvdXRwdXQgKHZpYSB0aWpkZWxpamtlIGdhaW4gbm9kZSBvbSB2b2x1bWUgdGUgY29udHJvbGVyZW4pCiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wR2FpbiA9IGF1ZGlvQ29udGV4dC5jcmVhdGVHYWluKCk7CiAgICAgICAgICAgICAgICB0ZW1wR2Fpbi5nYWluLnZhbHVlID0gMS4wOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBXZSBtb2V0ZW4gZGUgc3ludGggb3V0cHV0IG5hYXIgb256ZSBjb250ZXh0IGtyaWpnZW4KICAgICAgICAgICAgICAgIC8vIERpdCBpcyB0cmlja3kgb21kYXQgc3ludGggemlqbiBlaWdlbiBjb250ZXh0IGhlZWZ0CiAgICAgICAgICAgICAgICAvLyBTaW1wZWxlcmUgYWFucGFrOiBnZWJydWlrIG9mZmxpbmUgY29udGV4dAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBCRVRFUjogZ2VicnVpayBvZmZsaW5lIHJlbmRlcmluZwogICAgICAgICAgICAgICAgY29uc3Qgb2ZmbGluZUNvbnRleHQgPSBuZXcgT2ZmbGluZUF1ZGlvQ29udGV4dCh7CiAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZDaGFubmVsczogMiwKICAgICAgICAgICAgICAgICAgICBsZW5ndGg6IDI2ICogYXVkaW9Db250ZXh0LnNhbXBsZVJhdGUsIC8vIDI2IHNlY29uZGVuCiAgICAgICAgICAgICAgICAgICAgc2FtcGxlUmF0ZTogYXVkaW9Db250ZXh0LnNhbXBsZVJhdGUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBXZSBrdW5uZW4gbmlldCBkaXJlY3QgdmVyYmluZGVuIHR1c3NlbiBjb250ZXh0cwogICAgICAgICAgICAgICAgLy8gRHVzIHdlIGdlYnJ1aWtlbiBlZW4gYW5kZXJlIGFhbnBhay4uLgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBUZXJ1ZyBuYWFyIE1lZGlhUmVjb3JkZXIgbWV0aG9kZSBtYWFyIGRhbiBjb3JyZWN0CiAgICAgICAgICAgICAgICBjb25zdCBtZWRpYVJlY29yZGVyID0gbmV3IE1lZGlhUmVjb3JkZXIobWVkaWFTdHJlYW1EZXN0LnN0cmVhbSwgewogICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlOiAnYXVkaW8vd2VibScKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsZXQgY2h1bmtzID0gW107CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIub25kYXRhYXZhaWxhYmxlID0gKGV2ZW50KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEuc2l6ZSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtzLnB1c2goZXZlbnQuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5vbnN0b3AgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXVkaW9CbG9iID0gbmV3IEJsb2IoY2h1bmtzLCB7IHR5cGU6ICdhdWRpby93ZWJtJyB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBhdWRpb0Jsb2IuYXJyYXlCdWZmZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlYk0gbmFhciBBdWRpb0J1ZmZlciBjb252ZXJ0ZXJlbgogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0J1ZmZlciA9IGF3YWl0IGF1ZGlvQ29udGV4dC5kZWNvZGVBdWRpb0RhdGEoYXJyYXlCdWZmZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2x1aXQgY29udGV4dAogICAgICAgICAgICAgICAgICAgICAgICBhdWRpb0NvbnRleHQuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYXVkaW9CdWZmZXIpOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gV2UgbW9ldGVuIGRlIHN5bnRoIHZlcmJpbmRlbiwgbWFhciB3ZSBoZWJiZW4gZWVuIHByb2JsZWVtIG1ldCBjb250ZXh0cwogICAgICAgICAgICAgICAgLy8gVGlqZGVsaWprZSBvcGxvc3Npbmc6IHN0YXJ0IGRlIHN5bnRoIGVuIGhvcCBkYXQgaGV0IHdlcmt0CiAgICAgICAgICAgICAgICBzeW50aC5wbGF5TUlESSgpOwogICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5zdGFydCgpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBTdG9wIG5hIDI2IHNlY29uZGVuCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICBzeW50aC5zdG9wTUlESSgpOwogICAgICAgICAgICAgICAgfSwgMjYwMDApOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICAKICAgICAgICByZWFkZXIub25lcnJvciA9IHJlamVjdDsKICAgICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSk7CiAgICB9KTsKfQoKLy8gU0lNUEVMRVJFIEFBTlBBSzogRGlyZWN0ZSBvZmZsaW5lIHJlbmRlcmluZwphc3luYyBmdW5jdGlvbiByZWNvcmRUcmFja09mZmxpbmUoZmlsZSkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBNYWFrIGVlbiBuaWV1d2Ugc3ludGggdm9vciBkZXplIHRyYWNrCiAgICAgICAgICAgIGNvbnN0IHRyYWNrU3ludGggPSBuZXcgV2ViQXVkaW9UaW55U3ludGgoewogICAgICAgICAgICAgICAgdm9pY2VzOiA2NCwKICAgICAgICAgICAgICAgIHVzZVJldmVyYjogMCwKICAgICAgICAgICAgICAgIHF1YWxpdHk6IDEKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBhd2FpdCB0cmFja1N5bnRoLnJlYWR5KCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICByZWFkZXIub25sb2FkID0gYXN5bmMgKGUpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgLy8gTGFhZCBNSURJCiAgICAgICAgICAgICAgICAgICAgdHJhY2tTeW50aC5sb2FkTUlESShlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFdhY2h0IHRvdCBnZWxhZGVuCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZGVsYXkoMTAwMCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gSGFhbCBhdWRpb2NvbnRleHQgb3AKICAgICAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0NvbnRleHQgPSB0cmFja1N5bnRoLmdldEF1ZGlvQ29udGV4dCgpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIE1hYWsgb2ZmbGluZSBjb250ZXh0CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2ZmbGluZUNvbnRleHQgPSBuZXcgT2ZmbGluZUF1ZGlvQ29udGV4dCh7CiAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlck9mQ2hhbm5lbHM6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aDogMjYgKiBhdWRpb0NvbnRleHQuc2FtcGxlUmF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlUmF0ZTogYXVkaW9Db250ZXh0LnNhbXBsZVJhdGUKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBWZXJiaW5kIHN5bnRoIG91dHB1dCBuYWFyIG9mZmxpbmUgY29udGV4dAogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IG9mZmxpbmVDb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpOwogICAgICAgICAgICAgICAgICAgIC8vIFdlIGt1bm5lbiBuaWV0IGRpcmVjdCB2ZXJiaW5kZW4uLi4gZGl0IGlzIGhldCBwcm9ibGVlbQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIEFsdGVybmF0aWVmOiBnZWJydWlrIGRlIHN5bnRoIG9tIHRlIHNwZWxlbiBlbiBvcCB0ZSBuZW1lbgogICAgICAgICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7IC8vIFBsYWNlaG9sZGVyCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIAogICAgICAgICAgICByZWFkZXIub25lcnJvciA9IHJlamVjdDsKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgICAgICAgICAKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0KICAgIH0pOwp9CgovLyBXT1JLQVJPVU5EOiBHZWJydWlrIGJlc3RhYW5kZSBleHBvcnQgZnVuY3RpZSBtYWFyIHZvb3IgZWxrZSB0cmFjayBhcGFydAphc3luYyBmdW5jdGlvbiBiYXRjaENvbnZlcnRXb3JrYXJvdW5kKCkgewogICAgaWYgKHBsYXlsaXN0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgIGFsZXJ0KCJVcGxvYWQgZWVyc3QgTUlESSBiZXN0YW5kZW4hIik7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgCiAgICBjb25zdCBvdmVybGF5ID0gY3JlYXRlUHJvZ3Jlc3NPdmVybGF5KHBsYXlsaXN0Lmxlbmd0aCk7CiAgICAKICAgIHRyeSB7CiAgICAgICAgLy8gQXJyYXkgb20gYWxsZSBXQVYgYmxvYnMgb3AgdGUgc2xhYW4KICAgICAgICBjb25zdCB3YXZCbG9icyA9IFtdOwogICAgICAgIAogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGxheWxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdXBkYXRlUHJvZ3Jlc3Mob3ZlcmxheSwgaSArIDEsIHBsYXlsaXN0Lmxlbmd0aCwgcGxheWxpc3RbaV0ubmFtZSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBSZWNvcmQgZGV6ZSB0cmFjayBhbHMgV0FWCiAgICAgICAgICAgIGNvbnN0IHdhdkJsb2IgPSBhd2FpdCByZWNvcmRUcmFja0FzV2F2KHBsYXlsaXN0W2ldKTsKICAgICAgICAgICAgaWYgKHdhdkJsb2IpIHsKICAgICAgICAgICAgICAgIHdhdkJsb2JzLnB1c2god2F2QmxvYik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGF3YWl0IGRlbGF5KDUwMCk7IC8vIExhbmdlcmUgcGF1emUgdHVzc2VuIHRyYWNrcwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBDb21iaW5lZXIgYWxsZSBXQVZzIHRvdCDDqcOpbgogICAgICAgIGlmICh3YXZCbG9icy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGF3YWl0IGNvbWJpbmVXYXZGaWxlcyh3YXZCbG9icywgYGJhdGNoXyR7cGxheWxpc3QubGVuZ3RofV90cmFja3Mud2F2YCk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0dXMnKS5pbm5lclRleHQgPSAKICAgICAgICAgICAgICAgIGDinIUgJHt3YXZCbG9icy5sZW5ndGh9IHRyYWNrcyBnZWNvbWJpbmVlcmQgdG90IMOpw6luIFdBVi5gOwogICAgICAgIH0KICAgICAgICAKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigiRm91dDoiLCBlcnJvcik7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1cycpLmlubmVyVGV4dCA9ICJDb252ZXJzaWUgZ2Vhbm51bGVlcmQgb2YgZ2VmYWFsZCI7CiAgICB9IGZpbmFsbHkgewogICAgICAgIGlmIChvdmVybGF5ICYmIG92ZXJsYXkucGFyZW50Tm9kZSkgewogICAgICAgICAgICBvdmVybGF5LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob3ZlcmxheSk7CiAgICAgICAgfQogICAgfQp9CgovLyBSZWNvcmQgw6nDqW4gdHJhY2sgYWxzIFdBViBibG9iCmFzeW5jIGZ1bmN0aW9uIHJlY29yZFRyYWNrQXNXYXYoZmlsZSkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIAogICAgICAgIHJlYWRlci5vbmxvYWQgPSBhc3luYyAoZSkgPT4gewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgLy8gU3RvcCBlbiByZXNldCBtYWluIHN5bnRoCiAgICAgICAgICAgICAgICBzeW50aC5zdG9wTUlESSgpOwogICAgICAgICAgICAgICAgc3ludGgucmVzZXQoKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gTGFhZCB0cmFjawogICAgICAgICAgICAgICAgc3ludGgubG9hZE1JREkoZS50YXJnZXQucmVzdWx0KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gV2FjaHQKICAgICAgICAgICAgICAgIGF3YWl0IGRlbGF5KDEwMDApOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBNYWFrIE1lZGlhUmVjb3JkZXIgc2V0dXAKICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvQ29udGV4dCA9IHN5bnRoLmdldEF1ZGlvQ29udGV4dCgpOwogICAgICAgICAgICAgICAgY29uc3QgbWVkaWFTdHJlYW1EZXN0ID0gYXVkaW9Db250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtRGVzdGluYXRpb24oKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gVmVyYmluZCBzeW50aCBvdXRwdXQKICAgICAgICAgICAgICAgIHN5bnRoLm91dC5jb25uZWN0KG1lZGlhU3RyZWFtRGVzdCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnN0IG1lZGlhUmVjb3JkZXIgPSBuZXcgTWVkaWFSZWNvcmRlcihtZWRpYVN0cmVhbURlc3Quc3RyZWFtKTsKICAgICAgICAgICAgICAgIGxldCBjaHVua3MgPSBbXTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5vbmRhdGFhdmFpbGFibGUgPSAoZXZlbnQpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YS5zaXplID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBjaHVua3MucHVzaChldmVudC5kYXRhKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyLm9uc3RvcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB3YXZCbG9iID0gbmV3IEJsb2IoY2h1bmtzLCB7IHR5cGU6ICdhdWRpby93YXYnIH0pOwogICAgICAgICAgICAgICAgICAgIHJlc29sdmUod2F2QmxvYik7CiAgICAgICAgICAgICAgICAgICAgc3ludGgub3V0LmRpc2Nvbm5lY3QobWVkaWFTdHJlYW1EZXN0KTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFN0YXJ0IG9wbmFtZQogICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5zdGFydCgpOwogICAgICAgICAgICAgICAgc3ludGgucGxheU1JREkoKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gU3RvcCBuYSAyNiBzZWNvbmRlbgogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgc3ludGguc3RvcE1JREkoKTsKICAgICAgICAgICAgICAgIH0sIDI2MDAwKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSByZWplY3Q7CiAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgfSk7Cn0KCi8vIENvbWJpbmVlciBXQVYgYmVzdGFuZGVuIChjb21wbGV4IC0gb21kYXQgV0FWIGhlYWRlcnMgaGViYmVuKQphc3luYyBmdW5jdGlvbiBjb21iaW5lV2F2RmlsZXMod2F2QmxvYnMsIGZpbGVuYW1lKSB7CiAgICAvLyBFZW52b3VkaWdlIG9wbG9zc2luZzogZG93bmxvYWQgYWxzIFpJUCBtZXQgYWxsZSB0cmFja3MKICAgIGlmICh0eXBlb2YgSlNaaXAgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgLy8gTGFhZCBKU1ppcCBsaWJyYXJ5CiAgICAgICAgYXdhaXQgbG9hZEpTWmlwKCk7CiAgICB9CiAgICAKICAgIGNvbnN0IHppcCA9IG5ldyBKU1ppcCgpOwogICAgCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdhdkJsb2JzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgemlwLmZpbGUoYHRyYWNrXyR7aSArIDF9LndhdmAsIHdhdkJsb2JzW2ldKTsKICAgIH0KICAgIAogICAgLy8gR2VuZXJlZXIgWklQCiAgICBjb25zdCB6aXBCbG9iID0gYXdhaXQgemlwLmdlbmVyYXRlQXN5bmMoeyB0eXBlOiAnYmxvYicgfSk7CiAgICAKICAgIC8vIERvd25sb2FkIFpJUAogICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh6aXBCbG9iKTsKICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICBhLmhyZWYgPSB1cmw7CiAgICBhLmRvd25sb2FkID0gZmlsZW5hbWUucmVwbGFjZSgnLndhdicsICcuemlwJyk7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogICAgYS5jbGljaygpOwogICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTsKICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKfQoKLy8gTGFhZCBKU1ppcCBsaWJyYXJ5CmZ1bmN0aW9uIGxvYWRKU1ppcCgpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgaWYgKHR5cGVvZiBKU1ppcCAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgICAgIHNjcmlwdC5zcmMgPSAnaHQgdHBzOi8vIGNkbmpzLmNsIG91ZGZsYXJlLmNvbS9hamF4L2xpIGJzL2pzemlwLzMuMTAuMS9qc3ppcC5taW4uanMnOwogICAgICAgIHNjcmlwdC5vbmxvYWQgPSByZXNvbHZlOyAKICAgICAgICBzY3JpcHQub25lcnJvciA9IHJlamVjdDsKICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgICB9KTsKfQoKLy8gT0Y6IFNpbXBlbHN0ZSBvcGxvc3NpbmcgLSBkb3dubG9hZCBhbGxlIHRyYWNrcyBhcGFydAphc3luYyBmdW5jdGlvbiBiYXRjaENvbnZlcnRTaW1wbGUoKSB7CiAgICBpZiAocGxheWxpc3QubGVuZ3RoID09PSAwKSB7CiAgICAgICAgYWxlcnQoIlVwbG9hZCBlZXJzdCBNSURJIGJlc3RhbmRlbiEiKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIGNvbnN0IG92ZXJsYXkgPSBjcmVhdGVQcm9ncmVzc092ZXJsYXkocGxheWxpc3QubGVuZ3RoKTsKICAgIAogICAgdHJ5IHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBsYXlsaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHVwZGF0ZVByb2dyZXNzKG92ZXJsYXksIGkgKyAxLCBwbGF5bGlzdC5sZW5ndGgsIHBsYXlsaXN0W2ldLm5hbWUpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gUmVjb3JkIGVuIGRvd25sb2FkIGRlemUgdHJhY2sKICAgICAgICAgICAgYXdhaXQgcmVjb3JkQW5kRG93bmxvYWRUcmFjayhwbGF5bGlzdFtpXSwgaSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBhd2FpdCBkZWxheSgxMDAwKTsgLy8gUGF1emUgdHVzc2VuIHRyYWNrcwogICAgICAgIH0KICAgICAgICAKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzJykuaW5uZXJUZXh0ID0gCiAgICAgICAgICAgIGDinIUgQWxsZSAke3BsYXlsaXN0Lmxlbmd0aH0gdHJhY2tzIGdlw6t4cG9ydGVlcmQgYWxzIGFwYXJ0ZSBXQVZzLmA7CiAgICAgICAgCiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIkZvdXQ6IiwgZXJyb3IpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0dXMnKS5pbm5lclRleHQgPSAiQ29udmVyc2llIGdlYW5udWxlZXJkIjsKICAgIH0gZmluYWxseSB7CiAgICAgICAgaWYgKG92ZXJsYXkgJiYgb3ZlcmxheS5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgIG92ZXJsYXkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvdmVybGF5KTsKICAgICAgICB9CiAgICB9Cn0KCi8vIFJlY29yZCBlbiBkb3dubG9hZCDDqcOpbiB0cmFjawphc3luYyBmdW5jdGlvbiByZWNvcmRBbmREb3dubG9hZFRyYWNrKGZpbGUsIGluZGV4KSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgCiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGFzeW5jIChlKSA9PiB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzeW50aC5zdG9wTUlESSgpOwogICAgICAgICAgICAgICAgc3ludGgucmVzZXQoKTsKICAgICAgICAgICAgICAgIHN5bnRoLmxvYWRNSURJKGUudGFyZ2V0LnJlc3VsdCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGF3YWl0IGRlbGF5KDEwMDApOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0NvbnRleHQgPSBzeW50aC5nZXRBdWRpb0NvbnRleHQoKTsKICAgICAgICAgICAgICAgIGNvbnN0IG1lZGlhU3RyZWFtRGVzdCA9IGF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbURlc3RpbmF0aW9uKCk7CiAgICAgICAgICAgICAgICBzeW50aC5vdXQuY29ubmVjdChtZWRpYVN0cmVhbURlc3QpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCBtZWRpYVJlY29yZGVyID0gbmV3IE1lZGlhUmVjb3JkZXIobWVkaWFTdHJlYW1EZXN0LnN0cmVhbSk7CiAgICAgICAgICAgICAgICBsZXQgY2h1bmtzID0gW107CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIG1lZGlhUmVjb3JkZXIub25kYXRhYXZhaWxhYmxlID0gKGV2ZW50KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEuc2l6ZSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtzLnB1c2goZXZlbnQuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbWVkaWFSZWNvcmRlci5vbnN0b3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2F2QmxvYiA9IG5ldyBCbG9iKGNodW5rcywgeyB0eXBlOiAnYXVkaW8vd2F2JyB9KTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBEb3dubG9hZCBtZXRlZW4KICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHdhdkJsb2IpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgICAgICAgICAgICAgIGEuZG93bmxvYWQgPSBgdHJhY2tfJHtpbmRleCArIDF9XyR7ZmlsZS5uYW1lLnJlcGxhY2UoJy5taWQnLCAnLndhdicpLnJlcGxhY2UoJy5taWRpJywgJy53YXYnKX1gOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgICAgICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7CiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHN5bnRoLm91dC5kaXNjb25uZWN0KG1lZGlhU3RyZWFtRGVzdCk7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgfTsKY29uc3Qgc2VjczI2PSAgIHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3bXBfY29udGVudF9zZWFyY2hfaW5wdXQnKS52YWx1ZSsiIik7CiAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyLnN0YXJ0KCk7CiAgICAgICAgICAgICAgICBzeW50aC5wbGF5TUlESSgpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICBzeW50aC5zdG9wTUlESSgpOwogICAgICAgICAgICAgICAgfSwgKHNlY3MyNioxMDAwKSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIAogICAgICAgIHJlYWRlci5vbmVycm9yID0gcmVqZWN0OwogICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsKICAgIH0pOwp9CgovLyBGSU5BTEUgT1BMT1NTSU5HOiBHZWJydWlrIGRlIGJlc3RhYW5kZSBleHBvcnQgZnVuY3RpZSBpbiBlZW4gbG9vcApmdW5jdGlvbiBzdGFydEJhdGNoQ29udmVyc2lvbigpIHsKICAgIGlmIChwbGF5bGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICBhbGVydCgiVXBsb2FkIGVlcnN0IE1JREkgYmVzdGFuZGVuIHZpYSAnQmVzdGFuZCcgbWVudSEiKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIGlmICghY29uZmlybShgV2VldCBqZSB6ZWtlciBkYXQgamUgYWxsZSAke3BsYXlsaXN0Lmxlbmd0aH0gdHJhY2tzIHdpbHQgZXhwb3J0ZXJlbj9cbkVsa2UgdHJhY2sgd29yZHQgMjYgc2Vjb25kZW4gb3BnZW5vbWVuLmApKSB7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgCiAgICAvLyBTdGFydCBiYXRjaCBwcm9jZXMKICAgIGJhdGNoQ29udmVydFNpbXBsZSgpOwp9CgoKCgoKICAgICBjb25zdCBmdWxsSFRNTHMgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MOwogICAgICAgIGNvbnN0IGZ1bGxEb2N1bWVudHMgPSAnPCFET0NUWVBFIGh0bWw+JyArIGZ1bGxIVE1MczsKICAgICAgICBjb25zdCBiYXNlNjRFbmNvZGVkcyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGZ1bGxEb2N1bWVudHMpKSk7CgogICAgY29uc29sZS5sb2coIkJhc2U2NCBlbmNvZGVkIGVudGlyZSBIVE1MIGRvY3VtZW50Oihjb2RlLWVkaXRvcikiKTsKICAgICAgICBjb25zb2xlLmxvZyhiYXNlNjRFbmNvZGVkcyk7CgoKCgoKLy8gVm9lZyBVSSBlbGVtZW50ZW4gdG9lCmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHsKICAgIC8vIFZvZWcgYmF0Y2gga25vcCB0b2UgYWFuIGNvbnRyb2xzCiAgICBjb25zdCBjb250cm9scyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3bXBfY29udHJvbHMnKTsKICAgIGlmIChjb250cm9scykgewogICAgICAgIGNvbnN0IGJhdGNoQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnd21wX2J0bl9iYXRjaCcpOwogICAgICAgIC8vYmF0Y2hCdG4uaWQgPSAnd21wX2J0bl9iYXRjaCc7CiAgICAgICAgYmF0Y2hCdG4udGl0bGUgPSAiRXhwb3J0ZWVyIGFsbGUgdHJhY2tzIGFscyBXQVYgKDI2cyBwZXIgdHJhY2spIjsKICAgICAgICAvKgoJCWJhdGNoQnRuLmlubmVySFRNTCA9ICfij7rvuI8nOyAvLyBSZWNvcmQga25vcAogICAgICAgIGJhdGNoQnRuLnN0eWxlLmNzc1RleHQgPSBgCiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJhZGlhbC1ncmFkaWVudChjaXJjbGUgYXQgNTAlIDEyMCUsICNGRjU3MjIgMCUsICNEODQzMTUgMTAwJSk7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMDA7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgd2lkdGg6IDM4cHg7CiAgICAgICAgICAgIGhlaWdodDogMzhweDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgICAgICBtYXJnaW4tbGVmdDogNXB4OwogICAgICAgIGA7CgkJKi8KICAgICAgICBiYXRjaEJ0bi5vbmNsaWNrID0gc3RhcnRCYXRjaENvbnZlcnNpb247CiAgICAgICAvLyBjb250cm9scy5hcHBlbmRDaGlsZChiYXRjaEJ0bik7CiAgICB9CiAgICAKICAgIC8vIFZvZWcgb29rIHRvZSBhYW4gbWVudQogICAgY29uc3QgbWVudWJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3bXBfbWVudWJhcicpOwogICAgaWYgKG1lbnViYXIpIHsKICAgICAgICBjb25zdCBiYXRjaE1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgYmF0Y2hNZW51LmlubmVySFRNTCA9ICfwn5OmIEJhdGNoIEV4cG9ydCc7CiAgICAgICAgYmF0Y2hNZW51LnN0eWxlLmNzc1RleHQgPSAnbWFyZ2luLWxlZnQ6IDE1cHg7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6ICNGRjk4MDA7IGZvbnQtd2VpZ2h0OiBib2xkOyc7CiAgICAgICAgYmF0Y2hNZW51Lm9uY2xpY2sgPSBzdGFydEJhdGNoQ29udmVyc2lvbjsKICAgICAgICBiYXRjaE1lbnUudGl0bGUgPSAiRXhwb3J0ZWVyIGFsbGUgdHJhY2tzIGFscyBpbmRpdmlkdWVsZSBXQVYgYmVzdGFuZGVuIjsKICAgICAgICBtZW51YmFyLmFwcGVuZENoaWxkKGJhdGNoTWVudSk7CiAgICB9CiAgICAKICAgIC8vIFZvZWcgb29rIGNvbnRleHQgbWVudSB0b2Ugdm9vciB0cmFja2xpc3QKICAgIGNvbnN0IHRyYWNrbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cmFja2xpc3QnKTsKICAgIGlmICh0cmFja2xpc3QpIHsKICAgICAgICB0cmFja2xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgbWVudS5zdHlsZS5jc3NUZXh0ID0gYAogICAgICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICAgICAgdG9wOiAke2UuY2xpZW50WX1weDsKICAgICAgICAgICAgICAgIGxlZnQ6ICR7ZS5jbGllbnRYfXB4OwogICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIzJjMmMyYzsKICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM1NTU7CiAgICAgICAgICAgICAgICBwYWRkaW5nOiA1cHggMDsKICAgICAgICAgICAgICAgIHotaW5kZXg6IDEwMDA7CiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDE1MHB4OwogICAgICAgICAgICBgOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgYmF0Y2hJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGJhdGNoSXRlbS50ZXh0Q29udGVudCA9ICfwn5OmIEV4cG9ydGVlciBhbGxlIHRyYWNrcyc7CiAgICAgICAgICAgIGJhdGNoSXRlbS5zdHlsZS5jc3NUZXh0ID0gJ3BhZGRpbmc6IDhweCAxMnB4OyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB3aGl0ZTsnOwogICAgICAgICAgICBiYXRjaEl0ZW0ub25tb3VzZW92ZXIgPSAoKSA9PiBiYXRjaEl0ZW0uc3R5bGUuYmFja2dyb3VuZCA9ICcjNDQ0JzsKICAgICAgICAgICAgYmF0Y2hJdGVtLm9ubW91c2VvdXQgPSAoKSA9PiBiYXRjaEl0ZW0uc3R5bGUuYmFja2dyb3VuZCA9ICcnOwogICAgICAgICAgICBiYXRjaEl0ZW0ub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobWVudSk7CiAgICAgICAgICAgICAgICBzdGFydEJhdGNoQ29udmVyc2lvbigpOwogICAgICAgICAgICB9OwogICAgICAgICAgICAKICAgICAgICAgICAgbWVudS5hcHBlbmRDaGlsZChiYXRjaEl0ZW0pOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1lbnUpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gVmVyd2lqZGVyIG1lbnUgYmlqIGtsaWsgZWxkZXJzCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlTWVudSA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAobWVudS5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobWVudSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVtb3ZlTWVudSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW1vdmVNZW51KTsKICAgICAgICAgICAgfSwgMTAwKTsKICAgICAgICB9KTsKICAgIH0KfSk7CgoKPC9zY3JpcHQ+PC9ib2R5PjwvaHRtbD4")));
	
	    if (!htmlSource) return;

    // 3. Create a dynamic "page" from the source
    const blob = new Blob([htmlSource], { type: 'text/html' });
    const previewUrl = URL.createObjectURL(blob);
    
    // 4. Open in a new window/tab
    window.open(previewUrl, '_blank');
	
    }



var GENRESO=GENRES;
// ************************************************************************
        var genreslds = ""; 
        // ************************************************************************
        // Globale kopie van de originele GENRES array
        const originalGenres = JSON.parse(JSON.stringify(GENRES));
        // Houd de namen van de geselecteerde genres bij
        let selectedGenresg = new Set();

        // DOM elementen
        const selectWrapper = document.getElementById('selectWrapper');
        const dropdownToggle = document.getElementById('dropdownToggle');
        const toggleText = document.getElementById('toggleText');
        const genreOptionsContainer = document.getElementById('genreOptions');
        const selectAllBtn = document.getElementById('selectAllBtn');
        const deselectAllBtn = document.getElementById('deselectAllBtn');
        const resetBtn = document.getElementById('resetBtn');

        // --- Core Logica ---

        /**
         * Genereert de HTML voor de genre-opties op basis van de GENRES array.
         */
        function renderGenreOptions() {
            genreOptionsContainer.innerHTML = originalGenres.map(genre => `
                <label class="genre-option-item">
                    <input type="checkbox" data-genre-name="${genre.name}" ${selectedGenresg.has(genre.name) ? 'checked' : ''}>
                    ${genre.name}
                </label>
            `).join('');

            // Voeg de event listener toe aan de container, niet aan elke checkbox
            genreOptionsContainer.addEventListener('change', handleCheckboxChange);
        }

        /**
         * Houdt de genreslds variabele up-to-date met een pipe-gescheiden string
         * van geselecteerde genre namen (zonder dubbele).
         */
		 
		 
		 

		 
        function updateGenreslds() {
            // De Set selectedGenresg bevat al unieke namen.
            // Array.from() maakt er een array van, en join('|') maakt de string.
            genreslds = Array.from(selectedGenresg).join('|');
            console.log('genreslds:', genreslds); // Voor debugging
			eeee=genreslds.split('|');
			bv=new Array();
			for(c=0;c<eeee.length;c++){
				ide=0;
				for(u=0;u<GENRESO.length;u++){
					if(GENRESO[u].name==eeee[c]){
					ide=u;
					}
				}			
			bv[c]=GENRESO[ide];
			}
			GENRES=bv;
        }

        /**
         * Update de weergave (tellingen, toggle-tekst) en de globale genre-variabelen.
         */
        function updateDisplay() {
            // Update de tellingen
            const selectedCount = selectedGenresg.size;
            document.getElementById('selectedCount').textContent = selectedCount;
            document.getElementById('totalCount').textContent = originalGenres.length;

            // Update de toggle tekst
            let text = '-- Selecteer genres --';
            if (selectedCount > 0) {
                const selectedArray = Array.from(selectedGenresg);
                const firstThree = selectedArray.slice(0, 3).join(', ');
                text = firstThree;
                if (selectedCount > 3) {
                    const remaining = selectedCount - 3;
                    text += ` en nog ${remaining} ${remaining === 1 ? 'andere' : 'andere'}`;
                }
            }
            toggleText.textContent = text;

            // ** GEWIJZIGD: Update de genreslds variabele **
            updateGenreslds(); 

            // Houd de globale array met geselecteerde objecten up-to-date
            updateCurrentGenresArray();
			
			
			
        }

        /**
         * Houdt de geselecteerde genres array up-to-date.
         */
        function updateCurrentGenresArray() {
            window.currentFilteredGenres = originalGenres.filter(genre => selectedGenresg.has(genre.name));
            console.log('Gefilterde genres:', window.currentFilteredGenres.length, 'items');
        }

        /**
         * Selecteert of deselecteert een genre.
         * @param {string} genreName
         * @param {boolean} shouldSelect
         */
        function toggleGenreSelection(genreName, shouldSelect) {
            const checkbox = genreOptionsContainer.querySelector(`input[data-genre-name="${genreName}"]`);
            if (checkbox) {
                checkbox.checked = shouldSelect;
            }
            if (shouldSelect) {
                selectedGenresg.add(genreName);
            } else {
                selectedGenresg.delete(genreName);
            }
        }

        // --- Event Handlers ---

        function handleCheckboxChange(event) {
            const checkbox = event.target;
            const genreName = checkbox.dataset.genreName;
            
            // selectedGenresg wordt al bijgewerkt in toggleGenreSelection, maar hier
            // kunnen we het direct doen en de UI-update afhandelen.
            if (checkbox.checked) {
                selectedGenresg.add(genreName);
            } else {
                selectedGenresg.delete(genreName);
            }

            // Aangeroepen na een verandering in de Set
            updateDisplay();
        }

        function toggleDropdown() {
            const isOpen = selectWrapper.classList.toggle('open');
			var isOpen_=1;
			if(isOpen){
			isOpen_=2;
			}
			document.getElementById('containerg').style.height=(isOpen_*100)+"%"
            dropdownToggle.setAttribute('aria-expanded', isOpen);
        }

        function selectAll() {
            // Update de Set direct
            originalGenres.forEach(genre => selectedGenresg.add(genre.name));

            // Vink alle checkboxes aan (nodig voor visuele feedback)
            genreOptionsContainer.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = true;
            });

            updateDisplay();
        }

        function deselectAll() {
            // Maak de Set leeg
            selectedGenresg.clear();

            // Vink alle checkboxes uit
            genreOptionsContainer.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });

            updateDisplay();
        }

        function resetToOriginal() {
            // Eerst alles deselecteren (Set leegmaken en checkboxes uitvinken)
            deselectAll(); 
            // Hierna moet u logica toevoegen om uw 'originele' selectie te herstellen
            // Als de 'originele' toestand is dat alles geselecteerd is (zoals in uw initializer), dan:
            selectAll(); 
            
            // Als u een specifieke set wilt herstellen, moet die set hier opnieuw worden toegevoegd.
            // Voor nu houden we de huidige logica aan (die in de initializer alles selecteert).
            updateDisplay();
        }
    
    
function breatheBackground() {
    const div = document.getElementById('weerre');
    if (!div) return;

    // Smooth out the color changes
    div.style.transition = "background-color 0.2s ease";
    
    let hue = 200;
    
    setInterval(() => {
        hue = (hue + 0.2017*2.6) % 360;
        div.style.backgroundColor = `hsl(${hue}, 40%, 70%)`; // Increased saturation/darkness for better tinting
    }, 100);
}

//breatheBackground();
        // --- Initialisatie & Event Listeners ---

        function initializer() {
            // Voeg alle genres initieel toe aan de Set (alles geselecteerd)
            originalGenres.forEach(genre => selectedGenresg.add(genre.name));
            
            // Maak de checkbox-opties
            renderGenreOptions();
            
            // Update de tellingen en de globale array (en nu ook genreslds)
            updateDisplay();

            // Event listeners voor icon knoppen
            selectAllBtn.addEventListener('click', selectAll);
            deselectAllBtn.addEventListener('click', deselectAll);
            resetBtn.addEventListener('click', resetToOriginal);
            
            // Event listener voor de toggle knop
            dropdownToggle.addEventListener('click', toggleDropdown);

            // Close dropdown when clicking outside
            document.addEventListener('click', (event) => {
                if (!selectWrapper.contains(event.target) && selectWrapper.classList.contains('open')) {
                    selectWrapper.classList.remove('open');
						document.getElementById('containerg').style.height=100+"%"
                    dropdownToggle.setAttribute('aria-expanded', false);
                }
            });
            
            // Hulp functies voor debugging
            window.getSelectedGenres = () => Array.from(selectedGenresg);

			//document.getElementById('weerre').style.backgroundColor='rgb(22,27,32)';
				
				
				//fixAchter("Deep House", document.getElementById('weerre'),500,500);
        }

var rrr=new Image();
var rrrr=new Image();


rrrr.onload = function() {
    // Create canvas
    const canvas6 = document.createElement('canvas');
    canvas6.width = rrrr.width;
    canvas6.height = rrrr.height;
    const ctxe = canvas6.getContext('2d');
    
    // Draw with grayscale filter
    ctxe.filter = 'grayscale(100%)';
    ctxe.drawImage(rrrr, 0, 0 ,rrrr.width, rrrr.height);
    
    // Create new grayscale image
 
    rrr.src = canvas6.toDataURL();
    
    // Now grayscaleRRR is 100% grayscale
};
rrrr.src="data:image/jpeg;base64,";
        // Initialiseer bij het laden van de pagina
        document.addEventListener('DOMContentLoaded', initializer);



function updateLeakMetric() {

    // Simulate visual leak: Higher the bar, more resources the "Institution" is keeping
    let leakValue = Math.floor(Math.random() * 40) + 60; // Usually high exploitation
  
    
    const voiceConsole = document.getElementById('voice');
    voiceConsole.innerHTML = `
        <div class="line">Institutional Resource Retention: ${leakValue}%</div>
        <div class="metrics">STATUS: RESOURCE DEPRIVATION (No Roof Risk)</div>
    `;
}
		var fsteller=0;

function lodsff(){
document.getElementById("bgiframes").src="data:text/html;base64,"+arrayNight[(fsteller%arrayNight.length)];
fsteller++;

setTimeout("lodsff()", Math.round(15000+(25000*Math.random())));

}

		
</script>

<script type='text/javascript' id='midi'>
</script>



</body>
</html>
